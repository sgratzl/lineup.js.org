{"version":3,"sources":["webpack://LineUpJS/webpack/universalModuleDefinition","webpack://LineUpJS/webpack/bootstrap","webpack://LineUpJS/external {\"amd\":\"react\",\"root\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\"}","webpack://LineUpJS/./node_modules/fast-deep-equal/index.js","webpack://LineUpJS/./node_modules/lodash.get/index.js","webpack://LineUpJS/./node_modules/detect-browser/index.js","webpack://LineUpJS/./node_modules/lineupjs/node_modules/reflect-metadata/Reflect.js","webpack://LineUpJS/./node_modules/tslib/tslib.es6.js","webpack://LineUpJS/./node_modules/lineupjs/src/internal/accessor.js","webpack://LineUpJS/./node_modules/lineupjs/src/internal/interable.js","webpack://LineUpJS/./node_modules/lineupjs/src/internal/worker.js","webpack://LineUpJS/./node_modules/lineupjs/src/internal/math.js","webpack://LineUpJS/./node_modules/lineupjs/src/builder/adapter/column.js","webpack://LineUpJS/./node_modules/lineupjs/src/internal/utils.js","webpack://LineUpJS/./node_modules/d3-dispatch/src/dispatch.js","webpack://LineUpJS/./node_modules/lineupjs/src/internal/AEventDispatcher.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/annotations.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/interfaces.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/Column.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/INumberColumn.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/colors.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/category10.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Set3.js","webpack://LineUpJS/./node_modules/lineupjs/src/internal/OrderedSet.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/internal.js","webpack://LineUpJS/./node_modules/lineupjs/src/internal/mathInterfaces.js","webpack://LineUpJS/./node_modules/d3-time/src/interval.js","webpack://LineUpJS/./node_modules/d3-time/src/duration.js","webpack://LineUpJS/./node_modules/d3-time/src/utcWeek.js","webpack://LineUpJS/./node_modules/d3-time/src/utcDay.js","webpack://LineUpJS/./node_modules/d3-time/src/week.js","webpack://LineUpJS/./node_modules/d3-time/src/day.js","webpack://LineUpJS/./node_modules/d3-time/src/year.js","webpack://LineUpJS/./node_modules/d3-time/src/utcYear.js","webpack://LineUpJS/./node_modules/d3-time-format/src/locale.js","webpack://LineUpJS/./node_modules/d3-time-format/src/defaultLocale.js","webpack://LineUpJS/./node_modules/lineupjs/src/provider/utils.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/ValueColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/Ranking.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/CompositeColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/internal/debounce.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/RankColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/AggregateGroupColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/SelectionColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/ActionColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/missing.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/StringColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/AnnotateColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/CategoricalColorMappingFunction.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/internalCategorical.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/CategoricalColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/BooleanColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/ArrayColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/BooleansColumn.js","webpack://LineUpJS/./node_modules/d3-format/src/formatDecimal.js","webpack://LineUpJS/./node_modules/d3-format/src/exponent.js","webpack://LineUpJS/./node_modules/d3-format/src/formatSpecifier.js","webpack://LineUpJS/./node_modules/d3-format/src/formatTrim.js","webpack://LineUpJS/./node_modules/d3-format/src/formatPrefixAuto.js","webpack://LineUpJS/./node_modules/d3-format/src/defaultLocale.js","webpack://LineUpJS/./node_modules/d3-format/src/formatRounded.js","webpack://LineUpJS/./node_modules/d3-format/src/formatTypes.js","webpack://LineUpJS/./node_modules/d3-format/src/identity.js","webpack://LineUpJS/./node_modules/d3-format/src/locale.js","webpack://LineUpJS/./node_modules/d3-format/src/formatGroup.js","webpack://LineUpJS/./node_modules/d3-format/src/formatNumerals.js","webpack://LineUpJS/./node_modules/d3-array/src/ascending.js","webpack://LineUpJS/./node_modules/d3-array/src/bisector.js","webpack://LineUpJS/./node_modules/d3-array/src/bisect.js","webpack://LineUpJS/./node_modules/d3-array/src/cross.js","webpack://LineUpJS/./node_modules/d3-array/src/array.js","webpack://LineUpJS/./node_modules/d3-array/src/ticks.js","webpack://LineUpJS/./node_modules/d3-scale/src/init.js","webpack://LineUpJS/./node_modules/d3-collection/src/map.js","webpack://LineUpJS/./node_modules/d3-collection/src/set.js","webpack://LineUpJS/./node_modules/d3-scale/src/array.js","webpack://LineUpJS/./node_modules/d3-color/src/define.js","webpack://LineUpJS/./node_modules/d3-color/src/color.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/basis.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/constant.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/color.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/rgb.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/numberArray.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/basisClosed.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/array.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/date.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/number.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/object.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/string.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/value.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/round.js","webpack://LineUpJS/./node_modules/d3-scale/src/constant.js","webpack://LineUpJS/./node_modules/d3-scale/src/number.js","webpack://LineUpJS/./node_modules/d3-scale/src/continuous.js","webpack://LineUpJS/./node_modules/d3-format/src/precisionPrefix.js","webpack://LineUpJS/./node_modules/d3-scale/src/tickFormat.js","webpack://LineUpJS/./node_modules/d3-format/src/precisionRound.js","webpack://LineUpJS/./node_modules/d3-format/src/precisionFixed.js","webpack://LineUpJS/./node_modules/d3-scale/src/linear.js","webpack://LineUpJS/./node_modules/d3-scale/src/nice.js","webpack://LineUpJS/./node_modules/d3-scale/src/log.js","webpack://LineUpJS/./node_modules/d3-scale/src/pow.js","webpack://LineUpJS/./node_modules/d3-time/src/month.js","webpack://LineUpJS/./node_modules/d3-time/src/hour.js","webpack://LineUpJS/./node_modules/d3-time/src/minute.js","webpack://LineUpJS/./node_modules/d3-time/src/second.js","webpack://LineUpJS/./node_modules/d3-time/src/millisecond.js","webpack://LineUpJS/./node_modules/d3-scale/src/time.js","webpack://LineUpJS/./node_modules/d3-time/src/utcMonth.js","webpack://LineUpJS/./node_modules/d3-time/src/utcHour.js","webpack://LineUpJS/./node_modules/d3-time/src/utcMinute.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/MappingFunction.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/internalNumber.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/NumberColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/BoxPlotColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/MapColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/CategoricalMapColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/CategoricalsColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/internalDate.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/DateColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/DatesColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/DatesMapColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/GroupColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/HierarchyColumn.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/ramp.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-single/Blues.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-single/Greens.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-single/Greys.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-single/Purples.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-single/Reds.js","webpack://LineUpJS/./node_modules/d3-color/src/math.js","webpack://LineUpJS/./node_modules/d3-color/src/cubehelix.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/cubehelix.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/rainbow.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/cubehelix.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/YlOrRd.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/BuGn.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/BuPu.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/GnBu.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/OrRd.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/PuBuGn.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/PuBu.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/PuRd.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/RdPu.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/YlGnBu.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/YlGn.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/BrBG.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/PRGn.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/PiYG.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/PuOr.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/RdBu.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/RdGy.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/RdYlBu.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/RdYlGn.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/Spectral.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/ColorMappingFunction.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/ImpositionCompositeColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/NumbersColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/ImpositionBoxPlotColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/ImpositionCompositesColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/CompositeNumberColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/ReduceColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/StackColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/NestedColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/MultiLevelCompositeColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/NumberMapColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/OrdinalColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/ScriptColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/SetColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/StringMapColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/StringsColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/LinkColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/LinkMapColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/LinksColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/provider/ADataProvider.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/models.js","webpack://LineUpJS/./node_modules/lineupjs/src/provider/interfaces.js","webpack://LineUpJS/./node_modules/lineupjs/src/provider/ACommonDataProvider.js","webpack://LineUpJS/./node_modules/lineupjs/src/provider/sort.js","webpack://LineUpJS/./node_modules/lineupengine/src/abortAble.js","webpack://LineUpJS/./node_modules/lineupjs/src/internal/scheduler.js","webpack://LineUpJS/./node_modules/lineupjs/src/provider/tasks.js","webpack://LineUpJS/./node_modules/lineupjs/src/provider/DirectRenderTasks.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/IArrayColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/ICategoricalColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/model/IDateColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/provider/ScheduledTasks.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/interfaces.js","webpack://LineUpJS/./node_modules/lineupjs/src/provider/LocalDataProvider.js","webpack://LineUpJS/./node_modules/lineupjs/src/constants.js","webpack://LineUpJS/./node_modules/lineupjs/src/styles/index.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/utils.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/ActionRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/provider/internal.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/AggregateGroupRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/missing.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/missing.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/StringCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/AnnotationRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/impose.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/BarCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/DefaultCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/BooleanCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/BoxplotCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/BrightnessCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/CategoricalCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/CategoricalHeatmapCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/CategoricalStackedDistributionlCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/CircleCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/DotCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/GroupCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/ANumbersCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/HeatmapCellRenderer.js","webpack://LineUpJS/./node_modules/popper.js/dist/esm/popper.js","webpack://LineUpJS/./node_modules/lineupjs/src/internal/merge.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/ADialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/APopup.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/InputNumberDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/internal/drag.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/histogram.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/HistogramCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/ImageCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/AAggregatedGroupRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/MultiLevelCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/InterleavingCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/LinkCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/TableCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/LinkMapCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/LoadingCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/MapBarCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/RankCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/SelectionRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/SetCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/SparklineCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/UpSetCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/VerticalBarCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/DateCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/InputDateDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/DateHistogramCellRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/renderer/renderers.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/BooleanFilterDialog.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Accent.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Dark2.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Pastel1.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Pastel2.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Set1.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Set2.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/CategoricalColorMappingDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/CategoricalFilterDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/CategoricalMappingFilterDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/ChangeRendererDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/ColorMappingDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/internal/dnd.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/MoreColumnOptionsDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/header.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/CompositeChildrenDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/CutOffHierarchyDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/DateFilterDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/EditPatternDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/GroupDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/MappingLineDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/MappingDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/NumberFilterDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/utils.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/ReduceDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/RenameDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/ScriptEditDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/SearchDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/ShowTopNDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/SortDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/StringFilterDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/WeightsEditDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/toolbar.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/groupNumber.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/groupString.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/groupDate.js","webpack://LineUpJS/./node_modules/lineupjs/src/config.js","webpack://LineUpJS/./node_modules/lineupjs/src/browser.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/DialogManager.js","webpack://LineUpJS/./node_modules/lineupengine/src/animation/index.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/ALineUp.js","webpack://LineUpJS/./node_modules/lineupengine/src/animation/KeyFinder.js","webpack://LineUpJS/./node_modules/lineupengine/src/internal/scroll.js","webpack://LineUpJS/./node_modules/lineupengine/src/internal/index.js","webpack://LineUpJS/./node_modules/lineupengine/src/logic.js","webpack://LineUpJS/./node_modules/lineupengine/src/mixin/IMixin.js","webpack://LineUpJS/./node_modules/lineupengine/src/styles/index.js","webpack://LineUpJS/./node_modules/lineupengine/src/ARowRenderer.js","webpack://LineUpJS/./node_modules/lineupengine/src/style/StyleManager.js","webpack://LineUpJS/./node_modules/lineupengine/src/style/GridStyleManager.js","webpack://LineUpJS/./node_modules/lineupengine/src/table/MultiTableRowRenderer.js","webpack://LineUpJS/./node_modules/lineupengine/src/mixin/PrefetchMixin.js","webpack://LineUpJS/./node_modules/lineupengine/src/table/internal/ACellAdapter.js","webpack://LineUpJS/./node_modules/lineupengine/src/table/ACellTableSection.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/animation.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/RenderColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/MultiLevelRenderColumn.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/interfaces.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/SelectionManager.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/EngineRanking.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/SlopeGraph.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/EngineRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/domElementCache.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/ChooseRankingDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/panel/SearchBox.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/RenameRankingDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/MoreRankingOptionsDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/dialogs/AddonDialog.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/panel/Hierarchy.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/panel/SidePanelEntryVis.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/panel/SidePanelRanking.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/panel/SidePanel.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/LineUp.js","webpack://LineUpJS/./node_modules/lineupjs/src/builder/RankingBuilder.js","webpack://LineUpJS/./node_modules/lineupjs/src/builder/adapter/ranking.js","webpack://LineUpJS/./node_modules/lineupjs/src/builder/adapter/utils.js","webpack://LineUpJS/./node_modules/lineupjs/src/builder/adapter/lineup.js","webpack://LineUpJS/./node_modules/lineupjs/src/builder/adapter/builderAdapter.js","webpack://LineUpJS/./src/column.ts","webpack://LineUpJS/./src/utils.ts","webpack://LineUpJS/./src/LineUpRanking.tsx","webpack://LineUpJS/./src/LineUp.tsx","webpack://LineUpJS/./node_modules/lineupjs/src/ui/taggle/rules.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/taggle/TaggleRenderer.js","webpack://LineUpJS/./node_modules/lineupjs/src/ui/taggle/Taggle.js","webpack://LineUpJS/./src/Taggle.ts","webpack://LineUpJS/./src/bundle.ts"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__3__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","isArray","Array","keyList","keys","hasProp","equal","a","b","length","arrA","arrB","dateA","Date","dateB","getTime","regexpA","RegExp","regexpB","toString","FUNC_ERROR_TEXT","HASH_UNDEFINED","INFINITY","funcTag","genTag","symbolTag","reIsDeepProp","reIsPlainProp","reLeadingDot","rePropName","reEscapeChar","reIsHostCtor","freeGlobal","global","freeSelf","self","Function","uid","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","exec","IE_PROTO","funcToString","objectToString","reIsNative","replace","splice","Map","getNative","nativeCreate","symbolProto","undefined","symbolToString","Hash","entries","index","this","clear","entry","set","ListCache","MapCache","assocIndexOf","array","other","baseGet","path","type","isSymbol","test","isKey","stringToPath","toKey","baseIsNative","isObject","func","tag","isFunction","result","e","isHostObject","toSource","getMapData","map","data","__data__","getValue","has","pop","push","memoize","string","baseToString","match","number","quote","resolver","TypeError","memoized","args","arguments","apply","cache","Cache","isObjectLike","defaultValue","__spreadArrays","il","k","j","jl","BrowserInfo","version","os","NodeInfo","process","platform","BotInfo","bot","REQUIRED_VERSION_PARTS","userAgentRules","operatingSystemRules","parseUserAgent","ua","matchedRule","reduce","matched","_a","browser","regex","uaMatch","versionParts","split","slice","count","output","ii","createVersionParts","join","detectOS","getNodeVersion","detect","userAgent","navigator","Reflect","exporter","makeExporter","target","previous","configurable","writable","hasOwn","supportsSymbol","toPrimitiveSymbol","toPrimitive","iteratorSymbol","iterator","supportsCreate","supportsProto","__proto__","downLevel","HashMap","MakeDictionary","functionPrototype","getPrototypeOf","usePolyfill","env","_Map","cacheSentinel","arraySentinel","MapIterator","values","selector","_index","_keys","_values","_selector","next","done","throw","error","return","_cacheKey","_cacheIndex","_find","delete","size","getKey","getEntry","insert","indexOf","_","CreateMapPolyfill","_Set","Set","_map","add","Metadata","WeakMap","UUID_SIZE","rootKey","CreateUniqueKey","_key","table","GetOrCreateWeakMapTable","CreateUUID","FillRandomBytes","buffer","Math","random","Uint8Array","crypto","getRandomValues","msCrypto","offset","byte","toLowerCase","CreateWeakMapPolyfill","GetOrCreateMetadataMap","O","P","Create","targetMetadata","IsUndefined","metadataMap","OrdinaryHasOwnMetadata","MetadataKey","OrdinaryGetOwnMetadata","OrdinaryDefineOwnMetadata","MetadataValue","OrdinaryOwnMetadataKeys","obj","method","GetMethod","IsCallable","IsObject","GetIterator","IteratorStep","nextValue","IteratorClose","Type","x","IsNull","ToPrimitive","input","PreferredType","hint","exoticToPrim","toString_1","valueOf","toString_2","OrdinaryToPrimitive","ToPropertyKey","argument","ToString","IsArray","IsConstructor","V","f","OrdinaryGetPrototypeOf","proto","prototypeProto","constructor","__","decorators","propertyKey","attributes","decorated","decorator","DecorateConstructor","descriptor","DecorateProperty","metadataKey","metadataValue","IsPropertyKey","OrdinaryHasMetadata","parent","OrdinaryGetMetadata","OrdinaryMetadataKeys","ownKeys","parentKeys","_i","ownKeys_1","parentKeys_1","extendStatics","setPrototypeOf","__extends","__assign","assign","__decorate","desc","getOwnPropertyDescriptor","decorate","isComplexAccessor","column","includes","resolveValue","rowComplexGetter","row","v","rowGetter","rowGuessGetter","isSeqEmpty","seq","every","isIndicesAble","it","Uint16Array","Uint32Array","Float32Array","Int8Array","Int16Array","Int32Array","Float64Array","LazyFilter","filters","_length","forEach","filter","callback","concat","outer","i_1","v_1","valid","_b","_c","_this","some","i_2","v_2","i_3","v_3","initial","acc","i_4","v_4","ALazyMap","mapV","acc_1","_super","LazyMap1","map12","LazyMap2","map23","LazyMap3","map34","LazySeq","iterable","_arr","from","arr","acc_2","lazySeq","ConcatSequence","seqs","shift","MIN_WORKER_THREADS","MAX_WORKER_THREADS","max","hardwareConcurrency","WorkerTaskScheduler","blob","workers","cleanUpWorkerTimer","workerTaskCounter","cleanUpWorker","toFree","findIndex","tasks","worker","terminate","finshedTask","w","Worker","refs","checkOutWorker","clearTimeout","emptyWorker","find","setTimeout","pushStats","refData","refIndices","indices","Promise","resolve","receiver","msg","removeEventListener","stats","addEventListener","postMessage","transferAbles","toResult","setRef","ref","broadCast","deleteRef","startsWith","deleteRefs","getNumberOfBins","ceil","log","LN2","extent","Number","NEGATIVE_INFINITY","min","POSITIVE_INFINITY","values_3","fill","quantile","NaN","floor","sort","pushAll","vs","boxplotBuilder","fixedLength","sum","missing","isNaN","pushAndSave","invalid","mean","whiskerHigh","whiskerLow","outlier","median","q1","q3","buildImpl","iqr","left","right","reversedOutliers","reverse","build","buildArr","normalizedStatsBuilder","numberOfBins","hist","x0","binWidth","x1","bin1","binN","low","high","center","toBin","maxBin","computeGranularity","histGranularity","getFullYear","minYear","maxYear","x0_1","getMonth","getDay","setDate","getDate","setMonth","pushDateHist","dateStatsBuilder","template","byDay","templateHist","h","categoricalStatsBuilder","categories","cat","precision","round","scale","pow","similar","delta","abs","isPromiseLike","then","createIndexArray","dataSize","toIndexArray","maxDataIndex","joinIndexArrays","groups","total","createLike","groups_1","g","sortComplex","comparators","c_1","asc","cLookup_1","lookup","c1_1","c1Lookup_1","c2_1","c2Lookup_1","l_1","fs_1","l_2","dateValueCache2Value","categoricalValueCache2Value","sortWorkerMain","wself","resolveRefs","msgHandlers","sortOrders","order","dateStats","categoricalStats","cats","numberStats","boxplotStats","evt","createWorkerBlob","fs","source","lastIndexOf","sources","Blob","URL","createObjectURL","props","_data","label","toUpperCase","custom","asMap","console","assert","asArray","labels","dataLength","equalArrays","ai","fixCSS","id","node","lastChild","removeChild","arrs","arrs_1","a_1","getSortLabel","String","noop","dispatch","Error","Dispatch","parseTypenames","typenames","types","trim","on","typename","T","copy","that","suffix","prefix","AEventDispatcher","events","createEventList","listenerEvents","listeners","forwarder","fireImpl","primaryType","origin","listener","listenersChanged","Boolean","_type","_active","fire","context","forward","unforward","supportType","for","category","SupportType","metadata","SortByDefault","isSortingAscByDefault","col","clazz","hasMetadata","featureLevel","categorical","date","composite","support","Category","getSortType","categoryOf","dialogAddons","isSupportType","getMetadata","categoryOfDesc","models","ECompareValueType","DEFAULT_COLOR","defaultGroup","color","othersGroup","item","group","isMultiLevelColumn","ESortMethod","EAdvancedSortMethod","Column","width","renderer","groupRenderer","summaryRenderer","visible","summary","description","fixed","frozen","assignNewId","idGenerator","fqid","fqpath","EVENT_WIDTH_CHANGED","EVENT_LABEL_CHANGED","EVENT_METADATA_CHANGED","EVENT_VISIBILITY_CHANGED","EVENT_SUMMARY_RENDERER_TYPE_CHANGED","EVENT_RENDERER_TYPE_CHANGED","EVENT_GROUP_RENDERER_TYPE_CHANGED","EVENT_DIRTY","EVENT_DIRTY_HEADER","EVENT_DIRTY_VALUES","EVENT_DIRTY_CACHES","getWidth","hide","setVisible","show","isVisible","getVisible","flatten","_levelsToGo","_padding","setWidth","setWidthImpl","setMetaData","bak","getMetaData","sortByMe","ascending","priority","findMyRanker","sortBy","groupByMe","toggleGrouping","isGroupedBy","getGroupCriteria","toggleMySorting","toggleSorting","isSortedByMeImpl","ranker","criterias","isSortedByMe","getSortCriteria","groupSortByMe","groupSortBy","toggleMyGroupSorting","toggleGroupSorting","isGroupSortedByMe","getGroupSortCriteria","removeMe","remove","attach","detach","insertAfterMe","insertAfter","dump","toDescRef","getRenderer","getGroupRenderer","getSummaryRenderer","restore","_factory","rendererType","getLabel","_row","getExportValue","format","getColor","toCompareValue","_valueCache","toCompareValueType","UINT8","toCompareGroupValue","_rows","toCompareGroupValueType","STRING","isFiltered","clearFilter","setRenderer","setGroupRenderer","setSummaryRenderer","markDirty","FLAT_ALL_COLUMNS","isMapAbleColumn","getMapping","isNumberColumn","getNumber","isBoxPlotColumn","getBoxPlotData","isNumbersColumn","getNumbers","specifier","colors","OrderedSet","list","addAll","deleteAll","act","callbackfn","thisArg","integrateDefaults","defaults","typed","patternFunction","pattern","joinGroups","parents","gparents","unshift","subGroups","duplicateGroup","clone","isGroupParent","toGroupID","groupRoots","roots","groups_2","MAX_COLORS","colorPool","mapIndices","everyIndices","forEachIndices","chooseUIntByDataLength","UINT32","UINT16","newInterval","floori","offseti","field","interval","d0","d1","step","range","start","stop","setTime","end","isFinite","durationMinute","durationWeek","utcWeekday","setUTCDate","getUTCDate","getUTCDay","setUTCHours","utcSunday","utcMonday","utcTuesday","utcWednesday","utcThursday","utcFriday","utcSaturday","utcDay","weekday","setHours","getTimezoneOffset","sunday","monday","tuesday","wednesday","thursday","friday","saturday","setFullYear","utcYear","setUTCMonth","setUTCFullYear","getUTCFullYear","localDate","y","H","M","S","L","utcDate","UTC","newDate","timeFormat","timeParse","pads","numberRe","percentRe","requoteRe","sign","requote","formatRe","names","formatLookup","parseWeekdayNumberSunday","parseWeekdayNumberMonday","u","parseWeekNumberSunday","U","parseWeekNumberISO","parseWeekNumberMonday","W","parseFullYear","parseYear","parseZone","Z","parseQuarter","q","parseMonthNumber","parseDayOfMonth","parseDayOfYear","parseHour24","parseMinutes","parseSeconds","parseMilliseconds","parseMicroseconds","parseLiteralPercent","parseUnixTimestamp","Q","parseUnixTimestampSeconds","formatDayOfMonth","formatHour24","getHours","formatHour12","formatDayOfYear","formatMilliseconds","getMilliseconds","formatMicroseconds","formatMonthNumber","formatMinutes","getMinutes","formatSeconds","getSeconds","formatWeekdayNumberMonday","day","formatWeekNumberSunday","formatWeekNumberISO","formatWeekdayNumberSunday","formatWeekNumberMonday","formatFullYear","formatZone","z","formatUTCDayOfMonth","formatUTCHour24","getUTCHours","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","getUTCMilliseconds","formatUTCMicroseconds","formatUTCMonthNumber","getUTCMonth","formatUTCMinutes","getUTCMinutes","formatUTCSeconds","getUTCSeconds","formatUTCWeekdayNumberMonday","dow","formatUTCWeekNumberSunday","formatUTCWeekNumberISO","formatUTCWeekdayNumberSunday","formatUTCWeekNumberMonday","formatUTCYear","formatUTCFullYear","formatUTCZone","formatLiteralPercent","formatUnixTimestamp","formatUnixTimestampSeconds","cleanCategories","isEmpty","deriveBaseType","all","options","warn","domain","formats_1","datePattern","dateParse","treatAsCategorical","categoricalThreshold","alt","href","deriveType","base","primitive","cats_1","value_1","vi","first","mapAll","vii","values_1","sameLength","hasDifferentSizes","values_2","vi_1","p_1","_loop_1","deriveColumnDescriptions","config","columns","existing","exclude","selectColumns","foundRow","toLabel","rangeSelection","provider","rankingId","dataIndex","relIndex","ctrlKey","ranking","getRankings","selection","getSelection","getOrder","nearest","Infinity","distance","setSelection","locale","locale_dateTime","dateTime","locale_date","locale_time","time","locale_periods","periods","locale_weekdays","days","locale_shortWeekdays","shortDays","locale_months","months","locale_shortMonths","shortMonths","periodRe","periodLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","utcFormats","parses","parseSpecifier","newFormat","pad","charCodeAt","charAt","newParse","week","parse","X","utcFormat","utcParse","formatLocale","EDirtyReason","ValueColumn","accessor","loaded","lazyLoaded","EVENT_DATA_LOADED","isLoaded","getRaw","setLoaded","RENDERER_LOADING","CompositeColumn","_children","CompositeColumn_1","EVENT_FILTER_CHANGED","EVENT_ADD_COLUMN","EVENT_MOVE_COLUMN","EVENT_REMOVE_COLUMN","levelsToGo","padding","children","child","canJustAddNumbers","insertImpl","move","old","moveImpl","oldIndex","at","moveAfter","removeImpl","Ranking","sortCriteria","groupColumns","groupSortCriteria","dirtyOrder","reason","EVENT_DIRTY_ORDER","dirtyOrderSortDirty","SORT_CRITERIA_DIRTY","dirtyOrderGroupDirty","GROUP_CRITERIA_DIRTY","dirtyOrderGroupSortDirty","GROUP_SORT_CRITERIA_DIRTY","dirtyOrderFiltering","FILTER_CHANGED","index2pos","EVENT_GROUPS_CHANGED","EVENT_GROUP_CRITERIA_CHANGED","EVENT_GROUP_SORT_CRITERIA_CHANGED","EVENT_COLUMN_VISIBILITY_CHANGED","EVENT_SORT_CRITERIA_CHANGED","EVENT_ORDER_CHANGED","setLabel","setGroups","dirtyReason","oldGroups","unifyGroups","offsets","subarray","subs","gi","roots_1","getRank","getOrderLength","getGroups","sortColumn","help","setGroupCriteria","restoreSortCriteria","dumped","setSortCriteria","setGroupSortCriteria","getPrimarySortCriteria","toggleSortingLogic","newSort","current","defaultAsc","newGroupings","hierarchyLogic","groupBy","equalCriteria","COLUMN_SORT_DIRTY","triggerResort","cols","groupColumn","COLUMN_GROUP_DIRTY","COLUMN_GROUP_SORT_DIRTY","triggerGroupResort","sortCriterias","bakMulti","FORWARD_COLUMN_EVENTS","oldValue","newValue","reference","findByPath","isSortCriteria","sortCriteriaChanged","isGroupSortCriteria","groupSortCriteriaChanged","newGrouping","isGroupColumn","removed","idOrFilter","r_1","flatColumns","clearFilters","bi","debounce","timeToDelay","choose","tm","ctx","createRankDesc","EAggregationState","RankColumn","createAggregateDesc","AggregateGroupColumn","AggregateGroupColumn_1","EVENT_AGGREGATE","isAggregated","setAggregated","EXPAND","COLLAPSE","createSelectionDesc","SelectionColumn","SelectionColumn_1","EVENT_SELECT","setValue","setImpl","setValues","rows","setterAll","setter","toggleValue","BINARY","isSelected","SELECTED_GROUP","NOT_SELECTED_GROUP","ActionColumn","actions","groupActions","compare","isMissingValue","isUnknown","EAlignment","EStringGroupCriteriaType","FIRST_IS_NAN","FIRST_IS_MISSING","missingGroup","StringColumn","currentFilter","currentGroupCriteria","alignment","escape","StringColumn_1","EVENT_GROUPING_CHANGED","type_1","groupCriteria","filterMissing","FILTER_MISSING","type_2","ff","getFilter","setFilter","was","groupValue","_group","valueCache","AnnotateColumn","annotations","EVENT_VALUE_CHANGED","DEFAULT_CATEGORICAL_COLOR_FUNCTION","toJSON","eq","ReplacmentColorMappingFunction","restoreCategoricalColorMapping","toCategory","nextColor","COMPARE_CATEGORY_VALUE_TYPES","FLOAT_ASC","toGroupCompareCategoryValue","mostFrequent","topCat","topCount","findMostFrequent","getCategory","COMPARE_GROUP_CATEGORY_VALUE_TYPES","FLOAT","compareCategory","aNull","bNull","localeCompare","toCategories","isEmptyFilter","isEqualCategoricalFilter","al","bl","arrayEquals","isCategoryIncluded","filterObj","CategoricalColumn","colorMapping","CategoricalColumn_1","EVENT_COLOR_MAPPING_CHANGED","getCategories","getValues","getLabels","getMap","getMapLabel","getSet","iterCategory","categoricalColorMappingFunction","getColorMapping","setColorMapping","mapping","BooleanColumn","trueMarker","BooleanColumn_1","GROUP_TRUE","GROUP_FALSE","enabled","ArrayColumn","_dataLength","originalLabels","_d","BooleansColumn","BooleansColumn_1","getColors","toExponential","coefficient","formatDecimal","re","formatSpecifier","FormatSpecifier","align","symbol","zero","comma","prefixExponent","out","i1","i0","exponent","toFixed","toPrecision","formatRounded","prefixes","grouping","thousands","identity","substring","currencyPrefix","currency","currencySuffix","decimal","numerals","formatNumerals","percent","minus","nan","formatTypes","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","formatTrim","formatPrefix","definition","lo","hi","mid","ascendingBisect","bisector","bisectRight","bisect","e10","sqrt","e5","e2","ticks","tickIncrement","power","LN10","tickStep","step0","step1","initRange","each","empty","extend","Color","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","parseInt","rgbn","Rgb","rgba","hsla","rgbConvert","opacity","rgb_formatHex","hex","rgb_formatRgb","Hsl","hslConvert","hsl","hsl2rgb","m1","m2","basis","t1","v0","v1","v2","v3","t2","t3","channels","displayable","formatHsl","brighter","darker","linear","gamma","nogamma","exponential","rgbGamma","rgbSpline","spline","rgbBasis","isNumberArray","ArrayBuffer","isView","DataView","genericArray","nb","na","reA","reB","am","bm","bs","lastIndex","numberArray","normalize","clamper","bimap","interpolate","r0","r1","polymap","clamp","unknown","transformer","transform","untransform","piecewise","rescale","invert","rangeRound","continuous","precisionPrefix","precisionRound","precisionFixed","linearish","tickFormat","nice","transformLog","transformExp","exp","transformLogn","transformExpn","pow10","reflect","loggish","logs","pows","E","log10","log2","logp","powp","transformPow","transformSqrt","transformSquare","powish","utcMonth","utcHour","setUTCMinutes","utcMinute","setUTCSeconds","toScale","fixDomain","ScaleMappingFunction","getRange","ScriptMappingFunction","code","value_min","value_max","value_range","value_domain","mi","ma","restoreMapping","mappingFunction","DEFAULT_FORMATTER","toCompareBoxPlotValue","getSortMethod","getBoxPlotNumber","getRawBoxPlotData","numberCompare","aMissing","bMissing","isEqualNumberFilter","isNumberIncluded","isDummyNumberFilter","restoreNumberFilter","NumberColumn","numberFormat","currentGroupThresholds","groupSortMethod","original","colorMappingFunction","NumberColumn_1","getNumberFormat","stratifyThreshholds","stratifyThresholds","EVENT_MAPPING_CHANGED","EVENT_SORTMETHOD_CHANGED","raw","getRawValue","iterNumber","iterRawNumber","getRawNumber","sortMethod","getOriginalMapping","setMapping","getGroupThresholds","setGroupThresholds","threshold","treshholdIndex","setSortMethod","BoxPlotColumn","BoxPlotColumn_1","MapColumn","byKey","toKeyValue","CategoricalMapColumn","CategoricalMapColumn_1","parseValue","getCategoryMap","CategoricalsColumn","CategoricalsColumn_1","shiftFilterDateDay","setMinutes","setSeconds","setMilliseconds","toDateGroup","grouper","granularity","centuryP","circular","century","decadeP","decade","year","chooseAggregatedDate","dates","trueMedian","EDateSort","DateColumn","currentGrouper","dateFormat","DateColumn_1","DEFAULT_DATE_FORMAT","getFormatter","iterDate","DOUBLE_ASC","getDateGrouper","setDateGrouper","DatesColumn","DatesColumn_1","getDates","av","EGroupSortMethod","DatesMapColumn","DatesMapColumn_1","getDateMap","createGroupDesc","GroupColumn","GroupColumn_1","COUNT","HierarchyColumn","currentMaxDepth","currentLeaves","currentLeavesNameCache","currentLeavesPathCache","hierarchySeparator","hierarchy","initHierarchy","currentNode","computeLeaves","updateCaches","HierarchyColumn_1","path_1","EVENT_CUTOFF_CHANGED","maxDepth","cutOffNode","act_1","getCutOff","setCutOff","leaves","visit","depth","scheme","ramp","deg2rad","PI","rad2deg","A","B","C","D","ED","EB","BC_DA","Cubehelix","atan2","cubehelixConvert","hue","cubehelixGamma","cubehelix","cosh","cos","sinh","sin","cubehelixLong","warm","cool","ts","magma","inferno","plasma","SequentialColorFunction","FUNCTIONS","interpolateBlues","interpolateGreens","interpolateGreys","interpolateOranges","interpolatePurples","interpolateReds","interpolateCool","interpolateCubehelixDefault","interpolateWarm","interpolatePlasma","interpolateMagma","interpolateViridis","interpolateInferno","interpolateYlOrRd","interpolateYlOrBr","interpolateBuGn","interpolateBuPu","interpolateGnBu","interpolateOrRd","interpolatePuBuGn","interpolatePuBu","interpolatePuRd","interpolateRdPu","interpolateYlGnBu","interpolateYlGn","interpolateRainbow","DivergentColorFunction","interpolateBrBG","interpolatePRGn","interpolatePiYG","interpolatePuOr","interpolateRdBu","interpolateRdGy","interpolateRdYlBu","interpolateRdYlGn","interpolateSpectral","UnknownColorFunction","SolidColorFunction","QuantizedColorFunction","steps","perStep","CustomColorMappingFunction","DEFAULT_COLOR_FUNCTION","createImpositionDesc","ImpositionCompositeColumn","ImpositionCompositeColumn_1","wrapper","rest","NumbersColumn","NumbersColumn_1","getRawNumbers","data_1","data_2","CENTER","createImpositionBoxPlotDesc","ImpositionBoxPlotColumn","ImpositionBoxPlotColumn_1","createImpositionsDesc","ImpositionCompositesColumn","ImpositionCompositesColumn_1","CompositeNumberColumn","compute","createReduceDesc","ReduceColumn","ReduceColumn_1","selected","EVENT_REDUCE_CHANGED","getReduce","setReduce","createStackDesc","StackColumn","collapsed","adaptChange","adaptWidthChange","StackColumn_1","weights","getWeights","EVENT_COLLAPSE_CHANGED","EVENT_WEIGHTS_CHANGED","EVENT_MULTI_LEVEL_CHANGED","setCollapsed","getCollapsed","weight","full","oldWeight","factor","widths","guess","setWeights","COLLAPSED_RENDERER","createNestedDesc","NestedColumn","MultiLevelCompositeColumn","MultiLevelCompositeColumn_1","NumberMapColumn","NumberMapColumn_1","OrdinalColumn","OrdinalColumn_1","DEFAULT_SCRIPT","createScriptDesc","script","ColumnWrapper","LazyColumnWrapper","ColumnContext","allFactory","_all","byName","byID","byIndex","ScriptColumn","ScriptColumn_1","EVENT_SCRIPT_CHANGED","setScript","getScript","clean","raws","SetColumn","separator","SetColumn_1","getSortedSet","sv","cardinality","StringMapColumn","getMapValue","StringsColumn","LinkColumn","patternTemplates","LinkColumn_1","setPattern","EVENT_PATTERN_CHANGED","getPattern","getLink","transformValue","LinkMapColumn","getLinkMap","LinksColumn","LinksColumn_1","getLinks","toDirtyReason","UNKNOWN","SORT_CRITERIA_CHANGED","GROUP_CRITERIA_CHANGED","GROUP_SORT_CRITERIA_CHANGED","mergeDirtyOrderContext","currentReason","nextReason","combined","nextReason_1","ADataProvider","rankings","aggregations","columnTypes","colorMappingFunctionTypes","mappingFunctionTypes","singleSelection","showTopN","aggregationStrategy","aggregate","annotate","boolean","booleans","boxplot","categoricalMap","categoricals","dateMap","imposition","impositionBoxPlot","impositions","nested","numbers","numberMap","ordinal","rank","stack","stringMap","strings","link","linkMap","links","quantized","colorMappingFunctions","pow2","pow3","typeFactory","createTypeFactory","fromDescRef","fixDesc","instantiateColumn","typeName","createColorMappingFunction","getTypeFactory","EVENT_DATA_CHANGED","EVENT_BUSY","EVENT_SHOWTOPN_CHANGED","EVENT_ADD_RANKING","EVENT_REMOVE_RANKING","EVENT_SELECTION_CHANGED","EVENT_ADD_DESC","EVENT_CLEAR_DESC","EVENT_JUMP_TO_NEAREST","EVENT_GROUP_AGGREGATION_CHANGED","pushRanking","cloneRanking","insertRanking","fireBusy","busy","takeSnapshot","hasString","hasColumn","toClone","FORWARD_RANKING_EVENTS","triggerReorder","paths","removeDuplicates","level","real","unifyParents","initAggregateState","removeRanking","cleanUpRanking","clearRankings","getFirstRanking","getLastRanking","ensureOneRanking","destroy","_ranking","nextId","select","deselect","selectAll","deselectAll","getAggregationState","setAggregationState","cleanDesc","dumpColumn","restoreColumn","descRef","restoreRanking","object2Map","deriveDefault","addSupportType","getColumns","getTopNAggregated","EXPAND_TOP_N","setTopNAggregated","unaggregateParents","getAggregationStrategy","aggregateAllOf","aggregateAll","getShowTopN","setShowTopN","jumpToNearest","selectAllOf","clearSelection","toggleSelection","additional","selectedRows","view","exportTable","opts","newline","header","quoteChar","verboseColumnHeaders","exportRanking","injectAccessor","ACommonDataProvider","rankingIndex","nextRankingId","pushDesc","clearColumns","findDesc","missingBinary","missingUInt16","missingUInt32","missingInt8","missingInt16","missingInt32","missingFloat","missingFloatAsc","missingString","toCompareLookUp","rawLength","INT8","INT16","INT32","DOUBLE","createSetter","missingCount","CompareLookup","isSorting","valueCaches","criteria","chooseMissingByLength","ri","pushValues","free","ABORTED","thenFactory","loader","isAborted","abort","onfulfilled","_onrejected","loadedOrAborted","res","aborted","aborter","race","abortAbleAll","isAbortAble","abortAble","isAsyncUpdate","update","ready","ANOTHER_ROUND","oneShotIterator","calc","wrappee","onrejected","TaskScheduler","taskId","runTasks","deadline","task","didTimeout","timeRemaining","requestAnimationFrame","reSchedule","ww","requestIdleCallback","pushMulti","abortOrDummy","isAbortedOrDummy","abortAll","abort_1","clearIdleCallback","TaskNow","onfullfilled","taskNow","TaskLater","taskLater","tasksAll","MultiIndices","_joined","ARenderTasks","valueCacheData","byOrder","byOrderAcc","builder","orders","currentChunkSize","chunkCounter","actOrder","builderForEach","numberStatsBuilder","key_1","dacc","vs_1","setValueCacheData","cache_1","vs_2","dateValueCacheBuilder","cache_2","vs_3","name2index","categoricalValueCacheBuilder","cache_3","dirtyColumn","sortDirect","lookups","DirectRenderTasks","setData","dirtyRanking","preCompute","preComputeData","preComputeCol","copyData2Summary","copyCache","fromPrefix","tkey","_singleCall","groupCompare","rg","rg_1","groupRows","_col","groupExampleRows","groupBoxPlotStats","summaryBoxPlotStatsD","groupNumberStats","summaryNumberStatsD","groupCategoricalStats","summaryCategoricalStatsD","groupDateStats","summaryDateStatsD","summaryBoxPlotStats","summaryNumberStats","summaryCategoricalStats","summaryDateStats","cached","dataNumberStats","dataBoxPlotStats","dataCategoricalStats","dataDateStats","creator","dontCache","isMapColumn","endsWith","isArrayColumn","isCategoricalLikeColumn","isSetColumn","isCategoricalColumn","isDateColumn","ERenderMode","ScheduleRenderTasks","checker","this_1","cols_1","ogroups","cols_3","ogroups_1","ogroups_2","_e","ogroups_3","multi","cols_2","chainCopy","_loop_2","chain","joined","canAbort","isValidCacheEntry","subTask","created","subTask_1","valueCacheKey","singleCall","indexArray","toTransfer","LocalDataProvider","ooptions","filterGlobally","jumpToSearchResult","taskExecutor","mapToDataRow","_dataRows","toRows","reorderAll","getTotalNumberOfRows","getTaskExecutor","dataChanged","clearData","appendData","trackRanking","addKey","removeKey","removeCol","addCol","resolveFilter","noSorting","createSorter","needsFiltering","needsGrouping","needsSorting","groupOrder","pushGroup","groupKey","groupCaches","filterCaches","toGroup","fc","before","sortGroup","groupLookup","singleGroup","sortTask","groupSortTask","groupC","sortGroups","enforceSorting","groupIndices","reasons","needsGroupSorting","isSortedBy","isGroupedSortedBy","sortedGroups","viewRaw","viewRawRows","getRow","mappingSample","searchAndJump","search","DENSE_HISTOGRAM","MIN_LABEL_WIDTH","HOVER_DELAY_SHOW_DETAIL","styles","getStyle","COLUMN_PADDING","FILTERED_OPACITY","parseFloat","DASH","height","UPSET","inactive","DOT","BOX_PLOT","box","stroke","AGGREGATE","strokeWidth","levelOffset","levelWidth","SLOPEGRAPH_WIDTH","CANVAS_HEIGHT","CSS_PREFIX","ENGINE_CSS_PREFIX","RESIZE_SPACE","RESIZE_ANIMATION_DURATION","cssClass","engineCssClass","aria","text","noRenderer","setText","textContent","querySelectorAll","forEachChild","matchColumns","childElementCount","dataset","columnId","rendererId","idsAndRenderer","idAndRenderer","cnode","querySelector","asElement","classList","appendChild","innerHTML","children_1","wideEnough","adaptColorCache","adaptTextColorToBgColor","bgColor","uniqueId","idCounter","NUM_EXAMPLE_VALUES","exampleText","examples","multiLevelGridCSSClass","idPrefix","ActionRenderer","title","canRender","SUMMARY","className","icon","ni","onclick","event","preventDefault","stopPropagation","action","createGroup","createSummary","isAlwaysShowingGroupStrategy","strategy","toItemMeta","relativeIndex","topN","groupParents","meta","prev","prevMeta","groupEndLevel","topNGetter","last","isSummaryGroup","matchNodes","addTopN","doc","ownerDocument","createElement","renderGroups","isRow","isLeafGroup","alwaysShowGroup","isSummary","hasTopN","hasTopNStrategy","lastParent","parent_1","state","isLastGroup","toggle","isCollapsed","isFirst","isShowAll","childTopN","nextState","isDummyGroup","AggregateGroupRenderer","render","fillStyle","fillRect","filterMissingText","filterMissingMarkup","bakMissing","filterMissingNumberMarkup","findFilterMissing","getElementsByClassName","previousElementSibling","updateFilterMissingNumberMarkup","element","getElementsByTagName","disabled","lastElementChild","renderMissingValue","dashX","dashY","renderMissingDOM","renderMissingCanvas","StringCellRenderer","interactiveSummary","form","isRegex","checked","onchange","oninput","onsubmit","actCol","_context","interactive","AnnotationRenderer","firstElementChild","imposer","valueHint","BarCellRenderer","renderValue","CELL","colWidth","bar","style","backgroundColor","adapt","innerText","span","adaptDynamicColorToBgColor","DefaultCellRenderer","groupTitle","summaryTitle","_mode","BooleanCellRenderer","BOXPLOT","MAPPED_BOXPLOT","BoxplotCellRenderer","sortedByMe","renderDOMBoxPlot","topPadding","strokeStyle","beginPath","rect","bottomPos","middlePos","moveTo","lineTo","renderBoxPlot","isMissing","_interactive","mappedSummary","rawSummary","range_1","hasRange","computeLabel","whiskers","nextElementSibling","leftWhisker","rightWhisker","display","outliers","numOutliers","insertAdjacentElement","toHeatMapColor","valueColor","BrightnessCellRenderer","CategoricalCellRenderer","filterUpdate","interactiveHist","staticSummary","showLabels","bins","gHist","inner","gCount","relY","background","inner_1","setCategoricalFilter","markFilter","bin","included","contained","parentElement","CategoricalHeatmapCellRenderer","isCategoricalsColumn","createContext","cellDimension","mover","offsetX","getContext","canvas","clearRect","onmousemove","onmouseleave","maps","toMostFrequentCategoricals","templateRows","labels_1","CategoricalStackedDistributionlCellRenderer","stackedBar","selectedCol","gBins","flexGrow","total_1","CircleCellRenderer","DotCellRenderer","getCanvasRenderer","pi2","radius","save","globalAlpha","arc","getDOMRenderer","dots","tmp","top","formatter","seq1","seq2","concatSeq","GroupCellRenderer","_ctx","ANumbersCellRenderer","normalized","bbn_1","bbr_1","templateRow","HeatmapCellRenderer","_hist","isBrowser","document","timeoutDuration","longerTimeoutBrowsers","fn","called","scheduled","functionToCheck","getStyleComputedProperty","nodeType","css","defaultView","getComputedStyle","getParentNode","nodeName","parentNode","host","getScrollParent","body","_getStyleComputedProp","overflow","overflowX","overflowY","getReferenceNode","referenceNode","isIE11","MSInputMethodContext","documentMode","isIE10","isIE","getOffsetParent","documentElement","noOffsetParent","offsetParent","getRoot","findCommonOffsetParent","element1","element2","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","createRange","setStart","setEnd","commonAncestorContainer","contains","element1root","getScroll","upperSide","html","scrollingElement","getBordersSize","axis","sideA","sideB","getSize","computedStyle","getWindowSizes","classCallCheck","instance","Constructor","createClass","defineProperties","protoProps","staticProps","_extends","getClientRect","bottom","getBoundingClientRect","scrollTop","scrollLeft","sizes","clientWidth","clientHeight","horizScrollbar","offsetWidth","vertScrollbar","offsetHeight","getOffsetRectRelativeToArbitraryNode","fixedPosition","isHTML","childrenRect","parentRect","scrollParent","borderTopWidth","borderLeftWidth","marginTop","marginLeft","subtract","modifier","includeScroll","getFixedPositionOffsetParent","el","getBoundaries","popper","boundariesElement","boundaries","excludeScroll","relativeOffset","innerWidth","innerHeight","getViewportOffsetRectRelativeToArtbitraryNode","boundariesNode","isFixed","_getWindowSizes","isPaddingNumber","computeAutoPlacement","placement","refRect","rects","sortedAreas","area","_ref","filteredAreas","_ref2","computedPlacement","variation","getReferenceOffsets","getOuterSizes","marginBottom","marginRight","getOppositePlacement","hash","getPopperOffsets","referenceOffsets","popperRect","popperOffsets","isHoriz","mainSide","secondarySide","measurement","secondaryMeasurement","check","runModifiers","modifiers","ends","prop","cur","isDestroyed","arrowStyles","flipped","positionFixed","flip","originalPlacement","position","isCreated","onUpdate","onCreate","isModifierEnabled","modifierName","getSupportedPropertyName","upperProp","toCheck","removeAttribute","willChange","disableEventListeners","removeOnDestroy","getWindow","setupEventListeners","updateBound","passive","scrollElement","attachToScrollParents","scrollParents","isBody","eventsEnabled","enableEventListeners","scheduleUpdate","cancelAnimationFrame","isNumeric","setStyles","unit","isFirefox","isModifierRequired","requestingName","requestedName","requesting","isRequired","_requesting","requested","placements","validPlacements","clockwise","counter","BEHAVIORS","FLIP","CLOCKWISE","COUNTERCLOCKWISE","parseOffset","basePlacement","useHeight","fragments","frag","divider","splitRegex","ops","op","mergeWithPrevious","str","toValue","index2","Defaults","shiftvariation","_data$offsets","isVertical","side","shiftOffsets","preventOverflow","transformProp","popperStyles","primary","escapeWithReference","secondary","keepTogether","opSide","arrow","_data$offsets$arrow","arrowElement","len","sideCapitalized","altSide","arrowElementSize","popperMarginSide","popperBorderSide","sideValue","placementOpposite","flipOrder","behavior","refOffsets","overlapsRef","overflowsLeft","overflowsRight","overflowsTop","overflowsBottom","overflowsBoundaries","flippedVariationByRef","flipVariations","flippedVariationByContent","flipVariationsByContent","flippedVariation","getOppositeVariation","subtractLength","bound","computeStyle","legacyGpuAccelerationOption","gpuAcceleration","offsetParentRect","shouldRound","noRound","referenceWidth","popperWidth","isVariation","horizontalToInteger","verticalToInteger","getRoundedOffsets","devicePixelRatio","prefixedProperty","invertTop","invertLeft","applyStyle","setAttribute","onLoad","modifierOptions","Popper","jquery","Utils","PopperUtils","TYPE_OBJECT","bKeys","bKeys_1","dialogContext","attachment","currentTarget","manager","dialogManager","ADialog","dialog","livePreview","popup","toggleDialog","cancelSubDialogs","autoClose","showLivePreviews","livePreviews","enableLivePreviews","submitter","submit","equals","appendDialogButtons","insertAdjacentHTML","open","removeLike","closest","auto","focus","reset","triggerSubmit","cancel","removeAboveLevel","checkValidity","findInput","cleanUp","triggerDialogClosed","APopup","InputNumberDialog","ioptions","valueAsNumber","dragHandle","handle","container","onStart","onDrag","onEnd","minDelta","ueberElement","toContainerRelative","elem","clientLeft","handleShift","mouseMove","clientX","mouseUp","onmousedown","filteredColor","histogramTemplate","guessedBins","histogramUpdate","unfiltered","colorOf","nodes","matchBins","mappingHintTemplate","mappingHintUpdate","filteredHistTemplate","filterMin","filterMax","formatRaw","initFilter","minHint","maxHint","minValue","parseRaw","maxValue","minImpl","edit","shiftKey","ondblclick","maxImpl","button","px","unpercent","HistogramCellRenderer","getHistDOMRenderer","n_1","updateFilter","fContext","createFilterContext","createFilterInfo","dialogCtx","maxLevel","ImageCellRenderer","backgroundImage","src","image","Image","onload","AAggregatedGroupRenderer","single","aggregatedIndex","createData","stacked","GROUP","MultiLevelCellRenderer","toWait","missingWeight","ci","gridColumnStart","stackShift","col_1","cr","translate","callbacks","sorted","medianIndex","InterleavingCellRenderer","rr","summaries","grouped","sample","dummyBin","groupedHist","LinkCellRenderer","TableCellRenderer","createFixed","example","createFixedGroup","groupByKey","LinkMapCellRenderer","arr_1","LoadingCellRenderer","MapBarCellRenderer","RankCellRenderer","fromTSpan","toTSpan","SelectionRenderer","unselected","unchecked","SetCellRenderer","createDOMContext","categories_1","posx","wideEnoughCat","categories_2","moveNext","SparklineCellRenderer","yPos","repeat","matchRows","UpSetCellRenderer","calculateSetPath","catindexes","line","hasTrueValues","VerticalBarCellRenderer","tooltipPrefix","one","xpos","DateCellRenderer","chosen","InputDateDialog","valueAsDate","DateHistogramCellRenderer","isDatesColumn","dummyDomain","now","createDateFilter","applyFilter","summaryNode","rerender","defaultCellRenderer","brightness","catdistributionbar","circle","default","dot","heatmap","catheatmap","histogram","datehistogram","interleaving","loading","mapbars","sparkline","upset","verticalbar","BooleanFilterDialog","isTrue","isFalse","sets","schemeCategory10","schemeAccent","schemeDark2","schemePastel1","schemePastel2","schemeSet1","schemeSet2","schemeSet3","CategoricalColorMappingDialog","CategoricalFilterDialog","someMode","noFilter","CategoricalMappingFilterDialog","joint","items","ChangeRendererDialog","currentGroup","currentSummary","getPossibleRenderer","ColorMappingDialog","createTemplate","wrapped","refColor_1","has_1","renderColor_1","name_1","gradient","isCustom","name_2","applyColor","s0","s1","dm1","toColor","content","toggles","toggles_2","toggles_1","customs","updateColor","customs_1","updateSelectedColor","continuouos","continuouos2","quantized2","steps2","updateGradients","steppedGradient","di","stepSize","half","hasDnDType","typesToCheck","available","dataTransfer","dndTransferStorage","isEdgeDnD","updateDropEffect","dT","effectAllowed","copyDnD","dropEffect","dropAble","mimeTypes","onDrop","onDragOver","canDrop","effect","getData","mime","MoreColumnOptionsDialog","colId","addIcon","addIconDOM","getToolbar","isActionMode","createToolbarMenuItems","updateIconState","createHeader","dragAble","mergeDropAble","rearrangeAble","resizeable","extraPrefix","extra","createShortcutMenuItems","toggleToolbarIcons","dragAbleColumn","resolveDrop","MIMETYPE_PREFIX","alternative","JSON","pushChild","mergeImpl","mergeWith","numberish","draginfo","toInsertParent","rearrangeDropAble","sizeHelper","currentFooterTransformation","originalWidth","dragWidth","updateHeader","minWidth","sublabel","typeCat","updateMoreDialogIcons","groupedBy","active","actionCSSClass","showLabel","featureCategory","setHighlightColumn","onClick","willAutoHide","toolbar","shortcuts","hybrids","moreEntries","defaultVisibleClientWidth","rotated","scrollWidth","toggleRotatedHeader","availableWidth","shortCuts","moreIcon","needMore","actions_1","onDragStart","draggable","payload","over","stringify","CompositeChildrenDialog","substr","createChildren","CutOffHierarchyDialog","innerNodes","queue","resolveInnerNodes","innerNodePaths","setCustomValidity","newNode","newNodeIndex","maxDepthText","DateFilterDialog","handler","EditPatternDialog","templates","GroupDialog","handlers","addons_1","getToolbarDialogAddons","addon","append","updateDisabled","disable","elems","sortOrder","MappingLineDialog","adapter","unnormalizeRaw","normalizeRaw","MappingLine","beforeDomain_1","beforeRange_1","shiftDomain_1","shiftRange_1","normalize_1","common","updated","openDialog","handled","destroyed","trigger","MappingDialog","mappingLines","mappingAdapter","updateLines","computeScale","rawDomain","scaleType","others","bb","textarea_1","copyMapping","createMappings","scaleType_1","selectedIndex","patchedDomain","getAttribute","NumberFilterDialog","createNumberFilter","sortMethods","methods","ReduceDialog","RenameDialog","ScriptEditDialog","SearchDialog","checkbox","ShowTopNDialog","SortDialog","StringFilterDialog","toInput","WeightsEditDialog","inputs","updateBar","distributeWeights","missingIndices","sum_1","missingIndices_1","missingIndices_2","validWeights","inputs_1","buttons","inputs_2","reportValidity","ui","uiDialog","dialogClass","extraArgs","uiSortMethod","isAscByDefault","sortGroupBy","rename","vis","_evt","removeAll","toggleCompressExpand","mcol","compress","expand","toolbarDialogAddons","sortNumber","sortNumbers","sortBoxPlot","sortDates","groupNumber","isThreshold","thresholds","groupString","valueRadioButton","startsWithRadioButton","regexRadioButton","showOrHideTextarea","newType","groupDate","toolbarActions","filterNumber","filterDate","filterString","filterCategorical","filterOrdinal","filterBoolean","colorMapped","colorMappedCategorical","cutoff","editMapping","editPattern","editWeights","compositeContained","splitCombined","invertSelection","ss","sortActions","getFullToolbar","caches","toolbarIcon","getOwnMetadata","m_1","getAllToolbarActions","possible","resolveToolbarActions","flags","advancedModelFeatures","advancedRankingFeatures","advancedUIFeatures","cacheKey","cacheAddon","toolbarAddons","m_2","getAllToolbarDialogAddons","resolveToolbarDialogAddons","defaultOptions","renderers","labelRotation","summaryHeader","animated","expandLineOnHover","sidePanel","sidePanelCollapsed","hierarchyIndicator","defaultSlopeGraphMode","overviewMode","groupSort","onDialogBackgroundClick","rowHeight","groupHeight","groupPadding","rowPadding","levelOfDetail","customRowUpdate","dynamicHeight","disableFrozenColumns","ignoreUnsupportedBrowser","SUPPORTED_FIREFOX_VERSION","SUPPORTED_CHROME_VERSION","SUPPORTED_EDGE_VERSION","getUnsupportedBrowserError","info","fVersion","EAnimationMode","DialogManager","escKeyListener","which","removeLast","openDialogs","EVENT_DIALOG_CLOSED","EVENT_DIALOG_OPENED","setHighlight","mask","clipPath","webkitClipPath","clearHighlight","takeDown","setUp","ALineUp","ignoreIncompatibleBrowser","highlightListeners","isBrowserSupported","EVENT_HIGHLIGHT_CHANGED","setDataProvider","dataIndices","enableHighlightListening","_enable","NO_CHANGE_DELTA","defaultPhases","delay","nodeY","animation","SHOW","HIDE","UPDATE_REMOVE","KeyFinder","lastFilled","key2index","exceptions","findValidStart","posByKey","pos","fillCacheTillKey","defaultRowHeight","fillCache","heightOf","exceptionsLookup","exceptionHeightOf","returnDefault","numberOfRows","positions","defaultMode","ScrollHandler","sync","timer","handleAnimationImpl","handleAnimation","handleTimeouts","asInfo","isWaiting","addScroll","scroller","__le_scroller__","isScrollEventWaiting","EScrollResult","RowHeightException","nonUniformContext","rowHeights","mostFrequentValue","totalHeight","between","heightExceptions","firstRowPos","endPos","y2","offset2","indexShift","offsetShift","isGuess","shifted2","lastPos","heightExceptions_1","firstException","lastException","updateFrozen","oldLast","added","PREFIX","CSS_CLASS_LOADING","CSS_CLASS_FROZEN","CSS_CLASS_HIDDEN","CSS_CLASS_MULTI","CSS_CLASS_EVEN","CSS_CLASS_SHIFTED","CSS_CLASS_SCROLLBAR_TESTER","CSS_CLASS_HEADER","CSS_CLASS_BODY","CSS_CLASS_FOOTER","CSS_CLASS_THEAD","CSS_CLASS_TBODY","CSS_CLASS_TR","CSS_CLASS_TH","CSS_CLASS_TD","CSS_CLASS_SCROLLING","CSS_CLASS_ROW_ANIMATION","isLoadingCell","ARowRenderer","pool","loadingPool","forcedFirst","forcedLast","visibleFirstRowPos","scrollListener","lastScrollInfo","abortAnimation","async","minScrollDelta","mixins","scrollingHint","batchSize","striped","viewportOversize","createAdapter","mixinClass","fragment","createDocumentFragment","addMixin","addAtBeginning","addAtBottom","removeFromBeginning","removeFromBottom","updateOffset","bodyScroller","scrollOffset","scrollTotal","sizer","tagName","insertBefore","firstChild","init","isGoingDown","onScrolledVertically","recreate","updateRow","createRow","selectProxy","proxy","recycle","replaceChild","ex","perform","torecycle","forEachRow","inplace","to","fromBeginning","nextSibling","previousSibling","updateSizer","setTransform","bodySizer","recreateAnimated","recreatePure","clearPool","previousKey","currentKey","rows_1","UPDATE","UPDATE_CREATE","nodeYCurrentHeight","nextPos","prevHeight","animate","phases","previousFinder","currentFinder","currentTimer","actPhase","executePhase","phase","anim","run","offsetTop","dummyAnimation","previousHeight","currentHeight","curr","revalidate","shiftTop","scrollResult","onScrolledImpl","onScrolled","shiftLast","currentDelta","shiftFirst","currentFirstRow","NONE","toadd","SOME","toaddBottom","ALL","SOME_TOP","SOME_BOTTOM","manipulate","toRecycle","toAdd","toRecycle_1","anyelem","__transform__","assignStyles","plain","hyphen","setProperty","tableIds","tableId","thead","tbody","tr","th","td","tableCSSClasses","ids","GridStyleManager","cssClasses","headerScroller","measureScrollbar","updateRule","borderRight","frozenShift","selectors","updateColumns","deleteRule","rules","ruleNames","cssSelectors","thStyles","tdStyles","StyleManager","testVerifyTimeout","createTextNode","verifySheet","sheet","cssRules","selectorText","rule","insertRule","cssRule","getSheetRule","addRule","stored","MultiTableRowRenderer","htmlId","sections","columnPadding","main","isGoingRight","onScrolledHorizontally","scrollEnd","headerFooter","bodyFooter","maxHeight","pushTable","extras","pushSeparator","section","widthChanged","PrefetchMixin","prefetchTimeout","cleanupTimeout","prefetchRows","cleanUpRows","prefetchDown","nextLast","prefetchUp","syncFrozen","triggerPrefetch","prefetchDownPossible","prefetchUpPossible","isLast","cleanUpTop","newFirst","cleanUpBottom","newLast","triggerCleanUp","ACellAdapter","mixinClasses","cellPool","visibleColumns","visibleFirstColumnPos","horizontallyShifted","columnAdapter","createColumnAdapter","columnMixins","columnFragment","leftShift","addColumnMixin","addColumnAtStart","addColumnAtEnd","removeColumnFromStart","removeColumnFromEnd","updateColumnOffset","onScrolledHorizontallyImpl","removeCellFromStart","recycleCell","removeCellFromEnd","removeFrozenCells","columnIndices","columnIndices_1","columnIndex","removeFrozenColumns","removeAllColumns","includingFrozen","removeAllCells","frozen_1","frozen_2","selectProxyCell","columnObj","pooled","updateCell","createCell","updateShiftedState","handleCellReady","selectCell","rowIndex","addCellAtStart","cell","insertFrozenCells","columnIndices_2","insertFrozenColumns","addCellAtEnd","verifyRows","verifyRow","updateHeaders","fragment_1","document_1","ids_1","firstColumnPos","changed","id_1","mergeColumns","updateImpl","cell_1","byId","updateShiftedStates","shifted","headers","bodies","headers_1","bodies_1","headers_2","bodies_2","shiftingChanged","colObjs","ACellTableSection","LocalCell","hidden","onVisibilityChanged","updateShifts","_left","_visible","wasHidden","updateColumnWidths","oldLeft","toGroupLookup","item2groupIndex","group2firstItemIndex","lineupAnimation","previousData","currentData","prevHelper","currHelper","currentRowIndex","referenceIndex","appearPosition","_previousFinder","previousRowIndex","removePosition","RenderColumn","singleRenderer","singleTemplate","cloneNode","singleId","groupTemplate","groupId","summaryTemplate","summaryId","hasSummaryLine","isGroup","oldRenderer","currentRenderer","oldGroup","getGroup","chainAbortAble","renderCell","mapper","mapped","EMode","MultiLevelRenderColumn","mc","updateNested","matchChildren","cc","updateWidthRule","gridTemplateColumns","sub","SelectionManager","hr","showHint","startNode","elementFromPoint","clientY","endNode","xShift","yShift","EVENT_SELECT_RANGE","startIndex","endIndex","sy","ey","MIN_DISTANCE","selectRange","updateState","selectedDataIndices","RankingEvents","EVENT_UPDATE_DATA","EVENT_RECREATE","PASSIVE","EngineRanking","roptions","loadingCanvas","highlight","canvasPool","currentCanvasShift","currentCanvasWidth","canvasMouseHandler","hoveredRows","unhover","enter","leave","updateHoveredRow","isCanvasRenderedRow","highlightHandler","delayedUpdate","updateBody","delayedUpdateAll","updateAll","delayedUpdateColumnWidths","createCol","reindex","disableListener","_oldValue","renderCtx","createRenderer","visibility","updateCanvasRule","updateColumnSummaryFlag","_document","createCellHandled","initCellClasses","selectCanvas","rowFlags","rowany","__lu__","visibleRenderedWidth","pushLazyRedraw","renderRow","imageSmoothingEnabled","domColumns","renderCellImpl","visibleElements","firstDOM","updateCellImpl","domColumns_1","updateCanvasCell","me","me_1","needDOM","updateHeaderOf","toRowMeta","agg","hoverLod","computedLod","wasLow","wasGroup","recycleCanvas","canvas2","updateCanvasBody","level_1","enable","hover","updateSelection","updateColumn","after","groupData","pushItem","ordered","gparent","rowContext","findNearest","lookFor","firstBeforePos","firstAfterPos","nearestPos","scrollIntoView","regular","posOf","scrollHeight","found","getHighlight","debounceUpdate","replacement","ItemSlope","GroupSlope","SlopeGraph","leftSlopes","rightSlopes","chosenSelectionOnly","ITEM","createElementNS","BAND","initHeader","scroll","icons","rebuild","leftRanking","leftContext","rightRanking","rightContext","prepareRightSlopes","computeSlopes","fakeGroups","padded","slopes","gr","heightPerRow","fakeGroup","createFakeGroup","intersection","filterIndices","chooseSelection","leftVisibleFirst","leftVisibleLast","rightVisibleFirst","rightVisibleLast","alreadyVisible","selectionLookup","updatePath","selectionSlopes","ownerSVGElement","matchLength","addPath","openDataIndices","paths_2","ss_1","paths_1","EngineRenderer","slopeGraphs","updateAbles","zoomFactor","enabledHighlightListening","helper","chooseRenderer","chooseGroupRenderer","chooseSummaryRenderer","footer","toDisable","initProvider","zoomOut","updateZoomFactor","zoomIn","fontSize","pushUpdateAble","updateAble","takeDownProvider","addRanking","setHighlightToNearest","updateHist","rankings_1","updateUpdateAbles","updateRotatedHeaderState","slope","round2","impl_1","f_1","defaultHeight","heightsFor","rankings_2","updateSlopeGraphs","ChooseRankingDialog","SearchBox","formatItem","placeholder","onfocus","onblur","blur","onkeydown","handleKey","itemTemplate","buildDialog","li","isItem","onmouseenter","highlighted","KEYS","click","highlightPrevious","highlightNext","filterResults","ul","allChildrenHidden","RenameRankingDialog","MoreRankingOptionsDialog","AddonDialog","addons","Hierarchy","groupAdder","groupSortAdder","sortAdder","renderSorting","renderGroupSorting","toColumn","addonKey","onChange","prevent","customize","addGroupAdder","addSortAdder","addGroupSortAdder","addAdder","adder","onSelect","used","SidePanelEntryVis","summaryUpdater","recreateSummary","appendSummary","updateSummary","SidePanelRanking","dropdown","updateHierarchy","updateList","isWrapper","SidePanel","additionalDescs","chooser","collapseable","descs","initChooser","changeDataStorage","panel","wrapDesc","updateChooser","updateStats","createEntry","makeActive","updateRanking","resetButton","groupByType","LineUp","RankingBuilder","columns_1","supportTypes","allColumns","impose","colorColumn","scripted","mixed_1","weightedSum","numberColumn","numberColumn1","weight1","numberColumn2","weight2","numberColumnAndWeights","post","operation","numberColumns","ALL_MAGIC_FLAG","addColumn","col2","sorts_1","sorts_2","si","pick","providerOptions","lineupOptions","Adapter","prevRankings","prevColumns","prevHighlight","onSelectionChanged","onHighlightChanged","componentDidMount","buildProvider","createInstance","resolveColumnDescs","columnDescs","deriveColumns","deriveColumnNames","deriveColors","resolveRankings","builders","rankingBuilders","derive","defaultRanking","buildColumns","derived_1","buildRankings","updateLineUp","changeDetector","providerChanged","changedLineUpOptions","updateProvider","columnsChanged","componentDidUpdate","componentWillUnmount","builderAdapter","buildString","editable","buildNumber","buildHierarchy","buildDate","buildCategorical","asOrdinal","missingCategory","asSet","buildActions","buildGeneric","buildWeightedSumRanking","buildSupportRanking","buildScriptRanking","buildReduceRanking","buildRanking","buildNestedRanking","buildImposeRanking","buildAllColumnsRanking","isSame","isTypeInstance","superClass","filterChildrenProps","toArray","ChildWrapper","merge","inline","prevProps","spaceFillingRule","availableHeight","visibleHeight","groupSeparators","violation","itemHeight","TaggleRenderer","isDynamicLeafHeight","resizeListener","violationChanged","switchRule","Taggle","_rule","setViolation","spaceFilling","spaceFilling_1","updateLodRules","buildId","license"],"mappings":"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","file":"LineUpJSx.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"LineUpJS\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"LineUpJS\"] = factory(root[\"React\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__3__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","'use strict';\n\nvar isArray = Array.isArray;\nvar keyList = Object.keys;\nvar hasProp = Object.prototype.hasOwnProperty;\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var arrA = isArray(a)\n      , arrB = isArray(b)\n      , i\n      , length\n      , key;\n\n    if (arrA && arrB) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    if (arrA != arrB) return false;\n\n    var dateA = a instanceof Date\n      , dateB = b instanceof Date;\n    if (dateA != dateB) return false;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n\n    var regexpA = a instanceof RegExp\n      , regexpB = b instanceof RegExp;\n    if (regexpA != regexpB) return false;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n\n    var keys = keyList(a);\n    length = keys.length;\n\n    if (length !== keyList(b).length)\n      return false;\n\n    for (i = length; i-- !== 0;)\n      if (!hasProp.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  return a!==a && b!==b;\n};\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/,\n    reLeadingDot = /^\\./,\n    rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    splice = arrayProto.splice;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoize(function(string) {\n  string = toString(string);\n\n  var result = [];\n  if (reLeadingDot.test(string)) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","\"use strict\";\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BrowserInfo = /** @class */ (function () {\n    function BrowserInfo(name, version, os) {\n        this.name = name;\n        this.version = version;\n        this.os = os;\n    }\n    return BrowserInfo;\n}());\nexports.BrowserInfo = BrowserInfo;\nvar NodeInfo = /** @class */ (function () {\n    function NodeInfo(version) {\n        this.version = version;\n        this.name = 'node';\n        this.os = process.platform;\n    }\n    return NodeInfo;\n}());\nexports.NodeInfo = NodeInfo;\nvar BotInfo = /** @class */ (function () {\n    function BotInfo() {\n        this.bot = true; // NOTE: deprecated test name instead\n        this.name = 'bot';\n        this.version = null;\n        this.os = null;\n    }\n    return BotInfo;\n}());\nexports.BotInfo = BotInfo;\n// tslint:disable-next-line:max-line-length\nvar SEARCHBOX_UA_REGEX = /alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/;\nvar SEARCHBOT_OS_REGEX = /(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\\/Teoma)|(ia_archiver)/;\nvar REQUIRED_VERSION_PARTS = 3;\nvar userAgentRules = [\n    ['aol', /AOLShield\\/([0-9\\._]+)/],\n    ['edge', /Edge\\/([0-9\\._]+)/],\n    ['edge-ios', /EdgiOS\\/([0-9\\._]+)/],\n    ['yandexbrowser', /YaBrowser\\/([0-9\\._]+)/],\n    ['vivaldi', /Vivaldi\\/([0-9\\.]+)/],\n    ['kakaotalk', /KAKAOTALK\\s([0-9\\.]+)/],\n    ['samsung', /SamsungBrowser\\/([0-9\\.]+)/],\n    ['silk', /\\bSilk\\/([0-9._-]+)\\b/],\n    ['miui', /MiuiBrowser\\/([0-9\\.]+)$/],\n    ['beaker', /BeakerBrowser\\/([0-9\\.]+)/],\n    ['edge-chromium', /Edg\\/([0-9\\.]+)/],\n    [\n        'chromium-webview',\n        /(?!Chrom.*OPR)wv\\).*Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/,\n    ],\n    ['chrome', /(?!Chrom.*OPR)Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/],\n    ['phantomjs', /PhantomJS\\/([0-9\\.]+)(:?\\s|$)/],\n    ['crios', /CriOS\\/([0-9\\.]+)(:?\\s|$)/],\n    ['firefox', /Firefox\\/([0-9\\.]+)(?:\\s|$)/],\n    ['fxios', /FxiOS\\/([0-9\\.]+)/],\n    ['opera-mini', /Opera Mini.*Version\\/([0-9\\.]+)/],\n    ['opera', /Opera\\/([0-9\\.]+)(?:\\s|$)/],\n    ['opera', /OPR\\/([0-9\\.]+)(:?\\s|$)/],\n    ['ie', /Trident\\/7\\.0.*rv\\:([0-9\\.]+).*\\).*Gecko$/],\n    ['ie', /MSIE\\s([0-9\\.]+);.*Trident\\/[4-7].0/],\n    ['ie', /MSIE\\s(7\\.0)/],\n    ['bb10', /BB10;\\sTouch.*Version\\/([0-9\\.]+)/],\n    ['android', /Android\\s([0-9\\.]+)/],\n    ['ios', /Version\\/([0-9\\._]+).*Mobile.*Safari.*/],\n    ['safari', /Version\\/([0-9\\._]+).*Safari/],\n    ['facebook', /FBAV\\/([0-9\\.]+)/],\n    ['instagram', /Instagram\\s([0-9\\.]+)/],\n    ['ios-webview', /AppleWebKit\\/([0-9\\.]+).*Mobile/],\n    ['ios-webview', /AppleWebKit\\/([0-9\\.]+).*Gecko\\)$/],\n    ['searchbot', SEARCHBOX_UA_REGEX],\n];\nvar operatingSystemRules = [\n    ['iOS', /iP(hone|od|ad)/],\n    ['Android OS', /Android/],\n    ['BlackBerry OS', /BlackBerry|BB10/],\n    ['Windows Mobile', /IEMobile/],\n    ['Amazon OS', /Kindle/],\n    ['Windows 3.11', /Win16/],\n    ['Windows 95', /(Windows 95)|(Win95)|(Windows_95)/],\n    ['Windows 98', /(Windows 98)|(Win98)/],\n    ['Windows 2000', /(Windows NT 5.0)|(Windows 2000)/],\n    ['Windows XP', /(Windows NT 5.1)|(Windows XP)/],\n    ['Windows Server 2003', /(Windows NT 5.2)/],\n    ['Windows Vista', /(Windows NT 6.0)/],\n    ['Windows 7', /(Windows NT 6.1)/],\n    ['Windows 8', /(Windows NT 6.2)/],\n    ['Windows 8.1', /(Windows NT 6.3)/],\n    ['Windows 10', /(Windows NT 10.0)/],\n    ['Windows ME', /Windows ME/],\n    ['Open BSD', /OpenBSD/],\n    ['Sun OS', /SunOS/],\n    ['Chrome OS', /CrOS/],\n    ['Linux', /(Linux)|(X11)/],\n    ['Mac OS', /(Mac_PowerPC)|(Macintosh)/],\n    ['QNX', /QNX/],\n    ['BeOS', /BeOS/],\n    ['OS/2', /OS\\/2/],\n    ['Search Bot', SEARCHBOT_OS_REGEX],\n];\nfunction detect(userAgent) {\n    if (!!userAgent) {\n        return parseUserAgent(userAgent);\n    }\n    if (typeof navigator !== 'undefined') {\n        return parseUserAgent(navigator.userAgent);\n    }\n    return getNodeVersion();\n}\nexports.detect = detect;\nfunction parseUserAgent(ua) {\n    // opted for using reduce here rather than Array#first with a regex.test call\n    // this is primarily because using the reduce we only perform the regex\n    // execution once rather than once for the test and for the exec again below\n    // probably something that needs to be benchmarked though\n    var matchedRule = ua !== '' &&\n        userAgentRules.reduce(function (matched, _a) {\n            var browser = _a[0], regex = _a[1];\n            if (matched) {\n                return matched;\n            }\n            var uaMatch = regex.exec(ua);\n            return !!uaMatch && [browser, uaMatch];\n        }, false);\n    if (!matchedRule) {\n        return null;\n    }\n    var name = matchedRule[0], match = matchedRule[1];\n    if (name === 'searchbot') {\n        return new BotInfo();\n    }\n    var versionParts = match[1] && match[1].split(/[._]/).slice(0, 3);\n    if (versionParts) {\n        if (versionParts.length < REQUIRED_VERSION_PARTS) {\n            versionParts = __spreadArrays(versionParts, createVersionParts(REQUIRED_VERSION_PARTS - versionParts.length));\n        }\n    }\n    else {\n        versionParts = [];\n    }\n    return new BrowserInfo(name, versionParts.join('.'), detectOS(ua));\n}\nexports.parseUserAgent = parseUserAgent;\nfunction detectOS(ua) {\n    for (var ii = 0, count = operatingSystemRules.length; ii < count; ii++) {\n        var _a = operatingSystemRules[ii], os = _a[0], regex = _a[1];\n        var match = regex.test(ua);\n        if (match) {\n            return os;\n        }\n    }\n    return null;\n}\nexports.detectOS = detectOS;\nfunction getNodeVersion() {\n    var isNode = typeof process !== 'undefined' && process.version;\n    return isNode ? new NodeInfo(process.version.slice(1)) : null;\n}\nexports.getNodeVersion = getNodeVersion;\nfunction createVersionParts(count) {\n    var output = [];\n    for (var ii = 0; ii < count; ii++) {\n        output.push('0');\n    }\n    return output;\n}\n","/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof global === \"object\" ? global :\n            typeof self === \"object\" ? self :\n                typeof this === \"object\" ? this :\n                    Function(\"return this;\")();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        else {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter);\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                if (typeof target[key] !== \"function\") {\n                    Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                }\n                if (previous)\n                    previous(key, value);\n            };\n        }\n    })(function (exporter) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var usePolyfill = typeof process === \"object\" && process.env && process.env[\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\n        var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        // [[Metadata]] internal slot\n        // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n        var Metadata = new _WeakMap();\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            if (!metadataMap.delete(metadataKey))\n                return false;\n            if (metadataMap.size > 0)\n                return true;\n            var targetMetadata = Metadata.get(target);\n            targetMetadata.delete(propertyKey);\n            if (targetMetadata.size > 0)\n                return true;\n            Metadata.delete(target);\n            return true;\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        function GetOrCreateMetadataMap(O, P, Create) {\n            var targetMetadata = Metadata.get(O);\n            if (IsUndefined(targetMetadata)) {\n                if (!Create)\n                    return undefined;\n                targetMetadata = new _Map();\n                Metadata.set(O, targetMetadata);\n            }\n            var metadataMap = targetMetadata.get(P);\n            if (IsUndefined(metadataMap)) {\n                if (!Create)\n                    return undefined;\n                metadataMap = new _Map();\n                targetMetadata.set(P, metadataMap);\n            }\n            return metadataMap;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            return ToBoolean(metadataMap.has(MetadataKey));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return undefined;\n            return metadataMap.get(MetadataKey);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n            metadataMap.set(MetadataKey, MetadataValue);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var keys = [];\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return keys;\n            var keysObj = metadataMap.keys();\n            var iterator = GetIterator(keysObj);\n            var k = 0;\n            while (true) {\n                var next = IteratorStep(iterator);\n                if (!next) {\n                    keys.length = k;\n                    return keys;\n                }\n                var nextValue = IteratorValue(next);\n                try {\n                    keys[k] = nextValue;\n                }\n                catch (e) {\n                    try {\n                        IteratorClose(iterator);\n                    }\n                    finally {\n                        throw e;\n                    }\n                }\n                k++;\n            }\n        }\n        // 6 ECMAScript Data Typ0es and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            return /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (key === this._cacheKey) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (this._cacheKey !== key) {\n                        this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            return /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.values(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    if (typeof crypto !== \"undefined\")\n                        return crypto.getRandomValues(new Uint8Array(size));\n                    if (typeof msCrypto !== \"undefined\")\n                        return msCrypto.getRandomValues(new Uint8Array(size));\n                    return FillRandomBytes(new Uint8Array(size), size);\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122  4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import get from 'lodash.get';\r\n/**\r\n * @internal\r\n */\r\nexport function isComplexAccessor(column) {\r\n    // something like a.b or a[4]\r\n    return typeof column === 'string' && (column.includes('.') || column.includes('['));\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function resolveValue(value, column) {\r\n    if (value != null && value.hasOwnProperty(column)) { // well complex but a direct hit\r\n        return value[column];\r\n    }\r\n    return get(value, column);\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function rowComplexGetter(row, desc) {\r\n    return resolveValue(row.v, desc.column);\r\n}\r\n/**\r\n * simple row getter\r\n * @internal\r\n */\r\nexport function rowGetter(row, desc) {\r\n    return row.v[desc.column];\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function rowGuessGetter(row, desc) {\r\n    var column = desc.column;\r\n    if (isComplexAccessor(column)) {\r\n        return rowComplexGetter(row, desc);\r\n    }\r\n    return rowGetter(row, desc);\r\n}\r\n//# sourceMappingURL=accessor.js.map","import * as tslib_1 from \"tslib\";\r\n/**\r\n * @internal\r\n */\r\nexport function isForEachAble(v) {\r\n    return typeof v.forEach === 'function';\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function isSeqEmpty(seq) {\r\n    return seq.every(function () { return false; }); // more efficent than counting length\r\n}\r\n/**\r\n * helper function for faster access to avoid function calls\r\n * @internal\r\n */\r\nexport function isIndicesAble(it) {\r\n    return Array.isArray(it) || it instanceof Uint8Array || it instanceof Uint16Array || it instanceof Uint32Array || it instanceof Float32Array || it instanceof Int8Array || it instanceof Int16Array || it instanceof Int32Array || it instanceof Float64Array;\r\n}\r\n/**\r\n * sequence implementation that does the operation lazily on the fly\r\n */\r\nvar LazyFilter = /** @class */ (function () {\r\n    function LazyFilter(it, filters) {\r\n        this.it = it;\r\n        this.filters = filters;\r\n        this._length = -1;\r\n    }\r\n    Object.defineProperty(LazyFilter.prototype, \"length\", {\r\n        get: function () {\r\n            // cached\r\n            if (this._length >= 0) {\r\n                return this._length;\r\n            }\r\n            var l = 0;\r\n            this.forEach(function () { return l++; });\r\n            this._length = l;\r\n            return l;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LazyFilter.prototype.filter = function (callback) {\r\n        // propagate filter\r\n        return new LazyFilter(this.it, this.filters.concat(callback));\r\n    };\r\n    LazyFilter.prototype.map = function (callback) {\r\n        // create lazy map out of myself\r\n        return new LazyMap1(this, callback);\r\n    };\r\n    LazyFilter.prototype.forEach = function (callback) {\r\n        if (isIndicesAble(this.it)) {\r\n            // fast array version\r\n            outer: for (var i_1 = 0; i_1 < this.it.length; ++i_1) {\r\n                var v_1 = this.it[i_1];\r\n                for (var _i = 0, _a = this.filters; _i < _a.length; _i++) {\r\n                    var f = _a[_i];\r\n                    if (!f(v_1, i_1)) {\r\n                        continue outer;\r\n                    }\r\n                }\r\n                callback(v_1, i_1);\r\n            }\r\n            return;\r\n        }\r\n        // iterator version\r\n        var valid = 0;\r\n        var it = this.it[Symbol.iterator]();\r\n        var v = it.next();\r\n        var i = 0;\r\n        outer: while (!v.done) {\r\n            for (var _b = 0, _c = this.filters; _b < _c.length; _b++) {\r\n                var f = _c[_b];\r\n                if (f(v.value, i)) {\r\n                    continue;\r\n                }\r\n                v = it.next();\r\n                i++;\r\n                continue outer;\r\n            }\r\n            callback(v.value, valid++);\r\n            v = it.next();\r\n            i++;\r\n        }\r\n    };\r\n    LazyFilter.prototype[Symbol.iterator] = function () {\r\n        var _this = this;\r\n        var it = this.it[Symbol.iterator]();\r\n        var next = function () {\r\n            var v = it.next();\r\n            var i = -1;\r\n            outer: while (!v.done) {\r\n                i++;\r\n                for (var _i = 0, _a = _this.filters; _i < _a.length; _i++) {\r\n                    var f = _a[_i];\r\n                    if (f(v.value, i)) {\r\n                        continue;\r\n                    }\r\n                    // invalid go to next\r\n                    v = it.next();\r\n                    continue outer;\r\n                }\r\n                return v;\r\n            }\r\n            return v;\r\n        };\r\n        return { next: next };\r\n    };\r\n    LazyFilter.prototype.some = function (callback) {\r\n        if (isIndicesAble(this.it)) {\r\n            // fast array version\r\n            outer: for (var i_2 = 0; i_2 < this.it.length; ++i_2) {\r\n                var v_2 = this.it[i_2];\r\n                for (var _i = 0, _a = this.filters; _i < _a.length; _i++) {\r\n                    var f = _a[_i];\r\n                    if (!f(v_2, i_2)) {\r\n                        continue outer;\r\n                    }\r\n                }\r\n                if (callback(v_2, i_2)) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n        var valid = 0;\r\n        var it = this.it[Symbol.iterator]();\r\n        var v = it.next();\r\n        var i = 0;\r\n        outer: while (!v.done) {\r\n            for (var _b = 0, _c = this.filters; _b < _c.length; _b++) {\r\n                var f = _c[_b];\r\n                if (f(v.value, i)) {\r\n                    continue;\r\n                }\r\n                v = it.next();\r\n                i++;\r\n                continue outer;\r\n            }\r\n            if (callback(v.value, valid++)) {\r\n                return true;\r\n            }\r\n            v = it.next();\r\n            i++;\r\n        }\r\n        return false;\r\n    };\r\n    LazyFilter.prototype.every = function (callback) {\r\n        if (isIndicesAble(this.it)) {\r\n            // fast array version\r\n            outer: for (var i_3 = 0; i_3 < this.it.length; ++i_3) {\r\n                var v_3 = this.it[i_3];\r\n                for (var _i = 0, _a = this.filters; _i < _a.length; _i++) {\r\n                    var f = _a[_i];\r\n                    if (!f(v_3, i_3)) {\r\n                        continue outer;\r\n                    }\r\n                }\r\n                if (!callback(v_3, i_3)) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        var valid = 0;\r\n        var it = this.it[Symbol.iterator]();\r\n        var v = it.next();\r\n        var i = 0;\r\n        outer: while (!v.done) {\r\n            for (var _b = 0, _c = this.filters; _b < _c.length; _b++) {\r\n                var f = _c[_b];\r\n                if (f(v.value, i)) {\r\n                    continue;\r\n                }\r\n                v = it.next();\r\n                i++;\r\n                continue outer;\r\n            }\r\n            if (!callback(v.value, valid++)) {\r\n                return false;\r\n            }\r\n            v = it.next();\r\n            i++;\r\n        }\r\n        return true;\r\n    };\r\n    LazyFilter.prototype.reduce = function (callback, initial) {\r\n        if (isIndicesAble(this.it)) {\r\n            // fast array version\r\n            var acc = initial;\r\n            var j = 0;\r\n            outer: for (var i_4 = 0; i_4 < this.it.length; ++i_4) {\r\n                var v_4 = this.it[i_4];\r\n                for (var _i = 0, _a = this.filters; _i < _a.length; _i++) {\r\n                    var f = _a[_i];\r\n                    if (!f(v_4, i_4)) {\r\n                        continue outer;\r\n                    }\r\n                }\r\n                acc = callback(acc, v_4, j++);\r\n            }\r\n            return acc;\r\n        }\r\n        var valid = 0;\r\n        var it = this.it[Symbol.iterator]();\r\n        var v = it.next();\r\n        var i = 0;\r\n        var r = initial;\r\n        outer: while (!v.done) {\r\n            for (var _b = 0, _c = this.filters; _b < _c.length; _b++) {\r\n                var f = _c[_b];\r\n                if (f(v.value, i)) {\r\n                    continue;\r\n                }\r\n                v = it.next();\r\n                i++;\r\n                continue outer;\r\n            }\r\n            r = callback(r, v.value, valid++);\r\n            v = it.next();\r\n            i++;\r\n        }\r\n        return r;\r\n    };\r\n    return LazyFilter;\r\n}());\r\n/**\r\n * lazy mapping operation\r\n */\r\nvar ALazyMap = /** @class */ (function () {\r\n    function ALazyMap(it) {\r\n        this.it = it;\r\n    }\r\n    Object.defineProperty(ALazyMap.prototype, \"length\", {\r\n        get: function () {\r\n            return this.it.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ALazyMap.prototype.filter = function (callback) {\r\n        return new LazyFilter(this, [callback]);\r\n    };\r\n    ALazyMap.prototype.forEach = function (callback) {\r\n        if (isIndicesAble(this.it)) {\r\n            for (var i = 0; i < this.it.length; ++i) {\r\n                callback(this.mapV(this.it[i], i), i);\r\n            }\r\n            return;\r\n        }\r\n        var it = this.it[Symbol.iterator]();\r\n        for (var v = it.next(), i = 0; !v.done; v = it.next(), i++) {\r\n            callback(this.mapV(v.value, i), i);\r\n        }\r\n    };\r\n    ALazyMap.prototype[Symbol.iterator] = function () {\r\n        var _this = this;\r\n        var it = this.it[Symbol.iterator]();\r\n        var i = 0;\r\n        var next = function () {\r\n            var v = it.next();\r\n            if (v.done) {\r\n                return {\r\n                    value: undefined,\r\n                    done: true\r\n                };\r\n            }\r\n            var value = _this.mapV(v.value, i);\r\n            i++;\r\n            return {\r\n                value: value,\r\n                done: false\r\n            };\r\n        };\r\n        return { next: next };\r\n    };\r\n    ALazyMap.prototype.some = function (callback) {\r\n        if (isIndicesAble(this.it)) {\r\n            for (var i = 0; i < this.it.length; ++i) {\r\n                if (callback(this.mapV(this.it[i], i), i)) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n        var it = this.it[Symbol.iterator]();\r\n        for (var v = it.next(), i = 0; !v.done; v = it.next(), i++) {\r\n            if (callback(this.mapV(v.value, i), i)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    ALazyMap.prototype.every = function (callback) {\r\n        if (isIndicesAble(this.it)) {\r\n            for (var i = 0; i < this.it.length; ++i) {\r\n                if (!callback(this.mapV(this.it[i], i), i)) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        var it = this.it[Symbol.iterator]();\r\n        for (var v = it.next(), i = 0; !v.done; v = it.next(), i++) {\r\n            if (!callback(this.mapV(v.value, i), i)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    ALazyMap.prototype.reduce = function (callback, initial) {\r\n        if (isIndicesAble(this.it)) {\r\n            var acc_1 = initial;\r\n            for (var i = 0; i < this.it.length; ++i) {\r\n                acc_1 = callback(acc_1, this.mapV(this.it[i], i), i);\r\n            }\r\n            return acc_1;\r\n        }\r\n        var it = this.it[Symbol.iterator]();\r\n        var acc = initial;\r\n        for (var v = it.next(), i = 0; !v.done; v = it.next(), i++) {\r\n            acc = callback(acc, this.mapV(v.value, i), i);\r\n        }\r\n        return acc;\r\n    };\r\n    return ALazyMap;\r\n}());\r\nvar LazyMap1 = /** @class */ (function (_super) {\r\n    tslib_1.__extends(LazyMap1, _super);\r\n    function LazyMap1(it, map12) {\r\n        var _this = _super.call(this, it) || this;\r\n        _this.map12 = map12;\r\n        return _this;\r\n    }\r\n    LazyMap1.prototype.mapV = function (v, i) {\r\n        return this.map12(v, i);\r\n    };\r\n    LazyMap1.prototype.map = function (callback) {\r\n        return new LazyMap2(this.it, this.map12, callback);\r\n    };\r\n    return LazyMap1;\r\n}(ALazyMap));\r\nvar LazyMap2 = /** @class */ (function (_super) {\r\n    tslib_1.__extends(LazyMap2, _super);\r\n    function LazyMap2(it, map12, map23) {\r\n        var _this = _super.call(this, it) || this;\r\n        _this.map12 = map12;\r\n        _this.map23 = map23;\r\n        return _this;\r\n    }\r\n    LazyMap2.prototype.map = function (callback) {\r\n        return new LazyMap3(this.it, this.map12, this.map23, callback);\r\n    };\r\n    LazyMap2.prototype.mapV = function (v, i) {\r\n        return this.map23(this.map12(v, i), i);\r\n    };\r\n    return LazyMap2;\r\n}(ALazyMap));\r\nvar LazyMap3 = /** @class */ (function (_super) {\r\n    tslib_1.__extends(LazyMap3, _super);\r\n    function LazyMap3(it, map12, map23, map34) {\r\n        var _this = _super.call(this, it) || this;\r\n        _this.map12 = map12;\r\n        _this.map23 = map23;\r\n        _this.map34 = map34;\r\n        return _this;\r\n    }\r\n    LazyMap3.prototype.map = function (callback) {\r\n        var _this = this;\r\n        var map1U = function (v, i) { return callback(_this.map34(_this.map23(_this.map12(v, i), i), i), i); };\r\n        return new LazyMap1(this.it, map1U);\r\n    };\r\n    LazyMap3.prototype.mapV = function (v, i) {\r\n        return this.map34(this.map23(this.map12(v, i), i), i);\r\n    };\r\n    return LazyMap3;\r\n}(ALazyMap));\r\nvar LazySeq = /** @class */ (function () {\r\n    function LazySeq(iterable) {\r\n        this.iterable = iterable;\r\n        this._arr = null;\r\n    }\r\n    Object.defineProperty(LazySeq.prototype, \"arr\", {\r\n        get: function () {\r\n            if (this._arr) {\r\n                return this._arr;\r\n            }\r\n            if (isIndicesAble(this.iterable)) {\r\n                this._arr = this.iterable;\r\n            }\r\n            else {\r\n                this._arr = Array.from(this.iterable);\r\n            }\r\n            return this._arr;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LazySeq.prototype[Symbol.iterator] = function () {\r\n        return this.iterable[Symbol.iterator]();\r\n    };\r\n    LazySeq.prototype.filter = function (callback) {\r\n        return new LazyFilter(this.arr, [callback]);\r\n    };\r\n    LazySeq.prototype.map = function (callback) {\r\n        return new LazyMap1(this.arr, callback);\r\n    };\r\n    LazySeq.prototype.forEach = function (callback) {\r\n        if (isIndicesAble(this.iterable)) {\r\n            for (var i = 0; i < this.iterable.length; ++i) {\r\n                callback(this.iterable[i], i);\r\n            }\r\n            return;\r\n        }\r\n        var it = this[Symbol.iterator]();\r\n        for (var v = it.next(), i = 0; !v.done; v = it.next(), i++) {\r\n            callback(v.value, i);\r\n        }\r\n    };\r\n    LazySeq.prototype.some = function (callback) {\r\n        if (isIndicesAble(this.iterable)) {\r\n            for (var i = 0; i < this.iterable.length; ++i) {\r\n                if (callback(this.iterable[i], i)) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n        var it = this[Symbol.iterator]();\r\n        for (var v = it.next(), i = 0; !v.done; v = it.next(), i++) {\r\n            if (callback(v.value, i)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    LazySeq.prototype.every = function (callback) {\r\n        if (isIndicesAble(this.iterable)) {\r\n            for (var i = 0; i < this.iterable.length; ++i) {\r\n                if (!callback(this.iterable[i], i)) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        var it = this[Symbol.iterator]();\r\n        for (var v = it.next(), i = 0; !v.done; v = it.next(), i++) {\r\n            if (!callback(v.value, i)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    LazySeq.prototype.reduce = function (callback, initial) {\r\n        if (isIndicesAble(this.iterable)) {\r\n            var acc_2 = initial;\r\n            for (var i = 0; i < this.iterable.length; ++i) {\r\n                acc_2 = callback(acc_2, this.iterable[i], i);\r\n            }\r\n            return acc_2;\r\n        }\r\n        var it = this[Symbol.iterator]();\r\n        var acc = initial;\r\n        for (var v = it.next(), i = 0; !v.done; v = it.next(), i++) {\r\n            acc = callback(acc, v.value, i);\r\n        }\r\n        return acc;\r\n    };\r\n    Object.defineProperty(LazySeq.prototype, \"length\", {\r\n        get: function () {\r\n            var it = this.iterable;\r\n            if (isIndicesAble(it)) {\r\n                return it.length;\r\n            }\r\n            if (it instanceof Set || it instanceof Map) {\r\n                return it.size;\r\n            }\r\n            return this.arr.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return LazySeq;\r\n}());\r\n/**\r\n * @internal\r\n */\r\nexport function lazySeq(iterable) {\r\n    return new LazySeq(iterable);\r\n}\r\nvar ConcatSequence = /** @class */ (function () {\r\n    function ConcatSequence(seqs) {\r\n        this.seqs = seqs;\r\n        //\r\n    }\r\n    ConcatSequence.prototype[Symbol.iterator] = function () {\r\n        var seqs = Array.from(this.seqs);\r\n        var it = seqs.shift()[Symbol.iterator]();\r\n        var next = function () {\r\n            var v = it.next();\r\n            if (!v.done) {\r\n                return v;\r\n            }\r\n            if (seqs.length === 0) {\r\n                // last last\r\n                return v;\r\n            }\r\n            // next iterator and compute next element\r\n            it = seqs.shift()[Symbol.iterator]();\r\n            return next();\r\n        };\r\n        return { next: next };\r\n    };\r\n    ConcatSequence.prototype.filter = function (callback) {\r\n        return new LazyFilter(this, [callback]);\r\n    };\r\n    ConcatSequence.prototype.map = function (callback) {\r\n        return new LazyMap1(this, callback);\r\n    };\r\n    ConcatSequence.prototype.forEach = function (callback) {\r\n        this.seqs.forEach(function (s) { return s.forEach(callback); });\r\n    };\r\n    ConcatSequence.prototype.some = function (callback) {\r\n        return this.seqs.some(function (s) { return s.some(callback); });\r\n    };\r\n    ConcatSequence.prototype.every = function (callback) {\r\n        return this.seqs.every(function (s) { return s.every(callback); });\r\n    };\r\n    ConcatSequence.prototype.reduce = function (callback, initial) {\r\n        return this.seqs.reduce(function (acc, s) { return s.reduce(callback, acc); }, initial);\r\n    };\r\n    Object.defineProperty(ConcatSequence.prototype, \"length\", {\r\n        get: function () {\r\n            return this.seqs.reduce(function (a, b) { return a + b.length; }, 0);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ConcatSequence;\r\n}());\r\nexport function concatSeq(seq1, seq2) {\r\n    var seqs = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        seqs[_i - 2] = arguments[_i];\r\n    }\r\n    if (seq2) {\r\n        return new ConcatSequence([seq1, seq2].concat(seqs));\r\n    }\r\n    return new ConcatSequence(seq1);\r\n}\r\n//# sourceMappingURL=interable.js.map","// function workerMain(self: IPoorManWorkerScope) {\r\n//   self.addEventListener('message', (evt) => {\r\n//     self.postMessage(`Worker: ${evt.data} - Polo`);\r\n//   });\r\n// }\r\n/**\r\n * @internal\r\n */\r\nexport function toFunctionBody(f) {\r\n    var source = f.toString();\r\n    return source.slice(source.indexOf('{') + 1, source.lastIndexOf('}'));\r\n}\r\n/**\r\n * create a blob out of the given function or string\r\n * @internal\r\n */\r\nexport function createWorkerCodeBlob(fs) {\r\n    var sources = fs.map(function (d) { return d.toString(); }).join('\\n\\n');\r\n    var blob = new Blob([sources], { type: 'application/javascript' });\r\n    return URL.createObjectURL(blob);\r\n}\r\nvar MIN_WORKER_THREADS = 1;\r\nvar MAX_WORKER_THREADS = Math.max(navigator.hardwareConcurrency - 1, 1); // keep one for the ui\r\nvar THREAD_CLEANUP_TIME = 10000; // 10s\r\n/**\r\n * task scheduler based on web worker\r\n * @internal\r\n */\r\nvar WorkerTaskScheduler = /** @class */ (function () {\r\n    function WorkerTaskScheduler(blob) {\r\n        var _this = this;\r\n        this.blob = blob;\r\n        this.workers = [];\r\n        this.cleanUpWorkerTimer = -1;\r\n        /**\r\n         * worker task id\r\n         */\r\n        this.workerTaskCounter = 0;\r\n        this.cleanUpWorker = function () {\r\n            // delete workers when they are not needed anymore and empty\r\n            while (_this.workers.length > MIN_WORKER_THREADS) {\r\n                var toFree = _this.workers.findIndex(function (d) { return d.tasks.size === 0; });\r\n                if (toFree < 0) {\r\n                    break;\r\n                }\r\n                var w = _this.workers.splice(toFree, 1)[0];\r\n                w.worker.terminate();\r\n            }\r\n            // maybe reschedule\r\n            _this.finshedTask();\r\n        };\r\n        for (var i = 0; i < MIN_WORKER_THREADS; ++i) {\r\n            var w = new Worker(blob);\r\n            this.workers.push({ worker: w, tasks: new Set(), refs: new Set(), index: i });\r\n        }\r\n    }\r\n    WorkerTaskScheduler.prototype.terminate = function () {\r\n        this.workers.splice(0, this.workers.length).forEach(function (w) { return w.worker.terminate(); });\r\n    };\r\n    WorkerTaskScheduler.prototype.checkOutWorker = function () {\r\n        if (this.cleanUpWorkerTimer >= 0) {\r\n            clearTimeout(this.cleanUpWorkerTimer);\r\n            this.cleanUpWorkerTimer = -1;\r\n        }\r\n        var emptyWorker = this.workers.find(function (d) { return d.tasks.size === 0; });\r\n        if (emptyWorker) {\r\n            return emptyWorker;\r\n        }\r\n        if (this.workers.length >= MAX_WORKER_THREADS) {\r\n            // find the one with the fewest tasks\r\n            return this.workers.reduce(function (a, b) { return a == null || a.tasks.size > b.tasks.size ? b : a; }, null);\r\n        }\r\n        // create new one\r\n        var r = {\r\n            worker: new Worker(this.blob),\r\n            tasks: new Set(),\r\n            refs: new Set(),\r\n            index: this.workers.length,\r\n        };\r\n        this.workers.push(r);\r\n        return r;\r\n    };\r\n    WorkerTaskScheduler.prototype.finshedTask = function () {\r\n        if (this.cleanUpWorkerTimer === -1 && this.workers.length > MIN_WORKER_THREADS) {\r\n            this.cleanUpWorkerTimer = self.setTimeout(this.cleanUpWorker, THREAD_CLEANUP_TIME);\r\n        }\r\n    };\r\n    WorkerTaskScheduler.prototype.pushStats = function (type, args, refData, data, refIndices, indices) {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            var uid = _this.workerTaskCounter++;\r\n            var _a = _this.checkOutWorker(), worker = _a.worker, tasks = _a.tasks, refs = _a.refs;\r\n            var receiver = function (msg) {\r\n                var r = msg.data;\r\n                if (r.uid !== uid || r.type !== type) {\r\n                    return;\r\n                }\r\n                // console.log('worker', index, uid, 'finish', r);\r\n                worker.removeEventListener('message', receiver);\r\n                tasks.delete(uid);\r\n                _this.finshedTask();\r\n                resolve(r.stats);\r\n            };\r\n            worker.addEventListener('message', receiver);\r\n            tasks.add(uid);\r\n            var msg = Object.assign({\r\n                type: type,\r\n                uid: uid,\r\n                refData: refData,\r\n                refIndices: refIndices || null\r\n            }, args);\r\n            if (!refData || !refs.has(refData)) {\r\n                // need to transfer to worker\r\n                msg.data = data;\r\n                if (refData) { // save that this worker has this ref\r\n                    refs.add(refData);\r\n                }\r\n                // console.log(index, 'set ref (i)', refData);\r\n            }\r\n            if (indices && (!refIndices || !refs.has(refIndices))) {\r\n                // need to transfer\r\n                msg.indices = indices;\r\n                if (refIndices) {\r\n                    refs.add(refIndices);\r\n                }\r\n                // console.log(index, 'set ref (i)', refIndices);\r\n            }\r\n            // console.log('worker', index, uid, msg);\r\n            worker.postMessage(msg);\r\n        });\r\n    };\r\n    WorkerTaskScheduler.prototype.push = function (type, args, transferAbles, toResult) {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            var uid = _this.workerTaskCounter++;\r\n            var _a = _this.checkOutWorker(), worker = _a.worker, tasks = _a.tasks;\r\n            var receiver = function (msg) {\r\n                var r = msg.data;\r\n                if (r.uid !== uid || r.type !== type) {\r\n                    return;\r\n                }\r\n                // console.log('worker', index, uid, 'finish', r);\r\n                worker.removeEventListener('message', receiver);\r\n                tasks.delete(uid);\r\n                _this.finshedTask();\r\n                resolve(toResult ? toResult(r) : r);\r\n            };\r\n            worker.addEventListener('message', receiver);\r\n            tasks.add(uid);\r\n            var msg = Object.assign({\r\n                type: type,\r\n                uid: uid\r\n            }, args);\r\n            // console.log('worker', index, uid, msg);\r\n            worker.postMessage(msg, transferAbles);\r\n        });\r\n    };\r\n    WorkerTaskScheduler.prototype.setRef = function (ref, data) {\r\n        for (var _i = 0, _a = this.workers; _i < _a.length; _i++) {\r\n            var w = _a[_i];\r\n            w.refs.add(ref);\r\n        }\r\n        this.broadCast('setRef', {\r\n            ref: ref,\r\n            data: data\r\n        });\r\n    };\r\n    WorkerTaskScheduler.prototype.deleteRef = function (ref, startsWith) {\r\n        if (startsWith === void 0) { startsWith = false; }\r\n        var uid = this.workerTaskCounter++;\r\n        var msg = {\r\n            type: 'deleteRef',\r\n            uid: uid,\r\n            ref: ref,\r\n            startsWith: startsWith\r\n        };\r\n        for (var _i = 0, _a = this.workers; _i < _a.length; _i++) {\r\n            var w = _a[_i];\r\n            // console.log(w.index, 'delete ref', ref, startsWith);\r\n            w.worker.postMessage(msg);\r\n            if (!startsWith) {\r\n                w.refs.delete(ref);\r\n                continue;\r\n            }\r\n            for (var _b = 0, _c = Array.from(w.refs); _b < _c.length; _b++) {\r\n                var r = _c[_b];\r\n                if (r.startsWith(ref)) {\r\n                    w.refs.delete(r);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    WorkerTaskScheduler.prototype.deleteRefs = function () {\r\n        var uid = this.workerTaskCounter++;\r\n        var msg = {\r\n            type: 'deleteRef',\r\n            uid: uid,\r\n            ref: '',\r\n            startsWith: true\r\n        };\r\n        for (var _i = 0, _a = this.workers; _i < _a.length; _i++) {\r\n            var w = _a[_i];\r\n            // console.log(w.index, 'delete refs');\r\n            w.worker.postMessage(msg);\r\n            w.refs.clear();\r\n        }\r\n    };\r\n    WorkerTaskScheduler.prototype.broadCast = function (type, args) {\r\n        var uid = this.workerTaskCounter++;\r\n        // don't store in tasks queue since there is no response\r\n        var msg = Object.assign({\r\n            type: type,\r\n            uid: uid\r\n        }, args);\r\n        // console.log('broadcast', msg);\r\n        for (var _i = 0, _a = this.workers; _i < _a.length; _i++) {\r\n            var w = _a[_i];\r\n            w.worker.postMessage(msg);\r\n        }\r\n    };\r\n    return WorkerTaskScheduler;\r\n}());\r\nexport { WorkerTaskScheduler };\r\n//# sourceMappingURL=worker.js.map","import { isIndicesAble } from './interable';\r\nimport { createWorkerCodeBlob, toFunctionBody } from './worker';\r\n/**\r\n * computes the optimal number of bins for a given array length\r\n * @internal\r\n * @param {number} length\r\n * @returns {number}\r\n */\r\nexport function getNumberOfBins(length) {\r\n    if (length === 0) {\r\n        return 1;\r\n    }\r\n    // as by default used in d3 the Sturges' formula\r\n    return Math.ceil(Math.log(length) / Math.LN2) + 1;\r\n}\r\nexport function min(values, acc) {\r\n    var min = Number.POSITIVE_INFINITY;\r\n    for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\r\n        var d = values_1[_i];\r\n        var v = acc ? acc(d) : d;\r\n        if (v < min) {\r\n            min = v;\r\n        }\r\n    }\r\n    return min;\r\n}\r\nexport function max(values, acc) {\r\n    var max = Number.NEGATIVE_INFINITY;\r\n    for (var _i = 0, values_2 = values; _i < values_2.length; _i++) {\r\n        var d = values_2[_i];\r\n        var v = acc ? acc(d) : d;\r\n        if (v > max) {\r\n            max = v;\r\n        }\r\n    }\r\n    return max;\r\n}\r\nexport function extent(values, acc) {\r\n    var max = Number.NEGATIVE_INFINITY;\r\n    var min = Number.POSITIVE_INFINITY;\r\n    for (var _i = 0, values_3 = values; _i < values_3.length; _i++) {\r\n        var d = values_3[_i];\r\n        var v = acc ? acc(d) : d;\r\n        if (v < min) {\r\n            min = v;\r\n        }\r\n        if (v > max) {\r\n            max = v;\r\n        }\r\n    }\r\n    return [min, max];\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function range(length) {\r\n    var r = new Array(length);\r\n    for (var i = 0; i < length; ++i) {\r\n        r[i] = i;\r\n    }\r\n    return r;\r\n}\r\n/**\r\n * an empty range\r\n * @internal\r\n */\r\nexport function empty(length) {\r\n    var r = new Array(length);\r\n    r.fill(null);\r\n    return r;\r\n}\r\n/**\r\n * computes the X quantile assumes the values are sorted\r\n * @internal\r\n */\r\nexport function quantile(values, quantile, length) {\r\n    if (length === void 0) { length = values.length; }\r\n    if (length === 0) {\r\n        return NaN;\r\n    }\r\n    var target = (length - 1) * quantile;\r\n    var index = Math.floor(target);\r\n    if (index === target) {\r\n        return values[index];\r\n    }\r\n    var v = values[index];\r\n    var vAfter = values[index + 1];\r\n    return v + (vAfter - v) * (target - index); // shift by change\r\n}\r\nexport function median(values, acc) {\r\n    var arr = acc ? values.map(acc) : values.slice();\r\n    arr.sort(function (a, b) { return (a < b ? -1 : (a > b ? 1 : 0)); });\r\n    return quantile(arr, 0.5);\r\n}\r\nfunction pushAll(push) {\r\n    return function (vs) {\r\n        if (!isIndicesAble(vs)) {\r\n            vs.forEach(push);\r\n            return;\r\n        }\r\n        // tslint:disable-next-line:prefer-for-of\r\n        for (var j = 0; j < vs.length; ++j) {\r\n            push(vs[j]);\r\n        }\r\n    };\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function boxplotBuilder(fixedLength) {\r\n    var min = Number.POSITIVE_INFINITY;\r\n    var max = Number.NEGATIVE_INFINITY;\r\n    var sum = 0;\r\n    var length = 0;\r\n    var missing = 0;\r\n    // if fixed size use the typed array else a regular array\r\n    var values = [];\r\n    var vs = fixedLength != null ? new Float32Array(fixedLength) : null;\r\n    var push = function (v) {\r\n        length += 1;\r\n        if (v == null || isNaN(v)) {\r\n            missing += 1;\r\n            return;\r\n        }\r\n        if (v < min) {\r\n            min = v;\r\n        }\r\n        if (v > max) {\r\n            max = v;\r\n        }\r\n        sum += v;\r\n    };\r\n    var pushAndSave = function (v) {\r\n        push(v);\r\n        if (vs) {\r\n            vs[length] = v;\r\n        }\r\n        else {\r\n            values.push(v);\r\n        }\r\n    };\r\n    var invalid = {\r\n        min: NaN,\r\n        max: NaN,\r\n        mean: NaN,\r\n        missing: missing,\r\n        count: length,\r\n        whiskerHigh: NaN,\r\n        whiskerLow: NaN,\r\n        outlier: [],\r\n        median: NaN,\r\n        q1: NaN,\r\n        q3: NaN\r\n    };\r\n    var buildImpl = function (s) {\r\n        var valid = length - missing;\r\n        var median = quantile(s, 0.5, valid);\r\n        var q1 = quantile(s, 0.25, valid);\r\n        var q3 = quantile(s, 0.75, valid);\r\n        var iqr = q3 - q1;\r\n        var left = q1 - 1.5 * iqr;\r\n        var right = q3 + 1.5 * iqr;\r\n        var outlier = [];\r\n        // look for the closests value which is bigger than the computed left\r\n        var whiskerLow = left;\r\n        // tslint:disable-next-line:prefer-for-of\r\n        for (var i = 0; i < valid; ++i) {\r\n            var v = s[i];\r\n            if (left < v) {\r\n                whiskerLow = v;\r\n                break;\r\n            }\r\n            // outlier\r\n            outlier.push(v);\r\n        }\r\n        // look for the closests value which is smaller than the computed right\r\n        var whiskerHigh = right;\r\n        var reversedOutliers = [];\r\n        for (var i = valid - 1; i >= 0; --i) {\r\n            var v = s[i];\r\n            if (v < right) {\r\n                whiskerHigh = v;\r\n                break;\r\n            }\r\n            // outlier\r\n            reversedOutliers.push(v);\r\n        }\r\n        outlier = outlier.concat(reversedOutliers.reverse());\r\n        return {\r\n            min: min,\r\n            max: max,\r\n            count: length,\r\n            missing: missing,\r\n            mean: sum / valid,\r\n            whiskerHigh: whiskerHigh,\r\n            whiskerLow: whiskerLow,\r\n            outlier: outlier,\r\n            median: median,\r\n            q1: q1,\r\n            q3: q3\r\n        };\r\n    };\r\n    var build = function () {\r\n        var valid = length - missing;\r\n        if (valid === 0) {\r\n            return invalid;\r\n        }\r\n        var s = vs ? vs.sort() : Float32Array.from(values).sort();\r\n        return buildImpl(s);\r\n    };\r\n    var buildArr = function (vs) {\r\n        var s = vs.slice().sort();\r\n        // tslint:disable-next-line:prefer-for-of\r\n        for (var j = 0; j < vs.length; ++j) {\r\n            push(vs[j]);\r\n        }\r\n        // missing are the last\r\n        return buildImpl(s);\r\n    };\r\n    return {\r\n        push: pushAndSave,\r\n        build: build,\r\n        buildArr: buildArr,\r\n        pushAll: pushAll(pushAndSave)\r\n    };\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function normalizedStatsBuilder(numberOfBins) {\r\n    var hist = [];\r\n    var x0 = 0;\r\n    var binWidth = 1. / numberOfBins;\r\n    for (var i = 0; i < numberOfBins; ++i, x0 += binWidth) {\r\n        hist.push({\r\n            x0: x0,\r\n            x1: x0 + binWidth,\r\n            count: 0\r\n        });\r\n    }\r\n    var bin1 = 0 + binWidth;\r\n    var binN = 1 - binWidth;\r\n    var toBin = function (v) {\r\n        if (v < bin1) {\r\n            return 0;\r\n        }\r\n        if (v >= binN) {\r\n            return numberOfBins - 1;\r\n        }\r\n        if (numberOfBins === 3) {\r\n            return 1;\r\n        }\r\n        var low = 1;\r\n        var high = numberOfBins - 1;\r\n        // binary search\r\n        while (low < high) {\r\n            var center = Math.floor((high + low) / 2);\r\n            if (v < hist[center].x1) {\r\n                high = center;\r\n            }\r\n            else {\r\n                low = center + 1;\r\n            }\r\n        }\r\n        return low;\r\n    };\r\n    // filter out NaN\r\n    var min = Number.POSITIVE_INFINITY;\r\n    var max = Number.NEGATIVE_INFINITY;\r\n    var sum = 0;\r\n    var length = 0;\r\n    var missing = 0;\r\n    var push = function (v) {\r\n        length += 1;\r\n        if (v == null || isNaN(v)) {\r\n            missing += 1;\r\n            return;\r\n        }\r\n        if (v < min) {\r\n            min = v;\r\n        }\r\n        if (v > max) {\r\n            max = v;\r\n        }\r\n        sum += v;\r\n        hist[toBin(v)].count++;\r\n    };\r\n    var build = function () {\r\n        var valid = length - missing;\r\n        if (valid === 0) {\r\n            return {\r\n                count: missing,\r\n                missing: missing,\r\n                min: NaN,\r\n                max: NaN,\r\n                mean: NaN,\r\n                hist: hist,\r\n                maxBin: 0\r\n            };\r\n        }\r\n        return {\r\n            count: length,\r\n            min: min,\r\n            max: max,\r\n            mean: sum / valid,\r\n            missing: missing,\r\n            hist: hist,\r\n            maxBin: hist.reduce(function (a, b) { return Math.max(a, b.count); }, 0)\r\n        };\r\n    };\r\n    return { push: push, build: build, pushAll: pushAll(push) };\r\n}\r\n/**\r\n * guesses the histogram granularity to use based on min and max date\r\n */\r\nfunction computeGranularity(min, max) {\r\n    if (min == null || max == null) {\r\n        return { histGranularity: 'year', hist: [] };\r\n    }\r\n    var hist = [];\r\n    if (max.getFullYear() - min.getFullYear() >= 2) {\r\n        // more than two years difference\r\n        var minYear = min.getFullYear();\r\n        var maxYear = max.getFullYear();\r\n        for (var i = minYear; i <= maxYear; ++i) {\r\n            hist.push({\r\n                x0: new Date(i, 0, 1),\r\n                x1: new Date(i + 1, 0, 1),\r\n                count: 0\r\n            });\r\n        }\r\n        return { hist: hist, histGranularity: 'year' };\r\n    }\r\n    if ((max.getTime() - min.getTime()) <= 1000 * 60 * 60 * 24 * 31) {\r\n        // less than a month use day\r\n        var x0_1 = new Date(min.getFullYear(), min.getMonth(), min.getDay());\r\n        while (x0_1 <= max) {\r\n            var x1 = new Date(x0_1);\r\n            x1.setDate(x1.getDate() + 1);\r\n            hist.push({\r\n                x0: x0_1,\r\n                x1: x1,\r\n                count: 0\r\n            });\r\n            x0_1 = x1;\r\n        }\r\n        return { hist: hist, histGranularity: 'day' };\r\n    }\r\n    // by month\r\n    var x0 = new Date(min.getFullYear(), min.getMonth(), 1);\r\n    while (x0 <= max) {\r\n        var x1 = new Date(x0);\r\n        x1.setMonth(x1.getMonth() + 1);\r\n        hist.push({\r\n            x0: x0,\r\n            x1: x1,\r\n            count: 0\r\n        });\r\n        x0 = x1;\r\n    }\r\n    return { hist: hist, histGranularity: 'month' };\r\n}\r\nfunction pushDateHist(hist, v, count) {\r\n    if (count === void 0) { count = 1; }\r\n    if (v < hist[0].x1) {\r\n        hist[0].count += count;\r\n        return;\r\n    }\r\n    var l = hist.length - 1;\r\n    if (v > hist[l].x0) {\r\n        hist[l].count += count;\r\n        return;\r\n    }\r\n    if (l === 2) {\r\n        hist[1].count += count;\r\n        return;\r\n    }\r\n    var low = 1;\r\n    var high = l;\r\n    // binary search\r\n    while (low < high) {\r\n        var center = Math.floor((high + low) / 2);\r\n        if (v < hist[center].x1) {\r\n            high = center;\r\n        }\r\n        else {\r\n            low = center + 1;\r\n        }\r\n    }\r\n    hist[low].count += count;\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function dateStatsBuilder(template) {\r\n    var min = null;\r\n    var max = null;\r\n    var count = 0;\r\n    var missing = 0;\r\n    // yyyymmdd, count\r\n    var byDay = new Map();\r\n    var templateHist = template ? template.hist.map(function (d) { return ({ x0: d.x0, x1: d.x1, count: 0 }); }) : null;\r\n    var push = function (v) {\r\n        count += 1;\r\n        if (!v || v == null) {\r\n            missing += 1;\r\n            return;\r\n        }\r\n        if (min == null || v < min) {\r\n            min = v;\r\n        }\r\n        if (max == null || v > max) {\r\n            max = v;\r\n        }\r\n        if (templateHist) {\r\n            pushDateHist(templateHist, v, 1);\r\n            return;\r\n        }\r\n        var key = v.getFullYear() * 10000 + v.getMonth() * 100 + v.getDate();\r\n        if (byDay.has(key)) {\r\n            byDay.get(key).count++;\r\n        }\r\n        else {\r\n            byDay.set(key, { count: 1, x: v });\r\n        }\r\n    };\r\n    var build = function () {\r\n        if (templateHist) {\r\n            return {\r\n                min: min,\r\n                max: max,\r\n                missing: missing,\r\n                count: count,\r\n                maxBin: templateHist.reduce(function (acc, h) { return Math.max(acc, h.count); }, 0),\r\n                hist: templateHist,\r\n                histGranularity: template.histGranularity\r\n            };\r\n        }\r\n        // copy template else derive\r\n        var _a = computeGranularity(min, max), histGranularity = _a.histGranularity, hist = _a.hist;\r\n        byDay.forEach(function (v) { return pushDateHist(hist, v.x, v.count); });\r\n        return {\r\n            min: min,\r\n            max: max,\r\n            missing: missing,\r\n            count: count,\r\n            maxBin: hist.reduce(function (acc, h) { return Math.max(acc, h.count); }, 0),\r\n            hist: hist,\r\n            histGranularity: histGranularity\r\n        };\r\n    };\r\n    return { push: push, build: build, pushAll: pushAll(push) };\r\n}\r\n/**\r\n * computes a categorical histogram\r\n * @param arr the data array\r\n * @param categories the list of known categories\r\n * @returns {{hist: {cat: string, y: number}[]}}\r\n * @internal\r\n */\r\nexport function categoricalStatsBuilder(categories) {\r\n    var m = new Map();\r\n    categories.forEach(function (cat) { return m.set(cat.name, 0); });\r\n    var missing = 0;\r\n    var count = 0;\r\n    var push = function (v) {\r\n        count += 1;\r\n        if (v == null) {\r\n            missing += 1;\r\n        }\r\n        else {\r\n            m.set(v.name, (m.get(v.name) || 0) + 1);\r\n        }\r\n    };\r\n    var build = function () {\r\n        var entries = categories.map(function (d) { return ({ cat: d.name, count: m.get(d.name) }); });\r\n        var maxBin = entries.reduce(function (a, b) { return Math.max(a, b.count); }, Number.NEGATIVE_INFINITY);\r\n        return {\r\n            maxBin: maxBin,\r\n            hist: entries,\r\n            count: count,\r\n            missing: missing\r\n        };\r\n    };\r\n    return { push: push, build: build, pushAll: pushAll(push) };\r\n}\r\n/**\r\n * round to the given commas similar to d3.round\r\n * @param {number} v\r\n * @param {number} precision\r\n * @returns {number}\r\n * @internal\r\n */\r\nexport function round(v, precision) {\r\n    if (precision === void 0) { precision = 0; }\r\n    if (precision === 0) {\r\n        return Math.round(v);\r\n    }\r\n    var scale = Math.pow(10, precision);\r\n    return Math.round(v * scale) / scale;\r\n}\r\n/**\r\n * compares two number whether they are similar up to delta\r\n * @param {number} a first numbre\r\n * @param {number} b second number\r\n * @param {number} delta\r\n * @returns {boolean} a and b are similar\r\n * @internal\r\n */\r\nexport function similar(a, b, delta) {\r\n    if (delta === void 0) { delta = 0.5; }\r\n    if (a === b) {\r\n        return true;\r\n    }\r\n    return Math.abs(a - b) < delta;\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function isPromiseLike(value) {\r\n    return value instanceof Promise || typeof value.then === 'function';\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function createIndexArray(length, dataSize) {\r\n    if (dataSize === void 0) { dataSize = length; }\r\n    if (dataSize <= 255) {\r\n        return new Uint8Array(length);\r\n    }\r\n    if (dataSize <= 65535) {\r\n        return new Uint16Array(length);\r\n    }\r\n    return new Uint32Array(length);\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function toIndexArray(arr, maxDataIndex) {\r\n    if (arr instanceof Uint8Array || arr instanceof Uint16Array || arr instanceof Uint32Array) {\r\n        return arr.slice();\r\n    }\r\n    var l = maxDataIndex != null ? maxDataIndex : arr.length;\r\n    if (l <= 255) {\r\n        return Uint8Array.from(arr);\r\n    }\r\n    if (l <= 65535) {\r\n        return Uint16Array.from(arr);\r\n    }\r\n    return Uint32Array.from(arr);\r\n}\r\nfunction createLike(template, total, maxDataIndex) {\r\n    if (template instanceof Uint8Array) {\r\n        return new Uint8Array(total);\r\n    }\r\n    if (template instanceof Uint16Array) {\r\n        return new Uint16Array(total);\r\n    }\r\n    if (template instanceof Uint32Array) {\r\n        return new Uint32Array(total);\r\n    }\r\n    return createIndexArray(total, maxDataIndex);\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function joinIndexArrays(groups, maxDataIndex) {\r\n    switch (groups.length) {\r\n        case 0:\r\n            return [];\r\n        case 1:\r\n            return groups[0];\r\n        default:\r\n            var total = groups.reduce(function (a, b) { return a + b.length; }, 0);\r\n            var r = createLike(groups[0], total, maxDataIndex);\r\n            var shift = 0;\r\n            for (var _i = 0, groups_1 = groups; _i < groups_1.length; _i++) {\r\n                var g = groups_1[_i];\r\n                r.set(g, shift);\r\n                shift += g.length;\r\n            }\r\n            return r;\r\n    }\r\n}\r\nfunction asc(a, b) {\r\n    return a < b ? -1 : ((a > b) ? 1 : 0);\r\n}\r\nfunction desc(a, b) {\r\n    return a < b ? 1 : ((a > b) ? -1 : 0);\r\n}\r\n/**\r\n * sort the given index array based on the lookup array\r\n * @internal\r\n */\r\nexport function sortComplex(indices, comparators) {\r\n    if (indices.length < 2) {\r\n        return indices;\r\n    }\r\n    switch (comparators.length) {\r\n        case 0:\r\n            // sort by indices\r\n            return indices.sort();\r\n        case 1:\r\n            var c_1 = comparators[0].asc ? asc : desc;\r\n            var cLookup_1 = comparators[0].lookup;\r\n            return indices.sort(function (a, b) {\r\n                var r = c_1(cLookup_1[a], cLookup_1[b]);\r\n                return r !== 0 ? r : a - b;\r\n            });\r\n        case 2:\r\n            var c1_1 = comparators[0].asc ? asc : desc;\r\n            var c1Lookup_1 = comparators[0].lookup;\r\n            var c2_1 = comparators[1].asc ? asc : desc;\r\n            var c2Lookup_1 = comparators[1].lookup;\r\n            return indices.sort(function (a, b) {\r\n                var r = c1_1(c1Lookup_1[a], c1Lookup_1[b]);\r\n                r = r !== 0 ? r : c2_1(c2Lookup_1[a], c2Lookup_1[b]);\r\n                return r !== 0 ? r : a - b;\r\n            });\r\n        default:\r\n            var l_1 = comparators.length;\r\n            var fs_1 = comparators.map(function (d) { return d.asc ? asc : desc; });\r\n            return indices.sort(function (a, b) {\r\n                for (var i = 0; i < l_1; ++i) {\r\n                    var l_2 = comparators[i].lookup;\r\n                    var r = fs_1[i](l_2[a], l_2[b]);\r\n                    if (r !== 0) {\r\n                        return r;\r\n                    }\r\n                }\r\n                return a - b;\r\n            });\r\n    }\r\n}\r\n/**\r\n * helper to build a value cache for dates, use dateValueCache2Value to convert back\r\n * @internal\r\n */\r\nexport function dateValueCacheBuilder(length) {\r\n    var vs = new Float64Array(length);\r\n    var i = 0;\r\n    return {\r\n        push: function (d) { return vs[i++] = d == null ? NaN : d.getTime(); },\r\n        cache: vs\r\n    };\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function dateValueCache2Value(v) {\r\n    return isNaN(v) ? null : new Date(v);\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function categoricalValueCacheBuilder(length, categories) {\r\n    var vs = createIndexArray(length, categories.length + 1);\r\n    var name2index = new Map();\r\n    for (var i_1 = 0; i_1 < categories.length; ++i_1) {\r\n        name2index.set(categories[i_1].name, i_1 + 1); // shift by one for missing = 0\r\n    }\r\n    var i = 0;\r\n    return {\r\n        push: function (d) { return vs[i++] = d == null ? 0 : name2index.get(d.name) || 0; },\r\n        cache: vs\r\n    };\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function categoricalValueCache2Value(v, categories) {\r\n    return v === 0 ? null : categories[v - 1];\r\n}\r\nfunction sortWorkerMain() {\r\n    var wself = self;\r\n    // stored refs to avoid duplicate copy\r\n    var refs = new Map();\r\n    var sort = function (r) {\r\n        if (r.sortOrders) {\r\n            sortComplex(r.indices, r.sortOrders);\r\n        }\r\n        var order = r.indices;\r\n        wself.postMessage({\r\n            type: r.type,\r\n            uid: r.uid,\r\n            ref: r.ref,\r\n            order: order\r\n        }, [r.indices.buffer]);\r\n    };\r\n    var setRef = function (r) {\r\n        if (r.data) {\r\n            refs.set(r.ref, r.data);\r\n        }\r\n        else {\r\n            refs.delete(r.ref);\r\n        }\r\n    };\r\n    var deleteRef = function (r) {\r\n        if (!r.startsWith) {\r\n            refs.delete(r.ref);\r\n            return;\r\n        }\r\n        for (var _i = 0, _a = Array.from(refs.keys()); _i < _a.length; _i++) {\r\n            var key = _a[_i];\r\n            if (key.startsWith(r.ref)) {\r\n                refs.delete(key);\r\n            }\r\n        }\r\n    };\r\n    var resolveRefs = function (r) {\r\n        // resolve refs or save the new data\r\n        var data = r.data ? r.data : refs.get(r.refData);\r\n        var indices = r.indices ? r.indices : (r.refIndices ? refs.get(r.refIndices) : undefined);\r\n        if (r.refData) {\r\n            refs.set(r.refData, data);\r\n        }\r\n        if (r.refIndices) {\r\n            refs.set(r.refIndices, indices);\r\n        }\r\n        return { data: data, indices: indices };\r\n    };\r\n    var dateStats = function (r) {\r\n        var _a = resolveRefs(r), data = _a.data, indices = _a.indices;\r\n        var b = dateStatsBuilder(r.template);\r\n        if (indices) {\r\n            // tslint:disable-next-line:prefer-for-of\r\n            for (var ii = 0; ii < indices.length; ++ii) {\r\n                var v = data[indices[ii]];\r\n                b.push(dateValueCache2Value(v));\r\n            }\r\n        }\r\n        else {\r\n            // tslint:disable-next-line:prefer-for-of\r\n            for (var i = 0; i < data.length; ++i) {\r\n                b.push(dateValueCache2Value(data[i]));\r\n            }\r\n        }\r\n        wself.postMessage({\r\n            type: r.type,\r\n            uid: r.uid,\r\n            stats: b.build()\r\n        });\r\n    };\r\n    var categoricalStats = function (r) {\r\n        var _a = resolveRefs(r), data = _a.data, indices = _a.indices;\r\n        var cats = r.categories.map(function (name) { return ({ name: name }); });\r\n        var b = categoricalStatsBuilder(cats);\r\n        if (indices) {\r\n            // tslint:disable-next-line:prefer-for-of\r\n            for (var ii = 0; ii < indices.length; ++ii) {\r\n                b.push(categoricalValueCache2Value(data[indices[ii]], cats));\r\n            }\r\n        }\r\n        else {\r\n            // tslint:disable-next-line:prefer-for-of\r\n            for (var i = 0; i < data.length; ++i) {\r\n                b.push(categoricalValueCache2Value(data[i], cats));\r\n            }\r\n        }\r\n        wself.postMessage({\r\n            type: r.type,\r\n            uid: r.uid,\r\n            stats: b.build()\r\n        });\r\n    };\r\n    var numberStats = function (r) {\r\n        var _a = resolveRefs(r), data = _a.data, indices = _a.indices;\r\n        var b = normalizedStatsBuilder(r.numberOfBins);\r\n        if (indices) {\r\n            // tslint:disable-next-line:prefer-for-of\r\n            for (var ii = 0; ii < indices.length; ++ii) {\r\n                b.push(data[indices[ii]]);\r\n            }\r\n        }\r\n        else {\r\n            // tslint:disable-next-line:prefer-for-of\r\n            for (var i = 0; i < data.length; ++i) {\r\n                b.push(data[i]);\r\n            }\r\n        }\r\n        wself.postMessage({\r\n            type: r.type,\r\n            uid: r.uid,\r\n            stats: b.build()\r\n        });\r\n    };\r\n    var boxplotStats = function (r) {\r\n        var _a = resolveRefs(r), data = _a.data, indices = _a.indices;\r\n        var b = boxplotBuilder(indices ? indices.length : undefined);\r\n        var stats;\r\n        if (!indices) {\r\n            stats = b.buildArr(data);\r\n        }\r\n        else {\r\n            // tslint:disable-next-line:prefer-for-of\r\n            for (var ii = 0; ii < indices.length; ++ii) {\r\n                b.push(data[indices[ii]]);\r\n            }\r\n            stats = b.build();\r\n        }\r\n        wself.postMessage({\r\n            type: r.type,\r\n            uid: r.uid,\r\n            stats: stats\r\n        });\r\n    };\r\n    // message type to handler function\r\n    var msgHandlers = {\r\n        sort: sort,\r\n        setRef: setRef,\r\n        deleteRef: deleteRef,\r\n        dateStats: dateStats,\r\n        categoricalStats: categoricalStats,\r\n        numberStats: numberStats,\r\n        boxplotStats: boxplotStats\r\n    };\r\n    wself.addEventListener('message', function (evt) {\r\n        var r = evt.data;\r\n        if (typeof r.uid !== 'number' || typeof r.type !== 'string') {\r\n            return;\r\n        }\r\n        var h = msgHandlers[r.type];\r\n        if (h) {\r\n            h(r);\r\n        }\r\n    });\r\n}\r\n/**\r\n * copy source code of a worker and create a blob out of it\r\n * to avoid webpack imports all the code functions need to be in this file\r\n * @internal\r\n */\r\nexport function createWorkerBlob() {\r\n    return createWorkerCodeBlob([\r\n        pushAll.toString(),\r\n        quantile.toString(),\r\n        normalizedStatsBuilder.toString(),\r\n        boxplotBuilder.toString(),\r\n        computeGranularity.toString(),\r\n        pushDateHist.toString(),\r\n        dateStatsBuilder.toString(),\r\n        categoricalStatsBuilder.toString(),\r\n        createIndexArray.toString(),\r\n        asc.toString(),\r\n        desc.toString(),\r\n        sortComplex.toString(),\r\n        dateValueCache2Value.toString(),\r\n        categoricalValueCache2Value.toString(),\r\n        toFunctionBody(sortWorkerMain)\r\n    ]);\r\n}\r\n//# sourceMappingURL=math.js.map","import * as tslib_1 from \"tslib\";\r\nimport { extent, resolveValue } from '../../internal';\r\nexport function build(props, _data) {\r\n    var column = props.column;\r\n    var desc = { column: column, type: props.type, label: column ? column[0].toUpperCase() + column.slice(1) : props.type };\r\n    ['label', 'description', 'frozen', 'width', 'renderer', 'groupRenderer', 'summaryRenderer', 'visible', 'fixed'].forEach(function (key) {\r\n        if (props.hasOwnProperty(key)) {\r\n            desc[key] = props[key];\r\n        }\r\n    });\r\n    if (props.custom) { // merge custom attributes\r\n        Object.assign(desc, props.custom);\r\n    }\r\n    if (props.asMap) {\r\n        console.assert(['categorical', 'date', 'number', 'string', 'link'].includes(desc.type));\r\n        desc.type += 'Map';\r\n    }\r\n    if (props.asArray != null) {\r\n        console.assert(['boolean', 'categorical', 'date', 'number', 'string', 'link'].includes(desc.type));\r\n        desc.type += 's';\r\n        var a = desc;\r\n        var labels = props.asArray;\r\n        if (Array.isArray(labels)) {\r\n            a.labels = labels;\r\n            a.dataLength = labels.length;\r\n        }\r\n        else if (typeof labels === 'number') {\r\n            a.dataLength = labels;\r\n        }\r\n    }\r\n    return desc;\r\n}\r\nexport function buildCategorical(props, data) {\r\n    var desc = build(tslib_1.__assign({}, props, { type: 'categorical' }));\r\n    if (props.asOrdinal) {\r\n        desc.type = 'ordinal';\r\n    }\r\n    if (props.missingCategory) {\r\n        desc.missingCategory = props.missingCategory;\r\n    }\r\n    if (props.asSet) {\r\n        if (typeof props.asSet === 'string') {\r\n            desc.separator = props.asSet;\r\n        }\r\n        desc.type = 'set';\r\n    }\r\n    if (!props.categories) {\r\n        // derive categories\r\n        var categories = new Set(data.map(function (d) { return resolveValue(d, desc.column); }));\r\n        desc.categories = Array.from(categories).sort();\r\n    }\r\n    else {\r\n        desc.categories = props.categories;\r\n    }\r\n    return desc;\r\n}\r\nexport function buildDate(props) {\r\n    var desc = build(tslib_1.__assign({}, props, { type: 'date' }));\r\n    ['dateFormat', 'dateParse'].forEach(function (key) {\r\n        if (props.hasOwnProperty(key)) {\r\n            desc[key] = props[key];\r\n        }\r\n    });\r\n    return desc;\r\n}\r\nexport function buildHierarchy(props) {\r\n    var desc = build(tslib_1.__assign({}, props, { type: 'hierarchy' }));\r\n    ['hierarchy', 'hierarchySeparator'].forEach(function (key) {\r\n        if (props.hasOwnProperty(key)) {\r\n            desc[key] = props[key];\r\n        }\r\n    });\r\n    return desc;\r\n}\r\nexport function buildNumber(props, data) {\r\n    var desc = build(tslib_1.__assign({}, props, { type: 'number' }));\r\n    var domain = props.domain ? props.domain : extent(data, function (d) { return resolveValue(d, desc.column); });\r\n    if (props.hasOwnProperty('color')) {\r\n        desc.colorMapping = props.color;\r\n    }\r\n    ['sort', 'colorMapping'].forEach(function (key) {\r\n        if (props.hasOwnProperty(key)) {\r\n            desc[key] = props[key];\r\n        }\r\n    });\r\n    if (props.scripted) {\r\n        desc.map = { domain: domain, code: props.scripted, type: 'script' };\r\n    }\r\n    else if (!props.mapping || props.mapping === 'linear') {\r\n        desc.domain = domain;\r\n        if (props.range) {\r\n            desc.range = props.range;\r\n        }\r\n    }\r\n    else {\r\n        desc.map = {\r\n            type: props.mapping,\r\n            domain: domain,\r\n            range: props.range || [0, 1]\r\n        };\r\n    }\r\n    return desc;\r\n}\r\nexport function buildString(props) {\r\n    var desc = build(tslib_1.__assign({}, props, { type: 'string' }));\r\n    ['pattern', 'patternTemplate', 'alignment'].forEach(function (key) {\r\n        if (props.hasOwnProperty(key)) {\r\n            desc[key] = props[key];\r\n        }\r\n    });\r\n    if (props.editable) {\r\n        desc.type = 'annotate';\r\n    }\r\n    if (props.pattern) {\r\n        desc.type = 'link';\r\n    }\r\n    if (props.html) {\r\n        desc.escape = false;\r\n    }\r\n    return desc;\r\n}\r\nexport function buildBoolean(props) {\r\n    var desc = build(tslib_1.__assign({}, props, { type: 'boolean' }));\r\n    ['trueMarker', 'falseMarker'].forEach(function (key) {\r\n        if (props.hasOwnProperty(key)) {\r\n            desc[key] = props[key];\r\n        }\r\n    });\r\n    return desc;\r\n}\r\nexport function buildActions(props) {\r\n    var desc = build(tslib_1.__assign({}, props, { type: 'actions' }));\r\n    ['actions', 'groupActions'].forEach(function (key) {\r\n        if (props.hasOwnProperty(key)) {\r\n            desc[key] = props[key];\r\n        }\r\n    });\r\n    return desc;\r\n}\r\n//# sourceMappingURL=column.js.map","/** @internal */\r\nexport function equalArrays(a, b) {\r\n    if (a.length !== b.length) {\r\n        return false;\r\n    }\r\n    return a.every(function (ai, i) { return ai === b[i]; });\r\n}\r\n/**\r\n * converts a given id to css compatible one\r\n * @param id\r\n * @return {string|void}\r\n * @internal\r\n */\r\nexport function fixCSS(id) {\r\n    return id.replace(/[\\s!#$%&'()*+,.\\/:;<=>?@\\[\\\\\\]^`{|}~]+/g, '_'); //replace non css stuff to _\r\n}\r\n/**\r\n * clear node clearing\r\n * @param node\r\n * @internal\r\n */\r\nexport function clear(node) {\r\n    while (node.lastChild) {\r\n        node.removeChild(node.lastChild);\r\n    }\r\n    return node;\r\n}\r\n/**\r\n * @internal\r\n * to avoid [].concat(...) which doesn't work for large arrays\r\n * @param arrs\r\n */\r\nexport function concat(arrs) {\r\n    var r = [];\r\n    for (var _i = 0, arrs_1 = arrs; _i < arrs_1.length; _i++) {\r\n        var a = arrs_1[_i];\r\n        if (!Array.isArray(a)) {\r\n            r.push(a);\r\n            continue;\r\n        }\r\n        for (var _a = 0, a_1 = a; _a < a_1.length; _a++) {\r\n            var ai = a_1[_a];\r\n            r.push(ai);\r\n        }\r\n    }\r\n    return r;\r\n}\r\n/**\r\n * generates a label for the given sort method\r\n * @internal\r\n * @param method sort method\r\n */\r\nexport function getSortLabel(method) {\r\n    switch (method) {\r\n        case 'min':\r\n            return 'Mininum';\r\n        case 'max':\r\n            return 'Maximum';\r\n        case 'median':\r\n            return 'Median';\r\n        case 'mean':\r\n            return 'Mean';\r\n        case 'q1':\r\n            return '25% Quantile';\r\n        case 'q3':\r\n            return '75% Quantile';\r\n        default:\r\n            return String(method);\r\n    }\r\n}\r\n//# sourceMappingURL=utils.js.map","var noop = {value: function() {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","import { dispatch } from 'd3-dispatch';\r\n/**\r\n * helper function to suffix the given event types\r\n * @internal\r\n */\r\nexport function suffix(suffix) {\r\n    var prefix = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        prefix[_i - 1] = arguments[_i];\r\n    }\r\n    return prefix.map(function (p) { return \"\" + p + suffix; });\r\n}\r\nvar __DEBUG = false;\r\n/**\r\n * base class for event dispatching using d3 event mechanism, thus .suffix is supported for multiple registrations\r\n */\r\nvar AEventDispatcher = /** @class */ (function () {\r\n    function AEventDispatcher() {\r\n        var events = this.createEventList();\r\n        this.listenerEvents = new Set(events);\r\n        this.listeners = dispatch.apply(void 0, events);\r\n        var that = this;\r\n        this.forwarder = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            that.fireImpl.apply(that, [this.type, this.primaryType, this.origin].concat(args));\r\n        };\r\n    }\r\n    AEventDispatcher.prototype.on = function (type, listener) {\r\n        var _this = this;\r\n        if (Array.isArray(type)) {\r\n            type.forEach(function (d) {\r\n                if (_this.listenerEvents.has(d.split('.')[0])) {\r\n                    _this.listenersChanged(d, Boolean(listener));\r\n                    _this.listeners.on(d, listener);\r\n                }\r\n                else if (__DEBUG && !d.includes('.')) {\r\n                    console.warn(_this, 'invalid event type', d);\r\n                }\r\n            });\r\n        }\r\n        else if (this.listenerEvents.has(type.split('.')[0])) {\r\n            this.listenersChanged(type, Boolean(listener));\r\n            this.listeners.on(type, listener);\r\n        }\r\n        else if (__DEBUG && !type.includes('.')) {\r\n            console.warn(this, 'invalid event type', type);\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * helper function that will be called upon a listener has changed\r\n     * @param _type event type\r\n     * @param _active registered or deregistered\r\n     */\r\n    AEventDispatcher.prototype.listenersChanged = function (_type, _active) {\r\n        // hook\r\n    };\r\n    /**\r\n     * return the list of events to be able to dispatch\r\n     * @return {Array} by default no events\r\n     */\r\n    AEventDispatcher.prototype.createEventList = function () {\r\n        return [];\r\n    };\r\n    AEventDispatcher.prototype.fire = function (type) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var primaryType = Array.isArray(type) ? type[0] : type;\r\n        this.fireImpl.apply(this, [type, primaryType, this].concat(args));\r\n    };\r\n    AEventDispatcher.prototype.fireImpl = function (type, primaryType, origin) {\r\n        var _this = this;\r\n        var args = [];\r\n        for (var _i = 3; _i < arguments.length; _i++) {\r\n            args[_i - 3] = arguments[_i];\r\n        }\r\n        var fireImpl = function (t) {\r\n            if (!_this.listenerEvents.has(t)) {\r\n                if (__DEBUG) {\r\n                    console.warn(_this, 'invalid event type', t);\r\n                }\r\n                return;\r\n            }\r\n            //local context per event, set a this argument\r\n            var context = {\r\n                source: _this,\r\n                origin: origin,\r\n                type: t,\r\n                primaryType: primaryType,\r\n                args: args //the arguments to the listener\r\n            };\r\n            _this.listeners.apply(t, context, args);\r\n        };\r\n        if (Array.isArray(type)) {\r\n            type.forEach(fireImpl);\r\n        }\r\n        else {\r\n            fireImpl(type);\r\n        }\r\n    };\r\n    /**\r\n     * forwards one or more events from a given dispatcher to the current one\r\n     * i.e. when one of the given events is fired in 'from' it will be forwarded to all my listeners\r\n     * @param {IEventHandler} from the event dispatcher to forward from\r\n     * @param {string[]} types the event types to forward\r\n     */\r\n    AEventDispatcher.prototype.forward = function (from) {\r\n        var types = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            types[_i - 1] = arguments[_i];\r\n        }\r\n        from.on(types, this.forwarder);\r\n    };\r\n    /**\r\n     * removes the forwarding declarations\r\n     * @param {IEventHandler} from the originated dispatcher\r\n     * @param {string[]} types event types to forward\r\n     */\r\n    AEventDispatcher.prototype.unforward = function (from) {\r\n        var types = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            types[_i - 1] = arguments[_i];\r\n        }\r\n        from.on(types, null);\r\n    };\r\n    return AEventDispatcher;\r\n}());\r\nexport default AEventDispatcher;\r\n//# sourceMappingURL=AEventDispatcher.js.map","import 'reflect-metadata';\r\nimport Column from './Column';\r\nvar supportType = Symbol.for('SupportType');\r\nvar category = Symbol.for('Category');\r\nexport function SupportType() {\r\n    return Reflect.metadata(supportType, true);\r\n}\r\nexport function SortByDefault(order) {\r\n    if (order === void 0) { order = 'ascending'; }\r\n    if (order === 'descending') {\r\n        return Reflect.metadata(Symbol.for('sortDescendingByDefault'), true);\r\n    }\r\n    return function (d) { return d; };\r\n}\r\nexport function isSortingAscByDefault(col) {\r\n    var clazz = col.constructor;\r\n    return !Reflect.hasMetadata(Symbol.for('sortDescendingByDefault'), clazz);\r\n}\r\nvar Categories = /** @class */ (function () {\r\n    function Categories() {\r\n        this.string = { label: 'label', order: 1, name: 'string', featureLevel: 'basic' };\r\n        this.categorical = { label: 'categorical', order: 2, name: 'categorical', featureLevel: 'basic' };\r\n        this.number = { label: 'numerical', order: 3, name: 'number', featureLevel: 'basic' };\r\n        this.date = { label: 'date', order: 4, name: 'date', featureLevel: 'basic' };\r\n        this.array = { label: 'matrix', order: 5, name: 'array', featureLevel: 'advanced' };\r\n        this.map = { label: 'map', order: 6, name: 'map', featureLevel: 'advanced' };\r\n        this.composite = { label: 'combined', order: 7, name: 'composite', featureLevel: 'advanced' };\r\n        this.support = { label: 'support', order: 8, name: 'support', featureLevel: 'advanced' };\r\n        this.other = { label: 'others', order: 9, name: 'other', featureLevel: 'advanced' };\r\n    }\r\n    return Categories;\r\n}());\r\nexport { Categories };\r\nexport var categories = new Categories();\r\nexport function Category(cat) {\r\n    return Reflect.metadata(category, cat);\r\n}\r\nexport function getSortType(col) {\r\n    var cat = categoryOf(col);\r\n    var type = col.desc.type;\r\n    if (cat === categories.string || cat === categories.categorical) {\r\n        return 'abc';\r\n    }\r\n    if (cat === categories.number || type === 'rank' || isSortingAscByDefault(col)) {\r\n        return 'num';\r\n    }\r\n    var numbers = new Set(['rank', 'number', 'numbers', 'ordinal', 'boxplot', 'script', 'reduce', 'stack']);\r\n    return numbers.has(type) ? 'num' : undefined;\r\n}\r\nexport function toolbar() {\r\n    var keys = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        keys[_i] = arguments[_i];\r\n    }\r\n    return Reflect.metadata(Symbol.for('toolbarIcon'), keys);\r\n}\r\nexport function dialogAddons(key) {\r\n    var keys = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        keys[_i - 1] = arguments[_i];\r\n    }\r\n    return Reflect.metadata(Symbol.for(\"toolbarDialogAddon\" + key), keys);\r\n}\r\nexport function isSupportType(col) {\r\n    var clazz = col.constructor;\r\n    return Reflect.hasMetadata(supportType, clazz);\r\n}\r\nexport function categoryOf(col) {\r\n    var cat = Reflect.getMetadata(category, col instanceof Column ? Object.getPrototypeOf(col).constructor : col) || 'other';\r\n    return categories[cat] || categories.other;\r\n}\r\nexport function categoryOfDesc(col, models) {\r\n    var type = typeof col === 'string' ? col : col.type;\r\n    var clazz = models[type];\r\n    return clazz ? categoryOf(clazz) : categories.other;\r\n}\r\n//# sourceMappingURL=annotations.js.map","/**\r\n * default color that should be used\r\n * @type {string}\r\n */\r\nexport var DEFAULT_COLOR = '#C1C1C1';\r\nexport var defaultGroup = {\r\n    name: 'Default',\r\n    color: 'gray'\r\n};\r\nexport var othersGroup = {\r\n    name: 'Others',\r\n    color: 'gray'\r\n};\r\nexport function isGroup(item) {\r\n    return item && item.group == null; // use .group as separator\r\n}\r\nexport var ECompareValueType;\r\n(function (ECompareValueType) {\r\n    ECompareValueType[ECompareValueType[\"BINARY\"] = 0] = \"BINARY\";\r\n    ECompareValueType[ECompareValueType[\"COUNT\"] = 1] = \"COUNT\";\r\n    ECompareValueType[ECompareValueType[\"UINT8\"] = 2] = \"UINT8\";\r\n    ECompareValueType[ECompareValueType[\"UINT16\"] = 3] = \"UINT16\";\r\n    ECompareValueType[ECompareValueType[\"UINT32\"] = 4] = \"UINT32\";\r\n    ECompareValueType[ECompareValueType[\"INT8\"] = 5] = \"INT8\";\r\n    ECompareValueType[ECompareValueType[\"INT16\"] = 6] = \"INT16\";\r\n    ECompareValueType[ECompareValueType[\"INT32\"] = 7] = \"INT32\";\r\n    ECompareValueType[ECompareValueType[\"FLOAT\"] = 8] = \"FLOAT\";\r\n    ECompareValueType[ECompareValueType[\"FLOAT_ASC\"] = 9] = \"FLOAT_ASC\";\r\n    ECompareValueType[ECompareValueType[\"DOUBLE\"] = 10] = \"DOUBLE\";\r\n    ECompareValueType[ECompareValueType[\"DOUBLE_ASC\"] = 11] = \"DOUBLE_ASC\";\r\n    ECompareValueType[ECompareValueType[\"STRING\"] = 12] = \"STRING\";\r\n})(ECompareValueType || (ECompareValueType = {}));\r\nexport function isMultiLevelColumn(col) {\r\n    return typeof (col.getCollapsed) === 'function';\r\n}\r\n//# sourceMappingURL=interfaces.js.map","import * as tslib_1 from \"tslib\";\r\nimport { AEventDispatcher, similar, fixCSS } from '../internal';\r\nimport { isSortingAscByDefault } from './annotations';\r\nimport { defaultGroup, ECompareValueType, DEFAULT_COLOR } from './interfaces';\r\n/**\r\n * a column in LineUp\r\n */\r\nvar Column = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Column, _super);\r\n    function Column(id, desc) {\r\n        var _this = _super.call(this) || this;\r\n        _this.desc = desc;\r\n        /**\r\n         * width of the column\r\n         * @type {number}\r\n         * @private\r\n         */\r\n        _this.width = 100;\r\n        /**\r\n         * parent column of this column, set when added to a ranking or combined column\r\n         */\r\n        _this.parent = null;\r\n        _this.uid = fixCSS(id);\r\n        _this.renderer = _this.desc.renderer || _this.desc.type;\r\n        _this.groupRenderer = _this.desc.groupRenderer || _this.desc.type;\r\n        _this.summaryRenderer = _this.desc.summaryRenderer || _this.desc.type;\r\n        _this.width = _this.desc.width != null && _this.desc.width > 0 ? _this.desc.width : 100;\r\n        _this.visible = _this.desc.visible !== false;\r\n        _this.metadata = {\r\n            label: desc.label || _this.id,\r\n            summary: desc.summary || '',\r\n            description: desc.description || ''\r\n        };\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Column.prototype, \"fixed\", {\r\n        get: function () {\r\n            return Boolean(this.desc.fixed);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Column.prototype, \"frozen\", {\r\n        get: function () {\r\n            return Boolean(this.desc.frozen);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Column.prototype, \"id\", {\r\n        get: function () {\r\n            return this.uid;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Column.prototype.assignNewId = function (idGenerator) {\r\n        this.uid = fixCSS(idGenerator());\r\n    };\r\n    Object.defineProperty(Column.prototype, \"label\", {\r\n        get: function () {\r\n            return this.metadata.label;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Column.prototype, \"description\", {\r\n        get: function () {\r\n            return this.metadata.description;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Column.prototype, \"fqid\", {\r\n        /**\r\n         * returns the fully qualified id i.e. path the parent\r\n         * @returns {string}\r\n         */\r\n        get: function () {\r\n            return this.parent ? this.parent.fqid + \"_\" + this.id : this.id;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Column.prototype, \"fqpath\", {\r\n        get: function () {\r\n            return this.parent ? this.parent.fqpath + \"@\" + this.parent.indexOf(this) : '';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Column.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([Column.EVENT_WIDTH_CHANGED,\r\n            Column.EVENT_LABEL_CHANGED, Column.EVENT_METADATA_CHANGED, Column.EVENT_VISIBILITY_CHANGED, Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED,\r\n            Column.EVENT_RENDERER_TYPE_CHANGED, Column.EVENT_GROUP_RENDERER_TYPE_CHANGED,\r\n            Column.EVENT_DIRTY, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES]);\r\n    };\r\n    Column.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    Column.prototype.getWidth = function () {\r\n        return this.width;\r\n    };\r\n    Column.prototype.hide = function () {\r\n        this.setVisible(false);\r\n    };\r\n    Column.prototype.show = function () {\r\n        this.setVisible(true);\r\n    };\r\n    Column.prototype.isVisible = function () {\r\n        return this.visible;\r\n    };\r\n    Column.prototype.getVisible = function () {\r\n        return this.isVisible();\r\n    };\r\n    Column.prototype.setVisible = function (value) {\r\n        if (this.visible === value) {\r\n            return;\r\n        }\r\n        this.fire([Column.EVENT_VISIBILITY_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.visible, this.visible = value);\r\n    };\r\n    /**\r\n     * visitor pattern for flattening the columns\r\n     * @param {IFlatColumn} r the result array\r\n     * @param {number} offset left offset\r\n     * @param {number} _levelsToGo how many levels down\r\n     * @param {number} _padding padding between columns\r\n     * @returns {number} the used width by this column\r\n     */\r\n    Column.prototype.flatten = function (r, offset, _levelsToGo, _padding) {\r\n        if (_levelsToGo === void 0) { _levelsToGo = 0; }\r\n        if (_padding === void 0) { _padding = 0; }\r\n        var w = this.getWidth();\r\n        r.push({ col: this, offset: offset, width: w });\r\n        return w;\r\n    };\r\n    Column.prototype.setWidth = function (value) {\r\n        if (similar(this.width, value, 0.5)) {\r\n            return;\r\n        }\r\n        this.fire([Column.EVENT_WIDTH_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.width, this.width = value);\r\n    };\r\n    Column.prototype.setWidthImpl = function (value) {\r\n        this.width = value;\r\n    };\r\n    Column.prototype.setMetaData = function (value) {\r\n        if (value.label === this.label && this.description === value.description && this.metadata.summary === value.summary) {\r\n            return;\r\n        }\r\n        var bak = this.getMetaData();\r\n        //copy to avoid reference\r\n        this.metadata = {\r\n            label: value.label,\r\n            summary: value.summary,\r\n            description: value.description\r\n        };\r\n        this.fire([Column.EVENT_LABEL_CHANGED, Column.EVENT_METADATA_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], bak, this.getMetaData());\r\n    };\r\n    Column.prototype.getMetaData = function () {\r\n        return Object.assign({}, this.metadata);\r\n    };\r\n    /**\r\n     * triggers that the ranking is sorted by this column\r\n     * @param ascending ascending order?\r\n     * @param priority sorting priority\r\n     * @returns {boolean} was successful\r\n     */\r\n    Column.prototype.sortByMe = function (ascending, priority) {\r\n        if (ascending === void 0) { ascending = isSortingAscByDefault(this); }\r\n        if (priority === void 0) { priority = 0; }\r\n        var r = this.findMyRanker();\r\n        if (r) {\r\n            return r.sortBy(this, ascending, priority);\r\n        }\r\n        return false;\r\n    };\r\n    Column.prototype.groupByMe = function () {\r\n        var r = this.findMyRanker();\r\n        if (r) {\r\n            return r.toggleGrouping(this);\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     *\r\n     * @return {number}\r\n     */\r\n    Column.prototype.isGroupedBy = function () {\r\n        var r = this.findMyRanker();\r\n        if (!r) {\r\n            return -1;\r\n        }\r\n        return r.getGroupCriteria().indexOf(this);\r\n    };\r\n    /**\r\n     * toggles the sorting order of this column in the ranking\r\n     * @returns {boolean} was successful\r\n     */\r\n    Column.prototype.toggleMySorting = function () {\r\n        var r = this.findMyRanker();\r\n        if (r) {\r\n            return r.toggleSorting(this);\r\n        }\r\n        return false;\r\n    };\r\n    Column.prototype.isSortedByMeImpl = function (selector) {\r\n        var _this = this;\r\n        var ranker = this.findMyRanker();\r\n        if (!ranker) {\r\n            return { asc: undefined, priority: undefined };\r\n        }\r\n        var criterias = selector(ranker);\r\n        var index = criterias.findIndex(function (c) { return c.col === _this; });\r\n        if (index < 0) {\r\n            return { asc: undefined, priority: undefined };\r\n        }\r\n        return {\r\n            asc: criterias[index].asc ? 'asc' : 'desc',\r\n            priority: index\r\n        };\r\n    };\r\n    Column.prototype.isSortedByMe = function () {\r\n        return this.isSortedByMeImpl(function (r) { return r.getSortCriteria(); });\r\n    };\r\n    Column.prototype.groupSortByMe = function (ascending, priority) {\r\n        if (ascending === void 0) { ascending = isSortingAscByDefault(this); }\r\n        if (priority === void 0) { priority = 0; }\r\n        var r = this.findMyRanker();\r\n        if (r) {\r\n            return r.groupSortBy(this, ascending, priority);\r\n        }\r\n        return false;\r\n    };\r\n    Column.prototype.toggleMyGroupSorting = function () {\r\n        var r = this.findMyRanker();\r\n        if (r) {\r\n            return r.toggleGroupSorting(this);\r\n        }\r\n        return false;\r\n    };\r\n    Column.prototype.isGroupSortedByMe = function () {\r\n        return this.isSortedByMeImpl(function (r) { return r.getGroupSortCriteria(); });\r\n    };\r\n    /**\r\n     * removes the column from the ranking\r\n     * @returns {boolean} was successful\r\n     */\r\n    Column.prototype.removeMe = function () {\r\n        if (this.fixed) {\r\n            return false;\r\n        }\r\n        if (this.parent) {\r\n            return this.parent.remove(this);\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * called when the columns added to a ranking\r\n     */\r\n    Column.prototype.attach = function (parent) {\r\n        this.parent = parent;\r\n    };\r\n    /**\r\n     * called when the column is removed from the ranking\r\n     */\r\n    Column.prototype.detach = function () {\r\n        this.parent = null;\r\n    };\r\n    /**\r\n     * inserts the given column after itself\r\n     * @param col the column to insert\r\n     * @returns {boolean} was successful\r\n     */\r\n    Column.prototype.insertAfterMe = function (col) {\r\n        if (this.parent) {\r\n            return this.parent.insertAfter(col, this) != null;\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * finds the underlying ranking column\r\n     * @returns {Ranking|null} my current ranking\r\n     */\r\n    Column.prototype.findMyRanker = function () {\r\n        if (this.parent) {\r\n            return this.parent.findMyRanker();\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     * dumps this column to JSON compatible format\r\n     * @param toDescRef helper mapping function\r\n     * @returns {any} dump of this column\r\n     */\r\n    Column.prototype.dump = function (toDescRef) {\r\n        var r = {\r\n            id: this.id,\r\n            desc: toDescRef(this.desc),\r\n            width: this.width\r\n        };\r\n        if (this.label !== (this.desc.label || this.id)) {\r\n            r.label = this.label;\r\n        }\r\n        if (this.metadata.summary) {\r\n            r.summary = this.metadata.summary;\r\n        }\r\n        if (this.getRenderer() !== this.desc.type) {\r\n            r.renderer = this.getRenderer();\r\n        }\r\n        if (this.getGroupRenderer() !== this.desc.type) {\r\n            r.groupRenderer = this.getGroupRenderer();\r\n        }\r\n        if (this.getSummaryRenderer() !== this.desc.type) {\r\n            r.summaryRenderer = this.getSummaryRenderer();\r\n        }\r\n        return r;\r\n    };\r\n    /**\r\n     * restore the column content from a dump\r\n     * @param dump column dump\r\n     * @param _factory helper for creating columns\r\n     */\r\n    Column.prototype.restore = function (dump, _factory) {\r\n        this.width = dump.width || this.width;\r\n        this.metadata = {\r\n            label: dump.label || this.label,\r\n            summary: dump.summary || '',\r\n            description: this.description\r\n        };\r\n        if (dump.renderer || dump.rendererType) {\r\n            this.renderer = dump.renderer || dump.rendererType || this.renderer;\r\n        }\r\n        if (dump.groupRenderer) {\r\n            this.groupRenderer = dump.groupRenderer;\r\n        }\r\n        if (dump.summaryRenderer) {\r\n            this.summaryRenderer = dump.summaryRenderer;\r\n        }\r\n    };\r\n    /**\r\n     * return the label of a given row for the current column\r\n     * @param row the current row\r\n     * @return {string} the label of this column at the specified row\r\n     */\r\n    Column.prototype.getLabel = function (row) {\r\n        var v = this.getValue(row);\r\n        return v == null ? '' : String(v);\r\n    };\r\n    /**\r\n     * return the value of a given row for the current column\r\n     * @param _row the current row\r\n     * @return the value of this column at the specified row\r\n     */\r\n    Column.prototype.getValue = function (_row) {\r\n        return ''; //no value\r\n    };\r\n    /**\r\n     * returns the value to be used when exporting\r\n     * @param format format hint\r\n     */\r\n    Column.prototype.getExportValue = function (row, format) {\r\n        return format === 'text' ? this.getLabel(row) : this.getValue(row);\r\n    };\r\n    Column.prototype.getColor = function (_row) {\r\n        return DEFAULT_COLOR;\r\n    };\r\n    Column.prototype.toCompareValue = function (_row, _valueCache) {\r\n        return 0;\r\n    };\r\n    Column.prototype.toCompareValueType = function () {\r\n        return ECompareValueType.UINT8;\r\n    };\r\n    /**\r\n     * group the given row into a bin/group\r\n     * @param _row\r\n     * @return {IGroup}\r\n     */\r\n    Column.prototype.group = function (_row, _valueCache) {\r\n        return Object.assign({}, defaultGroup);\r\n    };\r\n    Column.prototype.toCompareGroupValue = function (_rows, group, _valueCache) {\r\n        return group.name.toLowerCase();\r\n    };\r\n    Column.prototype.toCompareGroupValueType = function () {\r\n        return ECompareValueType.STRING;\r\n    };\r\n    /**\r\n     * flag whether any filter is applied\r\n     * @return {boolean}\r\n     */\r\n    Column.prototype.isFiltered = function () {\r\n        return false;\r\n    };\r\n    /**\r\n     * clear the filter\r\n     * @return {boolean} whether the filtered needed to be reseted\r\n     */\r\n    Column.prototype.clearFilter = function () {\r\n        // hook to clear the filter\r\n        return false;\r\n    };\r\n    /**\r\n     * predicate whether the current row should be included\r\n     * @param row\r\n     * @return {boolean}\r\n     */\r\n    Column.prototype.filter = function (row, _valueCache) {\r\n        return row != null;\r\n    };\r\n    /**\r\n     * determines the renderer type that should be used to render this column. By default the same type as the column itself\r\n     * @return {string}\r\n     */\r\n    Column.prototype.getRenderer = function () {\r\n        return this.renderer;\r\n    };\r\n    Column.prototype.getGroupRenderer = function () {\r\n        return this.groupRenderer;\r\n    };\r\n    Column.prototype.getSummaryRenderer = function () {\r\n        return this.summaryRenderer;\r\n    };\r\n    Column.prototype.setRenderer = function (renderer) {\r\n        if (renderer === this.renderer) {\r\n            // nothing changes\r\n            return;\r\n        }\r\n        this.fire([Column.EVENT_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.renderer, this.renderer = renderer);\r\n    };\r\n    Column.prototype.setGroupRenderer = function (renderer) {\r\n        if (renderer === this.groupRenderer) {\r\n            // nothing changes\r\n            return;\r\n        }\r\n        this.fire([Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.groupRenderer, this.groupRenderer = renderer);\r\n    };\r\n    Column.prototype.setSummaryRenderer = function (renderer) {\r\n        if (renderer === this.summaryRenderer) {\r\n            // nothing changes\r\n            return;\r\n        }\r\n        this.fire([Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], this.summaryRenderer, this.summaryRenderer = renderer);\r\n    };\r\n    /**\r\n     * marks the header, values, or both as dirty such that the values are reevaluated\r\n     * @param type specify in more detail what is dirty, by default whole column\r\n     */\r\n    Column.prototype.markDirty = function (type) {\r\n        if (type === void 0) { type = 'all'; }\r\n        switch (type) {\r\n            case 'header':\r\n                return this.fire([Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY]);\r\n            case 'values':\r\n                return this.fire([Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY]);\r\n            default:\r\n                return this.fire([Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY]);\r\n        }\r\n    };\r\n    /**\r\n     * magic variable for showing all columns\r\n     * @type {number}\r\n     */\r\n    Column.FLAT_ALL_COLUMNS = -1;\r\n    Column.EVENT_WIDTH_CHANGED = 'widthChanged';\r\n    Column.EVENT_LABEL_CHANGED = 'labelChanged';\r\n    Column.EVENT_METADATA_CHANGED = 'metaDataChanged';\r\n    Column.EVENT_DIRTY = 'dirty';\r\n    Column.EVENT_DIRTY_HEADER = 'dirtyHeader';\r\n    Column.EVENT_DIRTY_VALUES = 'dirtyValues';\r\n    Column.EVENT_DIRTY_CACHES = 'dirtyCaches';\r\n    Column.EVENT_RENDERER_TYPE_CHANGED = 'rendererTypeChanged';\r\n    Column.EVENT_GROUP_RENDERER_TYPE_CHANGED = 'groupRendererChanged';\r\n    Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED = 'summaryRendererChanged';\r\n    Column.EVENT_VISIBILITY_CHANGED = 'visibilityChanged';\r\n    return Column;\r\n}(AEventDispatcher));\r\nexport default Column;\r\n//# sourceMappingURL=Column.js.map","import Column from './Column';\r\nexport function isMapAbleColumn(col) {\r\n    return (col instanceof Column && typeof col.getMapping === 'function' || (!(col instanceof Column) && isNumberColumn(col) && (col.type.startsWith('number') || col.type.startsWith('boxplot'))));\r\n}\r\nexport function isNumberColumn(col) {\r\n    return (col instanceof Column && typeof col.getNumber === 'function' || (!(col instanceof Column) && col.type.match(/(number|stack|ordinal)/) != null));\r\n}\r\nexport var ESortMethod;\r\n(function (ESortMethod) {\r\n    ESortMethod[\"min\"] = \"min\";\r\n    ESortMethod[\"max\"] = \"max\";\r\n    ESortMethod[\"median\"] = \"median\";\r\n    ESortMethod[\"q1\"] = \"q1\";\r\n    ESortMethod[\"q3\"] = \"q3\";\r\n})(ESortMethod || (ESortMethod = {}));\r\nexport function isBoxPlotColumn(col) {\r\n    return typeof col.getBoxPlotData === 'function';\r\n}\r\nexport var EAdvancedSortMethod;\r\n(function (EAdvancedSortMethod) {\r\n    EAdvancedSortMethod[\"min\"] = \"min\";\r\n    EAdvancedSortMethod[\"max\"] = \"max\";\r\n    EAdvancedSortMethod[\"median\"] = \"median\";\r\n    EAdvancedSortMethod[\"q1\"] = \"q1\";\r\n    EAdvancedSortMethod[\"q3\"] = \"q3\";\r\n    EAdvancedSortMethod[\"mean\"] = \"mean\";\r\n})(EAdvancedSortMethod || (EAdvancedSortMethod = {}));\r\nexport function isNumbersColumn(col) {\r\n    return isBoxPlotColumn(col) && typeof col.getNumbers === 'function';\r\n}\r\n//# sourceMappingURL=INumberColumn.js.map","export default function(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n}\n","import colors from \"../colors.js\";\n\nexport default colors(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f\");\n","/**\r\n * a set that preserves the insertion order\r\n * @internal\r\n */\r\nvar OrderedSet = /** @class */ (function () {\r\n    function OrderedSet(values) {\r\n        if (values === void 0) { values = []; }\r\n        this[Symbol.toStringTag] = Symbol('OrderedSet');\r\n        this.set = new Set();\r\n        this.list = [];\r\n        this.addAll(Array.isArray(values) ? values : Array.from(values));\r\n    }\r\n    Object.defineProperty(OrderedSet.prototype, \"size\", {\r\n        get: function () {\r\n            return this.set.size;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    OrderedSet.prototype.clear = function () {\r\n        this.set.clear();\r\n        this.list.splice(0, this.list.length);\r\n    };\r\n    OrderedSet.prototype.addAll = function (values) {\r\n        var _this = this;\r\n        values.forEach(function (v) { return _this.add(v); });\r\n        return this;\r\n    };\r\n    OrderedSet.prototype.add = function (value) {\r\n        if (this.set.has(value)) {\r\n            return this;\r\n        }\r\n        this.set.add(value);\r\n        this.list.push(value);\r\n        return this;\r\n    };\r\n    OrderedSet.prototype.has = function (value) {\r\n        return this.set.has(value);\r\n    };\r\n    OrderedSet.prototype.delete = function (value) {\r\n        var r = this.set.delete(value);\r\n        if (!r) {\r\n            return false;\r\n        }\r\n        var index = this.list.indexOf(value);\r\n        console.assert(index >= 0);\r\n        this.list.splice(index, 1);\r\n        return true;\r\n    };\r\n    OrderedSet.prototype.deleteAll = function (values) {\r\n        var _this = this;\r\n        return values.reduce(function (acc, act) { return _this.delete(act) && acc; }, true);\r\n    };\r\n    OrderedSet.prototype.forEach = function (callbackfn, thisArg) {\r\n        this.list.forEach(function (v) {\r\n            callbackfn.call(this, v, v, this);\r\n        }, thisArg);\r\n    };\r\n    OrderedSet.prototype[Symbol.iterator] = function () {\r\n        return this.list[Symbol.iterator]();\r\n    };\r\n    return OrderedSet;\r\n}());\r\nexport default OrderedSet;\r\n//# sourceMappingURL=OrderedSet.js.map","import * as tslib_1 from \"tslib\";\r\nimport { schemeCategory10, schemeSet3 } from 'd3-scale-chromatic';\r\nimport { defaultGroup, ECompareValueType } from '.';\r\nimport { OrderedSet } from '../internal';\r\nimport { DEFAULT_COLOR } from './interfaces';\r\n/** @internal */\r\nexport function integrateDefaults(desc, defaults) {\r\n    if (defaults === void 0) { defaults = {}; }\r\n    Object.keys(defaults).forEach(function (key) {\r\n        var typed = key;\r\n        if (typeof desc[typed] === 'undefined') {\r\n            desc[typed] = defaults[typed];\r\n        }\r\n    });\r\n    return desc;\r\n}\r\n/** @internal */\r\nexport function patternFunction(pattern) {\r\n    var args = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        args[_i - 1] = arguments[_i];\r\n    }\r\n    return new (Function.bind.apply(Function, [void 0, 'value'].concat(args, [\"\\n  const escapedValue = encodeURIComponent(String(value));\\n  return `\" + pattern + \"`;\\n \"])))();\r\n}\r\n/** @internal */\r\nexport function joinGroups(groups) {\r\n    if (groups.length === 0) {\r\n        return tslib_1.__assign({}, defaultGroup); //copy\r\n    }\r\n    if (groups.length === 1 && !groups[0].parent) {\r\n        return tslib_1.__assign({}, groups[0]); //copy\r\n    }\r\n    // create a chain\r\n    var parents = [];\r\n    for (var _i = 0, groups_1 = groups; _i < groups_1.length; _i++) {\r\n        var group = groups_1[_i];\r\n        var gparents = [];\r\n        var g = group;\r\n        while (g.parent) {\r\n            // add all parents of this groups\r\n            gparents.unshift(g.parent);\r\n            g = g.parent;\r\n        }\r\n        parents.push.apply(parents, gparents);\r\n        parents.push(Object.assign({ subGroups: [] }, group));\r\n    }\r\n    parents.slice(1).forEach(function (g, i) {\r\n        g.parent = parents[i];\r\n        g.name = parents[i].name + \" \\u2229 \" + g.name;\r\n        g.color = g.color !== DEFAULT_COLOR ? g.color : g.parent.color;\r\n        parents[i].subGroups = [g];\r\n    });\r\n    return parents[parents.length - 1];\r\n}\r\nexport function duplicateGroup(group) {\r\n    var clone = Object.assign({}, group);\r\n    delete clone.order;\r\n    if (isGroupParent(clone)) {\r\n        clone.subGroups = [];\r\n    }\r\n    if (clone.parent) {\r\n        clone.parent = duplicateGroup(clone.parent);\r\n        clone.parent.subGroups.push(clone);\r\n    }\r\n    return clone;\r\n}\r\n/** @internal */\r\nexport function toGroupID(group) {\r\n    return group.name;\r\n}\r\n/** @internal */\r\nexport function isOrderedGroup(g) {\r\n    return g.order != null;\r\n}\r\n/** @internal */\r\nfunction isGroupParent(g) {\r\n    return g.subGroups != null;\r\n}\r\n/**\r\n * unify the parents of the given groups by reusing the same group parent if possible\r\n * @param groups\r\n */\r\nexport function unifyParents(groups) {\r\n    if (groups.length <= 1) {\r\n        return groups;\r\n    }\r\n    var toPath = function (group) {\r\n        var path = [group];\r\n        var p = group.parent;\r\n        while (p) {\r\n            path.unshift(p);\r\n            p = p.parent;\r\n        }\r\n        return path;\r\n    };\r\n    var paths = groups.map(toPath);\r\n    var isSame = function (a, b) {\r\n        return (b.name === a.name && b.parent === a.parent && isGroupParent(b) && b.subGroups.length > 0);\r\n    };\r\n    var removeDuplicates = function (level, i) {\r\n        var _a;\r\n        var real = [];\r\n        while (level.length > 0) {\r\n            var node = level.shift();\r\n            if (!isGroupParent(node) || node.subGroups.length === 0) { // cannot share leaves\r\n                real.push(node);\r\n                continue;\r\n            }\r\n            var root = tslib_1.__assign({}, node);\r\n            real.push(root);\r\n            // remove duplicates that directly follow\r\n            while (level.length > 0 && isSame(root, level[0])) {\r\n                (_a = root.subGroups).push.apply(_a, level.shift().subGroups);\r\n            }\r\n            for (var _i = 0, _b = root.subGroups; _i < _b.length; _i++) {\r\n                var child = _b[_i];\r\n                child.parent = root;\r\n            }\r\n            // cleanup children duplicates\r\n            root.subGroups = removeDuplicates(root.subGroups, i + 1);\r\n        }\r\n        return real;\r\n    };\r\n    removeDuplicates(paths.map(function (p) { return p[0]; }), 0);\r\n    return groups;\r\n}\r\n/** @internal */\r\nexport function groupRoots(groups) {\r\n    var roots = new OrderedSet();\r\n    for (var _i = 0, groups_2 = groups; _i < groups_2.length; _i++) {\r\n        var group = groups_2[_i];\r\n        var root = group;\r\n        while (root.parent) {\r\n            root = root.parent;\r\n        }\r\n        roots.add(root);\r\n    }\r\n    return Array.from(roots);\r\n}\r\n// based on https://github.com/d3/d3-scale-chromatic#d3-scale-chromatic\r\nvar colors = schemeCategory10.concat(schemeSet3);\r\n/** @internal */\r\nexport var MAX_COLORS = colors.length;\r\n/** @internal */\r\nexport function colorPool() {\r\n    var act = 0;\r\n    return function () { return colors[(act++) % colors.length]; };\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function mapIndices(arr, callback) {\r\n    var r = [];\r\n    for (var i = 0; i < arr.length; ++i) {\r\n        r.push(callback(arr[i], i));\r\n    }\r\n    return r;\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function everyIndices(arr, callback) {\r\n    for (var i = 0; i < arr.length; ++i) {\r\n        if (!callback(arr[i], i)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function filterIndices(arr, callback) {\r\n    var r = [];\r\n    for (var i = 0; i < arr.length; ++i) {\r\n        if (callback(arr[i], i)) {\r\n            r.push(arr[i]);\r\n        }\r\n    }\r\n    return r;\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function forEachIndices(arr, callback) {\r\n    for (var i = 0; i < arr.length; ++i) {\r\n        callback(arr[i], i);\r\n    }\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function chooseUIntByDataLength(dataLength) {\r\n    if (dataLength == null || typeof dataLength !== 'number' && !isNaN(dataLength)) {\r\n        return ECompareValueType.UINT32; // worst case\r\n    }\r\n    if (length <= 255) {\r\n        return ECompareValueType.UINT8;\r\n    }\r\n    if (length <= 65535) {\r\n        return ECompareValueType.UINT16;\r\n    }\r\n    return ECompareValueType.UINT32;\r\n}\r\nexport function getAllToolbarActions(col) {\r\n    var actions = new OrderedSet();\r\n    // walk up the prototype chain\r\n    var obj = col;\r\n    var toolbarIcon = Symbol.for('toolbarIcon');\r\n    do {\r\n        var m = Reflect.getOwnMetadata(toolbarIcon, obj.constructor);\r\n        if (m) {\r\n            for (var _i = 0, m_1 = m; _i < m_1.length; _i++) {\r\n                var mi = m_1[_i];\r\n                actions.add(mi);\r\n            }\r\n        }\r\n        obj = Object.getPrototypeOf(obj);\r\n    } while (obj);\r\n    return Array.from(actions);\r\n}\r\nexport function getAllToolbarDialogAddons(col, key) {\r\n    var actions = new OrderedSet();\r\n    // walk up the prototype chain\r\n    var obj = col;\r\n    var symbol = Symbol.for(\"toolbarDialogAddon\" + key);\r\n    do {\r\n        var m = Reflect.getOwnMetadata(symbol, obj.constructor);\r\n        if (m) {\r\n            for (var _i = 0, m_2 = m; _i < m_2.length; _i++) {\r\n                var mi = m_2[_i];\r\n                actions.add(mi);\r\n            }\r\n        }\r\n        obj = Object.getPrototypeOf(obj);\r\n    } while (obj);\r\n    return Array.from(actions);\r\n}\r\n//# sourceMappingURL=internal.js.map","import * as equalImpl from 'fast-deep-equal';\r\n// keep here to have a \"real\" export for webpack not just interfaces\r\n/**\r\n * deep equal comparison\r\n */\r\nexport var equal = (typeof equalImpl === 'function' ? equalImpl : equalImpl.default);\r\n//# sourceMappingURL=mathInterfaces.js.map","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = function(date) {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [], previous;\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","export var durationSecond = 1e3;\nexport var durationMinute = 6e4;\nexport var durationHour = 36e5;\nexport var durationDay = 864e5;\nexport var durationWeek = 6048e5;\n","import interval from \"./interval.js\";\nimport {durationWeek} from \"./duration.js\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval.js\";\nimport {durationDay} from \"./duration.js\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationWeek} from \"./duration.js\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval.js\";\nimport {durationDay, durationMinute} from \"./duration.js\";\n\nvar day = interval(function(date) {\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setDate(date.getDate() + step);\n}, function(start, end) {\n  return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay;\n}, function(date) {\n  return date.getDate() - 1;\n});\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval.js\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import interval from \"./interval.js\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newDate(y, m, d) {\n  return {y: y, m: m, d: d, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"q\": formatQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"q\": formatUTCQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"q\": parseQuarter,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, Z) {\n    return function(string) {\n      var d = newDate(1900, undefined, 1),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n      if (\"s\" in d) return new Date(d.s * 1000 + (\"L\" in d ? d.L : 0));\n\n      // If this is utcParse, never use the local timezone.\n      if (Z && !(\"Z\" in d)) d.Z = 0;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // If the month was not specified, inherit from the quarter.\n      if (d.m === undefined) d.m = \"q\" in d ? d.q : 0;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newDate(d.y, 0, 1)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = localDate(newDate(d.y, 0, 1)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return localDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatQuarter(d) {\n    return 1 + ~~(d.getMonth() / 3);\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  function formatUTCQuarter(d) {\n    return 1 + ~~(d.getUTCMonth() / 3);\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", false);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier += \"\", true);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  var map = {}, i = -1, n = names.length;\n  while (++i < n) map[names[i].toLowerCase()] = i;\n  return map;\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseQuarter(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.s = +n[0], i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import { isNumberColumn, isSupportType, isMapAbleColumn, DEFAULT_COLOR } from '../model';\r\nimport { colorPool, MAX_COLORS } from '../model/internal';\r\nimport { concat, equal, extent, range, resolveValue } from '../internal';\r\nimport { timeParse } from 'd3-time-format';\r\n/**\r\n * @internal\r\n */\r\nexport function cleanCategories(categories) {\r\n    // remove missing values\r\n    categories.delete(null);\r\n    categories.delete(undefined);\r\n    categories.delete('');\r\n    categories.delete('NA');\r\n    categories.delete('NaN');\r\n    categories.delete('na');\r\n    return Array.from(categories).map(String).sort();\r\n}\r\nfunction hasDifferentSizes(data) {\r\n    if (data.length === 0) {\r\n        return false;\r\n    }\r\n    var base = data[0].length;\r\n    return data.some(function (d) { return d != null && base !== (Array.isArray(d) ? d.length : -1); });\r\n}\r\nfunction isEmpty(v) {\r\n    return v == null || (Array.isArray(v) && v.length === 0) || (v instanceof Set && v.size === 0) || (v instanceof Map && v.size === 0) || equal({}, v);\r\n}\r\nfunction deriveBaseType(value, all, column, options) {\r\n    if (value == null) {\r\n        console.warn('cannot derive from null value for column: ', column);\r\n        return null;\r\n    }\r\n    // primitive\r\n    if (typeof value === 'number') {\r\n        return {\r\n            type: 'number',\r\n            domain: extent(all())\r\n        };\r\n    }\r\n    if (typeof value === 'boolean') {\r\n        return {\r\n            type: 'boolean'\r\n        };\r\n    }\r\n    if (value instanceof Date) {\r\n        return {\r\n            type: 'date'\r\n        };\r\n    }\r\n    var formats = Array.isArray(options.datePattern) ? options.datePattern : [options.datePattern];\r\n    for (var _i = 0, formats_1 = formats; _i < formats_1.length; _i++) {\r\n        var format = formats_1[_i];\r\n        var dateParse = timeParse(format);\r\n        if (dateParse(value) == null) {\r\n            continue;\r\n        }\r\n        return {\r\n            type: 'date',\r\n            dateParse: format\r\n        };\r\n    }\r\n    var treatAsCategorical = typeof options.categoricalThreshold === 'function' ? options.categoricalThreshold : function (u, t) { return u < t * options.categoricalThreshold; };\r\n    if (typeof value === 'string') {\r\n        //maybe a categorical\r\n        var values = all();\r\n        var categories = new Set(values);\r\n        if (treatAsCategorical(categories.size, values.length)) {\r\n            return {\r\n                type: 'categorical',\r\n                categories: cleanCategories(categories)\r\n            };\r\n        }\r\n        return {\r\n            type: 'string'\r\n        };\r\n    }\r\n    if (typeof value === 'object' && value.alt != null && value.href != null) {\r\n        return {\r\n            type: 'link'\r\n        };\r\n    }\r\n    return null;\r\n}\r\nfunction deriveType(label, value, column, all, options) {\r\n    var base = {\r\n        type: 'string',\r\n        label: label,\r\n        column: column\r\n    };\r\n    var primitive = deriveBaseType(value, all, column, options);\r\n    if (primitive != null) {\r\n        return Object.assign(base, primitive);\r\n    }\r\n    // set\r\n    if (value instanceof Set) {\r\n        var cats_1 = new Set();\r\n        for (var _i = 0, _a = all(); _i < _a.length; _i++) {\r\n            var value_1 = _a[_i];\r\n            if (!(value_1 instanceof Set)) {\r\n                continue;\r\n            }\r\n            value_1.forEach(function (vi) {\r\n                cats_1.add(String(vi));\r\n            });\r\n        }\r\n        return Object.assign(base, {\r\n            type: 'set',\r\n            categories: cleanCategories(cats_1)\r\n        });\r\n    }\r\n    // map\r\n    if (value instanceof Map) {\r\n        var first = Array.from(value.values()).find(function (d) { return !isEmpty(d); });\r\n        var mapAll = function () {\r\n            var r = [];\r\n            for (var _i = 0, _a = all(); _i < _a.length; _i++) {\r\n                var vi = _a[_i];\r\n                if (!(vi instanceof Map)) {\r\n                    continue;\r\n                }\r\n                vi.forEach(function (vii) {\r\n                    if (!isEmpty(vii)) {\r\n                        r.push(vii);\r\n                    }\r\n                });\r\n            }\r\n            return r;\r\n        };\r\n        var p = deriveBaseType(first, mapAll, column, options);\r\n        return Object.assign(base, p || {}, {\r\n            type: p ? p.type + \"Map\" : 'stringMap'\r\n        });\r\n    }\r\n    // array\r\n    if (Array.isArray(value)) {\r\n        var values_1 = all();\r\n        var sameLength = !hasDifferentSizes(values_1);\r\n        if (sameLength) {\r\n            base.dataLength = value.length;\r\n        }\r\n        var first = value.find(function (v) { return !isEmpty(v); });\r\n        var p = deriveBaseType(first, function () { return concat(values_1).filter(function (d) { return !isEmpty(d); }); }, column, options);\r\n        if (p && p.type === 'categorical' && !sameLength) {\r\n            return Object.assign(base, p, {\r\n                type: 'set'\r\n            });\r\n        }\r\n        if (p || isEmpty(first)) {\r\n            return Object.assign(base, p || {}, {\r\n                type: p ? p.type + \"s\" : 'strings'\r\n            });\r\n        }\r\n        if (typeof first === 'object' && first.key != null && first.value != null) {\r\n            // key,value pair map\r\n            var mapAll = function () {\r\n                var r = [];\r\n                for (var _i = 0, values_2 = values_1; _i < values_2.length; _i++) {\r\n                    var vi = values_2[_i];\r\n                    if (!Array.isArray(vi)) {\r\n                        continue;\r\n                    }\r\n                    for (var _a = 0, vi_1 = vi; _a < vi_1.length; _a++) {\r\n                        var vii = vi_1[_a];\r\n                        if (!isEmpty(vii)) {\r\n                            r.push(vii);\r\n                        }\r\n                    }\r\n                }\r\n                return r;\r\n            };\r\n            var p_1 = deriveBaseType(first.value, mapAll, column, options);\r\n            return Object.assign(base, p_1 || {}, {\r\n                type: p_1 ? p_1.type + \"Map\" : 'stringMap'\r\n            });\r\n        }\r\n    }\r\n    // check boxplot\r\n    var bs = ['min', 'max', 'median', 'q1', 'q3'];\r\n    if (typeof value === 'object' && bs.every(function (b) { return typeof value[b] === 'number'; })) {\r\n        //  boxplot\r\n        var vs = all();\r\n        return Object.assign(base, {\r\n            type: 'boxplot',\r\n            domain: [\r\n                vs.reduce(function (a, b) { return Math.min(a, b.min); }, Number.POSITIVE_INFINITY),\r\n                vs.reduce(function (a, b) { return Math.max(a, b.max); }, Number.NEGATIVE_INFINITY)\r\n            ]\r\n        });\r\n    }\r\n    if (typeof value === 'object') {\r\n        // object map\r\n        var first = Object.keys(value).map(function (k) { return value[k]; }).filter(function (d) { return !isEmpty(d); });\r\n        var mapAll = function () {\r\n            var r = [];\r\n            var _loop_1 = function (vi) {\r\n                if (vi == null) {\r\n                    return \"continue\";\r\n                }\r\n                Object.keys(vi).forEach(function (k) {\r\n                    var vii = vi[k];\r\n                    if (!isEmpty(vii)) {\r\n                        r.push(vii);\r\n                    }\r\n                });\r\n            };\r\n            for (var _i = 0, _a = all(); _i < _a.length; _i++) {\r\n                var vi = _a[_i];\r\n                _loop_1(vi);\r\n            }\r\n            return r;\r\n        };\r\n        var p = deriveBaseType(first, mapAll, column, options);\r\n        return Object.assign(base, p || {}, {\r\n            type: p ? p.type + \"Map\" : 'stringMap'\r\n        });\r\n    }\r\n    console.log('cannot infer type of column:', column);\r\n    //unknown type\r\n    return base;\r\n}\r\nfunction selectColumns(existing, columns) {\r\n    var allNots = columns.every(function (d) { return d.startsWith('-'); });\r\n    if (!allNots) {\r\n        return columns;\r\n    }\r\n    // negate case, exclude columns that are given using -notation\r\n    var exclude = new Set(columns);\r\n    return existing.filter(function (d) { return !exclude.has(\"-\" + d); });\r\n}\r\nfunction toLabel(key) {\r\n    if (typeof (key) === 'number') {\r\n        return \"Col \" + (key + 1);\r\n    }\r\n    key = key.trim();\r\n    if (key.length === 0) {\r\n        return 'Unknown';\r\n    }\r\n    return key.split(/[\\s]+/gm).map(function (k) { return k.length === 0 ? k : \"\" + k[0].toUpperCase() + k.slice(1); }).join(' ');\r\n}\r\nexport function deriveColumnDescriptions(data, options) {\r\n    if (options === void 0) { options = {}; }\r\n    var config = Object.assign({\r\n        categoricalThreshold: function (u, n) { return u <= MAX_COLORS && u < n * 0.7; },\r\n        columns: [],\r\n        datePattern: ['%x', '%Y-%m-%d', '%Y-%m-%dT%H:%M:%S.%LZ']\r\n    }, options);\r\n    var r = [];\r\n    if (data.length === 0) {\r\n        // no data to derive something from\r\n        return r;\r\n    }\r\n    var first = data[0];\r\n    var columns = Array.isArray(first) ? range(first.length) : (config.columns.length > 0 ? selectColumns(Object.keys(first), config.columns) : Object.keys(first));\r\n    return columns.map(function (key) {\r\n        var v = resolveValue(first, key);\r\n        if (isEmpty(v)) {\r\n            // cannot derive something from null try other rows\r\n            var foundRow = data.find(function (row) { return !isEmpty(resolveValue(row, key)); });\r\n            v = foundRow ? foundRow[key] : null;\r\n        }\r\n        return deriveType(toLabel(key), v, key, function () { return data.map(function (d) { return resolveValue(d, key); }).filter(function (d) { return !isEmpty(d); }); }, config);\r\n    });\r\n}\r\n/**\r\n * assigns colors to columns if they are numbers and not yet defined\r\n * @param columns\r\n * @returns {IColumnDesc[]}\r\n */\r\nexport function deriveColors(columns) {\r\n    var colors = colorPool();\r\n    columns.forEach(function (col) {\r\n        if (isMapAbleColumn(col)) {\r\n            col.colorMapping = col.colorMapping || col.color || colors() || DEFAULT_COLOR;\r\n        }\r\n    });\r\n    return columns;\r\n}\r\n/**\r\n * utility to export a ranking to a table with the given separator\r\n * @param ranking\r\n * @param data\r\n * @param options\r\n * @returns {Promise<string>}\r\n */\r\nexport function exportRanking(ranking, data, options) {\r\n    if (options === void 0) { options = {}; }\r\n    var opts = Object.assign({\r\n        separator: '\\t',\r\n        newline: '\\n',\r\n        header: true,\r\n        quote: false,\r\n        quoteChar: '\"',\r\n        filter: function (c) { return !isSupportType(c); },\r\n        verboseColumnHeaders: false\r\n    }, options);\r\n    //optionally quote not numbers\r\n    var escape = new RegExp(\"[\" + opts.quoteChar + \"]\", 'g');\r\n    function quote(v, c) {\r\n        var l = String(v);\r\n        if ((opts.quote || l.indexOf('\\n') >= 0) && (!c || !isNumberColumn(c))) {\r\n            return \"\" + opts.quoteChar + l.replace(escape, opts.quoteChar + opts.quoteChar) + opts.quoteChar;\r\n        }\r\n        return l;\r\n    }\r\n    var columns = ranking.flatColumns.filter(function (c) { return opts.filter(c); });\r\n    var order = ranking.getOrder();\r\n    var r = [];\r\n    if (opts.header) {\r\n        r.push(columns.map(function (d) { return quote(\"\" + d.label + (opts.verboseColumnHeaders && d.description ? \"\\n\" + d.description : '')); }).join(opts.separator));\r\n    }\r\n    data.forEach(function (row, i) {\r\n        r.push(columns.map(function (c) { return quote(c.getExportValue({ v: row, i: order[i] }, 'text'), c); }).join(opts.separator));\r\n    });\r\n    return r.join(opts.newline);\r\n}\r\n/** @internal */\r\nexport function map2Object(map) {\r\n    var r = {};\r\n    map.forEach(function (v, k) { return r[k] = v; });\r\n    return r;\r\n}\r\n/** @internal */\r\nexport function object2Map(obj) {\r\n    var r = new Map();\r\n    for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {\r\n        var k = _a[_i];\r\n        r.set(k, obj[k]);\r\n    }\r\n    return r;\r\n}\r\n/** @internal */\r\nexport function rangeSelection(provider, rankingId, dataIndex, relIndex, ctrlKey) {\r\n    var ranking = provider.getRankings().find(function (d) { return d.id === rankingId; });\r\n    if (!ranking) { // no known reference\r\n        return false;\r\n    }\r\n    var selection = provider.getSelection();\r\n    if (selection.length === 0 || selection.includes(dataIndex)) {\r\n        return false; // no other or deselect\r\n    }\r\n    var order = ranking.getOrder();\r\n    var lookup = new Map(Array.from(order).map(function (d, i) { return [d, i]; }));\r\n    var distances = selection.map(function (d) {\r\n        var index = (lookup.has(d) ? lookup.get(d) : Infinity);\r\n        return { s: d, index: index, distance: Math.abs(relIndex - index) };\r\n    });\r\n    var nearest = distances.sort(function (a, b) { return a.distance - b.distance; })[0];\r\n    if (!isFinite(nearest.distance)) {\r\n        return false; // all outside\r\n    }\r\n    if (!ctrlKey) {\r\n        selection.splice(0, selection.length);\r\n        selection.push(nearest.s);\r\n    }\r\n    if (nearest.index < relIndex) {\r\n        for (var i = nearest.index + 1; i <= relIndex; ++i) {\r\n            selection.push(order[i]);\r\n        }\r\n    }\r\n    else {\r\n        for (var i = relIndex; i <= nearest.index; ++i) {\r\n            selection.push(order[i]);\r\n        }\r\n    }\r\n    provider.setSelection(selection);\r\n    return true;\r\n}\r\n//# sourceMappingURL=utils.js.map","import * as tslib_1 from \"tslib\";\r\nimport Column from './Column';\r\n/**\r\n * a column having an accessor to get the cell value\r\n */\r\nvar ValueColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ValueColumn, _super);\r\n    function ValueColumn(id, desc) {\r\n        var _this = _super.call(this, id, desc) || this;\r\n        //find accessor\r\n        _this.accessor = desc.accessor || (function () { return null; });\r\n        _this.loaded = desc.lazyLoaded !== true;\r\n        return _this;\r\n    }\r\n    ValueColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([ValueColumn.EVENT_DATA_LOADED]);\r\n    };\r\n    ValueColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    ValueColumn.prototype.getLabel = function (row) {\r\n        if (!this.isLoaded()) {\r\n            return '';\r\n        }\r\n        var v = this.getValue(row);\r\n        return v == null ? '' : String(v);\r\n    };\r\n    ValueColumn.prototype.getRaw = function (row) {\r\n        if (!this.isLoaded()) {\r\n            return null;\r\n        }\r\n        return this.accessor(row, this.desc);\r\n    };\r\n    ValueColumn.prototype.getValue = function (row) {\r\n        return this.getRaw(row);\r\n    };\r\n    ValueColumn.prototype.isLoaded = function () {\r\n        return this.loaded;\r\n    };\r\n    ValueColumn.prototype.setLoaded = function (loaded) {\r\n        if (this.loaded === loaded) {\r\n            return;\r\n        }\r\n        this.fire([ValueColumn.EVENT_DATA_LOADED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], this.loaded, this.loaded = loaded);\r\n    };\r\n    ValueColumn.prototype.getRenderer = function () {\r\n        if (!this.isLoaded()) {\r\n            return ValueColumn.RENDERER_LOADING;\r\n        }\r\n        return _super.prototype.getRenderer.call(this);\r\n    };\r\n    /**\r\n     * patch the dump such that the loaded attribute is defined (for lazy loading columns)\r\n     * @param toDescRef\r\n     * @returns {any}\r\n     */\r\n    ValueColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        r.loaded = this.loaded;\r\n        if (!this.loaded && r.renderer === ValueColumn.RENDERER_LOADING) {\r\n            delete r.renderer;\r\n        }\r\n        return r;\r\n    };\r\n    ValueColumn.prototype.restore = function (dump, factory) {\r\n        if (dump.loaded !== undefined) {\r\n            this.loaded = dump.loaded;\r\n        }\r\n        _super.prototype.restore.call(this, dump, factory);\r\n    };\r\n    ValueColumn.EVENT_DATA_LOADED = 'dataLoaded';\r\n    ValueColumn.RENDERER_LOADING = 'loading';\r\n    return ValueColumn;\r\n}(Column));\r\nexport default ValueColumn;\r\n//# sourceMappingURL=ValueColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { equalArrays, fixCSS, suffix, joinIndexArrays, AEventDispatcher } from '../internal';\r\nimport { isSortingAscByDefault } from './annotations';\r\nimport Column from './Column';\r\nimport CompositeColumn from './CompositeColumn';\r\nimport { defaultGroup } from './interfaces';\r\nimport { groupRoots } from './internal';\r\nexport var EDirtyReason;\r\n(function (EDirtyReason) {\r\n    EDirtyReason[\"UNKNOWN\"] = \"unknown\";\r\n    EDirtyReason[\"FILTER_CHANGED\"] = \"filter\";\r\n    EDirtyReason[\"SORT_CRITERIA_CHANGED\"] = \"sort_changed\";\r\n    EDirtyReason[\"SORT_CRITERIA_DIRTY\"] = \"sort_dirty\";\r\n    EDirtyReason[\"GROUP_CRITERIA_CHANGED\"] = \"group_changed\";\r\n    EDirtyReason[\"GROUP_CRITERIA_DIRTY\"] = \"group_dirty\";\r\n    EDirtyReason[\"GROUP_SORT_CRITERIA_CHANGED\"] = \"group_sort_changed\";\r\n    EDirtyReason[\"GROUP_SORT_CRITERIA_DIRTY\"] = \"group_sort_dirty\";\r\n})(EDirtyReason || (EDirtyReason = {}));\r\n/**\r\n * a ranking\r\n */\r\nvar Ranking = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Ranking, _super);\r\n    function Ranking(id) {\r\n        var _this = _super.call(this) || this;\r\n        _this.id = id;\r\n        _this.sortCriteria = [];\r\n        _this.groupColumns = [];\r\n        _this.groupSortCriteria = [];\r\n        /**\r\n         * columns of this ranking\r\n         * @type {Array}\r\n         * @private\r\n         */\r\n        _this.columns = [];\r\n        _this.dirtyOrder = function (reason) {\r\n            _this.fire([Ranking.EVENT_DIRTY_ORDER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], reason);\r\n        };\r\n        _this.dirtyOrderSortDirty = function () { return _this.dirtyOrder([EDirtyReason.SORT_CRITERIA_DIRTY]); };\r\n        _this.dirtyOrderGroupDirty = function () { return _this.dirtyOrder([EDirtyReason.GROUP_CRITERIA_DIRTY]); };\r\n        _this.dirtyOrderGroupSortDirty = function () { return _this.dirtyOrder([EDirtyReason.GROUP_SORT_CRITERIA_DIRTY]); };\r\n        _this.dirtyOrderFiltering = function () { return _this.dirtyOrder([EDirtyReason.FILTER_CHANGED]); };\r\n        /**\r\n         * the current ordering as an sorted array of indices\r\n         * @type {Array}\r\n         */\r\n        _this.groups = [Object.assign({ order: [] }, defaultGroup)];\r\n        _this.order = [];\r\n        _this.index2pos = [];\r\n        _this.id = fixCSS(id);\r\n        _this.label = \"Ranking \" + (id.startsWith('rank') ? id.slice(4) : id);\r\n        return _this;\r\n    }\r\n    Ranking.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([\r\n            Ranking.EVENT_WIDTH_CHANGED, Ranking.EVENT_FILTER_CHANGED,\r\n            Ranking.EVENT_LABEL_CHANGED, Ranking.EVENT_GROUPS_CHANGED,\r\n            Ranking.EVENT_ADD_COLUMN, Ranking.EVENT_REMOVE_COLUMN, Ranking.EVENT_GROUP_CRITERIA_CHANGED, Ranking.EVENT_MOVE_COLUMN,\r\n            Ranking.EVENT_DIRTY, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY_CACHES,\r\n            Ranking.EVENT_GROUP_SORT_CRITERIA_CHANGED, Ranking.EVENT_COLUMN_VISIBILITY_CHANGED,\r\n            Ranking.EVENT_SORT_CRITERIA_CHANGED, Ranking.EVENT_DIRTY_ORDER, Ranking.EVENT_ORDER_CHANGED\r\n        ]);\r\n    };\r\n    Ranking.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    Ranking.prototype.assignNewId = function (idGenerator) {\r\n        this.id = fixCSS(idGenerator());\r\n        this.columns.forEach(function (c) { return c.assignNewId(idGenerator); });\r\n    };\r\n    Ranking.prototype.getLabel = function () {\r\n        return this.label;\r\n    };\r\n    Ranking.prototype.setLabel = function (value) {\r\n        if (value === this.label) {\r\n            return;\r\n        }\r\n        this.fire(Ranking.EVENT_LABEL_CHANGED, this.label, this.label = value);\r\n    };\r\n    Ranking.prototype.setGroups = function (groups, index2pos, dirtyReason) {\r\n        var old = this.order;\r\n        var oldGroups = this.groups;\r\n        this.groups = groups;\r\n        this.index2pos = index2pos;\r\n        this.order = joinIndexArrays(groups.map(function (d) { return d.order; }));\r\n        // replace with subarrays to save memory\r\n        if (groups.length > 1) {\r\n            this.unifyGroups(groups);\r\n        }\r\n        else if (groups.length === 1) {\r\n            // propagate to the top\r\n            var p = groups[0].parent;\r\n            while (p) {\r\n                p.order = this.order;\r\n                p = p.parent;\r\n            }\r\n        }\r\n        this.fire([Ranking.EVENT_ORDER_CHANGED, Ranking.EVENT_GROUPS_CHANGED, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], old, this.order, oldGroups, groups, dirtyReason);\r\n    };\r\n    Ranking.prototype.unifyGroups = function (groups) {\r\n        var offset = 0;\r\n        var order = this.order;\r\n        var offsets = new Map();\r\n        for (var _i = 0, groups_1 = groups; _i < groups_1.length; _i++) {\r\n            var group = groups_1[_i];\r\n            var size = group.order.length;\r\n            group.order = order.subarray(offset, offset + size);\r\n            offsets.set(group, { offset: offset, size: size });\r\n            offset += size;\r\n        }\r\n        // propgate also to the top with views\r\n        var roots = groupRoots(groups);\r\n        var resolve = function (g) {\r\n            if (offsets.has(g)) { // leaf\r\n                return offsets.get(g);\r\n            }\r\n            var subs = g.subGroups.map(function (gi) { return resolve(gi); });\r\n            var offset = subs.length > 0 ? subs[0].offset : 0;\r\n            var size = subs.reduce(function (a, b) { return a + b.size; }, 0);\r\n            var r = { offset: offset, size: size };\r\n            offsets.set(g, r);\r\n            g.order = order.subarray(offset, offset + size);\r\n            return r;\r\n        };\r\n        for (var _a = 0, roots_1 = roots; _a < roots_1.length; _a++) {\r\n            var root = roots_1[_a];\r\n            resolve(root);\r\n        }\r\n    };\r\n    Ranking.prototype.getRank = function (dataIndex) {\r\n        if (dataIndex < 0 || dataIndex > this.index2pos.length) {\r\n            return -1;\r\n        }\r\n        var v = this.index2pos[dataIndex];\r\n        return v != null && !isNaN(v) && v > 0 ? v : -1;\r\n    };\r\n    Ranking.prototype.getOrder = function () {\r\n        return this.order;\r\n    };\r\n    Ranking.prototype.getOrderLength = function () {\r\n        return this.order.length;\r\n    };\r\n    Ranking.prototype.getGroups = function () {\r\n        return this.groups.slice();\r\n    };\r\n    Ranking.prototype.dump = function (toDescRef) {\r\n        var r = {};\r\n        r.columns = this.columns.map(function (d) { return d.dump(toDescRef); });\r\n        r.sortCriteria = this.sortCriteria.map(function (s) { return ({ asc: s.asc, sortBy: s.col.id }); });\r\n        r.groupSortCriteria = this.groupSortCriteria.map(function (s) { return ({ asc: s.asc, sortBy: s.col.id }); });\r\n        r.groupColumns = this.groupColumns.map(function (d) { return d.id; });\r\n        return r;\r\n    };\r\n    Ranking.prototype.restore = function (dump, factory) {\r\n        var _this = this;\r\n        this.clear();\r\n        (dump.columns || []).map(function (child) {\r\n            var c = factory(child);\r\n            if (c) {\r\n                _this.push(c);\r\n            }\r\n        });\r\n        // compatibility case\r\n        if (dump.sortColumn && dump.sortColumn.sortBy) {\r\n            var help = this.columns.find(function (d) { return d.id === dump.sortColumn.sortBy; });\r\n            if (help) {\r\n                this.sortBy(help, dump.sortColumn.asc);\r\n            }\r\n        }\r\n        if (dump.groupColumns) {\r\n            var groupColumns = dump.groupColumns.map(function (id) { return _this.columns.find(function (d) { return d.id === id; }); }).filter(function (d) { return d != null; });\r\n            this.setGroupCriteria(groupColumns);\r\n        }\r\n        var restoreSortCriteria = function (dumped) {\r\n            return dumped.map(function (s) {\r\n                return {\r\n                    asc: s.asc,\r\n                    col: _this.columns.find(function (d) { return d.id === s.sortBy; }) || null\r\n                };\r\n            }).filter(function (s) { return s.col; });\r\n        };\r\n        if (dump.sortCriteria) {\r\n            this.setSortCriteria(restoreSortCriteria(dump.sortCriteria));\r\n        }\r\n        if (dump.groupSortCriteria) {\r\n            this.setGroupSortCriteria(restoreSortCriteria(dump.groupSortCriteria));\r\n        }\r\n    };\r\n    Ranking.prototype.flatten = function (r, offset, levelsToGo, padding) {\r\n        if (levelsToGo === void 0) { levelsToGo = 0; }\r\n        if (padding === void 0) { padding = 0; }\r\n        var acc = offset; // + this.getWidth() + padding;\r\n        if (levelsToGo > 0 || levelsToGo <= Column.FLAT_ALL_COLUMNS) {\r\n            this.columns.forEach(function (c) {\r\n                if (c.getVisible() && levelsToGo <= Column.FLAT_ALL_COLUMNS) {\r\n                    acc += c.flatten(r, acc, levelsToGo - 1, padding) + padding;\r\n                }\r\n            });\r\n        }\r\n        return acc - offset;\r\n    };\r\n    Ranking.prototype.getPrimarySortCriteria = function () {\r\n        if (this.sortCriteria.length === 0) {\r\n            return null;\r\n        }\r\n        return this.sortCriteria[0];\r\n    };\r\n    Ranking.prototype.getSortCriteria = function () {\r\n        return this.sortCriteria.map(function (d) { return Object.assign({}, d); });\r\n    };\r\n    Ranking.prototype.getGroupSortCriteria = function () {\r\n        return this.groupSortCriteria.map(function (d) { return Object.assign({}, d); });\r\n    };\r\n    Ranking.prototype.toggleSorting = function (col) {\r\n        return this.setSortCriteria(this.toggleSortingLogic(col, this.sortCriteria));\r\n    };\r\n    Ranking.prototype.toggleSortingLogic = function (col, sortCriteria) {\r\n        var newSort = sortCriteria.slice();\r\n        var current = newSort.findIndex(function (d) { return d.col === col; });\r\n        var defaultAsc = isSortingAscByDefault(col);\r\n        if (current < 0) {\r\n            newSort.splice(0, newSort.length, { col: col, asc: defaultAsc });\r\n        }\r\n        else if (newSort[current].asc === defaultAsc) {\r\n            // asc -> desc, or desc -> asc\r\n            newSort.splice(current, 1, { col: col, asc: !defaultAsc });\r\n        }\r\n        else {\r\n            // remove\r\n            newSort.splice(current, 1);\r\n        }\r\n        return newSort;\r\n    };\r\n    Ranking.prototype.toggleGrouping = function (col) {\r\n        var old = this.groupColumns.indexOf(col);\r\n        if (old >= 0) {\r\n            var newGroupings = this.groupColumns.slice();\r\n            newGroupings.splice(old, 1);\r\n            return this.setGroupCriteria(newGroupings);\r\n        }\r\n        return this.setGroupCriteria([col]);\r\n    };\r\n    Ranking.prototype.getGroupCriteria = function () {\r\n        return this.groupColumns.slice();\r\n    };\r\n    /**\r\n     * replaces, moves, or remove the given column in the sorting hierarchy\r\n     * @param col {Column}\r\n     * @param priority {number} when priority < 0 remove the column only else replace at the given priority\r\n     */\r\n    Ranking.prototype.sortBy = function (col, ascending, priority) {\r\n        if (ascending === void 0) { ascending = false; }\r\n        if (priority === void 0) { priority = 0; }\r\n        if (col.findMyRanker() !== this) {\r\n            return false; //not one of mine\r\n        }\r\n        return this.setSortCriteria(this.hierarchyLogic(this.sortCriteria, this.sortCriteria.findIndex(function (d) { return d.col === col; }), { col: col, asc: ascending }, priority));\r\n    };\r\n    /**\r\n     * replaces, moves, or remove the given column in the group sorting hierarchy\r\n     * @param col {Column}\r\n     * @param priority {number} when priority < 0 remove the column only else replace at the given priority\r\n     */\r\n    Ranking.prototype.groupSortBy = function (col, ascending, priority) {\r\n        if (ascending === void 0) { ascending = false; }\r\n        if (priority === void 0) { priority = 0; }\r\n        if (col.findMyRanker() !== this) {\r\n            return false; //not one of mine\r\n        }\r\n        return this.setGroupSortCriteria(this.hierarchyLogic(this.groupSortCriteria, this.groupSortCriteria.findIndex(function (d) { return d.col === col; }), { col: col, asc: ascending }, priority));\r\n    };\r\n    Ranking.prototype.hierarchyLogic = function (entries, index, entry, priority) {\r\n        entries = entries.slice();\r\n        if (index >= 0) {\r\n            // move at the other position\r\n            entries.splice(index, 1);\r\n            if (priority >= 0) {\r\n                entries.splice(Math.min(priority, entries.length), 0, entry);\r\n            }\r\n        }\r\n        else if (priority >= 0) {\r\n            entries[Math.min(priority, entries.length)] = entry;\r\n        }\r\n        return entries;\r\n    };\r\n    /**\r\n     * replaces, moves, or remove the given column in the grouping hierarchy\r\n     * @param col {Column}\r\n     * @param priority {number} when priority < 0 remove the column only else replace at the given priority\r\n     */\r\n    Ranking.prototype.groupBy = function (col, priority) {\r\n        if (priority === void 0) { priority = 0; }\r\n        if (col.findMyRanker() !== this) {\r\n            return false; //not one of mine\r\n        }\r\n        return this.setGroupCriteria(this.hierarchyLogic(this.groupColumns, this.groupColumns.indexOf(col), col, priority));\r\n    };\r\n    Ranking.prototype.setSortCriteria = function (value) {\r\n        var _a;\r\n        var _this = this;\r\n        var values = Array.isArray(value) ? value.slice() : [value];\r\n        var bak = this.sortCriteria.slice();\r\n        if (equalCriteria(values, bak)) {\r\n            return false;\r\n        }\r\n        // update listener\r\n        bak.forEach(function (d) {\r\n            d.col.on(Ranking.COLUMN_SORT_DIRTY, null);\r\n        });\r\n        values.forEach(function (d) {\r\n            d.col.on(Ranking.COLUMN_SORT_DIRTY, _this.dirtyOrderSortDirty);\r\n        });\r\n        (_a = this.sortCriteria).splice.apply(_a, [0, this.sortCriteria.length].concat(values.slice()));\r\n        this.triggerResort(bak);\r\n        return true;\r\n    };\r\n    Ranking.prototype.setGroupCriteria = function (column) {\r\n        var _a;\r\n        var _this = this;\r\n        var cols = Array.isArray(column) ? column : [column];\r\n        if (equalArrays(this.groupColumns, cols)) {\r\n            return true; //same\r\n        }\r\n        this.groupColumns.forEach(function (groupColumn) {\r\n            groupColumn.on(Ranking.COLUMN_GROUP_DIRTY, null);\r\n        });\r\n        var bak = this.groupColumns.slice();\r\n        (_a = this.groupColumns).splice.apply(_a, [0, this.groupColumns.length].concat(cols));\r\n        this.groupColumns.forEach(function (groupColumn) {\r\n            groupColumn.on(Ranking.COLUMN_GROUP_DIRTY, _this.dirtyOrderGroupDirty);\r\n        });\r\n        this.fire([Ranking.EVENT_GROUP_CRITERIA_CHANGED, Ranking.EVENT_DIRTY_ORDER, Ranking.EVENT_DIRTY_HEADER,\r\n            Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY_CACHES, Ranking.EVENT_DIRTY], bak, this.getGroupCriteria());\r\n        return true;\r\n    };\r\n    Ranking.prototype.toggleGroupSorting = function (col) {\r\n        return this.setGroupSortCriteria(this.toggleSortingLogic(col, this.groupSortCriteria));\r\n    };\r\n    Ranking.prototype.setGroupSortCriteria = function (value) {\r\n        var _a;\r\n        var _this = this;\r\n        var values = Array.isArray(value) ? value.slice() : [value];\r\n        var bak = this.groupSortCriteria.slice();\r\n        if (equalCriteria(values, bak)) {\r\n            return false;\r\n        }\r\n        bak.forEach(function (d) {\r\n            d.col.on(Ranking.COLUMN_GROUP_SORT_DIRTY, null);\r\n        });\r\n        values.forEach(function (d) {\r\n            d.col.on(Ranking.COLUMN_GROUP_SORT_DIRTY, _this.dirtyOrderGroupSortDirty);\r\n        });\r\n        (_a = this.groupSortCriteria).splice.apply(_a, [0, this.groupSortCriteria.length].concat(values.slice()));\r\n        this.triggerGroupResort(bak);\r\n        return true;\r\n    };\r\n    Ranking.prototype.triggerGroupResort = function (bak) {\r\n        var sortCriterias = this.getGroupSortCriteria();\r\n        var bakMulti = Array.isArray(bak) ? bak : sortCriterias;\r\n        this.fire([Ranking.EVENT_GROUP_SORT_CRITERIA_CHANGED, Ranking.EVENT_DIRTY_ORDER, Ranking.EVENT_DIRTY_HEADER,\r\n            Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], bakMulti, sortCriterias);\r\n    };\r\n    Ranking.prototype.triggerResort = function (bak) {\r\n        var sortCriterias = this.getSortCriteria();\r\n        var bakMulti = Array.isArray(bak) ? bak : sortCriterias;\r\n        this.fire([Ranking.EVENT_SORT_CRITERIA_CHANGED, Ranking.EVENT_DIRTY_ORDER, Ranking.EVENT_DIRTY_HEADER,\r\n            Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], bakMulti, sortCriterias);\r\n    };\r\n    Object.defineProperty(Ranking.prototype, \"children\", {\r\n        get: function () {\r\n            return this.columns.slice();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Ranking.prototype, \"length\", {\r\n        get: function () {\r\n            return this.columns.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Ranking.prototype.insert = function (col, index) {\r\n        var _this = this;\r\n        if (index === void 0) { index = this.columns.length; }\r\n        this.columns.splice(index, 0, col);\r\n        col.attach(this);\r\n        this.forward.apply(this, [col].concat(Ranking.FORWARD_COLUMN_EVENTS));\r\n        col.on(Ranking.EVENT_FILTER_CHANGED + \".order\", this.dirtyOrderFiltering);\r\n        col.on(Column.EVENT_VISIBILITY_CHANGED + \".ranking\", function (oldValue, newValue) { return _this.fire([Ranking.EVENT_COLUMN_VISIBILITY_CHANGED, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], col, oldValue, newValue); });\r\n        this.fire([Ranking.EVENT_ADD_COLUMN, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], col, index);\r\n        if (col.isFiltered()) {\r\n            this.dirtyOrderFiltering();\r\n        }\r\n        return col;\r\n    };\r\n    Ranking.prototype.move = function (col, index) {\r\n        if (index === void 0) { index = this.columns.length; }\r\n        if (col.parent !== this) {\r\n            // not a move operation!\r\n            console.error('invalid move operation: ', col);\r\n            return null;\r\n        }\r\n        var old = this.columns.indexOf(col);\r\n        if (index === old) {\r\n            // no move needed\r\n            return col;\r\n        }\r\n        //delete first\r\n        this.columns.splice(old, 1);\r\n        // adapt target index based on previous index, i.e shift by one\r\n        this.columns.splice(old < index ? index - 1 : index, 0, col);\r\n        this.fire([Ranking.EVENT_MOVE_COLUMN, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], col, index, old);\r\n        return col;\r\n    };\r\n    Ranking.prototype.moveAfter = function (col, reference) {\r\n        var i = this.columns.indexOf(reference);\r\n        if (i < 0) {\r\n            return null;\r\n        }\r\n        return this.move(col, i + 1);\r\n    };\r\n    Object.defineProperty(Ranking.prototype, \"fqpath\", {\r\n        get: function () {\r\n            return '';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Ranking.prototype.findByPath = function (fqpath) {\r\n        var p = this;\r\n        var indices = fqpath.split('@').map(Number).slice(1); //ignore the first entry = ranking\r\n        while (indices.length > 0) {\r\n            var i = indices.shift();\r\n            p = p.at(i);\r\n        }\r\n        return p;\r\n    };\r\n    Ranking.prototype.indexOf = function (col) {\r\n        return this.columns.indexOf(col);\r\n    };\r\n    Ranking.prototype.at = function (index) {\r\n        return this.columns[index];\r\n    };\r\n    Ranking.prototype.insertAfter = function (col, ref) {\r\n        var i = this.columns.indexOf(ref);\r\n        if (i < 0) {\r\n            return null;\r\n        }\r\n        return this.insert(col, i + 1);\r\n    };\r\n    Ranking.prototype.push = function (col) {\r\n        return this.insert(col);\r\n    };\r\n    Ranking.prototype.remove = function (col) {\r\n        var i = this.columns.indexOf(col);\r\n        if (i < 0) {\r\n            return false;\r\n        }\r\n        this.unforward.apply(this, [col].concat(Ranking.FORWARD_COLUMN_EVENTS));\r\n        var isSortCriteria = this.sortCriteria.findIndex(function (d) { return d.col === col; });\r\n        var sortCriteriaChanged = isSortCriteria >= 0;\r\n        if (sortCriteriaChanged) {\r\n            this.sortCriteria.splice(isSortCriteria, 1);\r\n        }\r\n        var isGroupSortCriteria = this.groupSortCriteria.findIndex(function (d) { return d.col === col; });\r\n        var groupSortCriteriaChanged = isGroupSortCriteria >= 0;\r\n        if (groupSortCriteriaChanged) {\r\n            this.groupSortCriteria.splice(isGroupSortCriteria, 1);\r\n        }\r\n        var newGrouping = null;\r\n        var isGroupColumn = this.groupColumns.indexOf(col);\r\n        if (isGroupColumn >= 0) { // was my grouping criteria\r\n            newGrouping = this.groupColumns.slice();\r\n            newGrouping.splice(isGroupColumn, 1);\r\n        }\r\n        col.detach();\r\n        this.columns.splice(i, 1);\r\n        this.fire([Ranking.EVENT_REMOVE_COLUMN, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], col, i);\r\n        if (newGrouping) {\r\n            this.setGroupCriteria(newGrouping);\r\n        }\r\n        else if (sortCriteriaChanged) {\r\n            this.triggerResort(null);\r\n        }\r\n        else if (groupSortCriteriaChanged) {\r\n            this.triggerGroupResort(null);\r\n        }\r\n        else if (col.isFiltered()) {\r\n            this.dirtyOrderFiltering();\r\n        }\r\n        return true;\r\n    };\r\n    Ranking.prototype.clear = function () {\r\n        var _this = this;\r\n        if (this.columns.length === 0) {\r\n            return;\r\n        }\r\n        this.sortCriteria.forEach(function (d) {\r\n            d.col.on(Column.EVENT_DIRTY_CACHES + \".order\", null);\r\n        });\r\n        this.sortCriteria.splice(0, this.sortCriteria.length);\r\n        this.groupSortCriteria.forEach(function (d) {\r\n            d.col.on(Ranking.COLUMN_GROUP_SORT_DIRTY, null);\r\n        });\r\n        this.groupSortCriteria.splice(0, this.groupSortCriteria.length);\r\n        this.groupColumns.forEach(function (d) {\r\n            d.on(Ranking.COLUMN_GROUP_DIRTY, null);\r\n        });\r\n        this.groupColumns.splice(0, this.groupColumns.length);\r\n        this.columns.forEach(function (col) {\r\n            _this.unforward.apply(_this, [col].concat(Ranking.FORWARD_COLUMN_EVENTS));\r\n            col.detach();\r\n        });\r\n        var removed = this.columns.splice(0, this.columns.length);\r\n        this.fire([Ranking.EVENT_REMOVE_COLUMN, Ranking.EVENT_DIRTY_ORDER, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], removed);\r\n    };\r\n    Object.defineProperty(Ranking.prototype, \"flatColumns\", {\r\n        get: function () {\r\n            var r = [];\r\n            this.flatten(r, 0, Column.FLAT_ALL_COLUMNS);\r\n            return r.map(function (d) { return d.col; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Ranking.prototype.find = function (idOrFilter) {\r\n        var filter = typeof (idOrFilter) === 'string' ? function (col) { return col.id === idOrFilter; } : idOrFilter;\r\n        var r = this.flatColumns;\r\n        for (var _i = 0, r_1 = r; _i < r_1.length; _i++) {\r\n            var v = r_1[_i];\r\n            if (filter(v)) {\r\n                return v;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    Ranking.prototype.isFiltered = function () {\r\n        return this.columns.some(function (d) { return d.isFiltered(); });\r\n    };\r\n    Ranking.prototype.filter = function (row) {\r\n        return this.columns.every(function (d) { return d.filter(row); });\r\n    };\r\n    Ranking.prototype.clearFilters = function () {\r\n        return this.columns.map(function (d) { return d.clearFilter(); }).some(function (d) { return d; });\r\n    };\r\n    Ranking.prototype.findMyRanker = function () {\r\n        return this;\r\n    };\r\n    Object.defineProperty(Ranking.prototype, \"fqid\", {\r\n        get: function () {\r\n            return this.id;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * marks the header, values, or both as dirty such that the values are reevaluated\r\n     * @param type specify in more detail what is dirty, by default whole column\r\n     */\r\n    Ranking.prototype.markDirty = function (type) {\r\n        if (type === void 0) { type = 'all'; }\r\n        switch (type) {\r\n            case 'header':\r\n                return this.fire([Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY]);\r\n            case 'values':\r\n                return this.fire([Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY]);\r\n            default:\r\n                return this.fire([Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY]);\r\n        }\r\n    };\r\n    Ranking.EVENT_WIDTH_CHANGED = Column.EVENT_WIDTH_CHANGED;\r\n    Ranking.EVENT_FILTER_CHANGED = 'filterChanged';\r\n    Ranking.EVENT_LABEL_CHANGED = Column.EVENT_LABEL_CHANGED;\r\n    Ranking.EVENT_ADD_COLUMN = CompositeColumn.EVENT_ADD_COLUMN;\r\n    Ranking.EVENT_MOVE_COLUMN = CompositeColumn.EVENT_MOVE_COLUMN;\r\n    Ranking.EVENT_REMOVE_COLUMN = CompositeColumn.EVENT_REMOVE_COLUMN;\r\n    Ranking.EVENT_DIRTY = Column.EVENT_DIRTY;\r\n    Ranking.EVENT_DIRTY_HEADER = Column.EVENT_DIRTY_HEADER;\r\n    Ranking.EVENT_DIRTY_VALUES = Column.EVENT_DIRTY_VALUES;\r\n    Ranking.EVENT_DIRTY_CACHES = Column.EVENT_DIRTY_CACHES;\r\n    Ranking.EVENT_COLUMN_VISIBILITY_CHANGED = Column.EVENT_VISIBILITY_CHANGED;\r\n    Ranking.EVENT_SORT_CRITERIA_CHANGED = 'sortCriteriaChanged';\r\n    Ranking.EVENT_GROUP_CRITERIA_CHANGED = 'groupCriteriaChanged';\r\n    Ranking.EVENT_GROUP_SORT_CRITERIA_CHANGED = 'groupSortCriteriaChanged';\r\n    Ranking.EVENT_DIRTY_ORDER = 'dirtyOrder';\r\n    Ranking.EVENT_ORDER_CHANGED = 'orderChanged';\r\n    Ranking.EVENT_GROUPS_CHANGED = 'groupsChanged';\r\n    Ranking.FORWARD_COLUMN_EVENTS = suffix('.ranking', Column.EVENT_VISIBILITY_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY, Column.EVENT_VISIBILITY_CHANGED, Ranking.EVENT_FILTER_CHANGED);\r\n    Ranking.COLUMN_GROUP_SORT_DIRTY = suffix('.groupOrder', Column.EVENT_DIRTY_CACHES, 'sortMethodChanged');\r\n    Ranking.COLUMN_SORT_DIRTY = suffix('.order', Column.EVENT_DIRTY_CACHES);\r\n    Ranking.COLUMN_GROUP_DIRTY = suffix('.group', Column.EVENT_DIRTY_CACHES, 'groupingChanged');\r\n    return Ranking;\r\n}(AEventDispatcher));\r\nexport default Ranking;\r\nfunction equalCriteria(a, b) {\r\n    if (a.length !== b.length) {\r\n        return false;\r\n    }\r\n    return a.every(function (ai, i) {\r\n        var bi = b[i];\r\n        return ai.col === bi.col && ai.asc === bi.asc;\r\n    });\r\n}\r\n//# sourceMappingURL=Ranking.js.map","import * as tslib_1 from \"tslib\";\r\nimport { suffix } from '../internal';\r\nimport Column from './Column';\r\nimport { Category, toolbar } from './annotations';\r\nimport { isNumberColumn } from './INumberColumn';\r\nimport ValueColumn from './ValueColumn';\r\n/**\r\n * implementation of a combine column, standard operations how to select\r\n */\r\nvar CompositeColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(CompositeColumn, _super);\r\n    function CompositeColumn() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._children = [];\r\n        return _this;\r\n    }\r\n    CompositeColumn_1 = CompositeColumn;\r\n    CompositeColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([CompositeColumn_1.EVENT_FILTER_CHANGED, CompositeColumn_1.EVENT_ADD_COLUMN, CompositeColumn_1.EVENT_MOVE_COLUMN, CompositeColumn_1.EVENT_REMOVE_COLUMN]);\r\n    };\r\n    CompositeColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    CompositeColumn.prototype.assignNewId = function (idGenerator) {\r\n        _super.prototype.assignNewId.call(this, idGenerator);\r\n        this._children.forEach(function (c) { return c.assignNewId(idGenerator); });\r\n    };\r\n    Object.defineProperty(CompositeColumn.prototype, \"children\", {\r\n        get: function () {\r\n            return this._children.slice();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CompositeColumn.prototype, \"length\", {\r\n        get: function () {\r\n            return this._children.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    CompositeColumn.prototype.flatten = function (r, offset, levelsToGo, padding) {\r\n        if (levelsToGo === void 0) { levelsToGo = 0; }\r\n        if (padding === void 0) { padding = 0; }\r\n        var w = 0;\r\n        //no more levels or just this one\r\n        if (levelsToGo === 0 || levelsToGo <= Column.FLAT_ALL_COLUMNS) {\r\n            w = this.getWidth();\r\n            r.push({ col: this, offset: offset, width: w });\r\n            if (levelsToGo === 0) {\r\n                return w;\r\n            }\r\n        }\r\n        //push children\r\n        this._children.forEach(function (c) {\r\n            if (c.isVisible() && levelsToGo <= Column.FLAT_ALL_COLUMNS) {\r\n                c.flatten(r, offset, levelsToGo - 1, padding);\r\n            }\r\n        });\r\n        return w;\r\n    };\r\n    CompositeColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        r.children = this._children.map(function (d) { return d.dump(toDescRef); });\r\n        return r;\r\n    };\r\n    CompositeColumn.prototype.restore = function (dump, factory) {\r\n        var _this = this;\r\n        dump.children.map(function (child) {\r\n            var c = factory(child);\r\n            if (c) {\r\n                _this.push(c);\r\n            }\r\n        });\r\n        _super.prototype.restore.call(this, dump, factory);\r\n    };\r\n    /**\r\n     * inserts a column at a the given position\r\n     * @param col\r\n     * @param index\r\n     * @returns {any}\r\n     */\r\n    CompositeColumn.prototype.insert = function (col, index) {\r\n        if (!isNumberColumn(col) && this.canJustAddNumbers) { //indicator it is a number type\r\n            return null;\r\n        }\r\n        this._children.splice(index, 0, col);\r\n        //listen and propagate events\r\n        return this.insertImpl(col, index);\r\n    };\r\n    CompositeColumn.prototype.move = function (col, index) {\r\n        if (col.parent !== this) { //not moving\r\n            return null;\r\n        }\r\n        var old = this._children.indexOf(col);\r\n        if (index === old) {\r\n            // no move needed\r\n            return col;\r\n        }\r\n        //delete first\r\n        this._children.splice(old, 1);\r\n        // adapt target index based on previous index, i.e shift by one\r\n        this._children.splice(old < index ? index - 1 : index, 0, col);\r\n        //listen and propagate events\r\n        return this.moveImpl(col, index, old);\r\n    };\r\n    CompositeColumn.prototype.insertImpl = function (col, index) {\r\n        col.attach(this);\r\n        this.forward.apply(this, [col].concat(suffix('.combine', Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY, CompositeColumn_1.EVENT_FILTER_CHANGED, Column.EVENT_RENDERER_TYPE_CHANGED, Column.EVENT_GROUP_RENDERER_TYPE_CHANGED)));\r\n        this.fire([CompositeColumn_1.EVENT_ADD_COLUMN, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], col, index);\r\n        return col;\r\n    };\r\n    CompositeColumn.prototype.moveImpl = function (col, index, oldIndex) {\r\n        this.fire([CompositeColumn_1.EVENT_MOVE_COLUMN, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY, Column.EVENT_RENDERER_TYPE_CHANGED, Column.EVENT_GROUP_RENDERER_TYPE_CHANGED], col, index, oldIndex);\r\n        return col;\r\n    };\r\n    CompositeColumn.prototype.push = function (col) {\r\n        return this.insert(col, this._children.length);\r\n    };\r\n    CompositeColumn.prototype.at = function (index) {\r\n        return this._children[index];\r\n    };\r\n    CompositeColumn.prototype.indexOf = function (col) {\r\n        return this._children.indexOf(col);\r\n    };\r\n    CompositeColumn.prototype.insertAfter = function (col, ref) {\r\n        var i = this.indexOf(ref);\r\n        if (i < 0) {\r\n            return null;\r\n        }\r\n        return this.insert(col, i + 1);\r\n    };\r\n    CompositeColumn.prototype.moveAfter = function (col, ref) {\r\n        var i = this.indexOf(ref);\r\n        if (i < 0) {\r\n            return null;\r\n        }\r\n        return this.move(col, i + 1);\r\n    };\r\n    CompositeColumn.prototype.remove = function (col) {\r\n        var i = this._children.indexOf(col);\r\n        if (i < 0) {\r\n            return false;\r\n        }\r\n        this._children.splice(i, 1); //remove and deregister listeners\r\n        return this.removeImpl(col, i);\r\n    };\r\n    CompositeColumn.prototype.removeImpl = function (col, index) {\r\n        col.detach();\r\n        this.unforward.apply(this, [col].concat(suffix('.combine', Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY, CompositeColumn_1.EVENT_FILTER_CHANGED)));\r\n        this.fire([CompositeColumn_1.EVENT_REMOVE_COLUMN, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], col, index);\r\n        return true;\r\n    };\r\n    CompositeColumn.prototype.isFiltered = function () {\r\n        return this._children.some(function (d) { return d.isFiltered(); });\r\n    };\r\n    CompositeColumn.prototype.clearFilter = function () {\r\n        return this._children.map(function (d) { return d.clearFilter(); }).some(function (d) { return d; });\r\n    };\r\n    CompositeColumn.prototype.filter = function (row) {\r\n        return this._children.every(function (d) { return d.filter(row); });\r\n    };\r\n    CompositeColumn.prototype.isLoaded = function () {\r\n        return this._children.every(function (c) { return !(c instanceof ValueColumn || c instanceof CompositeColumn_1) || c.isLoaded(); });\r\n    };\r\n    Object.defineProperty(CompositeColumn.prototype, \"canJustAddNumbers\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    var CompositeColumn_1;\r\n    CompositeColumn.EVENT_FILTER_CHANGED = 'filterChanged';\r\n    CompositeColumn.EVENT_ADD_COLUMN = 'addColumn';\r\n    CompositeColumn.EVENT_MOVE_COLUMN = 'moveColumn';\r\n    CompositeColumn.EVENT_REMOVE_COLUMN = 'removeColumn';\r\n    CompositeColumn = CompositeColumn_1 = tslib_1.__decorate([\r\n        toolbar('compositeContained', 'splitCombined'),\r\n        Category('composite')\r\n    ], CompositeColumn);\r\n    return CompositeColumn;\r\n}(Column));\r\nexport default CompositeColumn;\r\n//# sourceMappingURL=CompositeColumn.js.map","/**\r\n * create a delayed call, can be called multiple times but only the last one at most delayed by timeToDelay will be executed\r\n * @param {(...args: any[]) => void} callback the callback to call\r\n * @param {number} timeToDelay delay the call in milliseconds\r\n * @param choose optional function to merge call context\r\n * @return {(...args: any[]) => any} a function that can be called with the same interface as the callback but delayed\r\n * @internal\r\n */\r\nexport default function debounce(callback, timeToDelay, choose) {\r\n    if (timeToDelay === void 0) { timeToDelay = 100; }\r\n    var tm = -1;\r\n    var ctx = null;\r\n    return function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (tm >= 0) {\r\n            clearTimeout(tm);\r\n            tm = -1;\r\n        }\r\n        var next = { self: this, args: args };\r\n        // compute current context\r\n        ctx = ctx && choose ? choose(ctx, next) : next;\r\n        tm = self.setTimeout(function () {\r\n            console.assert(ctx != null);\r\n            callback.apply(ctx.self, ctx.args);\r\n            ctx = null;\r\n        }, timeToDelay);\r\n    };\r\n}\r\n//# sourceMappingURL=debounce.js.map","import * as tslib_1 from \"tslib\";\r\nimport { Category, SupportType } from './annotations';\r\nimport Column from './Column';\r\nimport { integrateDefaults } from './internal';\r\n/**\r\n * factory for creating a description creating a rank column\r\n * @param label\r\n * @returns {{type: string, label: string}}\r\n */\r\nexport function createRankDesc(label) {\r\n    if (label === void 0) { label = 'Rank'; }\r\n    return { type: 'rank', label: label };\r\n}\r\n/**\r\n * a rank column\r\n */\r\nvar RankColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(RankColumn, _super);\r\n    function RankColumn(id, desc) {\r\n        return _super.call(this, id, integrateDefaults(desc, {\r\n            width: 50\r\n        })) || this;\r\n    }\r\n    RankColumn.prototype.getLabel = function (row) {\r\n        return String(this.getValue(row));\r\n    };\r\n    RankColumn.prototype.getRaw = function (row) {\r\n        var ranking = this.findMyRanker();\r\n        if (!ranking) {\r\n            return -1;\r\n        }\r\n        return ranking.getRank(row.i);\r\n    };\r\n    RankColumn.prototype.getValue = function (row) {\r\n        var r = this.getRaw(row);\r\n        return r === -1 ? null : r;\r\n    };\r\n    Object.defineProperty(RankColumn.prototype, \"frozen\", {\r\n        get: function () {\r\n            return this.desc.frozen !== false;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    RankColumn = tslib_1.__decorate([\r\n        SupportType(),\r\n        Category('support')\r\n    ], RankColumn);\r\n    return RankColumn;\r\n}(Column));\r\nexport default RankColumn;\r\n//# sourceMappingURL=RankColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { Category, SupportType, toolbar } from './annotations';\r\nimport Column from './Column';\r\nimport { integrateDefaults } from './internal';\r\nexport var EAggregationState;\r\n(function (EAggregationState) {\r\n    EAggregationState[\"COLLAPSE\"] = \"collapse\";\r\n    EAggregationState[\"EXPAND\"] = \"expand\";\r\n    EAggregationState[\"EXPAND_TOP_N\"] = \"expand_top\";\r\n})(EAggregationState || (EAggregationState = {}));\r\n/**\r\n * factory for creating a description creating a rank column\r\n * @param label\r\n * @returns {{type: string, label: string}}\r\n */\r\nexport function createAggregateDesc(label) {\r\n    if (label === void 0) { label = 'Aggregate Groups'; }\r\n    return { type: 'aggregate', label: label, fixed: true };\r\n}\r\n/**\r\n * a checkbox column for selections\r\n */\r\nvar AggregateGroupColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(AggregateGroupColumn, _super);\r\n    function AggregateGroupColumn(id, desc) {\r\n        return _super.call(this, id, integrateDefaults(desc, {\r\n            width: 40\r\n        })) || this;\r\n    }\r\n    AggregateGroupColumn_1 = AggregateGroupColumn;\r\n    Object.defineProperty(AggregateGroupColumn.prototype, \"frozen\", {\r\n        get: function () {\r\n            return this.desc.frozen !== false;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AggregateGroupColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([AggregateGroupColumn_1.EVENT_AGGREGATE]);\r\n    };\r\n    AggregateGroupColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    AggregateGroupColumn.prototype.isAggregated = function (group) {\r\n        var ranking = this.findMyRanker();\r\n        if (this.desc.isAggregated) {\r\n            return this.desc.isAggregated(ranking, group);\r\n        }\r\n        return false;\r\n    };\r\n    AggregateGroupColumn.prototype.setAggregated = function (group, value) {\r\n        var n = typeof value === 'boolean' ? (value ? EAggregationState.EXPAND : EAggregationState.COLLAPSE) : value;\r\n        var ranking = this.findMyRanker();\r\n        var current = (this.desc.isAggregated) && this.desc.isAggregated(ranking, group);\r\n        if (current === n) {\r\n            return true;\r\n        }\r\n        if (this.desc.setAggregated) {\r\n            this.desc.setAggregated(ranking, group, n);\r\n        }\r\n        this.fire(AggregateGroupColumn_1.EVENT_AGGREGATE, ranking, group, n !== EAggregationState.COLLAPSE, n);\r\n        return false;\r\n    };\r\n    var AggregateGroupColumn_1;\r\n    AggregateGroupColumn.EVENT_AGGREGATE = 'aggregate';\r\n    AggregateGroupColumn = AggregateGroupColumn_1 = tslib_1.__decorate([\r\n        toolbar('setShowTopN', 'rename'),\r\n        SupportType(),\r\n        Category('support')\r\n    ], AggregateGroupColumn);\r\n    return AggregateGroupColumn;\r\n}(Column));\r\nexport default AggregateGroupColumn;\r\n//# sourceMappingURL=AggregateGroupColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { Category, SupportType, toolbar } from './annotations';\r\nimport { ECompareValueType } from './interfaces';\r\nimport ValueColumn from './ValueColumn';\r\nimport { integrateDefaults } from './internal';\r\n/**\r\n * factory for creating a description creating a rank column\r\n * @param label\r\n * @returns {{type: string, label: string}}\r\n */\r\nexport function createSelectionDesc(label) {\r\n    if (label === void 0) { label = 'Selection Checkboxes'; }\r\n    return { type: 'selection', label: label, fixed: true };\r\n}\r\n/**\r\n * a checkbox column for selections\r\n */\r\nvar SelectionColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SelectionColumn, _super);\r\n    function SelectionColumn(id, desc) {\r\n        return _super.call(this, id, integrateDefaults(desc, {\r\n            width: 20\r\n        })) || this;\r\n    }\r\n    SelectionColumn_1 = SelectionColumn;\r\n    Object.defineProperty(SelectionColumn.prototype, \"frozen\", {\r\n        get: function () {\r\n            return this.desc.frozen !== false;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SelectionColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([SelectionColumn_1.EVENT_SELECT]);\r\n    };\r\n    SelectionColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    SelectionColumn.prototype.setValue = function (row, value) {\r\n        var old = this.getValue(row);\r\n        if (old === value) {\r\n            return true;\r\n        }\r\n        return this.setImpl(row, value);\r\n    };\r\n    SelectionColumn.prototype.setValues = function (rows, value) {\r\n        if (rows.length === 0) {\r\n            return;\r\n        }\r\n        if (this.desc.setterAll) {\r\n            this.desc.setterAll(rows, value);\r\n        }\r\n        this.fire(SelectionColumn_1.EVENT_SELECT, rows[0], value, rows);\r\n        return true;\r\n    };\r\n    SelectionColumn.prototype.setImpl = function (row, value) {\r\n        if (this.desc.setter) {\r\n            this.desc.setter(row.i, value);\r\n        }\r\n        this.fire(SelectionColumn_1.EVENT_SELECT, row.i, value);\r\n        return true;\r\n    };\r\n    SelectionColumn.prototype.toggleValue = function (row) {\r\n        var old = this.getValue(row);\r\n        this.setImpl(row, !old);\r\n        return !old;\r\n    };\r\n    SelectionColumn.prototype.toCompareValue = function (row) {\r\n        var v = this.getValue(row) === true;\r\n        return v ? 1 : 0;\r\n    };\r\n    SelectionColumn.prototype.toCompareValueType = function () {\r\n        return ECompareValueType.BINARY;\r\n    };\r\n    SelectionColumn.prototype.group = function (row) {\r\n        var isSelected = this.getValue(row);\r\n        return Object.assign({}, isSelected ? SelectionColumn_1.SELECTED_GROUP : SelectionColumn_1.NOT_SELECTED_GROUP);\r\n    };\r\n    var SelectionColumn_1;\r\n    SelectionColumn.SELECTED_GROUP = {\r\n        name: 'Selected',\r\n        color: 'orange'\r\n    };\r\n    SelectionColumn.NOT_SELECTED_GROUP = {\r\n        name: 'Unselected',\r\n        color: 'gray'\r\n    };\r\n    SelectionColumn.EVENT_SELECT = 'select';\r\n    SelectionColumn = SelectionColumn_1 = tslib_1.__decorate([\r\n        SupportType(),\r\n        toolbar('sort', 'sortBy', 'group', 'groupBy', 'invertSelection'),\r\n        Category('support')\r\n    ], SelectionColumn);\r\n    return SelectionColumn;\r\n}(ValueColumn));\r\nexport default SelectionColumn;\r\n//# sourceMappingURL=SelectionColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { Category, SupportType } from './annotations';\r\nimport Column from './Column';\r\n/**\r\n * utility for creating an action description with optional label\r\n * @param label\r\n * @param actions\r\n * @param groupActions\r\n * @returns {{type: string, label: string}}\r\n */\r\nexport function createActionDesc(label, actions, groupActions) {\r\n    if (label === void 0) { label = 'actions'; }\r\n    if (actions === void 0) { actions = []; }\r\n    if (groupActions === void 0) { groupActions = []; }\r\n    return { type: 'actions', label: label, actions: actions, groupActions: groupActions, fixed: true };\r\n}\r\n/**\r\n * a default column with no values\r\n */\r\nvar ActionColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ActionColumn, _super);\r\n    function ActionColumn(id, desc) {\r\n        var _this = _super.call(this, id, desc) || this;\r\n        _this.actions = desc.actions || [];\r\n        _this.groupActions = desc.groupActions || [];\r\n        return _this;\r\n    }\r\n    ActionColumn.prototype.getLabel = function () {\r\n        return '';\r\n    };\r\n    ActionColumn.prototype.getValue = function () {\r\n        return '';\r\n    };\r\n    ActionColumn.prototype.compare = function () {\r\n        return 0; //can't compare\r\n    };\r\n    ActionColumn = tslib_1.__decorate([\r\n        SupportType(),\r\n        Category('support')\r\n    ], ActionColumn);\r\n    return ActionColumn;\r\n}(Column));\r\nexport default ActionColumn;\r\n//# sourceMappingURL=ActionColumn.js.map","export function isMissingValue(v) {\r\n    if (v == null || v === undefined || v === '' || v === 'NA' || v === 'na' || v === 'Na' || v === 'nA' || v === 'NaN' || (typeof v === 'number' && isNaN(v))) {\r\n        return true;\r\n    }\r\n    if (!Array.isArray(v)) {\r\n        return false;\r\n    }\r\n    for (var _i = 0, v_1 = v; _i < v_1.length; _i++) {\r\n        var vi = v_1[_i];\r\n        if (!isMissingValue(vi)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nexport function isUnknown(v) {\r\n    return v == null || v === undefined || isNaN(v);\r\n}\r\nexport var FIRST_IS_NAN = -1;\r\nexport var FIRST_IS_MISSING = 1;\r\nexport var missingGroup = {\r\n    name: 'Missing values',\r\n    color: 'gray'\r\n};\r\n//# sourceMappingURL=missing.js.map","import * as tslib_1 from \"tslib\";\r\nimport { Category, toolbar, dialogAddons } from './annotations';\r\nimport Column from './Column';\r\nimport { defaultGroup, ECompareValueType, othersGroup } from './interfaces';\r\nimport { missingGroup, isMissingValue } from './missing';\r\nimport ValueColumn from './ValueColumn';\r\nimport { equal, isSeqEmpty } from '../internal';\r\nimport { integrateDefaults } from './internal';\r\nexport var EAlignment;\r\n(function (EAlignment) {\r\n    EAlignment[\"left\"] = \"left\";\r\n    EAlignment[\"center\"] = \"center\";\r\n    EAlignment[\"right\"] = \"right\";\r\n})(EAlignment || (EAlignment = {}));\r\nexport var EStringGroupCriteriaType;\r\n(function (EStringGroupCriteriaType) {\r\n    EStringGroupCriteriaType[\"value\"] = \"value\";\r\n    EStringGroupCriteriaType[\"startsWith\"] = \"startsWith\";\r\n    EStringGroupCriteriaType[\"regex\"] = \"regex\";\r\n})(EStringGroupCriteriaType || (EStringGroupCriteriaType = {}));\r\n/**\r\n * a string column with optional alignment\r\n */\r\nvar StringColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(StringColumn, _super);\r\n    function StringColumn(id, desc) {\r\n        var _this = _super.call(this, id, integrateDefaults(desc, {\r\n            width: 200\r\n        })) || this;\r\n        _this.currentFilter = null;\r\n        _this.currentGroupCriteria = {\r\n            type: EStringGroupCriteriaType.startsWith,\r\n            values: []\r\n        };\r\n        _this.alignment = desc.alignment || EAlignment.left;\r\n        _this.escape = desc.escape !== false;\r\n        return _this;\r\n    }\r\n    StringColumn_1 = StringColumn;\r\n    StringColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([StringColumn_1.EVENT_GROUPING_CHANGED, StringColumn_1.EVENT_FILTER_CHANGED]);\r\n    };\r\n    StringColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    StringColumn.prototype.getValue = function (row) {\r\n        var v = _super.prototype.getValue.call(this, row);\r\n        return isMissingValue(v) ? null : String(v);\r\n    };\r\n    StringColumn.prototype.getLabel = function (row) {\r\n        return this.getValue(row) || '';\r\n    };\r\n    StringColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        if (this.currentFilter instanceof RegExp) {\r\n            r.filter = \"REGEX:\" + this.currentFilter.source;\r\n        }\r\n        else {\r\n            r.filter = this.currentFilter;\r\n        }\r\n        if (this.currentGroupCriteria) {\r\n            var _a = this.currentGroupCriteria, type_1 = _a.type, values = _a.values;\r\n            r.groupCriteria = {\r\n                type: type_1,\r\n                values: values.map(function (value) { return type_1 + \":\" + (value instanceof RegExp && type_1 === EStringGroupCriteriaType.regex ? value.source : value); })\r\n            };\r\n        }\r\n        return r;\r\n    };\r\n    StringColumn.prototype.restore = function (dump, factory) {\r\n        _super.prototype.restore.call(this, dump, factory);\r\n        if (dump.filter) {\r\n            var filter = dump.filter;\r\n            if (typeof filter === 'string') {\r\n                // compatibility case\r\n                if (filter.startsWith('REGEX:')) {\r\n                    this.currentFilter = {\r\n                        filter: new RegExp(filter.slice(6), 'gm'),\r\n                        filterMissing: false\r\n                    };\r\n                }\r\n                else if (filter === StringColumn_1.FILTER_MISSING) {\r\n                    this.currentFilter = {\r\n                        filter: null,\r\n                        filterMissing: true\r\n                    };\r\n                }\r\n                else {\r\n                    this.currentFilter = {\r\n                        filter: filter,\r\n                        filterMissing: false\r\n                    };\r\n                }\r\n            }\r\n            else {\r\n                this.currentFilter = {\r\n                    filter: filter.filter && filter.filter.startsWith('REGEX:') ? new RegExp(filter.slice(6), 'gm') : filter.filter || '',\r\n                    filterMissing: filter.filterMissing === true\r\n                };\r\n            }\r\n        }\r\n        else {\r\n            this.currentFilter = null;\r\n        }\r\n        // tslint:disable-next-line: early-exit\r\n        if (dump.groupCriteria) {\r\n            var _a = dump.groupCriteria, type_2 = _a.type, values = _a.values;\r\n            this.currentGroupCriteria = {\r\n                type: type_2,\r\n                values: values.map(function (value) { return type_2 === EStringGroupCriteriaType.regex ? new RegExp(value, 'gm') : value; })\r\n            };\r\n        }\r\n    };\r\n    StringColumn.prototype.isFiltered = function () {\r\n        return this.currentFilter != null;\r\n    };\r\n    StringColumn.prototype.filter = function (row) {\r\n        if (!this.isFiltered()) {\r\n            return true;\r\n        }\r\n        var r = this.getLabel(row);\r\n        var filter = this.currentFilter;\r\n        var ff = filter.filter;\r\n        if (r == null || r.trim() === '') {\r\n            return !filter.filterMissing;\r\n        }\r\n        if (!ff) {\r\n            return true;\r\n        }\r\n        if (ff instanceof RegExp) {\r\n            return r !== '' && r.match(ff) != null; // You can not use RegExp.test(), because of https://stackoverflow.com/a/6891667\r\n        }\r\n        return r !== '' && r.toLowerCase().includes(ff.toLowerCase());\r\n    };\r\n    StringColumn.prototype.getFilter = function () {\r\n        return this.currentFilter;\r\n    };\r\n    StringColumn.prototype.setFilter = function (filter) {\r\n        if (filter === this.currentFilter) {\r\n            return;\r\n        }\r\n        var current = this.currentFilter || { filter: null, filterMissing: false };\r\n        var target = filter || { filter: null, filterMissing: false };\r\n        if (current.filterMissing === target.filterMissing && (current.filter === target.filter ||\r\n            (current.filter instanceof RegExp && target.filter instanceof RegExp && current.filter.source === target.filter.source))) {\r\n            return;\r\n        }\r\n        this.fire([StringColumn_1.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.currentFilter, this.currentFilter = filter);\r\n    };\r\n    StringColumn.prototype.clearFilter = function () {\r\n        var was = this.isFiltered();\r\n        this.setFilter(null);\r\n        return was;\r\n    };\r\n    StringColumn.prototype.getGroupCriteria = function () {\r\n        return this.currentGroupCriteria;\r\n    };\r\n    StringColumn.prototype.setGroupCriteria = function (value) {\r\n        if (equal(this.currentGroupCriteria, value) || value == null) {\r\n            return;\r\n        }\r\n        var bak = this.getGroupCriteria();\r\n        this.currentGroupCriteria = value;\r\n        this.fire([StringColumn_1.EVENT_GROUPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, value);\r\n    };\r\n    StringColumn.prototype.group = function (row) {\r\n        if (this.getValue(row) == null) {\r\n            return Object.assign({}, missingGroup);\r\n        }\r\n        if (!this.currentGroupCriteria) {\r\n            return Object.assign({}, othersGroup);\r\n        }\r\n        var value = this.getLabel(row);\r\n        if (!value) {\r\n            return Object.assign({}, missingGroup);\r\n        }\r\n        var _a = this.currentGroupCriteria, type = _a.type, values = _a.values;\r\n        if (type === EStringGroupCriteriaType.value) {\r\n            return {\r\n                name: value,\r\n                color: defaultGroup.color\r\n            };\r\n        }\r\n        for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\r\n            var groupValue = values_1[_i];\r\n            if (type === EStringGroupCriteriaType.startsWith && typeof groupValue === 'string' && value.startsWith(groupValue)) {\r\n                return {\r\n                    name: groupValue,\r\n                    color: defaultGroup.color\r\n                };\r\n            }\r\n            // tslint:disable-next-line: early-exit\r\n            if (type === EStringGroupCriteriaType.regex && groupValue instanceof RegExp && groupValue.test(value)) {\r\n                return {\r\n                    name: groupValue.source,\r\n                    color: defaultGroup.color\r\n                };\r\n            }\r\n        }\r\n        return Object.assign({}, othersGroup);\r\n    };\r\n    StringColumn.prototype.toCompareValue = function (row) {\r\n        var v = this.getValue(row);\r\n        return v === '' || v == null ? null : v.toLowerCase();\r\n    };\r\n    StringColumn.prototype.toCompareValueType = function () {\r\n        return ECompareValueType.STRING;\r\n    };\r\n    StringColumn.prototype.toCompareGroupValue = function (rows, _group, valueCache) {\r\n        var _this = this;\r\n        if (isSeqEmpty(rows)) {\r\n            return null;\r\n        }\r\n        // take the smallest one\r\n        if (valueCache) {\r\n            return valueCache.reduce(function (acc, v) { return acc == null || v < acc ? v : acc; }, null);\r\n        }\r\n        return rows.reduce(function (acc, d) {\r\n            var v = _this.getValue(d);\r\n            return acc == null || (v != null && v < acc) ? v : acc;\r\n        }, null);\r\n    };\r\n    StringColumn.prototype.toCompareGroupValueType = function () {\r\n        return ECompareValueType.STRING;\r\n    };\r\n    var StringColumn_1;\r\n    StringColumn.EVENT_FILTER_CHANGED = 'filterChanged';\r\n    StringColumn.EVENT_GROUPING_CHANGED = 'groupingChanged';\r\n    //magic key for filtering missing ones\r\n    StringColumn.FILTER_MISSING = '__FILTER_MISSING';\r\n    StringColumn = StringColumn_1 = tslib_1.__decorate([\r\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'search', 'groupBy', 'sortGroupBy', 'filterString'),\r\n        dialogAddons('group', 'groupString'),\r\n        Category('string')\r\n    ], StringColumn);\r\n    return StringColumn;\r\n}(ValueColumn));\r\nexport default StringColumn;\r\n//# sourceMappingURL=StringColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport Column from './Column';\r\nimport StringColumn from './StringColumn';\r\n/**\r\n * a string column in which the values can be edited locally\r\n */\r\nvar AnnotateColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(AnnotateColumn, _super);\r\n    function AnnotateColumn() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.annotations = new Map();\r\n        return _this;\r\n    }\r\n    AnnotateColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([AnnotateColumn.EVENT_VALUE_CHANGED]);\r\n    };\r\n    AnnotateColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    AnnotateColumn.prototype.getValue = function (row) {\r\n        if (this.annotations.has(row.i)) {\r\n            return this.annotations.get(row.i);\r\n        }\r\n        return _super.prototype.getValue.call(this, row);\r\n    };\r\n    AnnotateColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        r.annotations = {};\r\n        this.annotations.forEach(function (v, k) {\r\n            r.annotations[k] = v;\r\n        });\r\n        return r;\r\n    };\r\n    AnnotateColumn.prototype.restore = function (dump, factory) {\r\n        var _this = this;\r\n        _super.prototype.restore.call(this, dump, factory);\r\n        if (!dump.annotations) {\r\n            return;\r\n        }\r\n        Object.keys(dump.annotations).forEach(function (k) {\r\n            _this.annotations.set(Number(k), dump.annotations[k]);\r\n        });\r\n    };\r\n    AnnotateColumn.prototype.setValue = function (row, value) {\r\n        var old = this.getValue(row);\r\n        if (old === value) {\r\n            return true;\r\n        }\r\n        if (value === '' || value == null) {\r\n            this.annotations.delete(row.i);\r\n        }\r\n        else {\r\n            this.annotations.set(row.i, value);\r\n        }\r\n        this.fire([AnnotateColumn.EVENT_VALUE_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], row.i, old, value);\r\n        return true;\r\n    };\r\n    AnnotateColumn.EVENT_VALUE_CHANGED = 'valueChanged';\r\n    return AnnotateColumn;\r\n}(StringColumn));\r\nexport default AnnotateColumn;\r\n//# sourceMappingURL=AnnotateColumn.js.map","import { DEFAULT_COLOR } from './interfaces';\r\nexport var DEFAULT_CATEGORICAL_COLOR_FUNCTION = {\r\n    apply: function (v) { return v ? v.color : DEFAULT_COLOR; },\r\n    toJSON: function () { return null; },\r\n    clone: function () { return DEFAULT_CATEGORICAL_COLOR_FUNCTION; },\r\n    eq: function (other) { return other === DEFAULT_CATEGORICAL_COLOR_FUNCTION; }\r\n};\r\nvar ReplacmentColorMappingFunction = /** @class */ (function () {\r\n    function ReplacmentColorMappingFunction(map) {\r\n        this.map = new Map(Array.from(map.entries()).map(function (_a) {\r\n            var k = _a[0], v = _a[1];\r\n            return [typeof k === 'string' ? k : k.name, v];\r\n        }));\r\n    }\r\n    ReplacmentColorMappingFunction.prototype.apply = function (v) {\r\n        return this.map.has(v.name) ? this.map.get(v.name) : DEFAULT_CATEGORICAL_COLOR_FUNCTION.apply(v);\r\n    };\r\n    ReplacmentColorMappingFunction.prototype.toJSON = function () {\r\n        var r = {};\r\n        this.map.forEach(function (v, k) { return r[k] = v; });\r\n        return {\r\n            type: 'replace',\r\n            map: r\r\n        };\r\n    };\r\n    ReplacmentColorMappingFunction.prototype.clone = function () {\r\n        return new ReplacmentColorMappingFunction(new Map(this.map.entries()));\r\n    };\r\n    ReplacmentColorMappingFunction.prototype.eq = function (other) {\r\n        var _this = this;\r\n        if (!(other instanceof ReplacmentColorMappingFunction)) {\r\n            return false;\r\n        }\r\n        if (other.map.size !== this.map.size) {\r\n            return false;\r\n        }\r\n        return Array.from(this.map.keys()).every(function (k) { return _this.map.get(k) === other.map.get(k); });\r\n    };\r\n    ReplacmentColorMappingFunction.restore = function (dump, categories) {\r\n        if (dump.type === 'replace') { // new dump format\r\n            dump = dump.map;\r\n        }\r\n        var lookup = new Map(categories.map(function (d) { return [d.name, d]; }));\r\n        var r = new Map();\r\n        for (var _i = 0, _a = Object.keys(dump); _i < _a.length; _i++) {\r\n            var key = _a[_i];\r\n            if (lookup.has(key)) {\r\n                r.set(lookup.get(key), dump[key]);\r\n            }\r\n        }\r\n        return new ReplacmentColorMappingFunction(r);\r\n    };\r\n    return ReplacmentColorMappingFunction;\r\n}());\r\nexport { ReplacmentColorMappingFunction };\r\n/**\r\n * @internal\r\n */\r\nexport function restoreCategoricalColorMapping(dump, categories) {\r\n    if (!dump) {\r\n        return DEFAULT_CATEGORICAL_COLOR_FUNCTION;\r\n    }\r\n    return ReplacmentColorMappingFunction.restore(dump, categories);\r\n}\r\n//# sourceMappingURL=CategoricalColorMappingFunction.js.map","import { isSeqEmpty, empty } from '../internal';\r\nimport { FIRST_IS_MISSING, ECompareValueType } from '.';\r\nimport { colorPool } from './internal';\r\nimport { DEFAULT_COLOR } from './interfaces';\r\n/** @internal */\r\nexport function toCategory(cat, value, nextColor) {\r\n    if (nextColor === void 0) { nextColor = function () { return DEFAULT_COLOR; }; }\r\n    if (typeof cat === 'string') {\r\n        //just the category value\r\n        return { name: cat, label: cat, color: nextColor(), value: value };\r\n    }\r\n    var name = cat.name == null ? String(cat.value) : cat.name;\r\n    return {\r\n        name: name,\r\n        label: cat.label || name,\r\n        color: cat.color || nextColor(),\r\n        value: cat.value != null ? cat.value : value\r\n    };\r\n}\r\n/** @internal */\r\nexport function toCompareCategoryValue(v) {\r\n    if (v == null) {\r\n        return NaN;\r\n    }\r\n    return v.value;\r\n}\r\nexport var COMPARE_CATEGORY_VALUE_TYPES = ECompareValueType.FLOAT_ASC;\r\nfunction findMostFrequent(rows, valueCache) {\r\n    var hist = new Map();\r\n    if (valueCache) {\r\n        valueCache.forEach(function (cat) {\r\n            hist.set(cat, (hist.get(cat) || 0) + 1);\r\n        });\r\n    }\r\n    else {\r\n        rows.forEach(function (cat) {\r\n            hist.set(cat, (hist.get(cat) || 0) + 1);\r\n        });\r\n    }\r\n    if (hist.size === 0) {\r\n        return {\r\n            cat: null,\r\n            count: 0\r\n        };\r\n    }\r\n    var topCat = null;\r\n    var topCount = 0;\r\n    hist.forEach(function (count, cat) {\r\n        if (count > topCount) {\r\n            topCat = cat;\r\n            topCount = count;\r\n        }\r\n    });\r\n    return {\r\n        cat: topCat,\r\n        count: topCount\r\n    };\r\n}\r\n/** @internal */\r\nexport function toMostFrequentCategoricals(rows, col) {\r\n    if (isSeqEmpty(rows)) {\r\n        return empty(col.dataLength);\r\n    }\r\n    var maps = empty(col.dataLength).map(function () { return new Map(); });\r\n    rows.forEach(function (row) {\r\n        var vs = col.getCategories(row);\r\n        if (!vs) {\r\n            return;\r\n        }\r\n        for (var i = 0; i < maps.length; ++i) {\r\n            var hist = maps[i];\r\n            var cat = vs[i] || null;\r\n            hist.set(cat, (hist.get(cat) || 0) + 1);\r\n        }\r\n    });\r\n    return maps.map(function (hist) {\r\n        if (hist.size === 0) {\r\n            return null;\r\n        }\r\n        var topCat = null;\r\n        var topCount = 0;\r\n        hist.forEach(function (count, cat) {\r\n            if (count > topCount) {\r\n                topCat = cat;\r\n                topCount = count;\r\n            }\r\n        });\r\n        return topCat;\r\n    });\r\n}\r\n/** @internal */\r\nexport function toGroupCompareCategoryValue(rows, col, valueCache) {\r\n    if (isSeqEmpty(rows)) {\r\n        return [NaN, null];\r\n    }\r\n    var mostFrequent = findMostFrequent(rows.map(function (d) { return col.getCategory(d); }), valueCache);\r\n    if (mostFrequent.cat == null) {\r\n        return [NaN, null];\r\n    }\r\n    return [mostFrequent.cat.value, mostFrequent.cat.name.toLowerCase()];\r\n}\r\nexport var COMPARE_GROUP_CATEGORY_VALUE_TYPES = [ECompareValueType.FLOAT, ECompareValueType.STRING];\r\n/** @internal */\r\nfunction compareCategory(a, b) {\r\n    var aNull = a == null || isNaN(a.value);\r\n    var bNull = b == null || isNaN(b.value);\r\n    if (aNull || a == null) {\r\n        return bNull ? 0 : FIRST_IS_MISSING;\r\n    }\r\n    if (bNull || b == null) {\r\n        return -FIRST_IS_MISSING;\r\n    }\r\n    if (a.value === b.value) {\r\n        return a.label.toLowerCase().localeCompare(b.label.toLowerCase());\r\n    }\r\n    return a.value - b.value;\r\n}\r\nexport function toCategories(desc) {\r\n    if (!desc.categories) {\r\n        return [];\r\n    }\r\n    var nextColor = colorPool();\r\n    var l = desc.categories.length - 1;\r\n    var cats = desc.categories.map(function (cat, i) { return toCategory(cat, i / l, nextColor); });\r\n    return cats.sort(compareCategory);\r\n}\r\n/** @internal */\r\nfunction isEmptyFilter(f) {\r\n    return f == null || (!f.filterMissing && (f.filter == null || f.filter === ''));\r\n}\r\n/** @internal */\r\nexport function isEqualCategoricalFilter(a, b) {\r\n    if (a === b) {\r\n        return true;\r\n    }\r\n    if (a == null || b == null) {\r\n        return isEmptyFilter(a) === isEmptyFilter(b);\r\n    }\r\n    if (a.filterMissing !== b.filterMissing || (typeof a.filter !== typeof b.filter)) {\r\n        return false;\r\n    }\r\n    if (Array.isArray(a.filter)) {\r\n        return arrayEquals(a.filter, b.filter);\r\n    }\r\n    return String(a.filter) === String(b.filter);\r\n}\r\n/** @internal */\r\nexport function isEqualSetCategoricalFilter(a, b) {\r\n    if (!isEqualCategoricalFilter(a, b)) {\r\n        return false;\r\n    }\r\n    var am = a && a.mode ? a.mode : 'every';\r\n    var bm = b && b.mode ? b.mode : 'every';\r\n    return am === bm;\r\n}\r\nfunction arrayEquals(a, b) {\r\n    var al = a != null ? a.length : 0;\r\n    var bl = b != null ? b.length : 0;\r\n    if (al !== bl) {\r\n        return false;\r\n    }\r\n    if (al === 0) {\r\n        return true;\r\n    }\r\n    return a.every(function (ai, i) { return ai === b[i]; });\r\n}\r\n/** @internal */\r\nexport function isCategoryIncluded(filter, category) {\r\n    if (filter == null) {\r\n        return true;\r\n    }\r\n    if (category == null || isNaN(category.value)) {\r\n        return !filter.filterMissing;\r\n    }\r\n    var filterObj = filter.filter;\r\n    if (Array.isArray(filterObj)) { //array mode\r\n        return filterObj.includes(category.name);\r\n    }\r\n    if (typeof filterObj === 'string' && filterObj.length > 0) { //search mode\r\n        return category.name.toLowerCase().includes(filterObj.toLowerCase());\r\n    }\r\n    if (filterObj instanceof RegExp) { //regex match mode\r\n        return filterObj.test(category.name);\r\n    }\r\n    return true;\r\n}\r\n//# sourceMappingURL=internalCategorical.js.map","import * as tslib_1 from \"tslib\";\r\nimport { Category, toolbar } from './annotations';\r\nimport { DEFAULT_CATEGORICAL_COLOR_FUNCTION } from './CategoricalColorMappingFunction';\r\nimport Column from './Column';\r\nimport { DEFAULT_COLOR } from './interfaces';\r\nimport { missingGroup } from './missing';\r\nimport ValueColumn from './ValueColumn';\r\nimport { toCategories, isCategoryIncluded, isEqualCategoricalFilter, toCompareCategoryValue, COMPARE_CATEGORY_VALUE_TYPES, toGroupCompareCategoryValue, COMPARE_GROUP_CATEGORY_VALUE_TYPES } from './internalCategorical';\r\n/**\r\n * column for categorical values\r\n */\r\nvar CategoricalColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(CategoricalColumn, _super);\r\n    function CategoricalColumn(id, desc) {\r\n        var _this = _super.call(this, id, desc) || this;\r\n        _this.lookup = new Map();\r\n        /**\r\n         * set of categories to show\r\n         * @type {null}\r\n         * @private\r\n         */\r\n        _this.currentFilter = null;\r\n        _this.categories = toCategories(desc);\r\n        _this.categories.forEach(function (d) { return _this.lookup.set(d.name, d); });\r\n        _this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\r\n        return _this;\r\n    }\r\n    CategoricalColumn_1 = CategoricalColumn;\r\n    CategoricalColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([CategoricalColumn_1.EVENT_FILTER_CHANGED, CategoricalColumn_1.EVENT_COLOR_MAPPING_CHANGED]);\r\n    };\r\n    CategoricalColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    CategoricalColumn.prototype.getValue = function (row) {\r\n        var v = this.getCategory(row);\r\n        return v ? v.name : null;\r\n    };\r\n    CategoricalColumn.prototype.getCategory = function (row) {\r\n        var v = _super.prototype.getValue.call(this, row);\r\n        if (!v) {\r\n            return null;\r\n        }\r\n        var vs = String(v);\r\n        return this.lookup.has(vs) ? this.lookup.get(vs) : null;\r\n    };\r\n    Object.defineProperty(CategoricalColumn.prototype, \"dataLength\", {\r\n        get: function () {\r\n            return this.categories.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CategoricalColumn.prototype, \"labels\", {\r\n        get: function () {\r\n            return this.categories.map(function (d) { return d.label; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    CategoricalColumn.prototype.getLabel = function (row) {\r\n        var v = this.getCategory(row);\r\n        return v ? v.label : '';\r\n    };\r\n    CategoricalColumn.prototype.getCategories = function (row) {\r\n        var v = this.getCategory(row);\r\n        return [v];\r\n    };\r\n    CategoricalColumn.prototype.getValues = function (row) {\r\n        var v = this.getCategory(row);\r\n        return this.categories.map(function (d) { return d === v; });\r\n    };\r\n    CategoricalColumn.prototype.getLabels = function (row) {\r\n        return this.getValues(row).map(String);\r\n    };\r\n    CategoricalColumn.prototype.getMap = function (row) {\r\n        var cats = this.categories;\r\n        return this.getValues(row).map(function (value, i) { return ({ key: cats[i].label, value: value }); });\r\n    };\r\n    CategoricalColumn.prototype.getMapLabel = function (row) {\r\n        var cats = this.categories;\r\n        return this.getLabels(row).map(function (value, i) { return ({ key: cats[i].label, value: value }); });\r\n    };\r\n    CategoricalColumn.prototype.getSet = function (row) {\r\n        var cat = this.getCategory(row);\r\n        var r = new Set();\r\n        if (cat) {\r\n            r.add(cat);\r\n        }\r\n        return r;\r\n    };\r\n    CategoricalColumn.prototype.iterCategory = function (row) {\r\n        return [this.getCategory(row)];\r\n    };\r\n    CategoricalColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        r.filter = this.currentFilter;\r\n        r.colorMapping = this.colorMapping.toJSON();\r\n        return r;\r\n    };\r\n    CategoricalColumn.prototype.restore = function (dump, factory) {\r\n        _super.prototype.restore.call(this, dump, factory);\r\n        this.colorMapping = factory.categoricalColorMappingFunction(dump.colorMapping, this.categories);\r\n        if ('filter' in dump) {\r\n            this.currentFilter = null;\r\n            return;\r\n        }\r\n        var bak = dump.filter;\r\n        if (typeof bak === 'string' || Array.isArray(bak)) {\r\n            this.currentFilter = { filter: bak, filterMissing: false };\r\n        }\r\n        else {\r\n            this.currentFilter = bak;\r\n        }\r\n    };\r\n    CategoricalColumn.prototype.getColor = function (row) {\r\n        var v = this.getCategory(row);\r\n        return v ? this.colorMapping.apply(v) : DEFAULT_COLOR;\r\n    };\r\n    CategoricalColumn.prototype.getColorMapping = function () {\r\n        return this.colorMapping.clone();\r\n    };\r\n    CategoricalColumn.prototype.setColorMapping = function (mapping) {\r\n        if (this.colorMapping.eq(mapping)) {\r\n            return;\r\n        }\r\n        this.fire([CategoricalColumn_1.EVENT_COLOR_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], this.colorMapping.clone(), this.colorMapping = mapping);\r\n    };\r\n    CategoricalColumn.prototype.isFiltered = function () {\r\n        return this.currentFilter != null;\r\n    };\r\n    CategoricalColumn.prototype.filter = function (row, valueCache) {\r\n        return isCategoryIncluded(this.currentFilter, valueCache !== undefined ? valueCache : this.getCategory(row));\r\n    };\r\n    CategoricalColumn.prototype.getFilter = function () {\r\n        return this.currentFilter == null ? null : Object.assign({}, this.currentFilter);\r\n    };\r\n    CategoricalColumn.prototype.setFilter = function (filter) {\r\n        if (isEqualCategoricalFilter(this.currentFilter, filter)) {\r\n            return;\r\n        }\r\n        this.fire([CategoricalColumn_1.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.currentFilter, this.currentFilter = filter);\r\n    };\r\n    CategoricalColumn.prototype.clearFilter = function () {\r\n        var was = this.isFiltered();\r\n        this.setFilter(null);\r\n        return was;\r\n    };\r\n    CategoricalColumn.prototype.toCompareValue = function (row, valueCache) {\r\n        return toCompareCategoryValue(valueCache !== undefined ? valueCache : this.getCategory(row));\r\n    };\r\n    CategoricalColumn.prototype.toCompareValueType = function () {\r\n        return COMPARE_CATEGORY_VALUE_TYPES;\r\n    };\r\n    CategoricalColumn.prototype.group = function (row, valueCache) {\r\n        var cat = valueCache !== undefined ? valueCache : this.getCategory(row);\r\n        if (!cat) {\r\n            return Object.assign({}, missingGroup);\r\n        }\r\n        return { name: cat.label, color: cat.color };\r\n    };\r\n    CategoricalColumn.prototype.toCompareGroupValue = function (rows, _group, valueCache) {\r\n        return toGroupCompareCategoryValue(rows, this, valueCache);\r\n    };\r\n    CategoricalColumn.prototype.toCompareGroupValueType = function () {\r\n        return COMPARE_GROUP_CATEGORY_VALUE_TYPES;\r\n    };\r\n    CategoricalColumn.prototype.getGroupRenderer = function () {\r\n        var current = _super.prototype.getGroupRenderer.call(this);\r\n        if (current === this.desc.type && this.isGroupedBy() >= 0) {\r\n            // still the default and the stratification criteria\r\n            return 'catdistributionbar';\r\n        }\r\n        return current;\r\n    };\r\n    var CategoricalColumn_1;\r\n    CategoricalColumn.EVENT_FILTER_CHANGED = 'filterChanged';\r\n    CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED = 'colorMappingChanged';\r\n    CategoricalColumn = CategoricalColumn_1 = tslib_1.__decorate([\r\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'group', 'groupBy', 'sortGroupBy', 'filterCategorical', 'colorMappedCategorical'),\r\n        Category('categorical')\r\n    ], CategoricalColumn);\r\n    return CategoricalColumn;\r\n}(ValueColumn));\r\nexport default CategoricalColumn;\r\n//# sourceMappingURL=CategoricalColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { Category, toolbar } from './annotations';\r\nimport CategoricalColumn from './CategoricalColumn';\r\nimport Column from './Column';\r\nimport ValueColumn from './ValueColumn';\r\nimport { ECompareValueType } from './interfaces';\r\nimport { DEFAULT_CATEGORICAL_COLOR_FUNCTION } from './CategoricalColorMappingFunction';\r\nimport { integrateDefaults } from './internal';\r\n/**\r\n * a string column with optional alignment\r\n */\r\nvar BooleanColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(BooleanColumn, _super);\r\n    function BooleanColumn(id, desc) {\r\n        var _this = _super.call(this, id, integrateDefaults(desc, {\r\n            width: 30\r\n        })) || this;\r\n        _this.currentFilter = null;\r\n        _this.categories = [\r\n            {\r\n                name: desc.trueMarker || '',\r\n                color: BooleanColumn_1.GROUP_TRUE.color,\r\n                label: BooleanColumn_1.GROUP_TRUE.name,\r\n                value: 0\r\n            },\r\n            {\r\n                name: desc.trueMarker || '',\r\n                color: BooleanColumn_1.GROUP_FALSE.color,\r\n                label: BooleanColumn_1.GROUP_FALSE.name,\r\n                value: 1\r\n            }\r\n        ];\r\n        _this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\r\n        return _this;\r\n    }\r\n    BooleanColumn_1 = BooleanColumn;\r\n    BooleanColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([BooleanColumn_1.EVENT_COLOR_MAPPING_CHANGED, BooleanColumn_1.EVENT_FILTER_CHANGED]);\r\n    };\r\n    BooleanColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    Object.defineProperty(BooleanColumn.prototype, \"dataLength\", {\r\n        get: function () {\r\n            return this.categories.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BooleanColumn.prototype, \"labels\", {\r\n        get: function () {\r\n            return this.categories.map(function (d) { return d.label; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    BooleanColumn.prototype.getValue = function (row) {\r\n        var v = _super.prototype.getValue.call(this, row);\r\n        if (typeof (v) === 'undefined' || v == null) {\r\n            return false;\r\n        }\r\n        return v === true || v === 'true' || v === 'yes' || v === 'x';\r\n    };\r\n    BooleanColumn.prototype.getCategory = function (row) {\r\n        var v = this.getValue(row);\r\n        return this.categories[v ? 0 : 1];\r\n    };\r\n    BooleanColumn.prototype.getCategories = function (row) {\r\n        return [this.getCategory(row)];\r\n    };\r\n    BooleanColumn.prototype.iterCategory = function (row) {\r\n        return [this.getCategory(row)];\r\n    };\r\n    BooleanColumn.prototype.getColor = function (row) {\r\n        return CategoricalColumn.prototype.getColor.call(this, row);\r\n    };\r\n    BooleanColumn.prototype.getLabel = function (row) {\r\n        return CategoricalColumn.prototype.getLabel.call(this, row);\r\n    };\r\n    BooleanColumn.prototype.getLabels = function (row) {\r\n        return CategoricalColumn.prototype.getLabels.call(this, row);\r\n    };\r\n    BooleanColumn.prototype.getValues = function (row) {\r\n        return CategoricalColumn.prototype.getValues.call(this, row);\r\n    };\r\n    BooleanColumn.prototype.getMap = function (row) {\r\n        return CategoricalColumn.prototype.getMap.call(this, row);\r\n    };\r\n    BooleanColumn.prototype.getMapLabel = function (row) {\r\n        return CategoricalColumn.prototype.getMapLabel.call(this, row);\r\n    };\r\n    BooleanColumn.prototype.getSet = function (row) {\r\n        var v = this.getValue(row);\r\n        var r = new Set();\r\n        r.add(this.categories[v ? 0 : 1]);\r\n        return r;\r\n    };\r\n    BooleanColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        r.colorMapping = this.colorMapping.toJSON();\r\n        if (this.currentFilter != null) {\r\n            r.filter = this.currentFilter;\r\n        }\r\n        return r;\r\n    };\r\n    BooleanColumn.prototype.restore = function (dump, factory) {\r\n        _super.prototype.restore.call(this, dump, factory);\r\n        this.colorMapping = factory.categoricalColorMappingFunction(dump.colorMapping, this.categories);\r\n        if (typeof dump.filter !== 'undefined') {\r\n            this.currentFilter = dump.filter;\r\n        }\r\n    };\r\n    BooleanColumn.prototype.getColorMapping = function () {\r\n        return this.colorMapping.clone();\r\n    };\r\n    BooleanColumn.prototype.setColorMapping = function (mapping) {\r\n        if (this.colorMapping.eq(mapping)) {\r\n            return;\r\n        }\r\n        this.fire([CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], this.colorMapping.clone(), this.colorMapping = mapping);\r\n    };\r\n    BooleanColumn.prototype.isFiltered = function () {\r\n        return this.currentFilter != null;\r\n    };\r\n    BooleanColumn.prototype.filter = function (row) {\r\n        if (!this.isFiltered()) {\r\n            return true;\r\n        }\r\n        var r = this.getValue(row);\r\n        return r === this.currentFilter;\r\n    };\r\n    BooleanColumn.prototype.getFilter = function () {\r\n        return this.currentFilter;\r\n    };\r\n    BooleanColumn.prototype.setFilter = function (filter) {\r\n        if (this.currentFilter === filter) {\r\n            return;\r\n        }\r\n        this.fire([BooleanColumn_1.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.currentFilter, this.currentFilter = filter);\r\n    };\r\n    BooleanColumn.prototype.clearFilter = function () {\r\n        var was = this.isFiltered();\r\n        this.setFilter(null);\r\n        return was;\r\n    };\r\n    BooleanColumn.prototype.toCompareValue = function (row) {\r\n        var v = this.getValue(row);\r\n        if (v == null) {\r\n            return NaN;\r\n        }\r\n        return v ? 1 : 0;\r\n    };\r\n    BooleanColumn.prototype.toCompareValueType = function () {\r\n        return ECompareValueType.BINARY;\r\n    };\r\n    BooleanColumn.prototype.group = function (row) {\r\n        var enabled = this.getValue(row);\r\n        return Object.assign({}, enabled ? BooleanColumn_1.GROUP_TRUE : BooleanColumn_1.GROUP_FALSE);\r\n    };\r\n    var BooleanColumn_1;\r\n    BooleanColumn.EVENT_FILTER_CHANGED = 'filterChanged';\r\n    BooleanColumn.EVENT_COLOR_MAPPING_CHANGED = 'colorMappingChanged';\r\n    BooleanColumn.GROUP_TRUE = { name: 'True', color: 'black' };\r\n    BooleanColumn.GROUP_FALSE = { name: 'False', color: 'white' };\r\n    BooleanColumn = BooleanColumn_1 = tslib_1.__decorate([\r\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'group', 'groupBy', 'filterBoolean', 'colorMappedCategorical'),\r\n        Category('categorical')\r\n    ], BooleanColumn);\r\n    return BooleanColumn;\r\n}(ValueColumn));\r\nexport default BooleanColumn;\r\n//# sourceMappingURL=BooleanColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { Category } from './annotations';\r\nimport ValueColumn from './ValueColumn';\r\nimport { empty } from '../internal';\r\nvar ArrayColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ArrayColumn, _super);\r\n    function ArrayColumn(id, desc) {\r\n        var _this = _super.call(this, id, desc) || this;\r\n        _this._dataLength = desc.dataLength == null || isNaN(desc.dataLength) ? null : desc.dataLength;\r\n        _this.originalLabels = desc.labels || (empty(_this._dataLength == null ? 0 : _this._dataLength).map(function (_d, i) { return \"Column \" + i; }));\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ArrayColumn.prototype, \"labels\", {\r\n        get: function () {\r\n            return this.originalLabels;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ArrayColumn.prototype, \"dataLength\", {\r\n        get: function () {\r\n            return this._dataLength;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ArrayColumn.prototype.getValue = function (row) {\r\n        var r = this.getValues(row);\r\n        return r.every(function (d) { return d === null; }) ? null : r;\r\n    };\r\n    ArrayColumn.prototype.getValues = function (row) {\r\n        var r = _super.prototype.getValue.call(this, row);\r\n        return r == null ? [] : r;\r\n    };\r\n    ArrayColumn.prototype.getLabels = function (row) {\r\n        return this.getValues(row).map(String);\r\n    };\r\n    ArrayColumn.prototype.getLabel = function (row) {\r\n        var v = this.getLabels(row);\r\n        if (v.length === 0) {\r\n            return '';\r\n        }\r\n        return v.toString();\r\n    };\r\n    ArrayColumn.prototype.getMap = function (row) {\r\n        var labels = this.labels;\r\n        return this.getValues(row).map(function (value, i) { return ({ key: labels[i], value: value }); });\r\n    };\r\n    ArrayColumn.prototype.getMapLabel = function (row) {\r\n        var labels = this.labels;\r\n        return this.getLabels(row).map(function (value, i) { return ({ key: labels[i], value: value }); });\r\n    };\r\n    ArrayColumn = tslib_1.__decorate([\r\n        Category('array')\r\n    ], ArrayColumn);\r\n    return ArrayColumn;\r\n}(ValueColumn));\r\nexport default ArrayColumn;\r\n//# sourceMappingURL=ArrayColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport ArrayColumn from './ArrayColumn';\r\nimport { DEFAULT_COLOR } from './interfaces';\r\nimport CategoricalColumn from './CategoricalColumn';\r\nimport { DEFAULT_CATEGORICAL_COLOR_FUNCTION } from './CategoricalColorMappingFunction';\r\nimport { chooseUIntByDataLength, integrateDefaults } from './internal';\r\nimport { toCategory } from './internalCategorical';\r\nimport { toolbar } from './annotations';\r\nvar BooleansColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(BooleansColumn, _super);\r\n    function BooleansColumn(id, desc) {\r\n        var _this = _super.call(this, id, integrateDefaults(desc, {\r\n            renderer: 'upset'\r\n        })) || this;\r\n        _this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\r\n        return _this;\r\n    }\r\n    BooleansColumn_1 = BooleansColumn;\r\n    Object.defineProperty(BooleansColumn.prototype, \"categories\", {\r\n        get: function () {\r\n            return this.labels.map(function (d, i) { return toCategory(d, i); });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    BooleansColumn.prototype.getSet = function (row) {\r\n        var vs = this.getValues(row);\r\n        return new Set(this.categories.filter(function (_, i) { return vs[i]; }));\r\n    };\r\n    BooleansColumn.prototype.toCompareValue = function (row) {\r\n        var v = this.getValue(row);\r\n        if (v == null) {\r\n            return NaN;\r\n        }\r\n        return v.reduce(function (a, b) { return a + (b ? 1 : 0); }, 0);\r\n    };\r\n    BooleansColumn.prototype.toCompareValueType = function () {\r\n        return chooseUIntByDataLength(this.dataLength);\r\n    };\r\n    BooleansColumn.prototype.getCategories = function (row) {\r\n        var categories = this.categories;\r\n        return _super.prototype.getValues.call(this, row).map(function (v, i) {\r\n            return v ? categories[i] : null;\r\n        });\r\n    };\r\n    BooleansColumn.prototype.iterCategory = function (row) {\r\n        return this.getCategories(row);\r\n    };\r\n    BooleansColumn.prototype.getColors = function (row) {\r\n        var _this = this;\r\n        return this.getCategories(row).map(function (d) { return d ? _this.colorMapping.apply(d) : DEFAULT_COLOR; });\r\n    };\r\n    BooleansColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([BooleansColumn_1.EVENT_COLOR_MAPPING_CHANGED]);\r\n    };\r\n    BooleansColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    BooleansColumn.prototype.getColorMapping = function () {\r\n        return this.colorMapping.clone();\r\n    };\r\n    BooleansColumn.prototype.setColorMapping = function (mapping) {\r\n        return CategoricalColumn.prototype.setColorMapping.call(this, mapping);\r\n    };\r\n    BooleansColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        r.colorMapping = this.colorMapping.toJSON();\r\n        return r;\r\n    };\r\n    BooleansColumn.prototype.restore = function (dump, factory) {\r\n        _super.prototype.restore.call(this, dump, factory);\r\n        this.colorMapping = factory.categoricalColorMappingFunction(dump.colorMapping, this.categories);\r\n    };\r\n    var BooleansColumn_1;\r\n    BooleansColumn.EVENT_COLOR_MAPPING_CHANGED = CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED;\r\n    BooleansColumn = BooleansColumn_1 = tslib_1.__decorate([\r\n        toolbar('rename', 'clone', 'sort', 'sortBy')\r\n    ], BooleansColumn);\r\n    return BooleansColumn;\r\n}(ArrayColumn));\r\nexport default BooleansColumn;\r\n//# sourceMappingURL=BooleansColumn.js.map","// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimal(1.23) returns [\"123\", 0].\nexport default function(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import formatDecimal from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimal(Math.abs(x)), x ? x[1] : NaN;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import formatDecimal from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimal(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  decimal: \".\",\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"],\n  minus: \"-\"\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","import formatDecimal from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": function(x, p) { return (x * 100).toFixed(p); },\n  \"b\": function(x) { return Math.round(x).toString(2); },\n  \"c\": function(x) { return x + \"\"; },\n  \"d\": function(x) { return Math.round(x).toString(10); },\n  \"e\": function(x, p) { return x.toExponential(p); },\n  \"f\": function(x, p) { return x.toFixed(p); },\n  \"g\": function(x, p) { return x.toPrecision(p); },\n  \"o\": function(x) { return Math.round(x).toString(8); },\n  \"p\": function(x, p) { return formatRounded(x * 100, p); },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n  \"x\": function(x) { return Math.round(x).toString(16); }\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"-\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","import {pair} from \"./pairs\";\n\nexport default function(values0, values1, reduce) {\n  var n0 = values0.length,\n      n1 = values1.length,\n      values = new Array(n0 * n1),\n      i0,\n      i1,\n      i,\n      value0;\n\n  if (reduce == null) reduce = pair;\n\n  for (i0 = i = 0; i0 < n0; ++i0) {\n    for (value0 = values0[i0], i1 = 0; i1 < n1; ++i1, ++i) {\n      values[i] = reduce(value0, values1[i1]);\n    }\n  }\n\n  return values;\n}\n","var array = Array.prototype;\n\nexport var slice = array.slice;\nexport var map = array.map;\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) * step;\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n    while (++i < n) ticks[i] = (start - i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.interpolator(domain); break;\n    default: this.interpolator(interpolator).domain(domain); break;\n  }\n  return this;\n}\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume its an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","var array = Array.prototype;\n\nexport var map = array.map;\nexport var slice = array.slice;\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import {basis} from \"./basis.js\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport {map, slice} from \"./array\";\nimport constant from \"./constant\";\nimport number from \"./number\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(domain) {\n  var a = domain[0], b = domain[domain.length - 1], t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    piecewise = Math.min(domain.length, range.length) > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = map.call(_, number), clamp === identity || (clamp = clamper(domain)), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = slice.call(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? clamper(domain) : identity, scale) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous(transform, untransform) {\n  return transformer()(transform, untransform);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy, identity} from \"./continuous\";\nimport {initRange} from \"./init\";\nimport tickFormat from \"./tickFormat\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain(),\n        i0 = 0,\n        i1 = d.length - 1,\n        start = d[i0],\n        stop = d[i1],\n        step;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n\n    step = tickIncrement(start, stop, count);\n\n    if (step > 0) {\n      start = Math.floor(start / step) * step;\n      stop = Math.ceil(stop / step) * step;\n      step = tickIncrement(start, stop, count);\n    } else if (step < 0) {\n      start = Math.ceil(start * step) / step;\n      stop = Math.floor(stop * step) / step;\n      step = tickIncrement(start, stop, count);\n    }\n\n    if (step > 0) {\n      d[i0] = Math.floor(start / step) * step;\n      d[i1] = Math.ceil(stop / step) * step;\n      domain(d);\n    } else if (step < 0) {\n      d[i0] = Math.ceil(start * step) / step;\n      d[i1] = Math.floor(stop * step) / step;\n      domain(d);\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous(identity, identity);\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","export default function(domain, interval) {\n  domain = domain.slice();\n\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}\n","import {ticks} from \"d3-array\";\nimport {format} from \"d3-format\";\nimport nice from \"./nice\";\nimport {copy, transformer} from \"./continuous\";\nimport {initRange} from \"./init\";\n\nfunction transformLog(x) {\n  return Math.log(x);\n}\n\nfunction transformExp(x) {\n  return Math.exp(x);\n}\n\nfunction transformLogn(x) {\n  return -Math.log(-x);\n}\n\nfunction transformExpn(x) {\n  return -Math.exp(-x);\n}\n\nfunction pow10(x) {\n  return isFinite(x) ? +(\"1e\" + x) : x < 0 ? 0 : x;\n}\n\nfunction powp(base) {\n  return base === 10 ? pow10\n      : base === Math.E ? Math.exp\n      : function(x) { return Math.pow(base, x); };\n}\n\nfunction logp(base) {\n  return base === Math.E ? Math.log\n      : base === 10 && Math.log10\n      || base === 2 && Math.log2\n      || (base = Math.log(base), function(x) { return Math.log(x) / base; });\n}\n\nfunction reflect(f) {\n  return function(x) {\n    return -f(-x);\n  };\n}\n\nexport function loggish(transform) {\n  var scale = transform(transformLog, transformExp),\n      domain = scale.domain,\n      base = 10,\n      logs,\n      pows;\n\n  function rescale() {\n    logs = logp(base), pows = powp(base);\n    if (domain()[0] < 0) {\n      logs = reflect(logs), pows = reflect(pows);\n      transform(transformLogn, transformExpn);\n    } else {\n      transform(transformLog, transformExp);\n    }\n    return scale;\n  }\n\n  scale.base = function(_) {\n    return arguments.length ? (base = +_, rescale()) : base;\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.ticks = function(count) {\n    var d = domain(),\n        u = d[0],\n        v = d[d.length - 1],\n        r;\n\n    if (r = v < u) i = u, u = v, v = i;\n\n    var i = logs(u),\n        j = logs(v),\n        p,\n        k,\n        t,\n        n = count == null ? 10 : +count,\n        z = [];\n\n    if (!(base % 1) && j - i < n) {\n      i = Math.round(i) - 1, j = Math.round(j) + 1;\n      if (u > 0) for (; i < j; ++i) {\n        for (k = 1, p = pows(i); k < base; ++k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      } else for (; i < j; ++i) {\n        for (k = base - 1, p = pows(i); k >= 1; --k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      }\n    } else {\n      z = ticks(i, j, Math.min(j - i, n)).map(pows);\n    }\n\n    return r ? z.reverse() : z;\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    if (specifier == null) specifier = base === 10 ? \".0e\" : \",\";\n    if (typeof specifier !== \"function\") specifier = format(specifier);\n    if (count === Infinity) return specifier;\n    if (count == null) count = 10;\n    var k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?\n    return function(d) {\n      var i = d / pows(Math.round(logs(d)));\n      if (i * base < base - 0.5) i *= base;\n      return i <= k ? specifier(d) : \"\";\n    };\n  };\n\n  scale.nice = function() {\n    return domain(nice(domain(), {\n      floor: function(x) { return pows(Math.floor(logs(x))); },\n      ceil: function(x) { return pows(Math.ceil(logs(x))); }\n    }));\n  };\n\n  return scale;\n}\n\nexport default function log() {\n  var scale = loggish(transformer()).domain([1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, log()).base(scale.base());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n","import {linearish} from \"./linear\";\nimport {copy, identity, transformer} from \"./continuous\";\nimport {initRange} from \"./init\";\n\nfunction transformPow(exponent) {\n  return function(x) {\n    return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);\n  };\n}\n\nfunction transformSqrt(x) {\n  return x < 0 ? -Math.sqrt(-x) : Math.sqrt(x);\n}\n\nfunction transformSquare(x) {\n  return x < 0 ? -x * x : x * x;\n}\n\nexport function powish(transform) {\n  var scale = transform(identity, identity),\n      exponent = 1;\n\n  function rescale() {\n    return exponent === 1 ? transform(identity, identity)\n        : exponent === 0.5 ? transform(transformSqrt, transformSquare)\n        : transform(transformPow(exponent), transformPow(1 / exponent));\n  }\n\n  scale.exponent = function(_) {\n    return arguments.length ? (exponent = +_, rescale()) : exponent;\n  };\n\n  return linearish(scale);\n}\n\nexport default function pow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, pow()).exponent(scale.exponent());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n\nexport function sqrt() {\n  return pow.apply(null, arguments).exponent(0.5);\n}\n","import interval from \"./interval.js\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","import interval from \"./interval.js\";\nimport {durationHour, durationMinute, durationSecond} from \"./duration.js\";\n\nvar hour = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationSecond} from \"./duration.js\";\n\nvar minute = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval.js\";\nimport {durationSecond} from \"./duration.js\";\n\nvar second = interval(function(date) {\n  date.setTime(date - date.getMilliseconds());\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","import interval from \"./interval.js\";\n\nvar millisecond = interval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;\n","import {bisector, tickStep} from \"d3-array\";\nimport {timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeMillisecond} from \"d3-time\";\nimport {timeFormat} from \"d3-time-format\";\nimport {map} from \"./array\";\nimport continuous, {copy, identity} from \"./continuous\";\nimport {initRange} from \"./init\";\nimport nice from \"./nice\";\n\nvar durationSecond = 1000,\n    durationMinute = durationSecond * 60,\n    durationHour = durationMinute * 60,\n    durationDay = durationHour * 24,\n    durationWeek = durationDay * 7,\n    durationMonth = durationDay * 30,\n    durationYear = durationDay * 365;\n\nfunction date(t) {\n  return new Date(t);\n}\n\nfunction number(t) {\n  return t instanceof Date ? +t : +new Date(+t);\n}\n\nexport function calendar(year, month, week, day, hour, minute, second, millisecond, format) {\n  var scale = continuous(identity, identity),\n      invert = scale.invert,\n      domain = scale.domain;\n\n  var formatMillisecond = format(\".%L\"),\n      formatSecond = format(\":%S\"),\n      formatMinute = format(\"%I:%M\"),\n      formatHour = format(\"%I %p\"),\n      formatDay = format(\"%a %d\"),\n      formatWeek = format(\"%b %d\"),\n      formatMonth = format(\"%B\"),\n      formatYear = format(\"%Y\");\n\n  var tickIntervals = [\n    [second,  1,      durationSecond],\n    [second,  5,  5 * durationSecond],\n    [second, 15, 15 * durationSecond],\n    [second, 30, 30 * durationSecond],\n    [minute,  1,      durationMinute],\n    [minute,  5,  5 * durationMinute],\n    [minute, 15, 15 * durationMinute],\n    [minute, 30, 30 * durationMinute],\n    [  hour,  1,      durationHour  ],\n    [  hour,  3,  3 * durationHour  ],\n    [  hour,  6,  6 * durationHour  ],\n    [  hour, 12, 12 * durationHour  ],\n    [   day,  1,      durationDay   ],\n    [   day,  2,  2 * durationDay   ],\n    [  week,  1,      durationWeek  ],\n    [ month,  1,      durationMonth ],\n    [ month,  3,  3 * durationMonth ],\n    [  year,  1,      durationYear  ]\n  ];\n\n  function tickFormat(date) {\n    return (second(date) < date ? formatMillisecond\n        : minute(date) < date ? formatSecond\n        : hour(date) < date ? formatMinute\n        : day(date) < date ? formatHour\n        : month(date) < date ? (week(date) < date ? formatDay : formatWeek)\n        : year(date) < date ? formatMonth\n        : formatYear)(date);\n  }\n\n  function tickInterval(interval, start, stop, step) {\n    if (interval == null) interval = 10;\n\n    // If a desired tick count is specified, pick a reasonable tick interval\n    // based on the extent of the domain and a rough estimate of tick size.\n    // Otherwise, assume interval is already a time interval and use it.\n    if (typeof interval === \"number\") {\n      var target = Math.abs(stop - start) / interval,\n          i = bisector(function(i) { return i[2]; }).right(tickIntervals, target);\n      if (i === tickIntervals.length) {\n        step = tickStep(start / durationYear, stop / durationYear, interval);\n        interval = year;\n      } else if (i) {\n        i = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n        step = i[1];\n        interval = i[0];\n      } else {\n        step = Math.max(tickStep(start, stop, interval), 1);\n        interval = millisecond;\n      }\n    }\n\n    return step == null ? interval : interval.every(step);\n  }\n\n  scale.invert = function(y) {\n    return new Date(invert(y));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? domain(map.call(_, number)) : domain().map(date);\n  };\n\n  scale.ticks = function(interval, step) {\n    var d = domain(),\n        t0 = d[0],\n        t1 = d[d.length - 1],\n        r = t1 < t0,\n        t;\n    if (r) t = t0, t0 = t1, t1 = t;\n    t = tickInterval(interval, t0, t1, step);\n    t = t ? t.range(t0, t1 + 1) : []; // inclusive stop\n    return r ? t.reverse() : t;\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return specifier == null ? tickFormat : format(specifier);\n  };\n\n  scale.nice = function(interval, step) {\n    var d = domain();\n    return (interval = tickInterval(interval, d[0], d[d.length - 1], step))\n        ? domain(nice(d, interval))\n        : scale;\n  };\n\n  scale.copy = function() {\n    return copy(scale, calendar(year, month, week, day, hour, minute, second, millisecond, format));\n  };\n\n  return scale;\n}\n\nexport default function() {\n  return initRange.apply(calendar(timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeMillisecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]), arguments);\n}\n","import interval from \"./interval.js\";\n\nvar utcMonth = interval(function(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function(date) {\n  return date.getUTCMonth();\n});\n\nexport default utcMonth;\nexport var utcMonths = utcMonth.range;\n","import interval from \"./interval.js\";\nimport {durationHour} from \"./duration.js\";\n\nvar utcHour = interval(function(date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getUTCHours();\n});\n\nexport default utcHour;\nexport var utcHours = utcHour.range;\n","import interval from \"./interval.js\";\nimport {durationMinute} from \"./duration.js\";\n\nvar utcMinute = interval(function(date) {\n  date.setUTCSeconds(0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getUTCMinutes();\n});\n\nexport default utcMinute;\nexport var utcMinutes = utcMinute.range;\n","import { scaleLinear, scaleLog, scalePow, scaleSqrt } from 'd3-scale';\r\nimport { similar } from '../internal';\r\nfunction toScale(type) {\r\n    if (type === void 0) { type = 'linear'; }\r\n    switch (type) {\r\n        case 'log':\r\n            return scaleLog().clamp(true);\r\n        case 'sqrt':\r\n            return scaleSqrt().clamp(true);\r\n        case 'pow1.1':\r\n            return scalePow().exponent(1.1).clamp(true);\r\n        case 'pow2':\r\n            return scalePow().exponent(2).clamp(true);\r\n        case 'pow3':\r\n            return scalePow().exponent(3).clamp(true);\r\n        default:\r\n            return scaleLinear().clamp(true);\r\n    }\r\n}\r\nfunction isSame(a, b) {\r\n    if (a.length !== b.length) {\r\n        return false;\r\n    }\r\n    return a.every(function (ai, i) { return similar(ai, b[i], 0.0001); });\r\n}\r\nfunction fixDomain(domain, type) {\r\n    if (type === 'log' && domain[0] === 0) {\r\n        domain[0] = 0.0000001; //0 is bad\r\n    }\r\n    return domain;\r\n}\r\n/**\r\n * a mapping function based on a d3 scale (linear, sqrt, log)\r\n */\r\nvar ScaleMappingFunction = /** @class */ (function () {\r\n    function ScaleMappingFunction(domain, type, range) {\r\n        if (domain === void 0) { domain = [0, 1]; }\r\n        if (type === void 0) { type = 'linear'; }\r\n        if (range === void 0) { range = [0, 1]; }\r\n        if (!domain || Array.isArray(domain)) {\r\n            this.type = type;\r\n            this.s = toScale(type).domain(fixDomain(domain || [0, 1], this.type)).range(range);\r\n        }\r\n        else {\r\n            var dump = domain;\r\n            this.type = dump.type;\r\n            this.s = toScale(dump.type).domain(dump.domain).range(dump.range);\r\n        }\r\n    }\r\n    Object.defineProperty(ScaleMappingFunction.prototype, \"domain\", {\r\n        get: function () {\r\n            return this.s.domain();\r\n        },\r\n        set: function (domain) {\r\n            this.s.domain(fixDomain(domain, this.type));\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ScaleMappingFunction.prototype, \"range\", {\r\n        get: function () {\r\n            return this.s.range();\r\n        },\r\n        set: function (range) {\r\n            this.s.range(range);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ScaleMappingFunction.prototype.getRange = function (format) {\r\n        return [format(this.invert(0)), format(this.invert(1))];\r\n    };\r\n    ScaleMappingFunction.prototype.apply = function (v) {\r\n        return this.s(v);\r\n    };\r\n    ScaleMappingFunction.prototype.invert = function (r) {\r\n        return this.s.invert(r);\r\n    };\r\n    Object.defineProperty(ScaleMappingFunction.prototype, \"scaleType\", {\r\n        get: function () {\r\n            return this.type;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ScaleMappingFunction.prototype.toJSON = function () {\r\n        return {\r\n            type: this.type,\r\n            domain: this.domain,\r\n            range: this.range\r\n        };\r\n    };\r\n    ScaleMappingFunction.prototype.eq = function (other) {\r\n        if (!(other instanceof ScaleMappingFunction)) {\r\n            return false;\r\n        }\r\n        var that = other;\r\n        return that.type === this.type && isSame(this.domain, that.domain) && isSame(this.range, that.range);\r\n    };\r\n    ScaleMappingFunction.prototype.clone = function () {\r\n        return new ScaleMappingFunction(this.domain, this.type, this.range);\r\n    };\r\n    return ScaleMappingFunction;\r\n}());\r\nexport { ScaleMappingFunction };\r\n/**\r\n * a mapping function based on a custom user function using 'value' as the current value\r\n */\r\nvar ScriptMappingFunction = /** @class */ (function () {\r\n    function ScriptMappingFunction(domain, code) {\r\n        if (domain === void 0) { domain = [0, 1]; }\r\n        if (code === void 0) { code = 'return this.linear(value,this.value_min,this.value_max);'; }\r\n        if (!domain || Array.isArray(domain)) {\r\n            this.domain = domain || [0, 1];\r\n        }\r\n        else {\r\n            var dump = domain;\r\n            this.domain = dump.domain;\r\n            code = dump.code;\r\n        }\r\n        this.code = typeof code === 'string' ? code : code.toString();\r\n        this.f = typeof code === 'function' ? code : (new Function('value', code));\r\n    }\r\n    ScriptMappingFunction.prototype.getRange = function () {\r\n        return ['?', '?'];\r\n    };\r\n    ScriptMappingFunction.prototype.apply = function (v) {\r\n        var min = this.domain[0], max = this.domain[this.domain.length - 1];\r\n        var r = this.f.call({\r\n            value_min: min,\r\n            value_max: max,\r\n            value_range: max - min,\r\n            value_domain: this.domain.slice(),\r\n            linear: function (v, mi, ma) { return (v - mi) / (ma - mi); }\r\n        }, v);\r\n        if (typeof r === 'number') {\r\n            return Math.max(Math.min(r, 1), 0);\r\n        }\r\n        return NaN;\r\n    };\r\n    ScriptMappingFunction.prototype.toJSON = function () {\r\n        return {\r\n            type: 'script',\r\n            code: this.code,\r\n            domain: this.domain\r\n        };\r\n    };\r\n    ScriptMappingFunction.prototype.eq = function (other) {\r\n        if (!(other instanceof ScriptMappingFunction)) {\r\n            return false;\r\n        }\r\n        var that = other;\r\n        return that.code === this.code || that.f === this.f;\r\n    };\r\n    ScriptMappingFunction.prototype.clone = function () {\r\n        return new ScriptMappingFunction(this.domain, this.f);\r\n    };\r\n    return ScriptMappingFunction;\r\n}());\r\nexport { ScriptMappingFunction };\r\n/**\r\n * @internal\r\n */\r\nexport function createMappingFunction(types) {\r\n    return function (dump) {\r\n        if (typeof dump === 'function') {\r\n            return new ScriptMappingFunction([0, 1], dump);\r\n        }\r\n        if (!dump || !dump.type) {\r\n            return new ScaleMappingFunction();\r\n        }\r\n        var type = types[dump.type];\r\n        if (!type) {\r\n            console.warn('invalid mapping type dump', dump);\r\n            return new ScaleMappingFunction(dump.domain || [0, 1], 'linear', dump.range || [0, 1]);\r\n        }\r\n        return new type(dump);\r\n    };\r\n}\r\n/** @internal */\r\nexport function restoreMapping(desc, factory) {\r\n    if (desc.map) {\r\n        return factory.mappingFunction(desc.map);\r\n    }\r\n    return new ScaleMappingFunction(desc.domain || [0, 1], 'linear', desc.range || [0, 1]);\r\n}\r\nexport function mappingFunctions() {\r\n    return {\r\n        script: ScriptMappingFunction,\r\n        linear: ScaleMappingFunction,\r\n        log: ScaleMappingFunction,\r\n        'pow1.1': ScaleMappingFunction,\r\n        pow2: ScaleMappingFunction,\r\n        pow3: ScaleMappingFunction\r\n    };\r\n}\r\n//# sourceMappingURL=MappingFunction.js.map","import { format } from 'd3-format';\r\nimport { similar, boxplotBuilder } from '../internal';\r\nimport { FIRST_IS_NAN } from '.';\r\n/** @internal */\r\nexport var DEFAULT_FORMATTER = format('.3n');\r\n/** @internal */\r\nexport function compareBoxPlot(col, a, b) {\r\n    var aVal = col.getBoxPlotData(a);\r\n    var bVal = col.getBoxPlotData(b);\r\n    var method = col.getSortMethod();\r\n    if (aVal == null) {\r\n        return bVal == null ? 0 : FIRST_IS_NAN;\r\n    }\r\n    if (bVal == null) {\r\n        return FIRST_IS_NAN * -1;\r\n    }\r\n    return numberCompare(aVal[method], bVal[method]);\r\n}\r\nexport function toCompareBoxPlotValue(col, row) {\r\n    var v = col.getBoxPlotData(row);\r\n    var method = col.getSortMethod();\r\n    return v == null ? NaN : v[method];\r\n}\r\nexport function getBoxPlotNumber(col, row, mode) {\r\n    var data = mode === 'normalized' ? col.getBoxPlotData(row) : col.getRawBoxPlotData(row);\r\n    if (data == null) {\r\n        return NaN;\r\n    }\r\n    return data[col.getSortMethod()];\r\n}\r\n/**\r\n * save number comparison\r\n * @param a\r\n * @param b\r\n * @param aMissing\r\n * @param bMissing\r\n * @return {number}\r\n * @internal\r\n */\r\nexport function numberCompare(a, b, aMissing, bMissing) {\r\n    if (aMissing === void 0) { aMissing = false; }\r\n    if (bMissing === void 0) { bMissing = false; }\r\n    aMissing = aMissing || a == null || isNaN(a);\r\n    bMissing = bMissing || b == null || isNaN(b);\r\n    if (aMissing) { //NaN are smaller\r\n        return bMissing ? 0 : FIRST_IS_NAN;\r\n    }\r\n    if (bMissing) {\r\n        return FIRST_IS_NAN * -1;\r\n    }\r\n    return a - b;\r\n}\r\n/** @internal */\r\nexport function noNumberFilter() {\r\n    return ({ min: -Infinity, max: Infinity, filterMissing: false });\r\n}\r\n/** @internal */\r\nexport function isEqualNumberFilter(a, b) {\r\n    return similar(a.min, b.min, 0.001) && similar(a.max, b.max, 0.001) && a.filterMissing === b.filterMissing;\r\n}\r\n/** @internal */\r\nexport function isNumberIncluded(filter, value) {\r\n    if (!filter) {\r\n        return true;\r\n    }\r\n    if (isNaN(value)) {\r\n        return !filter.filterMissing;\r\n    }\r\n    return !((isFinite(filter.min) && value < filter.min) || (isFinite(filter.max) && value > filter.max));\r\n}\r\n/** @internal */\r\nexport function isDummyNumberFilter(filter) {\r\n    return !filter.filterMissing && !isFinite(filter.min) && !isFinite(filter.max);\r\n}\r\n/** @internal */\r\nexport function restoreNumberFilter(v) {\r\n    return {\r\n        min: v.min != null && isFinite(v.min) ? v.min : -Infinity,\r\n        max: v.max != null && isFinite(v.max) ? v.max : +Infinity,\r\n        filterMissing: v.filterMissing\r\n    };\r\n}\r\n/** @internal */\r\nexport function medianIndex(rows, col) {\r\n    //return the median row\r\n    var data = rows.map(function (r, i) { return ({ r: r, i: i, v: col.getNumber(r) }); });\r\n    var sorted = Array.from(data.filter(function (r) { return !isNaN(r.v); })).sort(function (a, b) { return numberCompare(a.v, b.v); });\r\n    var index = sorted[Math.floor(sorted.length / 2.0)];\r\n    if (index === undefined) {\r\n        return { index: 0, row: sorted[0].r }; //error case\r\n    }\r\n    return { index: index.i, row: index.r };\r\n}\r\n/** @internal */\r\nexport function toCompareGroupValue(rows, col, sortMethod, valueCache) {\r\n    var b = boxplotBuilder();\r\n    if (valueCache) {\r\n        b.pushAll(valueCache);\r\n    }\r\n    else {\r\n        b.pushAll(rows.map(function (d) { return col.getNumber(d); }));\r\n    }\r\n    var vs = b.build();\r\n    return vs[sortMethod];\r\n}\r\n//# sourceMappingURL=internalNumber.js.map","import * as tslib_1 from \"tslib\";\r\nimport { format } from 'd3-format';\r\nimport { equalArrays } from '../internal';\r\nimport { Category, dialogAddons, SortByDefault, toolbar } from './annotations';\r\nimport Column from './Column';\r\nimport { ECompareValueType, DEFAULT_COLOR } from './interfaces';\r\nimport { EAdvancedSortMethod } from './INumberColumn';\r\nimport { restoreMapping, ScaleMappingFunction } from './MappingFunction';\r\nimport { isMissingValue, isUnknown, missingGroup } from './missing';\r\nimport ValueColumn from './ValueColumn';\r\nimport { noNumberFilter, isDummyNumberFilter, restoreNumberFilter, toCompareGroupValue, isEqualNumberFilter, isNumberIncluded } from './internalNumber';\r\nimport { integrateDefaults } from './internal';\r\n/**\r\n * a number column mapped from an original input scale to an output range\r\n */\r\nvar NumberColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(NumberColumn, _super);\r\n    function NumberColumn(id, desc, factory) {\r\n        var _this = _super.call(this, id, integrateDefaults(desc, {\r\n            groupRenderer: 'boxplot',\r\n            summaryRenderer: 'histogram'\r\n        })) || this;\r\n        /**\r\n         * currently active filter\r\n         * @type {{min: number, max: number}}\r\n         * @private\r\n         */\r\n        _this.currentFilter = noNumberFilter();\r\n        _this.numberFormat = format('.2f');\r\n        _this.currentGroupThresholds = [];\r\n        _this.groupSortMethod = EAdvancedSortMethod.median;\r\n        _this.mapping = restoreMapping(desc, factory);\r\n        _this.original = _this.mapping.clone();\r\n        _this.colorMapping = factory.colorMappingFunction(desc.colorMapping || desc.color);\r\n        if (desc.numberFormat) {\r\n            _this.numberFormat = format(desc.numberFormat);\r\n        }\r\n        return _this;\r\n    }\r\n    NumberColumn_1 = NumberColumn;\r\n    NumberColumn.prototype.getNumberFormat = function () {\r\n        return this.numberFormat;\r\n    };\r\n    NumberColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        r.map = this.mapping.toJSON();\r\n        r.colorMapping = this.colorMapping.toJSON();\r\n        r.filter = isDummyNumberFilter(this.currentFilter) ? null : this.currentFilter;\r\n        r.groupSortMethod = this.groupSortMethod;\r\n        if (this.currentGroupThresholds) {\r\n            r.stratifyThreshholds = this.currentGroupThresholds;\r\n        }\r\n        return r;\r\n    };\r\n    NumberColumn.prototype.restore = function (dump, factory) {\r\n        _super.prototype.restore.call(this, dump, factory);\r\n        if (dump.map) {\r\n            this.mapping = factory.mappingFunction(dump.map);\r\n        }\r\n        else if (dump.domain) {\r\n            this.mapping = new ScaleMappingFunction(dump.domain, 'linear', dump.range || [0, 1]);\r\n        }\r\n        if (dump.colorMapping) {\r\n            this.colorMapping = factory.colorMappingFunction(dump.colorMapping);\r\n        }\r\n        if (dump.groupSortMethod) {\r\n            this.groupSortMethod = dump.groupSortMethod;\r\n        }\r\n        if (dump.filter) {\r\n            this.currentFilter = restoreNumberFilter(dump.filter);\r\n        }\r\n        if (dump.stratifyThreshholds) {\r\n            this.currentGroupThresholds = dump.stratifyThresholds;\r\n        }\r\n    };\r\n    NumberColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([NumberColumn_1.EVENT_MAPPING_CHANGED, NumberColumn_1.EVENT_COLOR_MAPPING_CHANGED, NumberColumn_1.EVENT_FILTER_CHANGED, NumberColumn_1.EVENT_SORTMETHOD_CHANGED, NumberColumn_1.EVENT_GROUPING_CHANGED]);\r\n    };\r\n    NumberColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    NumberColumn.prototype.getLabel = function (row) {\r\n        if (this.desc.numberFormat) {\r\n            var raw = this.getRawValue(row);\r\n            //if a dedicated format and a number use the formatter in any case\r\n            if (isNaN(raw)) {\r\n                return 'NaN';\r\n            }\r\n            if (!isFinite(raw)) {\r\n                return raw.toString();\r\n            }\r\n            return this.numberFormat(raw);\r\n        }\r\n        var v = _super.prototype.getValue.call(this, row);\r\n        //keep non number if it is not a number else convert using formatter\r\n        if (typeof v === 'number') {\r\n            return this.numberFormat(+v);\r\n        }\r\n        return String(v);\r\n    };\r\n    NumberColumn.prototype.getRange = function () {\r\n        return this.mapping.getRange(this.numberFormat);\r\n    };\r\n    NumberColumn.prototype.getRawValue = function (row) {\r\n        var v = _super.prototype.getValue.call(this, row);\r\n        if (isMissingValue(v)) {\r\n            return NaN;\r\n        }\r\n        return +v;\r\n    };\r\n    NumberColumn.prototype.getExportValue = function (row, format) {\r\n        return format === 'json' ? this.getRawValue(row) : _super.prototype.getExportValue.call(this, row, format);\r\n    };\r\n    NumberColumn.prototype.getValue = function (row) {\r\n        var v = this.getNumber(row);\r\n        if (isNaN(v)) {\r\n            return null;\r\n        }\r\n        return v;\r\n    };\r\n    NumberColumn.prototype.getNumber = function (row) {\r\n        var v = this.getRawValue(row);\r\n        if (isNaN(v)) {\r\n            return NaN;\r\n        }\r\n        return this.mapping.apply(v);\r\n    };\r\n    NumberColumn.prototype.iterNumber = function (row) {\r\n        return [this.getNumber(row)];\r\n    };\r\n    NumberColumn.prototype.iterRawNumber = function (row) {\r\n        return [this.getRawNumber(row)];\r\n    };\r\n    NumberColumn.prototype.getRawNumber = function (row) {\r\n        return this.getRawValue(row);\r\n    };\r\n    NumberColumn.prototype.toCompareValue = function (row, valueCache) {\r\n        return valueCache != null ? valueCache : this.getNumber(row);\r\n    };\r\n    NumberColumn.prototype.toCompareValueType = function () {\r\n        return ECompareValueType.FLOAT;\r\n    };\r\n    NumberColumn.prototype.toCompareGroupValue = function (rows, _group, valueCache) {\r\n        return toCompareGroupValue(rows, this, this.groupSortMethod, valueCache);\r\n    };\r\n    NumberColumn.prototype.toCompareGroupValueType = function () {\r\n        return ECompareValueType.FLOAT;\r\n    };\r\n    NumberColumn.prototype.getOriginalMapping = function () {\r\n        return this.original.clone();\r\n    };\r\n    NumberColumn.prototype.getMapping = function () {\r\n        return this.mapping.clone();\r\n    };\r\n    NumberColumn.prototype.setMapping = function (mapping) {\r\n        if (this.mapping.eq(mapping)) {\r\n            return;\r\n        }\r\n        this.fire([NumberColumn_1.EVENT_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], this.mapping.clone(), this.mapping = mapping);\r\n    };\r\n    NumberColumn.prototype.getColor = function (row) {\r\n        var v = this.getNumber(row);\r\n        if (isNaN(v)) {\r\n            return DEFAULT_COLOR;\r\n        }\r\n        return this.colorMapping.apply(v);\r\n    };\r\n    NumberColumn.prototype.getColorMapping = function () {\r\n        return this.colorMapping.clone();\r\n    };\r\n    NumberColumn.prototype.setColorMapping = function (mapping) {\r\n        if (this.colorMapping.eq(mapping)) {\r\n            return;\r\n        }\r\n        this.fire([NumberColumn_1.EVENT_COLOR_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], this.colorMapping.clone(), this.colorMapping = mapping);\r\n    };\r\n    NumberColumn.prototype.isFiltered = function () {\r\n        return !isDummyNumberFilter(this.currentFilter);\r\n    };\r\n    NumberColumn.prototype.getFilter = function () {\r\n        return Object.assign({}, this.currentFilter);\r\n    };\r\n    NumberColumn.prototype.setFilter = function (value) {\r\n        value = value || { min: -Infinity, max: +Infinity, filterMissing: false };\r\n        if (isEqualNumberFilter(value, this.currentFilter)) {\r\n            return;\r\n        }\r\n        var bak = this.getFilter();\r\n        this.currentFilter.min = isUnknown(value.min) ? -Infinity : value.min;\r\n        this.currentFilter.max = isUnknown(value.max) ? Infinity : value.max;\r\n        this.currentFilter.filterMissing = value.filterMissing;\r\n        this.fire([NumberColumn_1.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, this.getFilter());\r\n    };\r\n    /**\r\n     * filter the current row if any filter is set\r\n     * @param row\r\n     * @returns {boolean}\r\n     */\r\n    NumberColumn.prototype.filter = function (row) {\r\n        return isNumberIncluded(this.currentFilter, this.getRawNumber(row));\r\n    };\r\n    NumberColumn.prototype.clearFilter = function () {\r\n        var was = this.isFiltered();\r\n        this.setFilter(null);\r\n        return was;\r\n    };\r\n    NumberColumn.prototype.getGroupThresholds = function () {\r\n        return this.currentGroupThresholds.slice();\r\n    };\r\n    NumberColumn.prototype.setGroupThresholds = function (value) {\r\n        if (equalArrays(this.currentGroupThresholds, value)) {\r\n            return;\r\n        }\r\n        var bak = this.getGroupThresholds();\r\n        this.currentGroupThresholds = value.slice();\r\n        this.fire([NumberColumn_1.EVENT_GROUPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, value);\r\n    };\r\n    NumberColumn.prototype.group = function (row) {\r\n        var value = this.getRawNumber(row);\r\n        if (isNaN(value)) {\r\n            return Object.assign({}, missingGroup);\r\n        }\r\n        var threshold = this.currentGroupThresholds;\r\n        if (threshold.length === 0) {\r\n            // default threshold\r\n            var d = this.mapping.domain;\r\n            threshold = [(d[1] - d[0]) / 2];\r\n        }\r\n        var treshholdIndex = threshold.findIndex(function (t) { return value <= t; });\r\n        // group by thresholds / bins\r\n        switch (treshholdIndex) {\r\n            case -1:\r\n                //bigger than the last threshold\r\n                return {\r\n                    name: this.label + \" > \" + this.numberFormat(threshold[threshold.length - 1]),\r\n                    color: this.colorMapping.apply(1)\r\n                };\r\n            case 0:\r\n                //smallest\r\n                return {\r\n                    name: this.label + \" <= \" + this.numberFormat(threshold[0]),\r\n                    color: this.colorMapping.apply(0)\r\n                };\r\n            default:\r\n                return {\r\n                    name: this.numberFormat(threshold[treshholdIndex - 1]) + \" <= \" + this.label + \" <= \" + this.numberFormat(threshold[treshholdIndex]),\r\n                    color: this.colorMapping.apply(this.mapping.apply((threshold[treshholdIndex - 1] + threshold[treshholdIndex]) / 2))\r\n                };\r\n        }\r\n    };\r\n    NumberColumn.prototype.getSortMethod = function () {\r\n        return this.groupSortMethod;\r\n    };\r\n    NumberColumn.prototype.setSortMethod = function (sortMethod) {\r\n        if (this.groupSortMethod === sortMethod) {\r\n            return;\r\n        }\r\n        this.fire([NumberColumn_1.EVENT_SORTMETHOD_CHANGED], this.groupSortMethod, this.groupSortMethod = sortMethod);\r\n        // sort by me if not already sorted by me\r\n        if (!this.isGroupSortedByMe().asc) {\r\n            this.toggleMyGroupSorting();\r\n        }\r\n    };\r\n    var NumberColumn_1;\r\n    NumberColumn.EVENT_MAPPING_CHANGED = 'mappingChanged';\r\n    NumberColumn.EVENT_COLOR_MAPPING_CHANGED = 'colorMappingChanged';\r\n    NumberColumn.EVENT_FILTER_CHANGED = 'filterChanged';\r\n    NumberColumn.EVENT_SORTMETHOD_CHANGED = 'sortMethodChanged';\r\n    NumberColumn.EVENT_GROUPING_CHANGED = 'groupingChanged';\r\n    NumberColumn = NumberColumn_1 = tslib_1.__decorate([\r\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'groupBy', 'sortGroupBy', 'filterNumber', 'colorMapped', 'editMapping'),\r\n        dialogAddons('sortGroup', 'sortNumber'),\r\n        dialogAddons('group', 'groupNumber'),\r\n        Category('number'),\r\n        SortByDefault('descending')\r\n    ], NumberColumn);\r\n    return NumberColumn;\r\n}(ValueColumn));\r\nexport default NumberColumn;\r\n//# sourceMappingURL=NumberColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { format } from 'd3-format';\r\nimport { Category, dialogAddons, SortByDefault, toolbar } from './annotations';\r\nimport Column from './Column';\r\nimport { ECompareValueType } from './interfaces';\r\nimport { ESortMethod } from './INumberColumn';\r\nimport { restoreMapping } from './MappingFunction';\r\nimport NumberColumn from './NumberColumn';\r\nimport ValueColumn from './ValueColumn';\r\nimport { DEFAULT_FORMATTER, noNumberFilter, toCompareBoxPlotValue, getBoxPlotNumber, isDummyNumberFilter, restoreNumberFilter } from './internalNumber';\r\nvar BoxPlotColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(BoxPlotColumn, _super);\r\n    function BoxPlotColumn(id, desc, factory) {\r\n        var _this = _super.call(this, id, desc) || this;\r\n        _this.numberFormat = DEFAULT_FORMATTER;\r\n        /**\r\n         * currently active filter\r\n         * @type {{min: number, max: number}}\r\n         * @private\r\n         */\r\n        _this.currentFilter = noNumberFilter();\r\n        _this.mapping = restoreMapping(desc, factory);\r\n        _this.original = _this.mapping.clone();\r\n        _this.colorMapping = factory.colorMappingFunction(desc.colorMapping);\r\n        if (desc.numberFormat) {\r\n            _this.numberFormat = format(desc.numberFormat);\r\n        }\r\n        _this.sort = desc.sort || ESortMethod.min;\r\n        return _this;\r\n    }\r\n    BoxPlotColumn_1 = BoxPlotColumn;\r\n    BoxPlotColumn.prototype.getNumberFormat = function () {\r\n        return this.numberFormat;\r\n    };\r\n    BoxPlotColumn.prototype.toCompareValue = function (row) {\r\n        return toCompareBoxPlotValue(this, row);\r\n    };\r\n    BoxPlotColumn.prototype.toCompareValueType = function () {\r\n        return ECompareValueType.FLOAT;\r\n    };\r\n    BoxPlotColumn.prototype.getBoxPlotData = function (row) {\r\n        return this.getValue(row);\r\n    };\r\n    BoxPlotColumn.prototype.getRange = function () {\r\n        return this.mapping.getRange(this.numberFormat);\r\n    };\r\n    BoxPlotColumn.prototype.getRawBoxPlotData = function (row) {\r\n        return this.getRawValue(row);\r\n    };\r\n    BoxPlotColumn.prototype.getRawValue = function (row) {\r\n        return _super.prototype.getValue.call(this, row);\r\n    };\r\n    BoxPlotColumn.prototype.getExportValue = function (row, format) {\r\n        return format === 'json' ? this.getRawValue(row) : _super.prototype.getExportValue.call(this, row, format);\r\n    };\r\n    BoxPlotColumn.prototype.getValue = function (row) {\r\n        var _this = this;\r\n        var v = this.getRawValue(row);\r\n        if (v == null) {\r\n            return null;\r\n        }\r\n        var r = {\r\n            min: this.mapping.apply(v.min),\r\n            max: this.mapping.apply(v.max),\r\n            median: this.mapping.apply(v.median),\r\n            q1: this.mapping.apply(v.q1),\r\n            q3: this.mapping.apply(v.q3)\r\n        };\r\n        if (v.outlier) {\r\n            Object.assign(r, {\r\n                outlier: v.outlier.map(function (d) { return _this.mapping.apply(d); })\r\n            });\r\n        }\r\n        if (v.whiskerLow != null) {\r\n            Object.assign(r, {\r\n                whiskerLow: this.mapping.apply(v.whiskerLow)\r\n            });\r\n        }\r\n        if (v.whiskerHigh != null) {\r\n            Object.assign(r, {\r\n                whiskerHigh: this.mapping.apply(v.whiskerHigh)\r\n            });\r\n        }\r\n        return r;\r\n    };\r\n    BoxPlotColumn.prototype.getNumber = function (row) {\r\n        return getBoxPlotNumber(this, row, 'normalized');\r\n    };\r\n    BoxPlotColumn.prototype.getRawNumber = function (row) {\r\n        return getBoxPlotNumber(this, row, 'raw');\r\n    };\r\n    BoxPlotColumn.prototype.iterNumber = function (row) {\r\n        return [this.getNumber(row)];\r\n    };\r\n    BoxPlotColumn.prototype.iterRawNumber = function (row) {\r\n        return [this.getRawNumber(row)];\r\n    };\r\n    BoxPlotColumn.prototype.getLabel = function (row) {\r\n        var v = this.getRawValue(row);\r\n        if (v == null) {\r\n            return '';\r\n        }\r\n        var f = this.numberFormat;\r\n        return \"BoxPlot(min = \" + f(v.min) + \", q1 = \" + f(v.q1) + \", median = \" + f(v.median) + \", q3 = \" + f(v.q3) + \", max = \" + f(v.max) + \")\";\r\n    };\r\n    BoxPlotColumn.prototype.getSortMethod = function () {\r\n        return this.sort;\r\n    };\r\n    BoxPlotColumn.prototype.setSortMethod = function (sort) {\r\n        if (this.sort === sort) {\r\n            return;\r\n        }\r\n        this.fire(BoxPlotColumn_1.EVENT_SORTMETHOD_CHANGED, this.sort, this.sort = sort);\r\n        // sort by me if not already sorted by me\r\n        if (!this.isSortedByMe().asc) {\r\n            this.sortByMe();\r\n        }\r\n    };\r\n    BoxPlotColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        r.sortMethod = this.getSortMethod();\r\n        r.filter = !isDummyNumberFilter(this.currentFilter) ? this.currentFilter : null;\r\n        r.map = this.mapping.toJSON();\r\n        r.colorMapping = this.colorMapping.toJSON();\r\n        return r;\r\n    };\r\n    BoxPlotColumn.prototype.restore = function (dump, factory) {\r\n        _super.prototype.restore.call(this, dump, factory);\r\n        if (dump.sortMethod) {\r\n            this.sort = dump.sortMethod;\r\n        }\r\n        if (dump.filter) {\r\n            this.currentFilter = restoreNumberFilter(dump.filter);\r\n        }\r\n        if (dump.map || dump.domain) {\r\n            this.mapping = restoreMapping(dump, factory);\r\n        }\r\n        if (dump.colorMapping) {\r\n            this.colorMapping = factory.colorMappingFunction(dump.colorMapping);\r\n        }\r\n    };\r\n    BoxPlotColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([BoxPlotColumn_1.EVENT_SORTMETHOD_CHANGED, BoxPlotColumn_1.EVENT_COLOR_MAPPING_CHANGED, BoxPlotColumn_1.EVENT_MAPPING_CHANGED, BoxPlotColumn_1.EVENT_FILTER_CHANGED]);\r\n    };\r\n    BoxPlotColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    BoxPlotColumn.prototype.getOriginalMapping = function () {\r\n        return this.original.clone();\r\n    };\r\n    BoxPlotColumn.prototype.getMapping = function () {\r\n        return this.mapping.clone();\r\n    };\r\n    BoxPlotColumn.prototype.setMapping = function (mapping) {\r\n        if (this.mapping.eq(mapping)) {\r\n            return;\r\n        }\r\n        this.fire([BoxPlotColumn_1.EVENT_MAPPING_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], this.mapping.clone(), this.mapping = mapping);\r\n    };\r\n    BoxPlotColumn.prototype.getColor = function (row) {\r\n        return NumberColumn.prototype.getColor.call(this, row);\r\n    };\r\n    BoxPlotColumn.prototype.getColorMapping = function () {\r\n        return this.colorMapping.clone();\r\n    };\r\n    BoxPlotColumn.prototype.setColorMapping = function (mapping) {\r\n        if (this.colorMapping.eq(mapping)) {\r\n            return;\r\n        }\r\n        this.fire([BoxPlotColumn_1.EVENT_COLOR_MAPPING_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], this.colorMapping.clone(), this.colorMapping = mapping);\r\n    };\r\n    BoxPlotColumn.prototype.isFiltered = function () {\r\n        return NumberColumn.prototype.isFiltered.call(this);\r\n    };\r\n    BoxPlotColumn.prototype.getFilter = function () {\r\n        return NumberColumn.prototype.getFilter.call(this);\r\n    };\r\n    BoxPlotColumn.prototype.setFilter = function (value) {\r\n        NumberColumn.prototype.setFilter.call(this, value);\r\n    };\r\n    BoxPlotColumn.prototype.filter = function (row) {\r\n        return NumberColumn.prototype.filter.call(this, row);\r\n    };\r\n    BoxPlotColumn.prototype.clearFilter = function () {\r\n        return NumberColumn.prototype.clearFilter.call(this);\r\n    };\r\n    var BoxPlotColumn_1;\r\n    BoxPlotColumn.EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\r\n    BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED = NumberColumn.EVENT_COLOR_MAPPING_CHANGED;\r\n    BoxPlotColumn.EVENT_SORTMETHOD_CHANGED = NumberColumn.EVENT_SORTMETHOD_CHANGED;\r\n    BoxPlotColumn.EVENT_FILTER_CHANGED = NumberColumn.EVENT_FILTER_CHANGED;\r\n    BoxPlotColumn = BoxPlotColumn_1 = tslib_1.__decorate([\r\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'filterNumber', 'colorMapped', 'editMapping'),\r\n        dialogAddons('sort', 'sortBoxPlot'),\r\n        Category('array'),\r\n        SortByDefault('descending')\r\n    ], BoxPlotColumn);\r\n    return BoxPlotColumn;\r\n}(ValueColumn));\r\nexport default BoxPlotColumn;\r\n//# sourceMappingURL=BoxPlotColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { Category } from './annotations';\r\nimport ValueColumn from './ValueColumn';\r\nimport { integrateDefaults } from './internal';\r\nvar MapColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(MapColumn, _super);\r\n    function MapColumn(id, desc) {\r\n        return _super.call(this, id, integrateDefaults(desc, {\r\n            width: 200\r\n        })) || this;\r\n    }\r\n    MapColumn.prototype.getValue = function (row) {\r\n        var r = this.getMap(row);\r\n        return r.length === 0 ? null : r;\r\n    };\r\n    MapColumn.prototype.getLabels = function (row) {\r\n        var v = this.getMap(row);\r\n        return v.map(function (_a) {\r\n            var key = _a.key, value = _a.value;\r\n            return ({ key: key, value: String(value) });\r\n        });\r\n    };\r\n    MapColumn.prototype.getMap = function (row) {\r\n        return toKeyValue(_super.prototype.getValue.call(this, row));\r\n    };\r\n    MapColumn.prototype.getMapLabel = function (row) {\r\n        return this.getLabels(row);\r\n    };\r\n    MapColumn.prototype.getLabel = function (row) {\r\n        var v = this.getLabels(row);\r\n        return \"{\" + v.map(function (_a) {\r\n            var key = _a.key, value = _a.value;\r\n            return key + \": \" + value;\r\n        }).join(', ') + \"}\";\r\n    };\r\n    MapColumn = tslib_1.__decorate([\r\n        Category('map')\r\n    ], MapColumn);\r\n    return MapColumn;\r\n}(ValueColumn));\r\nexport default MapColumn;\r\nfunction byKey(a, b) {\r\n    if (a === b) {\r\n        return 0;\r\n    }\r\n    return a.key.localeCompare(b.key);\r\n}\r\nfunction toKeyValue(v) {\r\n    if (!v) {\r\n        return [];\r\n    }\r\n    if (v instanceof Map) {\r\n        return Array.from(v.entries()).map(function (_a) {\r\n            var key = _a[0], value = _a[1];\r\n            return ({ key: key, value: value });\r\n        }).sort(byKey);\r\n    }\r\n    if (Array.isArray(v)) {\r\n        return v; // keep original order\r\n    }\r\n    // object\r\n    return Object.keys(v).map(function (key) { return ({ key: key, value: v[key] }); }).sort(byKey);\r\n}\r\n//# sourceMappingURL=MapColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { DEFAULT_COLOR } from './interfaces';\r\nimport MapColumn from './MapColumn';\r\nimport { DEFAULT_CATEGORICAL_COLOR_FUNCTION } from './CategoricalColorMappingFunction';\r\nimport CategoricalColumn from './CategoricalColumn';\r\nimport { toolbar } from './annotations';\r\nimport { toCategories } from './internalCategorical';\r\nvar CategoricalMapColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(CategoricalMapColumn, _super);\r\n    function CategoricalMapColumn(id, desc) {\r\n        var _this = _super.call(this, id, desc) || this;\r\n        _this.lookup = new Map();\r\n        _this.categories = toCategories(desc);\r\n        _this.categories.forEach(function (d) { return _this.lookup.set(d.name, d); });\r\n        _this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\r\n        return _this;\r\n    }\r\n    CategoricalMapColumn_1 = CategoricalMapColumn;\r\n    CategoricalMapColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([CategoricalMapColumn_1.EVENT_COLOR_MAPPING_CHANGED]);\r\n    };\r\n    CategoricalMapColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    CategoricalMapColumn.prototype.parseValue = function (v) {\r\n        if (!v) {\r\n            return null;\r\n        }\r\n        var vs = String(v);\r\n        return this.lookup.has(vs) ? this.lookup.get(vs) : null;\r\n    };\r\n    CategoricalMapColumn.prototype.getCategoryMap = function (row) {\r\n        var _this = this;\r\n        return _super.prototype.getMap.call(this, row).map(function (_a) {\r\n            var key = _a.key, value = _a.value;\r\n            return ({\r\n                key: key,\r\n                value: _this.parseValue(value)\r\n            });\r\n        });\r\n    };\r\n    CategoricalMapColumn.prototype.getCategories = function (row) {\r\n        return this.getCategoryMap(row).map(function (d) { return d.value; });\r\n    };\r\n    CategoricalMapColumn.prototype.getColors = function (row) {\r\n        var _this = this;\r\n        return this.getCategoryMap(row).map(function (_a) {\r\n            var key = _a.key, value = _a.value;\r\n            return ({ key: key, value: value ? _this.colorMapping.apply(value) : DEFAULT_COLOR });\r\n        });\r\n    };\r\n    CategoricalMapColumn.prototype.getValue = function (row) {\r\n        var r = this.getCategoryMap(row);\r\n        return r.length === 0 ? null : r.map(function (_a) {\r\n            var key = _a.key, value = _a.value;\r\n            return ({\r\n                key: key,\r\n                value: value ? value.name : null\r\n            });\r\n        });\r\n    };\r\n    CategoricalMapColumn.prototype.getLabels = function (row) {\r\n        return this.getCategoryMap(row).map(function (_a) {\r\n            var key = _a.key, value = _a.value;\r\n            return ({\r\n                key: key,\r\n                value: value ? value.label : ''\r\n            });\r\n        });\r\n    };\r\n    CategoricalMapColumn.prototype.getColorMapping = function () {\r\n        return this.colorMapping.clone();\r\n    };\r\n    CategoricalMapColumn.prototype.setColorMapping = function (mapping) {\r\n        return CategoricalColumn.prototype.setColorMapping.call(this, mapping);\r\n    };\r\n    CategoricalMapColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        r.colorMapping = this.colorMapping.toJSON();\r\n        return r;\r\n    };\r\n    CategoricalMapColumn.prototype.restore = function (dump, factory) {\r\n        _super.prototype.restore.call(this, dump, factory);\r\n        this.colorMapping = factory.categoricalColorMappingFunction(dump.colorMapping, this.categories);\r\n    };\r\n    CategoricalMapColumn.prototype.iterCategory = function (row) {\r\n        return this.getCategories(row);\r\n    };\r\n    var CategoricalMapColumn_1;\r\n    CategoricalMapColumn.EVENT_COLOR_MAPPING_CHANGED = CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED;\r\n    CategoricalMapColumn = CategoricalMapColumn_1 = tslib_1.__decorate([\r\n        toolbar('rename', 'colorMappedCategorical')\r\n    ], CategoricalMapColumn);\r\n    return CategoricalMapColumn;\r\n}(MapColumn));\r\nexport default CategoricalMapColumn;\r\n//# sourceMappingURL=CategoricalMapColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport ArrayColumn from './ArrayColumn';\r\nimport { DEFAULT_COLOR } from './interfaces';\r\nimport { toolbar } from './annotations';\r\nimport CategoricalColumn from './CategoricalColumn';\r\nimport { DEFAULT_CATEGORICAL_COLOR_FUNCTION } from './CategoricalColorMappingFunction';\r\nimport { toCategories } from './internalCategorical';\r\n/**\r\n * a string column with optional alignment\r\n */\r\nvar CategoricalsColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(CategoricalsColumn, _super);\r\n    function CategoricalsColumn(id, desc) {\r\n        var _this = _super.call(this, id, desc) || this;\r\n        _this.lookup = new Map();\r\n        _this.categories = toCategories(desc);\r\n        _this.categories.forEach(function (d) { return _this.lookup.set(d.name, d); });\r\n        _this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\r\n        return _this;\r\n    }\r\n    CategoricalsColumn_1 = CategoricalsColumn;\r\n    CategoricalsColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([CategoricalsColumn_1.EVENT_COLOR_MAPPING_CHANGED]);\r\n    };\r\n    CategoricalsColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    CategoricalsColumn.prototype.getCategories = function (row) {\r\n        var _this = this;\r\n        return _super.prototype.getValues.call(this, row).map(function (v) {\r\n            if (!v) {\r\n                return null;\r\n            }\r\n            var vs = String(v);\r\n            return _this.lookup.has(vs) ? _this.lookup.get(vs) : null;\r\n        });\r\n    };\r\n    CategoricalsColumn.prototype.getColors = function (row) {\r\n        var _this = this;\r\n        return this.getCategories(row).map(function (d) { return d ? _this.colorMapping.apply(d) : DEFAULT_COLOR; });\r\n    };\r\n    CategoricalsColumn.prototype.iterCategory = function (row) {\r\n        return this.getCategories(row);\r\n    };\r\n    CategoricalsColumn.prototype.getValues = function (row) {\r\n        return this.getCategories(row).map(function (v) { return v ? v.name : null; });\r\n    };\r\n    CategoricalsColumn.prototype.getLabels = function (row) {\r\n        return this.getCategories(row).map(function (v) { return v ? v.label : ''; });\r\n    };\r\n    CategoricalsColumn.prototype.getColorMapping = function () {\r\n        return this.colorMapping.clone();\r\n    };\r\n    CategoricalsColumn.prototype.setColorMapping = function (mapping) {\r\n        return CategoricalColumn.prototype.setColorMapping.call(this, mapping);\r\n    };\r\n    CategoricalsColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        r.colorMapping = this.colorMapping.toJSON();\r\n        return r;\r\n    };\r\n    CategoricalsColumn.prototype.restore = function (dump, factory) {\r\n        _super.prototype.restore.call(this, dump, factory);\r\n        this.colorMapping = factory.categoricalColorMappingFunction(dump.colorMapping, this.categories);\r\n    };\r\n    var CategoricalsColumn_1;\r\n    CategoricalsColumn.EVENT_COLOR_MAPPING_CHANGED = CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED;\r\n    CategoricalsColumn = CategoricalsColumn_1 = tslib_1.__decorate([\r\n        toolbar('rename', 'colorMappedCategorical')\r\n    ], CategoricalsColumn);\r\n    return CategoricalsColumn;\r\n}(ArrayColumn));\r\nexport default CategoricalsColumn;\r\n//# sourceMappingURL=CategoricalsColumn.js.map","import { timeDay, timeHour, timeMinute, timeMonth, timeSecond, timeWeek } from 'd3-time';\r\nimport { timeFormat } from 'd3-time-format';\r\nimport { equal, isSeqEmpty } from '../internal';\r\nimport { isNumberIncluded } from './internalNumber';\r\n/** @internal */\r\nexport { isDummyNumberFilter as isDummyDateFilter, isEqualNumberFilter as isEqualDateFilter, noNumberFilter as noDateFilter, restoreNumberFilter as restoreDateFilter } from './internalNumber';\r\n/** @internal */\r\nexport function isDateIncluded(filter, value) {\r\n    if (!filter) {\r\n        return true;\r\n    }\r\n    if (value == null || !(value instanceof Date)) {\r\n        return !filter.filterMissing;\r\n    }\r\n    return isNumberIncluded(filter, value.getTime());\r\n}\r\n/**\r\n * shifts the given date such that it is on 23:59:59, or 00:00:00\r\n * @internal\r\n */\r\nexport function shiftFilterDateDay(date, type) {\r\n    var d = new Date(date);\r\n    if (type === 'max') {\r\n        d.setHours(23);\r\n        d.setMinutes(59);\r\n        d.setSeconds(59);\r\n        d.setMilliseconds(999);\r\n    }\r\n    else {\r\n        d.setHours(0);\r\n        d.setMinutes(0);\r\n        d.setSeconds(0);\r\n        d.setMilliseconds(0);\r\n    }\r\n    return d.getTime();\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function defaultDateGrouper() {\r\n    return { granularity: 'month', circular: false };\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function isDefaultDateGrouper(grouper) {\r\n    return equal(defaultDateGrouper(), grouper);\r\n}\r\n/**\r\n * convert the given date to the desired grouper\r\n * @internal\r\n */\r\nexport function toDateGroup(grouper, value) {\r\n    switch (grouper.granularity) {\r\n        case 'century':\r\n            var centuryP = Math.floor(value.getFullYear() / 100);\r\n            if (grouper.circular) {\r\n                var century = centuryP % 10;\r\n                return {\r\n                    value: century,\r\n                    name: \"*\" + century + \"00\"\r\n                };\r\n            }\r\n            return {\r\n                value: centuryP,\r\n                name: centuryP + \"00\"\r\n            };\r\n        case 'decade':\r\n            var decadeP = Math.floor(value.getFullYear() / 10);\r\n            if (grouper.circular) {\r\n                var decade = decadeP % 10;\r\n                return {\r\n                    value: decade,\r\n                    name: \"**\" + decade + \"0\"\r\n                };\r\n            }\r\n            return {\r\n                value: decadeP,\r\n                name: decadeP + \"0\"\r\n            };\r\n        case 'year':\r\n            if (grouper.circular) {\r\n                var year = value.getFullYear() % 10;\r\n                return {\r\n                    value: year,\r\n                    name: \"***\" + year\r\n                };\r\n            }\r\n            return {\r\n                value: value.getFullYear(),\r\n                name: String(value.getFullYear())\r\n            };\r\n        case 'month':\r\n            if (grouper.circular) {\r\n                return {\r\n                    value: value.getMonth(),\r\n                    name: timeFormat('%B')(value)\r\n                };\r\n            }\r\n            return {\r\n                value: timeMonth(value).getTime(),\r\n                name: timeFormat('%B %Y')(value)\r\n            };\r\n        case 'week':\r\n            if (grouper.circular) {\r\n                return {\r\n                    value: value.getMonth(),\r\n                    name: timeFormat('%W')(value)\r\n                };\r\n            }\r\n            return {\r\n                value: timeWeek(value).getTime(),\r\n                name: timeFormat('%W %Y')(value)\r\n            };\r\n        case 'day_of_week':\r\n            if (grouper.circular) {\r\n                return {\r\n                    value: value.getDay(),\r\n                    name: timeFormat('%A')(value)\r\n                };\r\n            }\r\n            return {\r\n                value: timeDay(value).getTime(),\r\n                name: timeFormat('%x')(value)\r\n            };\r\n        case 'day_of_month':\r\n            if (grouper.circular) {\r\n                return {\r\n                    value: value.getDate(),\r\n                    name: timeFormat('%d')(value)\r\n                };\r\n            }\r\n            return {\r\n                value: timeDay(value).getTime(),\r\n                name: timeFormat('%x')(value)\r\n            };\r\n        case 'day_of_year':\r\n            if (grouper.circular) {\r\n                // %j = day of year\r\n                var v = timeFormat('%j')(value);\r\n                return {\r\n                    value: parseInt(v, 10),\r\n                    name: v\r\n                };\r\n            }\r\n            return {\r\n                value: timeDay(value).getTime(),\r\n                name: timeFormat('%x')(value)\r\n            };\r\n        case 'hour':\r\n            if (grouper.circular) {\r\n                return {\r\n                    value: value.getHours(),\r\n                    name: timeFormat('%A')(value)\r\n                };\r\n            }\r\n            return {\r\n                value: timeHour(value).getTime(),\r\n                name: timeFormat('%x')(value)\r\n            };\r\n        case 'minute':\r\n            if (grouper.circular) {\r\n                return {\r\n                    value: value.getMinutes(),\r\n                    name: timeFormat('%A')(value)\r\n                };\r\n            }\r\n            return {\r\n                value: timeMinute(value).getTime(),\r\n                name: timeFormat('%x')(value)\r\n            };\r\n        case 'second':\r\n            if (grouper.circular) {\r\n                return {\r\n                    value: value.getSeconds(),\r\n                    name: timeFormat('%A')(value)\r\n                };\r\n            }\r\n            return {\r\n                value: timeSecond(value).getTime(),\r\n                name: timeFormat('%x')(value)\r\n            };\r\n    }\r\n    return {\r\n        value: value.getTime(),\r\n        name: value.toString()\r\n    };\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function chooseAggregatedDate(rows, grouper, col, valueCache) {\r\n    var vs = (valueCache ? valueCache : rows.map(function (d) { return col.getDate(d); })).filter(function (d) { return d instanceof Date; });\r\n    if (isSeqEmpty(vs)) {\r\n        return { value: null, name: '' };\r\n    }\r\n    var median = trueMedian(vs.map(function (d) { return d.getTime(); }));\r\n    if (!grouper) {\r\n        return { value: median, name: (new Date(median)).toString() };\r\n    }\r\n    return toDateGroup(grouper, new Date(median));\r\n}\r\nfunction trueMedian(dates) {\r\n    // to avoid interpolating between the centers do it manually\r\n    var s = Float64Array.from(dates);\r\n    if (s.length === 1) {\r\n        return s[0];\r\n    }\r\n    s.sort();\r\n    return s[Math.floor(s.length / 2)];\r\n}\r\n//# sourceMappingURL=internalDate.js.map","import * as tslib_1 from \"tslib\";\r\nimport { timeFormat, timeParse } from 'd3-time-format';\r\nimport { equal } from '../internal';\r\nimport { Category, dialogAddons, toolbar } from './annotations';\r\nimport Column from './Column';\r\nimport { defaultGroup, ECompareValueType, DEFAULT_COLOR } from './interfaces';\r\nimport { isMissingValue, isUnknown, missingGroup } from './missing';\r\nimport ValueColumn from './ValueColumn';\r\nimport { noDateFilter, defaultDateGrouper, isDummyDateFilter, isDefaultDateGrouper, restoreDateFilter, isEqualDateFilter, isDateIncluded, toDateGroup, chooseAggregatedDate } from './internalDate';\r\nimport { integrateDefaults } from './internal';\r\nvar DateColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(DateColumn, _super);\r\n    function DateColumn(id, desc) {\r\n        var _this = _super.call(this, id, integrateDefaults(desc, {\r\n            groupRenderer: 'datehistogram',\r\n            summaryRenderer: 'datehistogram'\r\n        })) || this;\r\n        /**\r\n         * currently active filter\r\n         * @type {{min: number, max: number}}\r\n         * @private\r\n         */\r\n        _this.currentFilter = noDateFilter();\r\n        _this.currentGrouper = defaultDateGrouper();\r\n        var f = timeFormat(desc.dateFormat || DateColumn_1.DEFAULT_DATE_FORMAT);\r\n        _this.format = function (v) { return (v instanceof Date) ? f(v) : ''; };\r\n        _this.parse = desc.dateParse ? timeParse(desc.dateParse) : timeParse(desc.dateFormat || DateColumn_1.DEFAULT_DATE_FORMAT);\r\n        return _this;\r\n    }\r\n    DateColumn_1 = DateColumn;\r\n    DateColumn.prototype.getFormatter = function () {\r\n        return this.format;\r\n    };\r\n    DateColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        r.filter = isDummyDateFilter(this.currentFilter) ? null : this.currentFilter;\r\n        if (this.currentGrouper && !isDefaultDateGrouper(this.currentGrouper)) {\r\n            r.grouper = this.currentGrouper;\r\n        }\r\n        return r;\r\n    };\r\n    DateColumn.prototype.restore = function (dump, factory) {\r\n        _super.prototype.restore.call(this, dump, factory);\r\n        if (dump.filter) {\r\n            this.currentFilter = restoreDateFilter(dump.filter);\r\n        }\r\n        if (dump.grouper) {\r\n            this.currentGrouper = dump.grouper;\r\n        }\r\n    };\r\n    DateColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([DateColumn_1.EVENT_FILTER_CHANGED, DateColumn_1.EVENT_GROUPING_CHANGED]);\r\n    };\r\n    DateColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    DateColumn.prototype.getValue = function (row) {\r\n        return this.getDate(row);\r\n    };\r\n    DateColumn.prototype.getDate = function (row) {\r\n        var v = _super.prototype.getValue.call(this, row);\r\n        if (isMissingValue(v)) {\r\n            return null;\r\n        }\r\n        if (v instanceof Date) {\r\n            return v;\r\n        }\r\n        return this.parse(String(v));\r\n    };\r\n    DateColumn.prototype.iterDate = function (row) {\r\n        return [this.getDate(row)];\r\n    };\r\n    DateColumn.prototype.getLabel = function (row) {\r\n        var v = this.getValue(row);\r\n        return this.format(v);\r\n    };\r\n    DateColumn.prototype.isFiltered = function () {\r\n        return !isDummyDateFilter(this.currentFilter);\r\n    };\r\n    DateColumn.prototype.clearFilter = function () {\r\n        var was = this.isFiltered();\r\n        this.setFilter(null);\r\n        return was;\r\n    };\r\n    DateColumn.prototype.getFilter = function () {\r\n        return Object.assign({}, this.currentFilter);\r\n    };\r\n    DateColumn.prototype.setFilter = function (value) {\r\n        value = value || { min: -Infinity, max: +Infinity, filterMissing: false };\r\n        if (isEqualDateFilter(value, this.currentFilter)) {\r\n            return;\r\n        }\r\n        var bak = this.getFilter();\r\n        this.currentFilter.min = isUnknown(value.min) ? -Infinity : value.min;\r\n        this.currentFilter.max = isUnknown(value.max) ? Infinity : value.max;\r\n        this.currentFilter.filterMissing = value.filterMissing;\r\n        this.fire([DateColumn_1.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, this.getFilter());\r\n    };\r\n    /**\r\n     * filter the current row if any filter is set\r\n     * @param row\r\n     * @returns {boolean}\r\n     */\r\n    DateColumn.prototype.filter = function (row, valueCache) {\r\n        return isDateIncluded(this.currentFilter, valueCache !== undefined ? valueCache : this.getDate(row));\r\n    };\r\n    DateColumn.prototype.toCompareValue = function (row, valueCache) {\r\n        var v = valueCache !== undefined ? valueCache : this.getValue(row);\r\n        if (!(v instanceof Date)) {\r\n            return NaN;\r\n        }\r\n        return v.getTime();\r\n    };\r\n    DateColumn.prototype.toCompareValueType = function () {\r\n        return ECompareValueType.DOUBLE_ASC;\r\n    };\r\n    DateColumn.prototype.getDateGrouper = function () {\r\n        return Object.assign({}, this.currentGrouper);\r\n    };\r\n    DateColumn.prototype.setDateGrouper = function (value) {\r\n        if (equal(this.currentGrouper, value)) {\r\n            return;\r\n        }\r\n        var bak = this.getDateGrouper();\r\n        this.currentGrouper = Object.assign({}, value);\r\n        this.fire([DateColumn_1.EVENT_GROUPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, value);\r\n    };\r\n    DateColumn.prototype.group = function (row, valueCache) {\r\n        var v = valueCache !== undefined ? valueCache : this.getDate(row);\r\n        if (!v || !(v instanceof Date)) {\r\n            return Object.assign({}, missingGroup);\r\n        }\r\n        if (!this.currentGrouper) {\r\n            return Object.assign({}, defaultGroup);\r\n        }\r\n        var g = toDateGroup(this.currentGrouper, v);\r\n        return {\r\n            name: g.name,\r\n            color: DEFAULT_COLOR\r\n        };\r\n    };\r\n    DateColumn.prototype.toCompareGroupValue = function (rows, _group, valueCache) {\r\n        var v = chooseAggregatedDate(rows, this.currentGrouper, this, valueCache).value;\r\n        return v == null ? NaN : v;\r\n    };\r\n    DateColumn.prototype.toCompareGroupValueType = function () {\r\n        return ECompareValueType.DOUBLE_ASC;\r\n    };\r\n    var DateColumn_1;\r\n    DateColumn.EVENT_FILTER_CHANGED = 'filterChanged';\r\n    DateColumn.EVENT_GROUPING_CHANGED = 'groupingChanged';\r\n    DateColumn.DEFAULT_DATE_FORMAT = '%x';\r\n    DateColumn = DateColumn_1 = tslib_1.__decorate([\r\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'groupBy', 'sortGroupBy', 'filterDate'),\r\n        dialogAddons('group', 'groupDate'),\r\n        Category('date')\r\n    ], DateColumn);\r\n    return DateColumn;\r\n}(ValueColumn));\r\nexport default DateColumn;\r\n//# sourceMappingURL=DateColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { timeFormat, timeParse } from 'd3-time-format';\r\nimport { median, min, max } from '../internal';\r\nimport { dialogAddons, toolbar } from './annotations';\r\nimport ArrayColumn from './ArrayColumn';\r\nimport { ECompareValueType } from './interfaces';\r\nimport { isMissingValue } from './missing';\r\nimport DateColumn from './DateColumn';\r\nimport { noDateFilter, isDummyDateFilter, restoreDateFilter } from './internalDate';\r\nimport { chooseUIntByDataLength, integrateDefaults } from './internal';\r\nexport var EDateSort;\r\n(function (EDateSort) {\r\n    EDateSort[\"min\"] = \"min\";\r\n    EDateSort[\"max\"] = \"max\";\r\n    EDateSort[\"median\"] = \"median\";\r\n})(EDateSort || (EDateSort = {}));\r\nvar DatesColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(DatesColumn, _super);\r\n    function DatesColumn(id, desc) {\r\n        var _this = _super.call(this, id, integrateDefaults(desc, {\r\n            renderer: 'datehistogram',\r\n            groupRenderer: 'datehistogram',\r\n            summaryRenderer: 'datehistogram'\r\n        })) || this;\r\n        _this.currentFilter = noDateFilter();\r\n        var f = timeFormat(desc.dateFormat || DateColumn.DEFAULT_DATE_FORMAT);\r\n        _this.format = function (v) { return (v instanceof Date) ? f(v) : ''; };\r\n        _this.parse = desc.dateParse ? timeParse(desc.dateParse) : timeParse(desc.dateFormat || DateColumn.DEFAULT_DATE_FORMAT);\r\n        _this.sort = desc.sort || EDateSort.median;\r\n        return _this;\r\n    }\r\n    DatesColumn_1 = DatesColumn;\r\n    DatesColumn.prototype.getFormatter = function () {\r\n        return this.format;\r\n    };\r\n    DatesColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([DatesColumn_1.EVENT_SORTMETHOD_CHANGED, DatesColumn_1.EVENT_FILTER_CHANGED]);\r\n    };\r\n    DatesColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    DatesColumn.prototype.getValue = function (row) {\r\n        var r = this.getDates(row);\r\n        return r.every(function (d) { return d == null; }) ? null : r;\r\n    };\r\n    DatesColumn.prototype.getLabels = function (row) {\r\n        var _this = this;\r\n        return this.getDates(row).map(function (v) { return (v instanceof Date) ? _this.format(v) : ''; });\r\n    };\r\n    DatesColumn.prototype.getDates = function (row) {\r\n        var _this = this;\r\n        return _super.prototype.getValues.call(this, row).map(function (v) {\r\n            if (isMissingValue(v)) {\r\n                return null;\r\n            }\r\n            if (v instanceof Date) {\r\n                return v;\r\n            }\r\n            return _this.parse(String(v));\r\n        });\r\n    };\r\n    DatesColumn.prototype.getDate = function (row) {\r\n        var av = this.getDates(row).filter(Boolean);\r\n        if (av.length === 0) {\r\n            return null;\r\n        }\r\n        return new Date(compute(av, this.sort));\r\n    };\r\n    DatesColumn.prototype.iterDate = function (row) {\r\n        return this.getDates(row);\r\n    };\r\n    DatesColumn.prototype.getSortMethod = function () {\r\n        return this.sort;\r\n    };\r\n    DatesColumn.prototype.setSortMethod = function (sort) {\r\n        if (this.sort === sort) {\r\n            return;\r\n        }\r\n        this.fire([DatesColumn_1.EVENT_SORTMETHOD_CHANGED], this.sort, this.sort = sort);\r\n        // sort by me if not already sorted by me\r\n        if (!this.isSortedByMe().asc) {\r\n            this.sortByMe();\r\n        }\r\n    };\r\n    DatesColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        r.sortMethod = this.getSortMethod();\r\n        r.filter = !isDummyDateFilter(this.currentFilter) ? this.currentFilter : null;\r\n        return r;\r\n    };\r\n    DatesColumn.prototype.restore = function (dump, factory) {\r\n        _super.prototype.restore.call(this, dump, factory);\r\n        if (dump.sortMethod) {\r\n            this.sort = dump.sortMethod;\r\n        }\r\n        if (dump.filter) {\r\n            this.currentFilter = restoreDateFilter(dump.filter);\r\n        }\r\n    };\r\n    DatesColumn.prototype.toCompareValue = function (row) {\r\n        var vs = this.getDates(row).filter(Boolean);\r\n        if (!vs) {\r\n            return [0, 0];\r\n        }\r\n        return [vs.length, compute(vs, this.sort)];\r\n    };\r\n    DatesColumn.prototype.toCompareValueType = function () {\r\n        return [chooseUIntByDataLength(this.dataLength), ECompareValueType.DOUBLE_ASC];\r\n    };\r\n    DatesColumn.prototype.isFiltered = function () {\r\n        return DateColumn.prototype.isFiltered.call(this);\r\n    };\r\n    DatesColumn.prototype.getFilter = function () {\r\n        return DateColumn.prototype.getFilter.call(this);\r\n    };\r\n    DatesColumn.prototype.setFilter = function (value) {\r\n        DateColumn.prototype.setFilter.call(this, value);\r\n    };\r\n    DatesColumn.prototype.filter = function (row) {\r\n        return DateColumn.prototype.filter.call(this, row);\r\n    };\r\n    DatesColumn.prototype.clearFilter = function () {\r\n        return DateColumn.prototype.clearFilter.call(this);\r\n    };\r\n    var DatesColumn_1;\r\n    DatesColumn.EVENT_SORTMETHOD_CHANGED = 'sortMethodChanged';\r\n    DatesColumn.EVENT_FILTER_CHANGED = DateColumn.EVENT_FILTER_CHANGED;\r\n    DatesColumn = DatesColumn_1 = tslib_1.__decorate([\r\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'filterDate'),\r\n        dialogAddons('sort', 'sortDates')\r\n    ], DatesColumn);\r\n    return DatesColumn;\r\n}(ArrayColumn));\r\nexport default DatesColumn;\r\nfunction compute(arr, sort) {\r\n    switch (sort) {\r\n        case EDateSort.min:\r\n            return min(arr, function (d) { return d.getTime(); });\r\n        case EDateSort.max:\r\n            return max(arr, function (d) { return d.getTime(); });\r\n        case EDateSort.median:\r\n            return median(arr, function (d) { return d.getTime(); });\r\n    }\r\n}\r\n//# sourceMappingURL=DatesColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { timeFormat, timeParse } from 'd3-time-format';\r\nimport MapColumn from './MapColumn';\r\nimport { isMissingValue } from './missing';\r\nimport DatesColumn, { EDateSort } from './DatesColumn';\r\nimport DateColumn from './DateColumn';\r\nimport { dialogAddons, toolbar } from './annotations';\r\nimport { noDateFilter, isDummyDateFilter, restoreDateFilter } from './internalDate';\r\nimport { integrateDefaults } from './internal';\r\nvar DatesMapColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(DatesMapColumn, _super);\r\n    function DatesMapColumn(id, desc) {\r\n        var _this = _super.call(this, id, integrateDefaults(desc, {\r\n            renderer: 'default'\r\n        })) || this;\r\n        _this.currentFilter = noDateFilter();\r\n        var f = timeFormat(desc.dateFormat || DateColumn.DEFAULT_DATE_FORMAT);\r\n        _this.format = function (v) { return (v instanceof Date) ? f(v) : ''; };\r\n        _this.parse = desc.dateParse ? timeParse(desc.dateParse) : timeParse(desc.dateFormat || DateColumn.DEFAULT_DATE_FORMAT);\r\n        _this.sort = desc.sort || EDateSort.median;\r\n        return _this;\r\n    }\r\n    DatesMapColumn_1 = DatesMapColumn;\r\n    DatesMapColumn.prototype.getFormatter = function () {\r\n        return this.format;\r\n    };\r\n    DatesMapColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([DatesMapColumn_1.EVENT_SORTMETHOD_CHANGED, DatesMapColumn_1.EVENT_FILTER_CHANGED]);\r\n    };\r\n    DatesMapColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    DatesMapColumn.prototype.parseValue = function (v) {\r\n        if (isMissingValue(v)) {\r\n            return null;\r\n        }\r\n        if (v instanceof Date) {\r\n            return v;\r\n        }\r\n        return this.parse(String(v));\r\n    };\r\n    DatesMapColumn.prototype.getDateMap = function (row) {\r\n        var _this = this;\r\n        return _super.prototype.getMap.call(this, row).map(function (_a) {\r\n            var key = _a.key, value = _a.value;\r\n            return ({\r\n                key: key,\r\n                value: _this.parseValue(value)\r\n            });\r\n        });\r\n    };\r\n    DatesMapColumn.prototype.iterDate = function (row) {\r\n        return this.getDates(row);\r\n    };\r\n    DatesMapColumn.prototype.getValue = function (row) {\r\n        var r = this.getDateMap(row);\r\n        return r.every(function (d) { return d == null; }) ? null : r;\r\n    };\r\n    DatesMapColumn.prototype.getLabels = function (row) {\r\n        var _this = this;\r\n        return this.getDateMap(row).map(function (_a) {\r\n            var key = _a.key, value = _a.value;\r\n            return ({\r\n                key: key,\r\n                value: (value instanceof Date) ? _this.format(value) : ''\r\n            });\r\n        });\r\n    };\r\n    DatesMapColumn.prototype.getDates = function (row) {\r\n        return this.getDateMap(row).map(function (v) { return v.value; });\r\n    };\r\n    DatesMapColumn.prototype.getDate = function (row) {\r\n        return DatesColumn.prototype.getDate.call(this, row);\r\n    };\r\n    DatesMapColumn.prototype.getSortMethod = function () {\r\n        return this.sort;\r\n    };\r\n    DatesMapColumn.prototype.setSortMethod = function (sort) {\r\n        return DatesColumn.prototype.setSortMethod.call(this, sort);\r\n    };\r\n    DatesMapColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        r.sortMethod = this.getSortMethod();\r\n        r.filter = !isDummyDateFilter(this.currentFilter) ? this.currentFilter : null;\r\n        return r;\r\n    };\r\n    DatesMapColumn.prototype.restore = function (dump, factory) {\r\n        _super.prototype.restore.call(this, dump, factory);\r\n        if (dump.sortMethod) {\r\n            this.sort = dump.sortMethod;\r\n        }\r\n        if (dump.filter) {\r\n            this.currentFilter = restoreDateFilter(dump.filter);\r\n        }\r\n    };\r\n    DatesMapColumn.prototype.isFiltered = function () {\r\n        return DateColumn.prototype.isFiltered.call(this);\r\n    };\r\n    DatesMapColumn.prototype.getFilter = function () {\r\n        return DateColumn.prototype.getFilter.call(this);\r\n    };\r\n    DatesMapColumn.prototype.setFilter = function (value) {\r\n        DateColumn.prototype.setFilter.call(this, value);\r\n    };\r\n    DatesMapColumn.prototype.filter = function (row) {\r\n        return DateColumn.prototype.filter.call(this, row);\r\n    };\r\n    DatesMapColumn.prototype.clearFilter = function () {\r\n        return DateColumn.prototype.clearFilter.call(this);\r\n    };\r\n    var DatesMapColumn_1;\r\n    DatesMapColumn.EVENT_SORTMETHOD_CHANGED = DatesColumn.EVENT_SORTMETHOD_CHANGED;\r\n    DatesMapColumn.EVENT_FILTER_CHANGED = DateColumn.EVENT_FILTER_CHANGED;\r\n    DatesMapColumn = DatesMapColumn_1 = tslib_1.__decorate([\r\n        toolbar('rename', 'filterDate'),\r\n        dialogAddons('sort', 'sortDates')\r\n    ], DatesMapColumn);\r\n    return DatesMapColumn;\r\n}(MapColumn));\r\nexport default DatesMapColumn;\r\n//# sourceMappingURL=DatesMapColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { Category, SupportType, toolbar, dialogAddons } from './annotations';\r\nimport Column from './Column';\r\nimport { ECompareValueType } from './interfaces';\r\nimport { missingGroup } from './missing';\r\nexport function createGroupDesc(label) {\r\n    if (label === void 0) { label = 'Group Name'; }\r\n    return { type: 'group', label: label };\r\n}\r\nexport var EGroupSortMethod;\r\n(function (EGroupSortMethod) {\r\n    EGroupSortMethod[\"name\"] = \"name\";\r\n    EGroupSortMethod[\"count\"] = \"count\";\r\n})(EGroupSortMethod || (EGroupSortMethod = {}));\r\nvar GroupColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(GroupColumn, _super);\r\n    function GroupColumn() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.groupSortMethod = EGroupSortMethod.name;\r\n        return _this;\r\n    }\r\n    GroupColumn_1 = GroupColumn;\r\n    Object.defineProperty(GroupColumn.prototype, \"frozen\", {\r\n        get: function () {\r\n            return this.desc.frozen !== false;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    GroupColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([GroupColumn_1.EVENT_SORTMETHOD_CHANGED]);\r\n    };\r\n    GroupColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    GroupColumn.prototype.getLabel = function () {\r\n        return '';\r\n    };\r\n    GroupColumn.prototype.getValue = function () {\r\n        return '';\r\n    };\r\n    GroupColumn.prototype.getSortMethod = function () {\r\n        return this.groupSortMethod;\r\n    };\r\n    GroupColumn.prototype.setSortMethod = function (sortMethod) {\r\n        if (this.groupSortMethod === sortMethod) {\r\n            return;\r\n        }\r\n        this.fire(GroupColumn_1.EVENT_SORTMETHOD_CHANGED, this.groupSortMethod, this.groupSortMethod = sortMethod);\r\n        // sort by me if not already sorted by me\r\n        if (!this.isGroupSortedByMe().asc) {\r\n            this.toggleMyGroupSorting();\r\n        }\r\n    };\r\n    GroupColumn.prototype.toCompareGroupValue = function (rows, group) {\r\n        if (this.groupSortMethod === 'count') {\r\n            return rows.length;\r\n        }\r\n        return group.name === missingGroup.name ? null : group.name.toLowerCase();\r\n    };\r\n    GroupColumn.prototype.toCompareGroupValueType = function () {\r\n        return this.groupSortMethod === 'count' ? ECompareValueType.COUNT : ECompareValueType.STRING;\r\n    };\r\n    var GroupColumn_1;\r\n    GroupColumn.EVENT_SORTMETHOD_CHANGED = 'sortMethodChanged';\r\n    GroupColumn = GroupColumn_1 = tslib_1.__decorate([\r\n        SupportType(),\r\n        toolbar('rename', 'sortGroupBy'),\r\n        dialogAddons('sortGroup', 'sortGroups'),\r\n        Category('support')\r\n    ], GroupColumn);\r\n    return GroupColumn;\r\n}(Column));\r\nexport default GroupColumn;\r\n//# sourceMappingURL=GroupColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { Category, toolbar } from './annotations';\r\nimport CategoricalColumn from './CategoricalColumn';\r\nimport Column from './Column';\r\nimport { DEFAULT_COLOR } from './interfaces';\r\nimport { colorPool, integrateDefaults } from './internal';\r\nimport { missingGroup } from './missing';\r\nimport ValueColumn from './ValueColumn';\r\nimport { DEFAULT_CATEGORICAL_COLOR_FUNCTION } from './CategoricalColorMappingFunction';\r\n/**\r\n * column for hierarchical categorical values\r\n */\r\nvar HierarchyColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(HierarchyColumn, _super);\r\n    function HierarchyColumn(id, desc) {\r\n        var _this = _super.call(this, id, integrateDefaults(desc, {\r\n            renderer: 'categorical'\r\n        })) || this;\r\n        _this.currentMaxDepth = Infinity;\r\n        _this.currentLeaves = [];\r\n        _this.currentLeavesNameCache = new Map();\r\n        _this.currentLeavesPathCache = new Map();\r\n        _this.hierarchySeparator = desc.hierarchySeparator || '.';\r\n        _this.hierarchy = _this.initHierarchy(desc.hierarchy);\r\n        _this.currentNode = _this.hierarchy;\r\n        _this.currentLeaves = computeLeaves(_this.currentNode, _this.currentMaxDepth);\r\n        _this.updateCaches();\r\n        _this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\r\n        return _this;\r\n    }\r\n    HierarchyColumn_1 = HierarchyColumn;\r\n    HierarchyColumn.prototype.initHierarchy = function (root) {\r\n        var colors = colorPool();\r\n        var s = this.hierarchySeparator;\r\n        var add = function (prefix, node) {\r\n            var name = node.name == null ? String(node.value) : node.name;\r\n            var children = (node.children || []).map(function (child) {\r\n                if (typeof child === 'string') {\r\n                    var path_1 = prefix + child;\r\n                    return {\r\n                        path: path_1,\r\n                        name: child,\r\n                        label: path_1,\r\n                        color: colors(),\r\n                        value: 0,\r\n                        children: []\r\n                    };\r\n                }\r\n                var r = add(\"\" + prefix + name + s, child);\r\n                if (!r.color) {\r\n                    //hack to inject the next color\r\n                    r.color = colors();\r\n                }\r\n                return r;\r\n            });\r\n            var path = prefix + name;\r\n            var label = node.label ? node.label : path;\r\n            return { path: path, name: name, children: children, label: label, color: node.color, value: 0 };\r\n        };\r\n        return add('', root);\r\n    };\r\n    Object.defineProperty(HierarchyColumn.prototype, \"categories\", {\r\n        get: function () {\r\n            return this.currentLeaves;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    HierarchyColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([HierarchyColumn_1.EVENT_COLOR_MAPPING_CHANGED, HierarchyColumn_1.EVENT_CUTOFF_CHANGED]);\r\n    };\r\n    HierarchyColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    HierarchyColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        r.colorMapping = this.colorMapping.toJSON();\r\n        if (isFinite(this.currentMaxDepth)) {\r\n            r.maxDepth = this.currentMaxDepth;\r\n        }\r\n        if (this.currentNode !== this.hierarchy) {\r\n            r.cutOffNode = this.currentNode.path;\r\n        }\r\n        return r;\r\n    };\r\n    HierarchyColumn.prototype.restore = function (dump, factory) {\r\n        _super.prototype.restore.call(this, dump, factory);\r\n        this.colorMapping = factory.categoricalColorMappingFunction(dump.colorMapping, this.categories);\r\n        if (typeof dump.maxDepth !== 'undefined') {\r\n            this.currentMaxDepth = dump.maxDepth;\r\n        }\r\n        if (typeof dump.cutOffNode !== 'undefined') {\r\n            var path = dump.cutOffNode.split(this.hierarchySeparator);\r\n            var node = this.hierarchy;\r\n            var act_1 = path.shift();\r\n            while (act_1 && node) {\r\n                if (node.name !== act_1) {\r\n                    node = null;\r\n                    break;\r\n                }\r\n                var next = path.shift();\r\n                if (!next) {\r\n                    break;\r\n                }\r\n                act_1 = next;\r\n                node = node.children.find(function (d) { return d.name === act_1; }) || null;\r\n            }\r\n            this.currentNode = node || this.hierarchy;\r\n        }\r\n        if (typeof dump.maxDepth !== 'undefined' || typeof dump.cutOffNode !== 'undefined') {\r\n            this.currentLeaves = computeLeaves(this.currentNode, this.currentMaxDepth);\r\n            this.updateCaches();\r\n        }\r\n    };\r\n    HierarchyColumn.prototype.getColorMapping = function () {\r\n        return this.colorMapping.clone();\r\n    };\r\n    HierarchyColumn.prototype.setColorMapping = function (mapping) {\r\n        if (this.colorMapping.eq(mapping)) {\r\n            return;\r\n        }\r\n        this.fire([CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], this.colorMapping.clone(), this.colorMapping = mapping);\r\n    };\r\n    HierarchyColumn.prototype.getCutOff = function () {\r\n        return {\r\n            node: this.currentNode,\r\n            maxDepth: this.currentMaxDepth\r\n        };\r\n    };\r\n    HierarchyColumn.prototype.setCutOff = function (value) {\r\n        var maxDepth = value.maxDepth == null ? Infinity : value.maxDepth;\r\n        if (this.currentNode === value.node && this.currentMaxDepth === maxDepth) {\r\n            return;\r\n        }\r\n        var bak = this.getCutOff();\r\n        this.currentNode = value.node;\r\n        this.currentMaxDepth = maxDepth;\r\n        this.currentLeaves = computeLeaves(value.node, maxDepth);\r\n        this.updateCaches();\r\n        this.fire([HierarchyColumn_1.EVENT_CUTOFF_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, this.getCutOff());\r\n    };\r\n    HierarchyColumn.prototype.getCategory = function (row) {\r\n        var _this = this;\r\n        var v = _super.prototype.getValue.call(this, row);\r\n        if (v == null || v === '') {\r\n            return null;\r\n        }\r\n        v = v.trim();\r\n        if (this.currentLeavesNameCache.has(v)) {\r\n            return this.currentLeavesNameCache.get(v);\r\n        }\r\n        if (this.currentLeavesPathCache.has(v)) {\r\n            return this.currentLeavesPathCache.get(v);\r\n        }\r\n        return this.currentLeaves.find(function (n) {\r\n            //direct hit or is a child of it\r\n            return n.path === v || n.name === v || v.startsWith(n.path + _this.hierarchySeparator);\r\n        }) || null;\r\n    };\r\n    Object.defineProperty(HierarchyColumn.prototype, \"dataLength\", {\r\n        get: function () {\r\n            return this.currentLeaves.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HierarchyColumn.prototype, \"labels\", {\r\n        get: function () {\r\n            return this.currentLeaves.map(function (d) { return d.label; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    HierarchyColumn.prototype.getValue = function (row) {\r\n        var v = this.getCategory(row);\r\n        return v ? v.name : null;\r\n    };\r\n    HierarchyColumn.prototype.getCategories = function (row) {\r\n        return [this.getCategory(row)];\r\n    };\r\n    HierarchyColumn.prototype.iterCategory = function (row) {\r\n        return [this.getCategory(row)];\r\n    };\r\n    HierarchyColumn.prototype.getLabel = function (row) {\r\n        return CategoricalColumn.prototype.getLabel.call(this, row);\r\n    };\r\n    HierarchyColumn.prototype.getColor = function (row) {\r\n        return CategoricalColumn.prototype.getColor.call(this, row);\r\n    };\r\n    HierarchyColumn.prototype.getLabels = function (row) {\r\n        return CategoricalColumn.prototype.getLabels.call(this, row);\r\n    };\r\n    HierarchyColumn.prototype.getValues = function (row) {\r\n        return CategoricalColumn.prototype.getValues.call(this, row);\r\n    };\r\n    HierarchyColumn.prototype.getMap = function (row) {\r\n        return CategoricalColumn.prototype.getMap.call(this, row);\r\n    };\r\n    HierarchyColumn.prototype.getMapLabel = function (row) {\r\n        return CategoricalColumn.prototype.getMapLabel.call(this, row);\r\n    };\r\n    HierarchyColumn.prototype.getSet = function (row) {\r\n        return CategoricalColumn.prototype.getSet.call(this, row);\r\n    };\r\n    HierarchyColumn.prototype.toCompareValue = function (row) {\r\n        return CategoricalColumn.prototype.toCompareValue.call(this, row);\r\n    };\r\n    HierarchyColumn.prototype.toCompareValueType = function () {\r\n        return CategoricalColumn.prototype.toCompareValueType.call(this);\r\n    };\r\n    HierarchyColumn.prototype.group = function (row) {\r\n        var base = this.getCategory(row);\r\n        if (!base) {\r\n            return Object.assign({}, missingGroup);\r\n        }\r\n        return { name: base.label, color: base.color };\r\n    };\r\n    HierarchyColumn.prototype.updateCaches = function () {\r\n        var _this = this;\r\n        this.currentLeavesPathCache.clear();\r\n        this.currentLeavesNameCache.clear();\r\n        this.currentLeaves.forEach(function (n) {\r\n            _this.currentLeavesPathCache.set(n.path, n);\r\n            _this.currentLeavesNameCache.set(n.name, n);\r\n        });\r\n    };\r\n    var HierarchyColumn_1;\r\n    HierarchyColumn.EVENT_CUTOFF_CHANGED = 'cutOffChanged';\r\n    HierarchyColumn.EVENT_COLOR_MAPPING_CHANGED = 'colorMappingChanged';\r\n    HierarchyColumn = HierarchyColumn_1 = tslib_1.__decorate([\r\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'cutoff', 'group', 'groupBy', 'colorMappedCategorical'),\r\n        Category('categorical')\r\n    ], HierarchyColumn);\r\n    return HierarchyColumn;\r\n}(ValueColumn));\r\nexport default HierarchyColumn;\r\nfunction computeLeaves(node, maxDepth) {\r\n    if (maxDepth === void 0) { maxDepth = Infinity; }\r\n    var leaves = [];\r\n    //depth first\r\n    var visit = function (node, depth) {\r\n        //hit or end\r\n        if (depth >= maxDepth || node.children.length === 0) {\r\n            leaves.push(node);\r\n        }\r\n        else {\r\n            // go down\r\n            node.children.forEach(function (c) { return visit(c, depth + 1); });\r\n        }\r\n    };\r\n    visit(node, 0);\r\n    return leaves;\r\n}\r\nexport function resolveInnerNodes(node) {\r\n    //breath first\r\n    var queue = [node];\r\n    var index = 0;\r\n    while (index < queue.length) {\r\n        var next = queue[index++];\r\n        for (var _i = 0, _a = next.children; _i < _a.length; _i++) {\r\n            var n = _a[_i];\r\n            queue.push(n);\r\n        }\r\n    }\r\n    return queue;\r\n}\r\nexport function isHierarchical(categories) {\r\n    if (categories.length === 0 || typeof categories[0] === 'string') {\r\n        return false;\r\n    }\r\n    // check if any has a given parent name\r\n    return categories.some(function (c) { return c.parent != null; });\r\n}\r\nexport function deriveHierarchy(categories) {\r\n    var lookup = new Map();\r\n    categories.forEach(function (c) {\r\n        var p = c.parent || '';\r\n        // set and fill up proxy\r\n        var item = Object.assign({\r\n            children: [],\r\n            label: c.name,\r\n            name: c.name,\r\n            color: DEFAULT_COLOR,\r\n            value: 0\r\n        }, lookup.get(c.name) || {}, c);\r\n        lookup.set(c.name, item);\r\n        if (!lookup.has(p)) {\r\n            // create proxy\r\n            lookup.set(p, { name: p, children: [], label: p, value: 0, color: DEFAULT_COLOR });\r\n        }\r\n        lookup.get(p).children.push(item);\r\n    });\r\n    var root = lookup.get('');\r\n    console.assert(root !== undefined, 'hierarchy with no root');\r\n    if (root.children.length === 1) {\r\n        return root.children[0];\r\n    }\r\n    return root;\r\n}\r\n//# sourceMappingURL=HierarchyColumn.js.map","import {interpolateRgbBasis} from \"d3-interpolate\";\n\nexport default function(scheme) {\n  return interpolateRgbBasis(scheme[scheme.length - 1]);\n}\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"deebf79ecae13182bd\",\n  \"eff3ffbdd7e76baed62171b5\",\n  \"eff3ffbdd7e76baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5e0a1d99b31a354\",\n  \"edf8e9bae4b374c476238b45\",\n  \"edf8e9bae4b374c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"f0f0f0bdbdbd636363\",\n  \"f7f7f7cccccc969696525252\",\n  \"f7f7f7cccccc969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee6cefdae6be6550d\",\n  \"feeddefdbe85fd8d3cd94701\",\n  \"feeddefdbe85fd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"efedf5bcbddc756bb1\",\n  \"f2f0f7cbc9e29e9ac86a51a3\",\n  \"f2f0f7cbc9e29e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee0d2fc9272de2d26\",\n  \"fee5d9fcae91fb6a4acb181d\",\n  \"fee5d9fcae91fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d\"\n).map(colors);\n\nexport default ramp(scheme);\n","export var deg2rad = Math.PI / 180;\nexport var rad2deg = 180 / Math.PI;\n","import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color.js\";\nimport {deg2rad, rad2deg} from \"./math.js\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport var warm = interpolateCubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nexport var cool = interpolateCubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nvar c = cubehelix();\n\nexport default function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  c.h = 360 * t - 100;\n  c.s = 1.5 - 1.5 * ts;\n  c.l = 0.8 - 0.9 * ts;\n  return c + \"\";\n}\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport default interpolateCubehelixLong(cubehelix(300, 0.5, 0.0), cubehelix(-240, 0.5, 1.0));\n","import colors from \"../colors.js\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ffeda0feb24cf03b20\",\n  \"ffffb2fecc5cfd8d3ce31a1c\",\n  \"ffffb2fecc5cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fff7bcfec44fd95f0e\",\n  \"ffffd4fed98efe9929cc4c02\",\n  \"ffffd4fed98efe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5f999d8c92ca25f\",\n  \"edf8fbb2e2e266c2a4238b45\",\n  \"edf8fbb2e2e266c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e0ecf49ebcda8856a7\",\n  \"edf8fbb3cde38c96c688419d\",\n  \"edf8fbb3cde38c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e0f3dba8ddb543a2ca\",\n  \"f0f9e8bae4bc7bccc42b8cbe\",\n  \"f0f9e8bae4bc7bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee8c8fdbb84e34a33\",\n  \"fef0d9fdcc8afc8d59d7301f\",\n  \"fef0d9fdcc8afc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ece2f0a6bddb1c9099\",\n  \"f6eff7bdc9e167a9cf02818a\",\n  \"f6eff7bdc9e167a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ece7f2a6bddb2b8cbe\",\n  \"f1eef6bdc9e174a9cf0570b0\",\n  \"f1eef6bdc9e174a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e7e1efc994c7dd1c77\",\n  \"f1eef6d7b5d8df65b0ce1256\",\n  \"f1eef6d7b5d8df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fde0ddfa9fb5c51b8a\",\n  \"feebe2fbb4b9f768a1ae017e\",\n  \"feebe2fbb4b9f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"edf8b17fcdbb2c7fb8\",\n  \"ffffcca1dab441b6c4225ea8\",\n  \"ffffcca1dab441b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"f7fcb9addd8e31a354\",\n  \"ffffccc2e69978c679238443\",\n  \"ffffccc2e69978c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"d8b365f5f5f55ab4ac\",\n  \"a6611adfc27d80cdc1018571\",\n  \"a6611adfc27df5f5f580cdc1018571\",\n  \"8c510ad8b365f6e8c3c7eae55ab4ac01665e\",\n  \"8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e\",\n  \"8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e\",\n  \"8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e\",\n  \"5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30\",\n  \"5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"af8dc3f7f7f77fbf7b\",\n  \"7b3294c2a5cfa6dba0008837\",\n  \"7b3294c2a5cff7f7f7a6dba0008837\",\n  \"762a83af8dc3e7d4e8d9f0d37fbf7b1b7837\",\n  \"762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837\",\n  \"762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837\",\n  \"762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837\",\n  \"40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b\",\n  \"40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e9a3c9f7f7f7a1d76a\",\n  \"d01c8bf1b6dab8e1864dac26\",\n  \"d01c8bf1b6daf7f7f7b8e1864dac26\",\n  \"c51b7de9a3c9fde0efe6f5d0a1d76a4d9221\",\n  \"c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221\",\n  \"c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221\",\n  \"c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221\",\n  \"8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419\",\n  \"8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"998ec3f7f7f7f1a340\",\n  \"5e3c99b2abd2fdb863e66101\",\n  \"5e3c99b2abd2f7f7f7fdb863e66101\",\n  \"542788998ec3d8daebfee0b6f1a340b35806\",\n  \"542788998ec3d8daebf7f7f7fee0b6f1a340b35806\",\n  \"5427888073acb2abd2d8daebfee0b6fdb863e08214b35806\",\n  \"5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806\",\n  \"2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08\",\n  \"2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62f7f7f767a9cf\",\n  \"ca0020f4a58292c5de0571b0\",\n  \"ca0020f4a582f7f7f792c5de0571b0\",\n  \"b2182bef8a62fddbc7d1e5f067a9cf2166ac\",\n  \"b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac\",\n  \"b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac\",\n  \"b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac\",\n  \"67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061\",\n  \"67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62ffffff999999\",\n  \"ca0020f4a582bababa404040\",\n  \"ca0020f4a582ffffffbababa404040\",\n  \"b2182bef8a62fddbc7e0e0e09999994d4d4d\",\n  \"b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d\",\n  \"b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d\",\n  \"b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d\",\n  \"67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a\",\n  \"67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91bfdb\",\n  \"d7191cfdae61abd9e92c7bb6\",\n  \"d7191cfdae61ffffbfabd9e92c7bb6\",\n  \"d73027fc8d59fee090e0f3f891bfdb4575b4\",\n  \"d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4\",\n  \"d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4\",\n  \"d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4\",\n  \"a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695\",\n  \"a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91cf60\",\n  \"d7191cfdae61a6d96a1a9641\",\n  \"d7191cfdae61ffffbfa6d96a1a9641\",\n  \"d73027fc8d59fee08bd9ef8b91cf601a9850\",\n  \"d73027fc8d59fee08bffffbfd9ef8b91cf601a9850\",\n  \"d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850\",\n  \"d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850\",\n  \"a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837\",\n  \"a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf99d594\",\n  \"d7191cfdae61abdda42b83ba\",\n  \"d7191cfdae61ffffbfabdda42b83ba\",\n  \"d53e4ffc8d59fee08be6f59899d5943288bd\",\n  \"d53e4ffc8d59fee08bffffbfe6f59899d5943288bd\",\n  \"d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd\",\n  \"d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd\",\n  \"9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2\",\n  \"9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2\"\n).map(colors);\n\nexport default ramp(scheme);\n","import { interpolateBlues, interpolateGreens, interpolateGreys, interpolateOranges, interpolatePurples, interpolateReds, interpolateCool, interpolateCubehelixDefault, interpolateWarm, interpolatePlasma, interpolateMagma, interpolateViridis, interpolateInferno, interpolateYlOrRd, interpolateYlOrBr, interpolateBuGn, interpolateBuPu, interpolateGnBu, interpolateOrRd, interpolatePuBuGn, interpolatePuBu, interpolatePuRd, interpolateRdPu, interpolateYlGnBu, interpolateYlGn, interpolateRainbow, interpolateBrBG, interpolatePRGn, interpolatePiYG, interpolatePuOr, interpolateRdBu, interpolateRdGy, interpolateRdYlBu, interpolateRdYlGn, interpolateSpectral } from 'd3-scale-chromatic';\r\nimport { equal } from '../internal';\r\nimport { scaleLinear } from 'd3-scale';\r\nimport { DEFAULT_COLOR } from './interfaces';\r\nvar SequentialColorFunction = /** @class */ (function () {\r\n    function SequentialColorFunction(name) {\r\n        this.name = name;\r\n        this.apply = SequentialColorFunction.FUNCTIONS[name] || interpolateBlues;\r\n    }\r\n    SequentialColorFunction.prototype.toJSON = function () {\r\n        return this.name;\r\n    };\r\n    SequentialColorFunction.prototype.clone = function () {\r\n        return this; // no clone needed since not parameterized\r\n    };\r\n    SequentialColorFunction.prototype.eq = function (other) {\r\n        return other instanceof SequentialColorFunction && other.name === this.name;\r\n    };\r\n    SequentialColorFunction.FUNCTIONS = {\r\n        interpolateBlues: interpolateBlues,\r\n        interpolateGreens: interpolateGreens,\r\n        interpolateGreys: interpolateGreys,\r\n        interpolateOranges: interpolateOranges,\r\n        interpolatePurples: interpolatePurples,\r\n        interpolateReds: interpolateReds,\r\n        interpolateCool: interpolateCool,\r\n        interpolateCubehelixDefault: interpolateCubehelixDefault,\r\n        interpolateWarm: interpolateWarm,\r\n        interpolatePlasma: interpolatePlasma,\r\n        interpolateMagma: interpolateMagma,\r\n        interpolateViridis: interpolateViridis,\r\n        interpolateInferno: interpolateInferno,\r\n        interpolateYlOrRd: interpolateYlOrRd,\r\n        interpolateYlOrBr: interpolateYlOrBr,\r\n        interpolateBuGn: interpolateBuGn,\r\n        interpolateBuPu: interpolateBuPu,\r\n        interpolateGnBu: interpolateGnBu,\r\n        interpolateOrRd: interpolateOrRd,\r\n        interpolatePuBuGn: interpolatePuBuGn,\r\n        interpolatePuBu: interpolatePuBu,\r\n        interpolatePuRd: interpolatePuRd,\r\n        interpolateRdPu: interpolateRdPu,\r\n        interpolateYlGnBu: interpolateYlGnBu,\r\n        interpolateYlGn: interpolateYlGn,\r\n        interpolateRainbow: interpolateRainbow\r\n    };\r\n    return SequentialColorFunction;\r\n}());\r\nexport { SequentialColorFunction };\r\nvar DivergentColorFunction = /** @class */ (function () {\r\n    function DivergentColorFunction(name) {\r\n        this.name = name;\r\n        this.apply = DivergentColorFunction.FUNCTIONS[name] || interpolateBlues;\r\n    }\r\n    DivergentColorFunction.prototype.toJSON = function () {\r\n        return this.name;\r\n    };\r\n    DivergentColorFunction.prototype.clone = function () {\r\n        return this; // no clone needed since not parameterized\r\n    };\r\n    DivergentColorFunction.prototype.eq = function (other) {\r\n        return other instanceof DivergentColorFunction && other.name === this.name;\r\n    };\r\n    DivergentColorFunction.FUNCTIONS = {\r\n        interpolateBrBG: interpolateBrBG,\r\n        interpolatePRGn: interpolatePRGn,\r\n        interpolatePiYG: interpolatePiYG,\r\n        interpolatePuOr: interpolatePuOr,\r\n        interpolateRdBu: interpolateRdBu,\r\n        interpolateRdGy: interpolateRdGy,\r\n        interpolateRdYlBu: interpolateRdYlBu,\r\n        interpolateRdYlGn: interpolateRdYlGn,\r\n        interpolateSpectral: interpolateSpectral\r\n    };\r\n    return DivergentColorFunction;\r\n}());\r\nexport { DivergentColorFunction };\r\nvar UnknownColorFunction = /** @class */ (function () {\r\n    function UnknownColorFunction(apply) {\r\n        this.apply = apply;\r\n    }\r\n    UnknownColorFunction.prototype.toJSON = function () {\r\n        return this.apply.toString();\r\n    };\r\n    UnknownColorFunction.prototype.clone = function () {\r\n        return this; // no clone needed since not parameterized\r\n    };\r\n    UnknownColorFunction.prototype.eq = function (other) {\r\n        return other instanceof UnknownColorFunction && other.apply === this.apply;\r\n    };\r\n    return UnknownColorFunction;\r\n}());\r\nexport { UnknownColorFunction };\r\nvar SolidColorFunction = /** @class */ (function () {\r\n    function SolidColorFunction(color) {\r\n        this.color = color;\r\n    }\r\n    SolidColorFunction.prototype.apply = function () {\r\n        return this.color;\r\n    };\r\n    SolidColorFunction.prototype.toJSON = function () {\r\n        return this.color;\r\n    };\r\n    SolidColorFunction.prototype.clone = function () {\r\n        return this; // no clone needed since not parameterized\r\n    };\r\n    SolidColorFunction.prototype.eq = function (other) {\r\n        return other instanceof SolidColorFunction && other.color === this.color;\r\n    };\r\n    return SolidColorFunction;\r\n}());\r\nexport { SolidColorFunction };\r\nvar QuantizedColorFunction = /** @class */ (function () {\r\n    function QuantizedColorFunction(base, steps) {\r\n        if (typeof base.apply === 'function') {\r\n            this.base = base;\r\n            this.steps = steps == null ? 5 : steps;\r\n        }\r\n        else {\r\n            var dump = base;\r\n            this.base = steps.colorMappingFunction(dump.base);\r\n            this.steps = dump.steps;\r\n        }\r\n    }\r\n    QuantizedColorFunction.prototype.apply = function (v) {\r\n        return this.base.apply(quantize(v, this.steps));\r\n    };\r\n    QuantizedColorFunction.prototype.toJSON = function () {\r\n        return {\r\n            type: 'quantized',\r\n            base: this.base.toJSON(),\r\n            steps: this.steps\r\n        };\r\n    };\r\n    QuantizedColorFunction.prototype.clone = function () {\r\n        return new QuantizedColorFunction(this.base.clone(), this.steps);\r\n    };\r\n    QuantizedColorFunction.prototype.eq = function (other) {\r\n        return other instanceof QuantizedColorFunction && other.base.eq(this.base) && other.steps === this.steps;\r\n    };\r\n    return QuantizedColorFunction;\r\n}());\r\nexport { QuantizedColorFunction };\r\nvar CustomColorMappingFunction = /** @class */ (function () {\r\n    function CustomColorMappingFunction(entries) {\r\n        this.scale = scaleLinear();\r\n        this.entries = Array.isArray(entries) ? entries : entries.entries;\r\n        this.scale\r\n            .domain(this.entries.map(function (d) { return d.value; }))\r\n            .range(this.entries.map(function (d) { return d.color; }))\r\n            .clamp(true);\r\n    }\r\n    CustomColorMappingFunction.prototype.apply = function (v) {\r\n        return this.scale(v);\r\n    };\r\n    CustomColorMappingFunction.prototype.toJSON = function () {\r\n        return {\r\n            type: 'custom',\r\n            entries: this.entries\r\n        };\r\n    };\r\n    CustomColorMappingFunction.prototype.clone = function () {\r\n        return new CustomColorMappingFunction(this.entries.slice());\r\n    };\r\n    CustomColorMappingFunction.prototype.eq = function (other) {\r\n        return other instanceof CustomColorMappingFunction && equal(this.entries, other.entries);\r\n    };\r\n    return CustomColorMappingFunction;\r\n}());\r\nexport { CustomColorMappingFunction };\r\n/**\r\n * @internal\r\n */\r\nexport function quantize(v, steps) {\r\n    var perStep = 1 / steps;\r\n    if (v <= perStep) {\r\n        return 0;\r\n    }\r\n    if (v >= (1 - perStep)) {\r\n        return 1;\r\n    }\r\n    for (var acc = 0; acc < 1; acc += perStep) {\r\n        if (v < acc) {\r\n            return acc - perStep / 2; // center\r\n        }\r\n    }\r\n    return v;\r\n}\r\nexport function colorMappingFunctions() {\r\n    var _a;\r\n    var types = (_a = {},\r\n        _a[DEFAULT_COLOR] = SolidColorFunction,\r\n        _a.quantized = QuantizedColorFunction,\r\n        _a.custom = CustomColorMappingFunction,\r\n        _a);\r\n    for (var _i = 0, _b = Object.keys(SequentialColorFunction.FUNCTIONS); _i < _b.length; _i++) {\r\n        var key = _b[_i];\r\n        types[key] = SequentialColorFunction;\r\n    }\r\n    for (var _c = 0, _d = Object.keys(DivergentColorFunction.FUNCTIONS); _c < _d.length; _c++) {\r\n        var key = _d[_c];\r\n        types[key] = DivergentColorFunction;\r\n    }\r\n    return types;\r\n}\r\nexport var DEFAULT_COLOR_FUNCTION = new SolidColorFunction(DEFAULT_COLOR);\r\n/**\r\n * @internal\r\n */\r\nexport function createColorMappingFunction(types, factory) {\r\n    return function (dump) {\r\n        if (!dump) {\r\n            return DEFAULT_COLOR_FUNCTION;\r\n        }\r\n        if (typeof dump === 'function') {\r\n            return new UnknownColorFunction(dump);\r\n        }\r\n        var typeName = typeof dump === 'string' ? dump : dump.type;\r\n        var type = types[typeName];\r\n        if (type) {\r\n            return new type(dump, factory);\r\n        }\r\n        if (Array.isArray(dump)) {\r\n            return new CustomColorMappingFunction(dump);\r\n        }\r\n        return new SolidColorFunction(dump.toString());\r\n    };\r\n}\r\n//# sourceMappingURL=ColorMappingFunction.js.map","import * as tslib_1 from \"tslib\";\r\nimport { suffix } from '../internal';\r\nimport { toolbar, SortByDefault } from './annotations';\r\nimport CompositeColumn from './CompositeColumn';\r\nimport { DEFAULT_COLOR } from './interfaces';\r\nimport { isNumberColumn, isMapAbleColumn } from './INumberColumn';\r\nimport NumberColumn from './NumberColumn';\r\nimport { DEFAULT_FORMATTER, noNumberFilter } from './internalNumber';\r\nimport { ScaleMappingFunction } from './MappingFunction';\r\nimport { DEFAULT_COLOR_FUNCTION } from './ColorMappingFunction';\r\nimport { integrateDefaults } from './internal';\r\n/**\r\n *  factory for creating a description creating a max column\r\n * @param label\r\n * @returns {{type: string, label: string}}\r\n */\r\nexport function createImpositionDesc(label) {\r\n    if (label === void 0) { label = 'Imposition'; }\r\n    return { type: 'imposition', label: label };\r\n}\r\n/**\r\n * implementation of a combine column, standard operations how to select\r\n */\r\nvar ImpositionCompositeColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ImpositionCompositeColumn, _super);\r\n    function ImpositionCompositeColumn(id, desc) {\r\n        return _super.call(this, id, integrateDefaults(desc, {\r\n            renderer: 'number',\r\n            groupRenderer: 'boxplot',\r\n            summaryRenderer: 'histogram'\r\n        })) || this;\r\n    }\r\n    ImpositionCompositeColumn_1 = ImpositionCompositeColumn;\r\n    Object.defineProperty(ImpositionCompositeColumn.prototype, \"label\", {\r\n        get: function () {\r\n            var l = _super.prototype.getMetaData.call(this).label;\r\n            var c = this._children;\r\n            if (l !== 'Imposition' || c.length === 0) {\r\n                return l;\r\n            }\r\n            if (c.length === 1) {\r\n                return c[0].label;\r\n            }\r\n            var w = this.wrapper;\r\n            var rest = this.rest;\r\n            return (w ? w.label : '?') + \" (\" + rest.map(function (c) { return c.label; }).join(', ') + \")\";\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ImpositionCompositeColumn.prototype, \"wrapper\", {\r\n        get: function () {\r\n            return this._children.find(isNumberColumn) || null;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ImpositionCompositeColumn.prototype, \"rest\", {\r\n        get: function () {\r\n            var w = this.wrapper;\r\n            return this._children.filter(function (d) { return d !== w; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ImpositionCompositeColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([ImpositionCompositeColumn_1.EVENT_MAPPING_CHANGED, ImpositionCompositeColumn_1.EVENT_COLOR_MAPPING_CHANGED]);\r\n    };\r\n    ImpositionCompositeColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    ImpositionCompositeColumn.prototype.getLabel = function (row) {\r\n        var c = this._children;\r\n        if (c.length === 0) {\r\n            return '';\r\n        }\r\n        if (c.length === 1) {\r\n            return c[0].getLabel(row);\r\n        }\r\n        var w = this.wrapper;\r\n        var rest = this.rest;\r\n        return (w ? w.getLabel(row) : '?') + \" (\" + rest.map(function (c) { return c.label + \" = \" + c.getLabel(row); }).join(', ') + \")\";\r\n    };\r\n    ImpositionCompositeColumn.prototype.getColor = function (row) {\r\n        var c = this._children;\r\n        switch (c.length) {\r\n            case 0:\r\n                return DEFAULT_COLOR;\r\n            case 1:\r\n                return c[0].getColor(row);\r\n            default:\r\n                return this.rest[0].getColor(row);\r\n        }\r\n    };\r\n    ImpositionCompositeColumn.prototype.getNumberFormat = function () {\r\n        var w = this.wrapper;\r\n        return w ? w.getNumberFormat() : DEFAULT_FORMATTER;\r\n    };\r\n    ImpositionCompositeColumn.prototype.getValue = function (row) {\r\n        var w = this.wrapper;\r\n        return w ? w.getValue(row) : NaN;\r\n    };\r\n    ImpositionCompositeColumn.prototype.getNumber = function (row) {\r\n        var w = this.wrapper;\r\n        return w ? w.getNumber(row) : NaN;\r\n    };\r\n    ImpositionCompositeColumn.prototype.getRawNumber = function (row) {\r\n        var w = this.wrapper;\r\n        return w ? w.getRawNumber(row) : NaN;\r\n    };\r\n    ImpositionCompositeColumn.prototype.iterNumber = function (row) {\r\n        return [this.getNumber(row)];\r\n    };\r\n    ImpositionCompositeColumn.prototype.iterRawNumber = function (row) {\r\n        return [this.getRawNumber(row)];\r\n    };\r\n    ImpositionCompositeColumn.prototype.getExportValue = function (row, format) {\r\n        if (format === 'json') {\r\n            var value = this.getRawNumber(row);\r\n            if (isNaN(value)) {\r\n                return null;\r\n            }\r\n            return {\r\n                label: this.getLabel(row),\r\n                color: this.getColor(row),\r\n                value: value\r\n            };\r\n        }\r\n        return _super.prototype.getExportValue.call(this, row, format);\r\n    };\r\n    ImpositionCompositeColumn.prototype.getMapping = function () {\r\n        var w = this.wrapper;\r\n        return w && isMapAbleColumn(w) ? w.getMapping() : new ScaleMappingFunction();\r\n    };\r\n    ImpositionCompositeColumn.prototype.getOriginalMapping = function () {\r\n        var w = this.wrapper;\r\n        return w && isMapAbleColumn(w) ? w.getOriginalMapping() : new ScaleMappingFunction();\r\n    };\r\n    ImpositionCompositeColumn.prototype.setMapping = function (mapping) {\r\n        var w = this.wrapper;\r\n        return w && isMapAbleColumn(w) ? w.setMapping(mapping) : undefined;\r\n    };\r\n    ImpositionCompositeColumn.prototype.getColorMapping = function () {\r\n        var w = this.wrapper;\r\n        return w && isMapAbleColumn(w) ? w.getColorMapping() : DEFAULT_COLOR_FUNCTION;\r\n    };\r\n    ImpositionCompositeColumn.prototype.setColorMapping = function (mapping) {\r\n        var w = this.wrapper;\r\n        return w && isMapAbleColumn(w) ? w.setColorMapping(mapping) : undefined;\r\n    };\r\n    ImpositionCompositeColumn.prototype.getFilter = function () {\r\n        var w = this.wrapper;\r\n        return w && isMapAbleColumn(w) ? w.getFilter() : noNumberFilter();\r\n    };\r\n    ImpositionCompositeColumn.prototype.setFilter = function (value) {\r\n        var w = this.wrapper;\r\n        return w && isMapAbleColumn(w) ? w.setFilter(value) : undefined;\r\n    };\r\n    ImpositionCompositeColumn.prototype.getRange = function () {\r\n        var w = this.wrapper;\r\n        return w && isMapAbleColumn(w) ? w.getRange() : ['0', '1'];\r\n    };\r\n    ImpositionCompositeColumn.prototype.toCompareValue = function (row) {\r\n        return NumberColumn.prototype.toCompareValue.call(this, row);\r\n    };\r\n    ImpositionCompositeColumn.prototype.toCompareValueType = function () {\r\n        return NumberColumn.prototype.toCompareValueType.call(this);\r\n    };\r\n    ImpositionCompositeColumn.prototype.toCompareGroupValue = function (rows, group) {\r\n        return NumberColumn.prototype.toCompareGroupValue.call(this, rows, group);\r\n    };\r\n    ImpositionCompositeColumn.prototype.toCompareGroupValueType = function () {\r\n        return NumberColumn.prototype.toCompareGroupValueType.call(this);\r\n    };\r\n    ImpositionCompositeColumn.prototype.insert = function (col, index) {\r\n        if (this._children.length === 1 && !this.wrapper && !isNumberColumn(col)) {\r\n            // at least one has to be a number column\r\n            return null;\r\n        }\r\n        if (this._children.length >= 2) {\r\n            // limit to two\r\n            return null;\r\n        }\r\n        return _super.prototype.insert.call(this, col, index);\r\n    };\r\n    ImpositionCompositeColumn.prototype.insertImpl = function (col, index) {\r\n        if (isNumberColumn(col)) {\r\n            this.forward.apply(this, [col].concat(suffix('.impose', NumberColumn.EVENT_MAPPING_CHANGED)));\r\n        }\r\n        if (isMapAbleColumn(col)) {\r\n            this.forward.apply(this, [col].concat(suffix('.impose', NumberColumn.EVENT_COLOR_MAPPING_CHANGED)));\r\n        }\r\n        return _super.prototype.insertImpl.call(this, col, index);\r\n    };\r\n    ImpositionCompositeColumn.prototype.removeImpl = function (child, index) {\r\n        if (isNumberColumn(child)) {\r\n            this.unforward.apply(this, [child].concat(suffix('.impose', NumberColumn.EVENT_MAPPING_CHANGED)));\r\n        }\r\n        if (isMapAbleColumn(child)) {\r\n            this.unforward.apply(this, [child].concat(suffix('.impose', NumberColumn.EVENT_COLOR_MAPPING_CHANGED)));\r\n        }\r\n        return _super.prototype.removeImpl.call(this, child, index);\r\n    };\r\n    var ImpositionCompositeColumn_1;\r\n    ImpositionCompositeColumn.EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\r\n    ImpositionCompositeColumn.EVENT_COLOR_MAPPING_CHANGED = NumberColumn.EVENT_COLOR_MAPPING_CHANGED;\r\n    ImpositionCompositeColumn = ImpositionCompositeColumn_1 = tslib_1.__decorate([\r\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'filterNumber', 'colorMapped', 'editMapping'),\r\n        SortByDefault('descending')\r\n    ], ImpositionCompositeColumn);\r\n    return ImpositionCompositeColumn;\r\n}(CompositeColumn));\r\nexport default ImpositionCompositeColumn;\r\n//# sourceMappingURL=ImpositionCompositeColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { format } from 'd3-format';\r\nimport { boxplotBuilder } from '../internal';\r\nimport { dialogAddons, SortByDefault, toolbar } from './annotations';\r\nimport ArrayColumn from './ArrayColumn';\r\nimport Column from './Column';\r\nimport { ECompareValueType } from './interfaces';\r\nimport { DEFAULT_FORMATTER, getBoxPlotNumber, isDummyNumberFilter, noNumberFilter, restoreNumberFilter, toCompareBoxPlotValue } from './internalNumber';\r\nimport { EAdvancedSortMethod } from './INumberColumn';\r\nimport { restoreMapping } from './MappingFunction';\r\nimport { isMissingValue } from './missing';\r\nimport NumberColumn from './NumberColumn';\r\nimport { integrateDefaults } from './internal';\r\nvar NumbersColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(NumbersColumn, _super);\r\n    function NumbersColumn(id, desc, factory) {\r\n        var _this = _super.call(this, id, integrateDefaults(desc, Object.assign({\r\n            renderer: 'heatmap',\r\n            groupRenderer: 'heatmap',\r\n            summaryRenderer: 'histogram'\r\n        }, desc.dataLength != null && !Number.isNaN(desc.dataLength) ? {\r\n            // better initialize the default with based on the data length\r\n            width: Math.min(Math.max(100, desc.dataLength * 10), 500)\r\n        } : {}))) || this;\r\n        _this.numberFormat = DEFAULT_FORMATTER;\r\n        /**\r\n         * currently active filter\r\n         * @type {{min: number, max: number}}\r\n         * @private\r\n         */\r\n        _this.currentFilter = noNumberFilter();\r\n        _this.mapping = restoreMapping(desc, factory);\r\n        _this.original = _this.mapping.clone();\r\n        _this.colorMapping = factory.colorMappingFunction(desc.colorMapping || desc.color);\r\n        if (desc.numberFormat) {\r\n            _this.numberFormat = format(desc.numberFormat);\r\n        }\r\n        _this.sort = desc.sort || EAdvancedSortMethod.median;\r\n        return _this;\r\n    }\r\n    NumbersColumn_1 = NumbersColumn;\r\n    NumbersColumn.prototype.getNumberFormat = function () {\r\n        return this.numberFormat;\r\n    };\r\n    NumbersColumn.prototype.toCompareValue = function (row) {\r\n        return toCompareBoxPlotValue(this, row);\r\n    };\r\n    NumbersColumn.prototype.toCompareValueType = function () {\r\n        return ECompareValueType.FLOAT;\r\n    };\r\n    NumbersColumn.prototype.getRawNumbers = function (row) {\r\n        return this.getRawValue(row);\r\n    };\r\n    NumbersColumn.prototype.getBoxPlotData = function (row) {\r\n        var data = this.getRawValue(row);\r\n        if (data == null) {\r\n            return null;\r\n        }\r\n        var b = boxplotBuilder();\r\n        for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\r\n            var d = data_1[_i];\r\n            b.push(isMissingValue(d) ? NaN : this.mapping.apply(d));\r\n        }\r\n        return b.build();\r\n    };\r\n    NumbersColumn.prototype.getRange = function () {\r\n        return this.mapping.getRange(this.numberFormat);\r\n    };\r\n    NumbersColumn.prototype.getRawBoxPlotData = function (row) {\r\n        var data = this.getRawValue(row);\r\n        if (data == null) {\r\n            return null;\r\n        }\r\n        var b = boxplotBuilder();\r\n        for (var _i = 0, data_2 = data; _i < data_2.length; _i++) {\r\n            var d = data_2[_i];\r\n            b.push(isMissingValue(d) ? NaN : d);\r\n        }\r\n        return b.build();\r\n    };\r\n    NumbersColumn.prototype.getNumbers = function (row) {\r\n        return this.getValues(row);\r\n    };\r\n    NumbersColumn.prototype.getNumber = function (row) {\r\n        return getBoxPlotNumber(this, row, 'normalized');\r\n    };\r\n    NumbersColumn.prototype.getRawNumber = function (row) {\r\n        return getBoxPlotNumber(this, row, 'raw');\r\n    };\r\n    NumbersColumn.prototype.getValue = function (row) {\r\n        var v = this.getValues(row);\r\n        return v.every(isNaN) ? null : v;\r\n    };\r\n    NumbersColumn.prototype.getValues = function (row) {\r\n        var _this = this;\r\n        return this.getRawValue(row).map(function (d) { return isNaN(d) ? NaN : _this.mapping.apply(d); });\r\n    };\r\n    NumbersColumn.prototype.iterNumber = function (row) {\r\n        var v = this.getNumbers(row);\r\n        if (v.every(isNaN)) {\r\n            // missing row\r\n            return [NaN];\r\n        }\r\n        return v;\r\n    };\r\n    NumbersColumn.prototype.iterRawNumber = function (row) {\r\n        var v = this.getRawNumbers(row);\r\n        if (v.every(isNaN)) {\r\n            // missing row\r\n            return [NaN];\r\n        }\r\n        return v;\r\n    };\r\n    NumbersColumn.prototype.getRawValue = function (row) {\r\n        var r = _super.prototype.getRaw.call(this, row);\r\n        return r == null ? [] : r.map(function (d) { return isMissingValue(d) ? NaN : +d; });\r\n    };\r\n    NumbersColumn.prototype.getExportValue = function (row, format) {\r\n        return format === 'json' ? this.getRawValue(row) : _super.prototype.getExportValue.call(this, row, format);\r\n    };\r\n    NumbersColumn.prototype.getLabels = function (row) {\r\n        return this.getRawValue(row).map(this.numberFormat);\r\n    };\r\n    NumbersColumn.prototype.getSortMethod = function () {\r\n        return this.sort;\r\n    };\r\n    NumbersColumn.prototype.setSortMethod = function (sort) {\r\n        if (this.sort === sort) {\r\n            return;\r\n        }\r\n        this.fire([NumbersColumn_1.EVENT_SORTMETHOD_CHANGED, NumberColumn.EVENT_DIRTY_HEADER, NumberColumn.EVENT_DIRTY_VALUES, NumbersColumn_1.EVENT_DIRTY_CACHES, NumberColumn.EVENT_DIRTY], this.sort, this.sort = sort);\r\n        // sort by me if not already sorted by me\r\n        if (!this.isSortedByMe().asc) {\r\n            this.sortByMe();\r\n        }\r\n    };\r\n    NumbersColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        r.sortMethod = this.getSortMethod();\r\n        r.filter = !isDummyNumberFilter(this.currentFilter) ? this.currentFilter : null;\r\n        r.map = this.mapping.toJSON();\r\n        r.colorMapping = this.colorMapping.toJSON();\r\n        return r;\r\n    };\r\n    NumbersColumn.prototype.restore = function (dump, factory) {\r\n        _super.prototype.restore.call(this, dump, factory);\r\n        if (dump.sortMethod) {\r\n            this.sort = dump.sortMethod;\r\n        }\r\n        if (dump.filter) {\r\n            this.currentFilter = restoreNumberFilter(dump.filter);\r\n        }\r\n        if (dump.map || dump.domain) {\r\n            this.mapping = restoreMapping(dump, factory);\r\n        }\r\n        if (dump.colorMapping) {\r\n            this.colorMapping = factory.colorMappingFunction(dump.colorMapping);\r\n        }\r\n    };\r\n    NumbersColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([NumbersColumn_1.EVENT_COLOR_MAPPING_CHANGED, NumbersColumn_1.EVENT_MAPPING_CHANGED, NumbersColumn_1.EVENT_SORTMETHOD_CHANGED, NumbersColumn_1.EVENT_FILTER_CHANGED]);\r\n    };\r\n    NumbersColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    NumbersColumn.prototype.getOriginalMapping = function () {\r\n        return this.original.clone();\r\n    };\r\n    NumbersColumn.prototype.getMapping = function () {\r\n        return this.mapping.clone();\r\n    };\r\n    NumbersColumn.prototype.setMapping = function (mapping) {\r\n        if (this.mapping.eq(mapping)) {\r\n            return;\r\n        }\r\n        this.fire([NumbersColumn_1.EVENT_MAPPING_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], this.mapping.clone(), this.mapping = mapping);\r\n    };\r\n    NumbersColumn.prototype.getColor = function (row) {\r\n        return NumberColumn.prototype.getColor.call(this, row);\r\n    };\r\n    NumbersColumn.prototype.getColorMapping = function () {\r\n        return this.colorMapping.clone();\r\n    };\r\n    NumbersColumn.prototype.setColorMapping = function (mapping) {\r\n        if (this.colorMapping.eq(mapping)) {\r\n            return;\r\n        }\r\n        this.fire([NumbersColumn_1.EVENT_COLOR_MAPPING_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], this.colorMapping.clone(), this.colorMapping = mapping);\r\n    };\r\n    NumbersColumn.prototype.isFiltered = function () {\r\n        return NumberColumn.prototype.isFiltered.call(this);\r\n    };\r\n    NumbersColumn.prototype.getFilter = function () {\r\n        return NumberColumn.prototype.getFilter.call(this);\r\n    };\r\n    NumbersColumn.prototype.setFilter = function (value) {\r\n        NumberColumn.prototype.setFilter.call(this, value);\r\n    };\r\n    NumbersColumn.prototype.filter = function (row) {\r\n        return NumberColumn.prototype.filter.call(this, row);\r\n    };\r\n    NumbersColumn.prototype.clearFilter = function () {\r\n        return NumberColumn.prototype.clearFilter.call(this);\r\n    };\r\n    var NumbersColumn_1;\r\n    NumbersColumn.EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\r\n    NumbersColumn.EVENT_COLOR_MAPPING_CHANGED = NumberColumn.EVENT_COLOR_MAPPING_CHANGED;\r\n    NumbersColumn.EVENT_SORTMETHOD_CHANGED = NumberColumn.EVENT_SORTMETHOD_CHANGED;\r\n    NumbersColumn.EVENT_FILTER_CHANGED = NumberColumn.EVENT_FILTER_CHANGED;\r\n    NumbersColumn.CENTER = 0;\r\n    NumbersColumn = NumbersColumn_1 = tslib_1.__decorate([\r\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'filterNumber', 'colorMapped', 'editMapping'),\r\n        dialogAddons('sort', 'sortNumbers'),\r\n        SortByDefault('descending')\r\n    ], NumbersColumn);\r\n    return NumbersColumn;\r\n}(ArrayColumn));\r\nexport default NumbersColumn;\r\n//# sourceMappingURL=NumbersColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { suffix } from '../internal';\r\nimport { toolbar, SortByDefault, dialogAddons } from './annotations';\r\nimport BoxPlotColumn from './BoxPlotColumn';\r\nimport CompositeColumn from './CompositeColumn';\r\nimport { DEFAULT_COLOR } from './interfaces';\r\nimport { ESortMethod, isBoxPlotColumn, isMapAbleColumn } from './INumberColumn';\r\nimport { ScaleMappingFunction } from './MappingFunction';\r\nimport NumbersColumn from './NumbersColumn';\r\nimport { DEFAULT_COLOR_FUNCTION } from './ColorMappingFunction';\r\nimport { DEFAULT_FORMATTER, noNumberFilter } from './internalNumber';\r\nimport { integrateDefaults } from './internal';\r\n/**\r\n *  factory for creating a description creating a max column\r\n * @param label\r\n * @returns {{type: string, label: string}}\r\n */\r\nexport function createImpositionBoxPlotDesc(label) {\r\n    if (label === void 0) { label = 'Imposition'; }\r\n    return { type: 'impositions', label: label };\r\n}\r\n/**\r\n * implementation of a combine column, standard operations how to select\r\n */\r\nvar ImpositionBoxPlotColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ImpositionBoxPlotColumn, _super);\r\n    function ImpositionBoxPlotColumn(id, desc) {\r\n        return _super.call(this, id, integrateDefaults(desc, {\r\n            renderer: 'boxplot',\r\n            groupRenderer: 'boxplot',\r\n            summaryRenderer: 'boxplot'\r\n        })) || this;\r\n    }\r\n    ImpositionBoxPlotColumn_1 = ImpositionBoxPlotColumn;\r\n    Object.defineProperty(ImpositionBoxPlotColumn.prototype, \"label\", {\r\n        get: function () {\r\n            var l = _super.prototype.getMetaData.call(this).label;\r\n            var c = this._children;\r\n            if (l !== 'Imposition' || c.length === 0) {\r\n                return l;\r\n            }\r\n            if (c.length === 1) {\r\n                return c[0].label;\r\n            }\r\n            var w = this.wrapper;\r\n            var rest = this.rest;\r\n            return (w ? w.label : '?') + \" (\" + rest.map(function (c) { return c.label; }).join(', ') + \")\";\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ImpositionBoxPlotColumn.prototype, \"wrapper\", {\r\n        get: function () {\r\n            return this._children.find(isBoxPlotColumn) || null;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ImpositionBoxPlotColumn.prototype, \"rest\", {\r\n        get: function () {\r\n            var w = this.wrapper;\r\n            return this._children.filter(function (d) { return d !== w; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ImpositionBoxPlotColumn.prototype.getLabel = function (row) {\r\n        var c = this._children;\r\n        if (c.length === 0) {\r\n            return '';\r\n        }\r\n        if (c.length === 1) {\r\n            return c[0].getLabel(row);\r\n        }\r\n        var w = this.wrapper;\r\n        var rest = this.rest;\r\n        return (w ? w.getLabel(row) : '?') + \" (\" + rest.map(function (c) { return c.label + \" = \" + c.getLabel(row); }) + \")\";\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.getColor = function (row) {\r\n        var c = this._children;\r\n        switch (c.length) {\r\n            case 0:\r\n                return DEFAULT_COLOR;\r\n            case 1:\r\n                return c[0].getColor(row);\r\n            default:\r\n                return this.rest[0].getColor(row);\r\n        }\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([ImpositionBoxPlotColumn_1.EVENT_MAPPING_CHANGED, ImpositionBoxPlotColumn_1.EVENT_COLOR_MAPPING_CHANGED]);\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.getNumberFormat = function () {\r\n        var w = this.wrapper;\r\n        return w ? w.getNumberFormat() : DEFAULT_FORMATTER;\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.getValue = function (row) {\r\n        var w = this.wrapper;\r\n        return w ? w.getValue(row) : null;\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.getNumber = function (row) {\r\n        var w = this.wrapper;\r\n        return w ? w.getNumber(row) : NaN;\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.getRawNumber = function (row) {\r\n        var w = this.wrapper;\r\n        return w ? w.getRawNumber(row) : NaN;\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.iterNumber = function (row) {\r\n        return [this.getNumber(row)];\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.iterRawNumber = function (row) {\r\n        return [this.getRawNumber(row)];\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.getExportValue = function (row, format) {\r\n        if (format === 'json') {\r\n            var value = this.getRawNumber(row);\r\n            if (isNaN(value)) {\r\n                return null;\r\n            }\r\n            return {\r\n                label: this.getLabel(row),\r\n                color: this.getColor(row),\r\n                value: value\r\n            };\r\n        }\r\n        return _super.prototype.getExportValue.call(this, row, format);\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.getBoxPlotData = function (row) {\r\n        var w = this.wrapper;\r\n        return w ? w.getBoxPlotData(row) : null;\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.getRawBoxPlotData = function (row) {\r\n        var w = this.wrapper;\r\n        return w ? w.getRawBoxPlotData(row) : null;\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.getMapping = function () {\r\n        var w = this.wrapper;\r\n        return w ? w.getMapping() : new ScaleMappingFunction();\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.getOriginalMapping = function () {\r\n        var w = this.wrapper;\r\n        return w ? w.getOriginalMapping() : new ScaleMappingFunction();\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.getSortMethod = function () {\r\n        var w = this.wrapper;\r\n        return w ? w.getSortMethod() : ESortMethod.min;\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.setSortMethod = function (value) {\r\n        var w = this.wrapper;\r\n        return w ? w.setSortMethod(value) : undefined;\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.setMapping = function (mapping) {\r\n        var w = this.wrapper;\r\n        return w ? w.setMapping(mapping) : undefined;\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.getColorMapping = function () {\r\n        var w = this.wrapper;\r\n        return w ? w.getColorMapping() : DEFAULT_COLOR_FUNCTION;\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.setColorMapping = function (mapping) {\r\n        var w = this.wrapper;\r\n        return w ? w.setColorMapping(mapping) : undefined;\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.getFilter = function () {\r\n        var w = this.wrapper;\r\n        return w ? w.getFilter() : noNumberFilter();\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.setFilter = function (value) {\r\n        var w = this.wrapper;\r\n        return w ? w.setFilter(value) : undefined;\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.getRange = function () {\r\n        var w = this.wrapper;\r\n        return w ? w.getRange() : ['0', '1'];\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.toCompareValue = function (row) {\r\n        return BoxPlotColumn.prototype.toCompareValue.call(this, row);\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.toCompareValueType = function () {\r\n        return BoxPlotColumn.prototype.toCompareValueType.call(this);\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.group = function (row) {\r\n        return BoxPlotColumn.prototype.group.call(this, row);\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.toCompareGroupValue = function (rows, group) {\r\n        return BoxPlotColumn.prototype.toCompareGroupValue.call(this, rows, group);\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.toCompareGroupValueType = function () {\r\n        return BoxPlotColumn.prototype.toCompareGroupValueType.call(this);\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.insert = function (col, index) {\r\n        if (this._children.length === 1 && !this.wrapper && !isBoxPlotColumn(col)) {\r\n            // at least one has to be a number column\r\n            return null;\r\n        }\r\n        if (this._children.length >= 2) {\r\n            // limit to two\r\n            return null;\r\n        }\r\n        return _super.prototype.insert.call(this, col, index);\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.insertImpl = function (col, index) {\r\n        if (isBoxPlotColumn(col)) {\r\n            this.forward.apply(this, [col].concat(suffix('.impose', BoxPlotColumn.EVENT_MAPPING_CHANGED, BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED)));\r\n        }\r\n        else if (isMapAbleColumn(col)) {\r\n            this.forward.apply(this, [col].concat(suffix('.impose', BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED)));\r\n        }\r\n        return _super.prototype.insertImpl.call(this, col, index);\r\n    };\r\n    ImpositionBoxPlotColumn.prototype.removeImpl = function (child, index) {\r\n        if (isBoxPlotColumn(child)) {\r\n            this.unforward.apply(this, [child].concat(suffix('.impose', BoxPlotColumn.EVENT_MAPPING_CHANGED, BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED)));\r\n        }\r\n        else if (isMapAbleColumn(child)) {\r\n            this.unforward.apply(this, [child].concat(suffix('.impose', BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED)));\r\n        }\r\n        return _super.prototype.removeImpl.call(this, child, index);\r\n    };\r\n    var ImpositionBoxPlotColumn_1;\r\n    ImpositionBoxPlotColumn.EVENT_MAPPING_CHANGED = NumbersColumn.EVENT_MAPPING_CHANGED;\r\n    ImpositionBoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED = NumbersColumn.EVENT_COLOR_MAPPING_CHANGED;\r\n    ImpositionBoxPlotColumn = ImpositionBoxPlotColumn_1 = tslib_1.__decorate([\r\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'filterNumber', 'colorMapped', 'editMapping'),\r\n        dialogAddons('sort', 'sortBoxPlot'),\r\n        SortByDefault('descending')\r\n    ], ImpositionBoxPlotColumn);\r\n    return ImpositionBoxPlotColumn;\r\n}(CompositeColumn));\r\nexport default ImpositionBoxPlotColumn;\r\n//# sourceMappingURL=ImpositionBoxPlotColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { suffix } from '../internal';\r\nimport { toolbar, dialogAddons, SortByDefault } from './annotations';\r\nimport CompositeColumn from './CompositeColumn';\r\nimport { DEFAULT_COLOR } from './interfaces';\r\nimport { EAdvancedSortMethod, isNumbersColumn, isMapAbleColumn } from './INumberColumn';\r\nimport { ScaleMappingFunction } from './MappingFunction';\r\nimport NumbersColumn from './NumbersColumn';\r\nimport { DEFAULT_COLOR_FUNCTION } from './ColorMappingFunction';\r\nimport { DEFAULT_FORMATTER, noNumberFilter } from './internalNumber';\r\nimport { integrateDefaults } from './internal';\r\n/**\r\n *  factory for creating a description creating a max column\r\n * @param label\r\n * @returns {{type: string, label: string}}\r\n */\r\nexport function createImpositionsDesc(label) {\r\n    if (label === void 0) { label = 'Imposition'; }\r\n    return { type: 'impositions', label: label };\r\n}\r\n/**\r\n * implementation of a combine column, standard operations how to select\r\n */\r\nvar ImpositionCompositesColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ImpositionCompositesColumn, _super);\r\n    function ImpositionCompositesColumn(id, desc) {\r\n        return _super.call(this, id, integrateDefaults(desc, {\r\n            renderer: 'numbers',\r\n            groupRenderer: 'numbers',\r\n            summaryRenderer: 'histogram'\r\n        })) || this;\r\n    }\r\n    ImpositionCompositesColumn_1 = ImpositionCompositesColumn;\r\n    Object.defineProperty(ImpositionCompositesColumn.prototype, \"label\", {\r\n        get: function () {\r\n            var l = _super.prototype.getMetaData.call(this).label;\r\n            var c = this._children;\r\n            if (l !== 'Imposition' || c.length === 0) {\r\n                return l;\r\n            }\r\n            if (c.length === 1) {\r\n                return c[0].label;\r\n            }\r\n            var w = this.wrapper;\r\n            var rest = this.rest;\r\n            return (w ? w.label : '?') + \" (\" + rest.map(function (c) { return c.label; }).join(', ') + \")\";\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ImpositionCompositesColumn.prototype, \"wrapper\", {\r\n        get: function () {\r\n            return this._children.find(isNumbersColumn) || null;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ImpositionCompositesColumn.prototype, \"rest\", {\r\n        get: function () {\r\n            var w = this.wrapper;\r\n            return this._children.filter(function (d) { return d !== w; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ImpositionCompositesColumn.prototype.getLabel = function (row) {\r\n        var c = this._children;\r\n        if (c.length === 0) {\r\n            return '';\r\n        }\r\n        if (c.length === 1) {\r\n            return c[0].getLabel(row);\r\n        }\r\n        var w = this.wrapper;\r\n        var rest = this.rest;\r\n        return (w ? w.getLabel(row) : '?') + \" (\" + rest.map(function (c) { return c.label + \" = \" + c.getLabel(row); }) + \")\";\r\n    };\r\n    ImpositionCompositesColumn.prototype.getColor = function (row) {\r\n        var c = this._children;\r\n        switch (c.length) {\r\n            case 0:\r\n                return DEFAULT_COLOR;\r\n            case 1:\r\n                return c[0].getColor(row);\r\n            default:\r\n                return this.rest[0].getColor(row);\r\n        }\r\n    };\r\n    ImpositionCompositesColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([ImpositionCompositesColumn_1.EVENT_MAPPING_CHANGED, ImpositionCompositesColumn_1.EVENT_COLOR_MAPPING_CHANGED]);\r\n    };\r\n    ImpositionCompositesColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    Object.defineProperty(ImpositionCompositesColumn.prototype, \"labels\", {\r\n        get: function () {\r\n            var w = this.wrapper;\r\n            return w ? w.labels : [];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ImpositionCompositesColumn.prototype, \"dataLength\", {\r\n        get: function () {\r\n            var w = this.wrapper;\r\n            return w ? w.dataLength : null;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ImpositionCompositesColumn.prototype.getNumberFormat = function () {\r\n        var w = this.wrapper;\r\n        return w ? w.getNumberFormat() : DEFAULT_FORMATTER;\r\n    };\r\n    ImpositionCompositesColumn.prototype.getValue = function (row) {\r\n        var w = this.wrapper;\r\n        return w ? w.getValue(row) : [];\r\n    };\r\n    ImpositionCompositesColumn.prototype.getNumber = function (row) {\r\n        var w = this.wrapper;\r\n        return w ? w.getNumber(row) : NaN;\r\n    };\r\n    ImpositionCompositesColumn.prototype.getRawNumber = function (row) {\r\n        var w = this.wrapper;\r\n        return w ? w.getRawNumber(row) : NaN;\r\n    };\r\n    ImpositionCompositesColumn.prototype.getExportValue = function (row, format) {\r\n        if (format === 'json') {\r\n            var value = this.getRawNumber(row);\r\n            if (isNaN(value)) {\r\n                return null;\r\n            }\r\n            return {\r\n                label: this.getLabels(row),\r\n                color: this.getColor(row)\r\n            };\r\n        }\r\n        return _super.prototype.getExportValue.call(this, row, format);\r\n    };\r\n    ImpositionCompositesColumn.prototype.getNumbers = function (row) {\r\n        var w = this.wrapper;\r\n        return w ? w.getNumbers(row) : [];\r\n    };\r\n    ImpositionCompositesColumn.prototype.getRawNumbers = function (row) {\r\n        var w = this.wrapper;\r\n        return w ? w.getRawNumbers(row) : [];\r\n    };\r\n    ImpositionCompositesColumn.prototype.iterNumber = function (row) {\r\n        return this.getNumbers(row);\r\n    };\r\n    ImpositionCompositesColumn.prototype.iterRawNumber = function (row) {\r\n        return this.getRawNumbers(row);\r\n    };\r\n    ImpositionCompositesColumn.prototype.getBoxPlotData = function (row) {\r\n        var w = this.wrapper;\r\n        return w ? w.getBoxPlotData(row) : null;\r\n    };\r\n    ImpositionCompositesColumn.prototype.getRawBoxPlotData = function (row) {\r\n        var w = this.wrapper;\r\n        return w ? w.getRawBoxPlotData(row) : null;\r\n    };\r\n    ImpositionCompositesColumn.prototype.getMapping = function () {\r\n        var w = this.wrapper;\r\n        return w ? w.getMapping() : new ScaleMappingFunction();\r\n    };\r\n    ImpositionCompositesColumn.prototype.getOriginalMapping = function () {\r\n        var w = this.wrapper;\r\n        return w ? w.getOriginalMapping() : new ScaleMappingFunction();\r\n    };\r\n    ImpositionCompositesColumn.prototype.getSortMethod = function () {\r\n        var w = this.wrapper;\r\n        return w ? w.getSortMethod() : EAdvancedSortMethod.min;\r\n    };\r\n    ImpositionCompositesColumn.prototype.setSortMethod = function (value) {\r\n        var w = this.wrapper;\r\n        return w ? w.setSortMethod(value) : undefined;\r\n    };\r\n    ImpositionCompositesColumn.prototype.setMapping = function (mapping) {\r\n        var w = this.wrapper;\r\n        return w ? w.setMapping(mapping) : undefined;\r\n    };\r\n    ImpositionCompositesColumn.prototype.getColorMapping = function () {\r\n        var w = this.wrapper;\r\n        return w ? w.getColorMapping() : DEFAULT_COLOR_FUNCTION;\r\n    };\r\n    ImpositionCompositesColumn.prototype.setColorMapping = function (mapping) {\r\n        var w = this.wrapper;\r\n        return w ? w.setColorMapping(mapping) : undefined;\r\n    };\r\n    ImpositionCompositesColumn.prototype.getFilter = function () {\r\n        var w = this.wrapper;\r\n        return w ? w.getFilter() : noNumberFilter();\r\n    };\r\n    ImpositionCompositesColumn.prototype.setFilter = function (value) {\r\n        var w = this.wrapper;\r\n        return w ? w.setFilter(value) : undefined;\r\n    };\r\n    ImpositionCompositesColumn.prototype.getRange = function () {\r\n        var w = this.wrapper;\r\n        return w ? w.getRange() : ['0', '1'];\r\n    };\r\n    ImpositionCompositesColumn.prototype.getMap = function (row) {\r\n        var w = this.wrapper;\r\n        return w ? w.getMap(row) : [];\r\n    };\r\n    ImpositionCompositesColumn.prototype.getMapLabel = function (row) {\r\n        var w = this.wrapper;\r\n        return w ? w.getMapLabel(row) : [];\r\n    };\r\n    ImpositionCompositesColumn.prototype.getLabels = function (row) {\r\n        var w = this.wrapper;\r\n        return w ? w.getLabels(row) : [];\r\n    };\r\n    ImpositionCompositesColumn.prototype.getValues = function (row) {\r\n        var w = this.wrapper;\r\n        return w ? w.getValues(row) : [];\r\n    };\r\n    ImpositionCompositesColumn.prototype.toCompareValue = function (row) {\r\n        return NumbersColumn.prototype.toCompareValue.call(this, row);\r\n    };\r\n    ImpositionCompositesColumn.prototype.toCompareValueType = function () {\r\n        return NumbersColumn.prototype.toCompareValueType.call(this);\r\n    };\r\n    ImpositionCompositesColumn.prototype.toCompareGroupValue = function (rows, group) {\r\n        return NumbersColumn.prototype.toCompareGroupValue.call(this, rows, group);\r\n    };\r\n    ImpositionCompositesColumn.prototype.toCompareGroupValueType = function () {\r\n        return NumbersColumn.prototype.toCompareGroupValueType.call(this);\r\n    };\r\n    ImpositionCompositesColumn.prototype.insert = function (col, index) {\r\n        if (this._children.length === 1 && !this.wrapper && !isNumbersColumn(col)) {\r\n            // at least one has to be a number column\r\n            return null;\r\n        }\r\n        if (this._children.length >= 2) {\r\n            // limit to two\r\n            return null;\r\n        }\r\n        return _super.prototype.insert.call(this, col, index);\r\n    };\r\n    ImpositionCompositesColumn.prototype.insertImpl = function (col, index) {\r\n        if (isNumbersColumn(col)) {\r\n            this.forward.apply(this, [col].concat(suffix('.impose', NumbersColumn.EVENT_MAPPING_CHANGED)));\r\n        }\r\n        if (isMapAbleColumn(col)) {\r\n            this.forward.apply(this, [col].concat(suffix('.impose', NumbersColumn.EVENT_COLOR_MAPPING_CHANGED)));\r\n        }\r\n        return _super.prototype.insertImpl.call(this, col, index);\r\n    };\r\n    ImpositionCompositesColumn.prototype.removeImpl = function (child, index) {\r\n        if (isNumbersColumn(child)) {\r\n            this.unforward.apply(this, [child].concat(suffix('.impose', NumbersColumn.EVENT_MAPPING_CHANGED)));\r\n        }\r\n        if (isMapAbleColumn(child)) {\r\n            this.unforward.apply(this, [child].concat(suffix('.impose', NumbersColumn.EVENT_COLOR_MAPPING_CHANGED)));\r\n        }\r\n        return _super.prototype.removeImpl.call(this, child, index);\r\n    };\r\n    var ImpositionCompositesColumn_1;\r\n    ImpositionCompositesColumn.EVENT_MAPPING_CHANGED = NumbersColumn.EVENT_MAPPING_CHANGED;\r\n    ImpositionCompositesColumn.EVENT_COLOR_MAPPING_CHANGED = NumbersColumn.EVENT_COLOR_MAPPING_CHANGED;\r\n    ImpositionCompositesColumn = ImpositionCompositesColumn_1 = tslib_1.__decorate([\r\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'filterNumber', 'colorMapped', 'editMapping'),\r\n        dialogAddons('sort', 'sortNumbers'),\r\n        SortByDefault('descending')\r\n    ], ImpositionCompositesColumn);\r\n    return ImpositionCompositesColumn;\r\n}(CompositeColumn));\r\nexport default ImpositionCompositesColumn;\r\n//# sourceMappingURL=ImpositionCompositesColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { format } from 'd3-format';\r\nimport CompositeColumn from './CompositeColumn';\r\nimport { isMissingValue } from './missing';\r\nimport NumberColumn from './NumberColumn';\r\nimport { SortByDefault, toolbar } from './annotations';\r\n/**\r\n * implementation of a combine column, standard operations how to select\r\n */\r\nvar CompositeNumberColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(CompositeNumberColumn, _super);\r\n    function CompositeNumberColumn(id, desc) {\r\n        var _this = _super.call(this, id, desc) || this;\r\n        _this.numberFormat = format('.3n');\r\n        if (desc.numberFormat) {\r\n            _this.numberFormat = format(desc.numberFormat);\r\n        }\r\n        return _this;\r\n    }\r\n    CompositeNumberColumn.prototype.getNumberFormat = function () {\r\n        return this.numberFormat;\r\n    };\r\n    CompositeNumberColumn.prototype.getLabel = function (row) {\r\n        if (!this.isLoaded()) {\r\n            return '';\r\n        }\r\n        var v = this.getValue(row);\r\n        //keep non number if it is not a number else convert using formatter\r\n        return String(typeof v === 'number' && !isNaN(v) && isFinite(v) ? this.numberFormat(v) : v);\r\n    };\r\n    CompositeNumberColumn.prototype.getValue = function (row) {\r\n        if (!this.isLoaded()) {\r\n            return null;\r\n        }\r\n        //weighted sum\r\n        var v = this.compute(row);\r\n        if (isMissingValue(v)) {\r\n            return null;\r\n        }\r\n        return v;\r\n    };\r\n    CompositeNumberColumn.prototype.compute = function (_row) {\r\n        return NaN;\r\n    };\r\n    CompositeNumberColumn.prototype.getNumber = function (row) {\r\n        var r = this.getValue(row);\r\n        return r == null ? NaN : r;\r\n    };\r\n    CompositeNumberColumn.prototype.getRawNumber = function (row) {\r\n        return this.getNumber(row);\r\n    };\r\n    CompositeNumberColumn.prototype.iterNumber = function (row) {\r\n        return [this.getNumber(row)];\r\n    };\r\n    CompositeNumberColumn.prototype.iterRawNumber = function (row) {\r\n        return [this.getRawNumber(row)];\r\n    };\r\n    CompositeNumberColumn.prototype.getExportValue = function (row, format) {\r\n        if (format === 'json') {\r\n            return {\r\n                value: this.getRawNumber(row),\r\n                children: this.children.map(function (d) { return d.getExportValue(row, format); })\r\n            };\r\n        }\r\n        return _super.prototype.getExportValue.call(this, row, format);\r\n    };\r\n    CompositeNumberColumn.prototype.toCompareValue = function (row) {\r\n        return NumberColumn.prototype.toCompareValue.call(this, row);\r\n    };\r\n    CompositeNumberColumn.prototype.toCompareValueType = function () {\r\n        return NumberColumn.prototype.toCompareValueType.call(this);\r\n    };\r\n    CompositeNumberColumn.prototype.toCompareGroupValue = function (rows, group) {\r\n        return NumberColumn.prototype.toCompareGroupValue.call(this, rows, group);\r\n    };\r\n    CompositeNumberColumn.prototype.toCompareGroupValueType = function () {\r\n        return NumberColumn.prototype.toCompareGroupValueType.call(this);\r\n    };\r\n    CompositeNumberColumn.prototype.getRenderer = function () {\r\n        return NumberColumn.prototype.getRenderer.call(this);\r\n    };\r\n    CompositeNumberColumn = tslib_1.__decorate([\r\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'group', 'groupBy'),\r\n        SortByDefault('descending')\r\n    ], CompositeNumberColumn);\r\n    return CompositeNumberColumn;\r\n}(CompositeColumn));\r\nexport default CompositeNumberColumn;\r\n//# sourceMappingURL=CompositeNumberColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { median, quantile } from '../internal';\r\nimport { toolbar } from './annotations';\r\nimport Column from './Column';\r\nimport CompositeNumberColumn from './CompositeNumberColumn';\r\nimport { DEFAULT_COLOR } from './interfaces';\r\nimport { EAdvancedSortMethod } from './INumberColumn';\r\nimport { integrateDefaults } from './internal';\r\n/**\r\n *  factory for creating a description creating a max column\r\n * @param label\r\n * @returns {{type: string, label: string}}\r\n */\r\nexport function createReduceDesc(label) {\r\n    if (label === void 0) { label = 'Reduce'; }\r\n    return { type: 'reduce', label: label };\r\n}\r\n/**\r\n * combines multiple columns by using the maximal value\r\n */\r\nvar ReduceColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ReduceColumn, _super);\r\n    function ReduceColumn(id, desc) {\r\n        var _this = _super.call(this, id, integrateDefaults(desc, {\r\n            renderer: 'interleaving',\r\n            groupRenderer: 'interleaving',\r\n            summaryRenderer: 'interleaving'\r\n        })) || this;\r\n        _this.reduce = desc.reduce || EAdvancedSortMethod.max;\r\n        return _this;\r\n    }\r\n    ReduceColumn_1 = ReduceColumn;\r\n    Object.defineProperty(ReduceColumn.prototype, \"label\", {\r\n        get: function () {\r\n            var l = _super.prototype.getMetaData.call(this).label;\r\n            if (l !== 'Reduce') {\r\n                return l;\r\n            }\r\n            return \"\" + this.reduce[0].toUpperCase() + this.reduce.slice(1) + \"(\" + this.children.map(function (d) { return d.label; }).join(', ') + \")\";\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ReduceColumn.prototype.getColor = function (row) {\r\n        //compute the index of the maximal one\r\n        var c = this._children;\r\n        if (c.length === 0 || this.reduce === EAdvancedSortMethod.q1 || this.reduce === EAdvancedSortMethod.q3 || this.reduce === EAdvancedSortMethod.mean) {\r\n            return DEFAULT_COLOR;\r\n        }\r\n        var v = this.compute(row);\r\n        var selected = c.find(function (c) { return c.getValue(row) === v; });\r\n        return selected ? selected.getColor(row) : DEFAULT_COLOR;\r\n    };\r\n    ReduceColumn.prototype.compute = function (row) {\r\n        var vs = this._children.map(function (d) { return d.getValue(row); }).filter(function (d) { return !isNaN(d); });\r\n        if (vs.length === 0) {\r\n            return NaN;\r\n        }\r\n        switch (this.reduce) {\r\n            case EAdvancedSortMethod.mean:\r\n                return vs.reduce(function (a, b) { return a + b; }, 0) / vs.length;\r\n            case EAdvancedSortMethod.max:\r\n                return vs.reduce(function (a, b) { return Math.max(a, b); }, Number.NEGATIVE_INFINITY);\r\n            case EAdvancedSortMethod.min:\r\n                return vs.reduce(function (a, b) { return Math.min(a, b); }, Number.POSITIVE_INFINITY);\r\n            case EAdvancedSortMethod.median:\r\n                return median(vs);\r\n            case EAdvancedSortMethod.q1:\r\n                return quantile(vs.sort(function (a, b) { return a - b; }), 0.25);\r\n            case EAdvancedSortMethod.q3:\r\n                return quantile(vs.sort(function (a, b) { return a - b; }), 0.75);\r\n        }\r\n    };\r\n    ReduceColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([ReduceColumn_1.EVENT_REDUCE_CHANGED]);\r\n    };\r\n    ReduceColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    ReduceColumn.prototype.getReduce = function () {\r\n        return this.reduce;\r\n    };\r\n    ReduceColumn.prototype.setReduce = function (reduce) {\r\n        if (this.reduce === reduce) {\r\n            return;\r\n        }\r\n        this.fire([ReduceColumn_1.EVENT_REDUCE_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], this.reduce, this.reduce = reduce);\r\n    };\r\n    ReduceColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        r.reduce = this.reduce;\r\n        return r;\r\n    };\r\n    ReduceColumn.prototype.restore = function (dump, factory) {\r\n        this.reduce = dump.reduce || this.reduce;\r\n        _super.prototype.restore.call(this, dump, factory);\r\n    };\r\n    Object.defineProperty(ReduceColumn.prototype, \"canJustAddNumbers\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ReduceColumn.prototype.getExportValue = function (row, format) {\r\n        if (format === 'json') {\r\n            return {\r\n                value: this.getRawNumber(row),\r\n                children: this.children.map(function (d) { return d.getExportValue(row, format); })\r\n            };\r\n        }\r\n        return _super.prototype.getExportValue.call(this, row, format);\r\n    };\r\n    var ReduceColumn_1;\r\n    ReduceColumn.EVENT_REDUCE_CHANGED = 'reduceChanged';\r\n    ReduceColumn = ReduceColumn_1 = tslib_1.__decorate([\r\n        toolbar('reduce')\r\n    ], ReduceColumn);\r\n    return ReduceColumn;\r\n}(CompositeNumberColumn));\r\nexport default ReduceColumn;\r\n//# sourceMappingURL=ReduceColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { round, similar } from '../internal';\r\nimport { toolbar } from './annotations';\r\nimport Column from './Column';\r\nimport CompositeNumberColumn from './CompositeNumberColumn';\r\nimport { integrateDefaults } from './internal';\r\n/**\r\n * factory for creating a description creating a stacked column\r\n * @param label\r\n * @returns {{type: string, label: string}}\r\n */\r\nexport function createStackDesc(label) {\r\n    if (label === void 0) { label = 'Weighted Sum'; }\r\n    return { type: 'stack', label: label };\r\n}\r\n/**\r\n * implementation of the stacked column\r\n */\r\nvar StackColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(StackColumn, _super);\r\n    function StackColumn(id, desc) {\r\n        var _this = _super.call(this, id, integrateDefaults(desc, {\r\n            renderer: 'stack',\r\n            groupRenderer: 'stack',\r\n            summaryRenderer: 'default'\r\n        })) || this;\r\n        /**\r\n         * whether this stack column is collapsed i.e. just looks like an ordinary number column\r\n         * @type {boolean}\r\n         * @private\r\n         */\r\n        _this.collapsed = false;\r\n        var that = _this;\r\n        _this.adaptChange = function (oldValue, newValue) {\r\n            that.adaptWidthChange(this.source, oldValue, newValue);\r\n        };\r\n        return _this;\r\n    }\r\n    StackColumn_1 = StackColumn;\r\n    Object.defineProperty(StackColumn.prototype, \"label\", {\r\n        get: function () {\r\n            var l = _super.prototype.getMetaData.call(this).label;\r\n            var c = this._children;\r\n            if (l !== 'Weighted Sum' || c.length === 0) {\r\n                return l;\r\n            }\r\n            var weights = this.getWeights();\r\n            return c.map(function (c, i) { return c.label + \" (\" + round(100 * weights[i], 1) + \"%)\"; }).join(' + ');\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    StackColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([StackColumn_1.EVENT_COLLAPSE_CHANGED, StackColumn_1.EVENT_WEIGHTS_CHANGED, StackColumn_1.EVENT_MULTI_LEVEL_CHANGED]);\r\n    };\r\n    StackColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    StackColumn.prototype.setCollapsed = function (value) {\r\n        if (this.collapsed === value) {\r\n            return;\r\n        }\r\n        this.fire([StackColumn_1.EVENT_COLLAPSE_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.collapsed, this.collapsed = value);\r\n    };\r\n    StackColumn.prototype.getCollapsed = function () {\r\n        return this.collapsed;\r\n    };\r\n    Object.defineProperty(StackColumn.prototype, \"canJustAddNumbers\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    StackColumn.prototype.flatten = function (r, offset, levelsToGo, padding) {\r\n        if (levelsToGo === void 0) { levelsToGo = 0; }\r\n        if (padding === void 0) { padding = 0; }\r\n        var self = null;\r\n        var children = levelsToGo <= Column.FLAT_ALL_COLUMNS ? this._children : this._children.filter(function (c) { return c.isVisible(); });\r\n        //no more levels or just this one\r\n        if (levelsToGo === 0 || levelsToGo <= Column.FLAT_ALL_COLUMNS) {\r\n            var w = this.getWidth();\r\n            if (!this.collapsed) {\r\n                w += (children.length - 1) * padding;\r\n            }\r\n            r.push(self = { col: this, offset: offset, width: w });\r\n            if (levelsToGo === 0) {\r\n                return w;\r\n            }\r\n        }\r\n        //push children\r\n        var acc = offset;\r\n        children.forEach(function (c) {\r\n            acc += c.flatten(r, acc, levelsToGo - 1, padding) + padding;\r\n        });\r\n        if (self) { //nesting my even increase my width\r\n            self.width = acc - offset - padding;\r\n        }\r\n        return acc - offset - padding;\r\n    };\r\n    StackColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        r.collapsed = this.collapsed;\r\n        return r;\r\n    };\r\n    StackColumn.prototype.restore = function (dump, factory) {\r\n        this.collapsed = dump.collapsed === true;\r\n        _super.prototype.restore.call(this, dump, factory);\r\n    };\r\n    /**\r\n     * inserts a column at a the given position\r\n     */\r\n    StackColumn.prototype.insert = function (col, index, weight) {\r\n        if (weight === void 0) { weight = NaN; }\r\n        if (!isNaN(weight)) {\r\n            col.setWidth((weight / (1 - weight) * this.getWidth()));\r\n        }\r\n        col.on(Column.EVENT_WIDTH_CHANGED + \".stack\", this.adaptChange);\r\n        //increase my width\r\n        _super.prototype.setWidth.call(this, this.length === 0 ? col.getWidth() : (this.getWidth() + col.getWidth()));\r\n        return _super.prototype.insert.call(this, col, index);\r\n    };\r\n    StackColumn.prototype.push = function (col, weight) {\r\n        if (weight === void 0) { weight = NaN; }\r\n        return this.insert(col, this.length, weight);\r\n    };\r\n    StackColumn.prototype.insertAfter = function (col, ref, weight) {\r\n        if (weight === void 0) { weight = NaN; }\r\n        var i = this.indexOf(ref);\r\n        if (i < 0) {\r\n            return null;\r\n        }\r\n        return this.insert(col, i + 1, weight);\r\n    };\r\n    /**\r\n     * adapts weights according to an own width change\r\n     * @param col\r\n     * @param oldValue\r\n     * @param newValue\r\n     */\r\n    StackColumn.prototype.adaptWidthChange = function (col, oldValue, newValue) {\r\n        if (similar(oldValue, newValue, 0.5)) {\r\n            return;\r\n        }\r\n        var bak = this.getWeights();\r\n        var full = this.getWidth(), change = (newValue - oldValue) / full;\r\n        var oldWeight = oldValue / full;\r\n        var factor = (1 - oldWeight - change) / (1 - oldWeight);\r\n        var widths = this._children.map(function (c) {\r\n            if (c === col) {\r\n                //c.weight += change;\r\n                return newValue;\r\n            }\r\n            var guess = c.getWidth() * factor;\r\n            var w = isNaN(guess) || guess < 1 ? 0 : guess;\r\n            c.setWidthImpl(w);\r\n            return w;\r\n        });\r\n        //adapt width if needed\r\n        _super.prototype.setWidth.call(this, widths.reduce(function (a, b) { return a + b; }, 0));\r\n        this.fire([StackColumn_1.EVENT_WEIGHTS_CHANGED, StackColumn_1.EVENT_MULTI_LEVEL_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], bak, this.getWeights());\r\n    };\r\n    StackColumn.prototype.getWeights = function () {\r\n        var w = this.getWidth();\r\n        return this._children.map(function (d) { return d.getWidth() / w; });\r\n    };\r\n    StackColumn.prototype.setWeights = function (weights) {\r\n        var bak = this.getWeights();\r\n        var delta = weights.length - this.length;\r\n        var s;\r\n        if (delta < 0) {\r\n            s = weights.reduce(function (p, a) { return p + a; }, 0);\r\n            if (s <= 1) {\r\n                for (var i = 0; i < -delta; ++i) {\r\n                    weights.push((1 - s) * (1 / -delta));\r\n                }\r\n            }\r\n            else if (s <= 100) {\r\n                for (var i = 0; i < -delta; ++i) {\r\n                    weights.push((100 - s) * (1 / -delta));\r\n                }\r\n            }\r\n        }\r\n        weights = weights.slice(0, this.length);\r\n        s = weights.reduce(function (p, a) { return p + a; }, 0) / this.getWidth();\r\n        weights = weights.map(function (d) { return d / s; });\r\n        this._children.forEach(function (c, i) {\r\n            c.setWidthImpl(weights[i]);\r\n        });\r\n        this.fire([StackColumn_1.EVENT_WEIGHTS_CHANGED, StackColumn_1.EVENT_MULTI_LEVEL_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], bak, weights);\r\n    };\r\n    StackColumn.prototype.removeImpl = function (child, index) {\r\n        child.on(Column.EVENT_WIDTH_CHANGED + \".stack\", null);\r\n        _super.prototype.setWidth.call(this, this.length === 0 ? 100 : this.getWidth() - child.getWidth());\r\n        return _super.prototype.removeImpl.call(this, child, index);\r\n    };\r\n    StackColumn.prototype.setWidth = function (value) {\r\n        var factor = value / this.getWidth();\r\n        this._children.forEach(function (child) {\r\n            //disable since we change it\r\n            child.setWidthImpl(child.getWidth() * factor);\r\n        });\r\n        _super.prototype.setWidth.call(this, value);\r\n    };\r\n    StackColumn.prototype.compute = function (row) {\r\n        var w = this.getWidth();\r\n        return this._children.reduce(function (acc, d) { return acc + d.getValue(row) * (d.getWidth() / w); }, 0);\r\n    };\r\n    StackColumn.prototype.getRenderer = function () {\r\n        if (this.getCollapsed() && this.isLoaded()) {\r\n            return StackColumn_1.COLLAPSED_RENDERER;\r\n        }\r\n        return _super.prototype.getRenderer.call(this);\r\n    };\r\n    StackColumn.prototype.getExportValue = function (row, format) {\r\n        if (format === 'json') {\r\n            return {\r\n                value: this.getRawNumber(row),\r\n                children: this.children.map(function (d) { return d.getExportValue(row, format); })\r\n            };\r\n        }\r\n        return _super.prototype.getExportValue.call(this, row, format);\r\n    };\r\n    var StackColumn_1;\r\n    StackColumn.EVENT_COLLAPSE_CHANGED = 'collapseChanged';\r\n    StackColumn.EVENT_WEIGHTS_CHANGED = 'weightsChanged';\r\n    StackColumn.EVENT_MULTI_LEVEL_CHANGED = 'nestedChildRatio';\r\n    StackColumn.COLLAPSED_RENDERER = 'number';\r\n    StackColumn = StackColumn_1 = tslib_1.__decorate([\r\n        toolbar('editWeights', 'compress', 'expand')\r\n    ], StackColumn);\r\n    return StackColumn;\r\n}(CompositeNumberColumn));\r\nexport default StackColumn;\r\n//# sourceMappingURL=StackColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport MultiLevelCompositeColumn from './MultiLevelCompositeColumn';\r\nimport { concat } from '../internal';\r\nimport { toolbar } from './annotations';\r\n/**\r\n * factory for creating a description creating a mean column\r\n * @param label\r\n * @returns {{type: string, label: string}}\r\n */\r\nexport function createNestedDesc(label) {\r\n    if (label === void 0) { label = 'Nested'; }\r\n    return { type: 'nested', label: label };\r\n}\r\n/**\r\n * a nested column is a composite column where the sorting order is determined by the nested ordering of the children\r\n * i.e., sort by the first child if equal sort by the second child,...\r\n */\r\nvar NestedColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(NestedColumn, _super);\r\n    function NestedColumn() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    NestedColumn.prototype.toCompareValue = function (row) {\r\n        return concat(this.children.map(function (d) { return d.toCompareValue(row); }));\r\n    };\r\n    NestedColumn.prototype.toCompareValueType = function () {\r\n        return concat(this.children.map(function (d) { return d.toCompareValueType(); }));\r\n    };\r\n    NestedColumn.prototype.getLabel = function (row) {\r\n        return this.children.map(function (d) { return d.getLabel(row); }).join(';');\r\n    };\r\n    NestedColumn.prototype.getValue = function (row) {\r\n        return this.children.map(function (d) { return d.getValue(row); }).join(';');\r\n    };\r\n    NestedColumn = tslib_1.__decorate([\r\n        toolbar('rename', 'clone', 'sort', 'sortBy')\r\n    ], NestedColumn);\r\n    return NestedColumn;\r\n}(MultiLevelCompositeColumn));\r\nexport default NestedColumn;\r\n//# sourceMappingURL=NestedColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { similar } from '../internal';\r\nimport { toolbar } from './annotations';\r\nimport Column from './Column';\r\nimport CompositeColumn from './CompositeColumn';\r\nimport StackColumn from './StackColumn';\r\nvar MultiLevelCompositeColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(MultiLevelCompositeColumn, _super);\r\n    function MultiLevelCompositeColumn(id, desc) {\r\n        var _this = _super.call(this, id, desc) || this;\r\n        /**\r\n         * whether this stack column is collapsed i.e. just looks like an ordinary number column\r\n         * @type {boolean}\r\n         * @private\r\n         */\r\n        _this.collapsed = false;\r\n        var that = _this;\r\n        _this.adaptChange = function (old, newValue) {\r\n            that.adaptWidthChange(old, newValue);\r\n        };\r\n        return _this;\r\n    }\r\n    MultiLevelCompositeColumn_1 = MultiLevelCompositeColumn;\r\n    MultiLevelCompositeColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([MultiLevelCompositeColumn_1.EVENT_COLLAPSE_CHANGED, MultiLevelCompositeColumn_1.EVENT_MULTI_LEVEL_CHANGED]);\r\n    };\r\n    MultiLevelCompositeColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    MultiLevelCompositeColumn.prototype.setCollapsed = function (value) {\r\n        if (this.collapsed === value) {\r\n            return;\r\n        }\r\n        this.fire([StackColumn.EVENT_COLLAPSE_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.collapsed, this.collapsed = value);\r\n    };\r\n    MultiLevelCompositeColumn.prototype.getCollapsed = function () {\r\n        return this.collapsed;\r\n    };\r\n    MultiLevelCompositeColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        r.collapsed = this.collapsed;\r\n        return r;\r\n    };\r\n    MultiLevelCompositeColumn.prototype.restore = function (dump, factory) {\r\n        this.collapsed = dump.collapsed === true;\r\n        _super.prototype.restore.call(this, dump, factory);\r\n    };\r\n    MultiLevelCompositeColumn.prototype.flatten = function (r, offset, levelsToGo, padding) {\r\n        if (levelsToGo === void 0) { levelsToGo = 0; }\r\n        if (padding === void 0) { padding = 0; }\r\n        return StackColumn.prototype.flatten.call(this, r, offset, levelsToGo, padding);\r\n    };\r\n    /**\r\n     * inserts a column at a the given position\r\n     * @param col\r\n     * @param index\r\n     */\r\n    MultiLevelCompositeColumn.prototype.insert = function (col, index) {\r\n        col.on(Column.EVENT_WIDTH_CHANGED + \".stack\", this.adaptChange);\r\n        //increase my width\r\n        _super.prototype.setWidth.call(this, this.length === 0 ? col.getWidth() : (this.getWidth() + col.getWidth()));\r\n        return _super.prototype.insert.call(this, col, index);\r\n    };\r\n    /**\r\n     * adapts weights according to an own width change\r\n     * @param oldValue\r\n     * @param newValue\r\n     */\r\n    MultiLevelCompositeColumn.prototype.adaptWidthChange = function (oldValue, newValue) {\r\n        if (similar(oldValue, newValue, 0.5)) {\r\n            return;\r\n        }\r\n        var act = this.getWidth();\r\n        var next = act + (newValue - oldValue);\r\n        this.fire([MultiLevelCompositeColumn_1.EVENT_MULTI_LEVEL_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], act, next);\r\n        _super.prototype.setWidth.call(this, next);\r\n    };\r\n    MultiLevelCompositeColumn.prototype.removeImpl = function (child, index) {\r\n        child.on(Column.EVENT_WIDTH_CHANGED + \".stack\", null);\r\n        _super.prototype.setWidth.call(this, this.length === 0 ? 100 : this.getWidth() - child.getWidth());\r\n        return _super.prototype.removeImpl.call(this, child, index);\r\n    };\r\n    MultiLevelCompositeColumn.prototype.setWidth = function (value) {\r\n        var act = this.getWidth();\r\n        var factor = value / act;\r\n        this._children.forEach(function (child) {\r\n            //disable since we change it\r\n            child.setWidthImpl(child.getWidth() * factor);\r\n        });\r\n        if (!similar(act, value, 0.5)) {\r\n            this.fire([MultiLevelCompositeColumn_1.EVENT_MULTI_LEVEL_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], act, value);\r\n        }\r\n        _super.prototype.setWidth.call(this, value);\r\n    };\r\n    MultiLevelCompositeColumn.prototype.getRenderer = function () {\r\n        if (this.getCollapsed()) {\r\n            return MultiLevelCompositeColumn_1.EVENT_COLLAPSE_CHANGED;\r\n        }\r\n        return _super.prototype.getRenderer.call(this);\r\n    };\r\n    MultiLevelCompositeColumn.prototype.getExportValue = function (row, format) {\r\n        if (format === 'json') {\r\n            return {\r\n                children: this.children.map(function (d) { return d.getExportValue(row, format); })\r\n            };\r\n        }\r\n        return _super.prototype.getExportValue.call(this, row, format);\r\n    };\r\n    var MultiLevelCompositeColumn_1;\r\n    MultiLevelCompositeColumn.EVENT_COLLAPSE_CHANGED = StackColumn.EVENT_COLLAPSE_CHANGED;\r\n    MultiLevelCompositeColumn.EVENT_MULTI_LEVEL_CHANGED = StackColumn.EVENT_MULTI_LEVEL_CHANGED;\r\n    MultiLevelCompositeColumn = MultiLevelCompositeColumn_1 = tslib_1.__decorate([\r\n        toolbar('compress', 'expand')\r\n    ], MultiLevelCompositeColumn);\r\n    return MultiLevelCompositeColumn;\r\n}(CompositeColumn));\r\nexport default MultiLevelCompositeColumn;\r\n//# sourceMappingURL=MultiLevelCompositeColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { toolbar, SortByDefault, dialogAddons } from './annotations';\r\nimport Column from './Column';\r\nimport { ECompareValueType } from './interfaces';\r\nimport { EAdvancedSortMethod } from './INumberColumn';\r\nimport MapColumn from './MapColumn';\r\nimport { restoreMapping } from './MappingFunction';\r\nimport { isMissingValue } from './missing';\r\nimport NumberColumn from './NumberColumn';\r\nimport { boxplotBuilder } from '../internal';\r\nimport { format } from 'd3-format';\r\nimport { DEFAULT_FORMATTER, noNumberFilter, toCompareBoxPlotValue, getBoxPlotNumber, isDummyNumberFilter, restoreNumberFilter } from './internalNumber';\r\nimport { integrateDefaults } from './internal';\r\nvar NumberMapColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(NumberMapColumn, _super);\r\n    function NumberMapColumn(id, desc, factory) {\r\n        var _this = _super.call(this, id, integrateDefaults(desc, {\r\n            renderer: 'mapbars'\r\n        })) || this;\r\n        _this.numberFormat = DEFAULT_FORMATTER;\r\n        /**\r\n         * currently active filter\r\n         * @type {{min: number, max: number}}\r\n         * @private\r\n         */\r\n        _this.currentFilter = noNumberFilter();\r\n        _this.mapping = restoreMapping(desc, factory);\r\n        _this.original = _this.mapping.clone();\r\n        _this.colorMapping = factory.colorMappingFunction(desc.colorMapping || desc.color);\r\n        _this.sort = desc.sort || EAdvancedSortMethod.median;\r\n        if (desc.numberFormat) {\r\n            _this.numberFormat = format(desc.numberFormat);\r\n        }\r\n        return _this;\r\n    }\r\n    NumberMapColumn_1 = NumberMapColumn;\r\n    NumberMapColumn.prototype.getNumberFormat = function () {\r\n        return this.numberFormat;\r\n    };\r\n    NumberMapColumn.prototype.toCompareValue = function (row) {\r\n        return toCompareBoxPlotValue(this, row);\r\n    };\r\n    NumberMapColumn.prototype.toCompareValueType = function () {\r\n        return ECompareValueType.FLOAT;\r\n    };\r\n    NumberMapColumn.prototype.getBoxPlotData = function (row) {\r\n        var data = this.getRawValue(row);\r\n        if (data == null) {\r\n            return null;\r\n        }\r\n        var b = boxplotBuilder();\r\n        for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\r\n            var d = data_1[_i];\r\n            b.push(isMissingValue(d.value) ? NaN : this.mapping.apply(d.value));\r\n        }\r\n        return b.build();\r\n    };\r\n    NumberMapColumn.prototype.getRange = function () {\r\n        return this.mapping.getRange(this.numberFormat);\r\n    };\r\n    NumberMapColumn.prototype.getRawBoxPlotData = function (row) {\r\n        var data = this.getRawValue(row);\r\n        if (data == null) {\r\n            return null;\r\n        }\r\n        var b = boxplotBuilder();\r\n        for (var _i = 0, data_2 = data; _i < data_2.length; _i++) {\r\n            var d = data_2[_i];\r\n            b.push(isMissingValue(d.value) ? NaN : d.value);\r\n        }\r\n        return b.build();\r\n    };\r\n    NumberMapColumn.prototype.getNumber = function (row) {\r\n        return getBoxPlotNumber(this, row, 'normalized');\r\n    };\r\n    NumberMapColumn.prototype.getRawNumber = function (row) {\r\n        return getBoxPlotNumber(this, row, 'raw');\r\n    };\r\n    NumberMapColumn.prototype.iterNumber = function (row) {\r\n        var r = this.getValue(row);\r\n        return r ? r.map(function (d) { return d.value; }) : [NaN];\r\n    };\r\n    NumberMapColumn.prototype.iterRawNumber = function (row) {\r\n        var r = this.getRawValue(row);\r\n        return r ? r.map(function (d) { return d.value; }) : [NaN];\r\n    };\r\n    NumberMapColumn.prototype.getValue = function (row) {\r\n        var _this = this;\r\n        var values = this.getRawValue(row);\r\n        return values.length === 0 ? null : values.map(function (_a) {\r\n            var key = _a.key, value = _a.value;\r\n            return ({ key: key, value: isMissingValue(value) ? NaN : _this.mapping.apply(value) });\r\n        });\r\n    };\r\n    NumberMapColumn.prototype.getRawValue = function (row) {\r\n        var r = _super.prototype.getValue.call(this, row);\r\n        return r == null ? [] : r;\r\n    };\r\n    NumberMapColumn.prototype.getExportValue = function (row, format) {\r\n        return format === 'json' ? this.getRawValue(row) : _super.prototype.getExportValue.call(this, row, format);\r\n    };\r\n    NumberMapColumn.prototype.getLabels = function (row) {\r\n        var _this = this;\r\n        var v = this.getRawValue(row);\r\n        return v.map(function (_a) {\r\n            var key = _a.key, value = _a.value;\r\n            return ({ key: key, value: _this.numberFormat(value) });\r\n        });\r\n    };\r\n    NumberMapColumn.prototype.getSortMethod = function () {\r\n        return this.sort;\r\n    };\r\n    NumberMapColumn.prototype.setSortMethod = function (sort) {\r\n        if (this.sort === sort) {\r\n            return;\r\n        }\r\n        this.fire([NumberMapColumn_1.EVENT_SORTMETHOD_CHANGED], this.sort, this.sort = sort);\r\n        // sort by me if not already sorted by me\r\n        if (!this.isSortedByMe().asc) {\r\n            this.sortByMe();\r\n        }\r\n    };\r\n    NumberMapColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        r.sortMethod = this.getSortMethod();\r\n        r.filter = !isDummyNumberFilter(this.currentFilter) ? this.currentFilter : null;\r\n        r.map = this.mapping.toJSON();\r\n        r.colorMapping = this.colorMapping.toJSON();\r\n        return r;\r\n    };\r\n    NumberMapColumn.prototype.restore = function (dump, factory) {\r\n        _super.prototype.restore.call(this, dump, factory);\r\n        if (dump.sortMethod) {\r\n            this.sort = dump.sortMethod;\r\n        }\r\n        if (dump.filter) {\r\n            this.currentFilter = restoreNumberFilter(dump.filter);\r\n        }\r\n        if (dump.map || dump.domain) {\r\n            this.mapping = restoreMapping(dump, factory);\r\n        }\r\n        if (dump.colorMapping) {\r\n            this.colorMapping = factory.colorMappingFunction(dump.colorMapping);\r\n        }\r\n    };\r\n    NumberMapColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([NumberMapColumn_1.EVENT_COLOR_MAPPING_CHANGED, NumberMapColumn_1.EVENT_MAPPING_CHANGED, NumberMapColumn_1.EVENT_SORTMETHOD_CHANGED, NumberMapColumn_1.EVENT_FILTER_CHANGED]);\r\n    };\r\n    NumberMapColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    NumberMapColumn.prototype.getOriginalMapping = function () {\r\n        return this.original.clone();\r\n    };\r\n    NumberMapColumn.prototype.getMapping = function () {\r\n        return this.mapping.clone();\r\n    };\r\n    NumberMapColumn.prototype.setMapping = function (mapping) {\r\n        if (this.mapping.eq(mapping)) {\r\n            return;\r\n        }\r\n        this.fire([NumberMapColumn_1.EVENT_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.mapping.clone(), this.mapping = mapping);\r\n    };\r\n    NumberMapColumn.prototype.getColor = function (row) {\r\n        return NumberColumn.prototype.getColor.call(this, row);\r\n    };\r\n    NumberMapColumn.prototype.getColorMapping = function () {\r\n        return this.colorMapping.clone();\r\n    };\r\n    NumberMapColumn.prototype.setColorMapping = function (mapping) {\r\n        if (this.colorMapping.eq(mapping)) {\r\n            return;\r\n        }\r\n        this.fire([NumberMapColumn_1.EVENT_COLOR_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.colorMapping.clone(), this.colorMapping = mapping);\r\n    };\r\n    NumberMapColumn.prototype.isFiltered = function () {\r\n        return NumberColumn.prototype.isFiltered.call(this);\r\n    };\r\n    NumberMapColumn.prototype.getFilter = function () {\r\n        return NumberColumn.prototype.getFilter.call(this);\r\n    };\r\n    NumberMapColumn.prototype.setFilter = function (value) {\r\n        NumberColumn.prototype.setFilter.call(this, value);\r\n    };\r\n    NumberMapColumn.prototype.filter = function (row) {\r\n        return NumberColumn.prototype.filter.call(this, row);\r\n    };\r\n    NumberMapColumn.prototype.clearFilter = function () {\r\n        return NumberColumn.prototype.clearFilter.call(this);\r\n    };\r\n    var NumberMapColumn_1;\r\n    NumberMapColumn.EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\r\n    NumberMapColumn.EVENT_COLOR_MAPPING_CHANGED = NumberColumn.EVENT_COLOR_MAPPING_CHANGED;\r\n    NumberMapColumn.EVENT_SORTMETHOD_CHANGED = NumberColumn.EVENT_SORTMETHOD_CHANGED;\r\n    NumberMapColumn.EVENT_FILTER_CHANGED = NumberColumn.EVENT_FILTER_CHANGED;\r\n    NumberMapColumn = NumberMapColumn_1 = tslib_1.__decorate([\r\n        toolbar('rename', 'filterNumber', 'colorMapped', 'editMapping'),\r\n        dialogAddons('sort', 'sortNumbers'),\r\n        SortByDefault('descending')\r\n    ], NumberMapColumn);\r\n    return NumberMapColumn;\r\n}(MapColumn));\r\nexport default NumberMapColumn;\r\n//# sourceMappingURL=NumberMapColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { equalArrays, extent } from '../internal';\r\nimport { Category, toolbar } from './annotations';\r\nimport { DEFAULT_CATEGORICAL_COLOR_FUNCTION } from './CategoricalColorMappingFunction';\r\nimport CategoricalColumn from './CategoricalColumn';\r\nimport Column from './Column';\r\nimport NumberColumn from './NumberColumn';\r\nimport ValueColumn from './ValueColumn';\r\nimport { toCategories } from './internalCategorical';\r\nimport { DEFAULT_FORMATTER } from './internalNumber';\r\nimport { integrateDefaults } from './internal';\r\n/**\r\n * similar to a categorical column but the categories are mapped to numbers\r\n */\r\nvar OrdinalColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(OrdinalColumn, _super);\r\n    function OrdinalColumn(id, desc) {\r\n        var _this = _super.call(this, id, integrateDefaults(desc, {\r\n            renderer: 'number',\r\n            groupRenderer: 'boxplot'\r\n        })) || this;\r\n        _this.lookup = new Map();\r\n        _this.currentFilter = null;\r\n        _this.categories = toCategories(desc);\r\n        _this.categories.forEach(function (d) { return _this.lookup.set(d.name, d); });\r\n        _this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\r\n        return _this;\r\n    }\r\n    OrdinalColumn_1 = OrdinalColumn;\r\n    OrdinalColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([OrdinalColumn_1.EVENT_COLOR_MAPPING_CHANGED, OrdinalColumn_1.EVENT_MAPPING_CHANGED, OrdinalColumn_1.EVENT_FILTER_CHANGED]);\r\n    };\r\n    OrdinalColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    OrdinalColumn.prototype.getNumberFormat = function () {\r\n        return DEFAULT_FORMATTER;\r\n    };\r\n    Object.defineProperty(OrdinalColumn.prototype, \"dataLength\", {\r\n        get: function () {\r\n            return this.categories.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(OrdinalColumn.prototype, \"labels\", {\r\n        get: function () {\r\n            return this.categories.map(function (d) { return d.label; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    OrdinalColumn.prototype.getValue = function (row) {\r\n        var v = this.getNumber(row);\r\n        return isNaN(v) ? null : v;\r\n    };\r\n    OrdinalColumn.prototype.getCategory = function (row) {\r\n        var v = _super.prototype.getValue.call(this, row);\r\n        if (!v) {\r\n            return null;\r\n        }\r\n        var vs = String(v);\r\n        return this.lookup.has(vs) ? this.lookup.get(vs) : null;\r\n    };\r\n    OrdinalColumn.prototype.getCategories = function (row) {\r\n        return [this.getCategory(row)];\r\n    };\r\n    OrdinalColumn.prototype.iterCategory = function (row) {\r\n        return [this.getCategory(row)];\r\n    };\r\n    OrdinalColumn.prototype.iterNumber = function (row) {\r\n        return [this.getNumber(row)];\r\n    };\r\n    OrdinalColumn.prototype.iterRawNumber = function (row) {\r\n        return [this.getRawNumber(row)];\r\n    };\r\n    OrdinalColumn.prototype.getColor = function (row) {\r\n        return CategoricalColumn.prototype.getColor.call(this, row);\r\n    };\r\n    OrdinalColumn.prototype.getLabel = function (row) {\r\n        return CategoricalColumn.prototype.getLabel.call(this, row);\r\n    };\r\n    OrdinalColumn.prototype.getLabels = function (row) {\r\n        return CategoricalColumn.prototype.getLabels.call(this, row);\r\n    };\r\n    OrdinalColumn.prototype.getValues = function (row) {\r\n        return CategoricalColumn.prototype.getValues.call(this, row);\r\n    };\r\n    OrdinalColumn.prototype.getMap = function (row) {\r\n        return CategoricalColumn.prototype.getMap.call(this, row);\r\n    };\r\n    OrdinalColumn.prototype.getMapLabel = function (row) {\r\n        return CategoricalColumn.prototype.getMapLabel.call(this, row);\r\n    };\r\n    OrdinalColumn.prototype.getSet = function (row) {\r\n        return CategoricalColumn.prototype.getSet.call(this, row);\r\n    };\r\n    OrdinalColumn.prototype.getNumber = function (row) {\r\n        var v = this.getCategory(row);\r\n        return v ? v.value : NaN;\r\n    };\r\n    OrdinalColumn.prototype.getRawNumber = function (row) {\r\n        return this.getNumber(row);\r\n    };\r\n    OrdinalColumn.prototype.getExportValue = function (row, format) {\r\n        if (format === 'json') {\r\n            var value = this.getNumber(row);\r\n            if (isNaN(value)) {\r\n                return null;\r\n            }\r\n            return {\r\n                name: this.getLabel(row),\r\n                value: value\r\n            };\r\n        }\r\n        return _super.prototype.getExportValue.call(this, row, format);\r\n    };\r\n    OrdinalColumn.prototype.dump = function (toDescRef) {\r\n        var r = CategoricalColumn.prototype.dump.call(this, toDescRef);\r\n        r.mapping = this.getMapping();\r\n        return r;\r\n    };\r\n    OrdinalColumn.prototype.restore = function (dump, factory) {\r\n        CategoricalColumn.prototype.restore.call(this, dump, factory);\r\n        if (dump.mapping) {\r\n            this.setMapping(dump.mapping);\r\n        }\r\n    };\r\n    OrdinalColumn.prototype.getMapping = function () {\r\n        return this.categories.map(function (d) { return d.value; });\r\n    };\r\n    OrdinalColumn.prototype.setMapping = function (mapping) {\r\n        var r = extent(mapping);\r\n        mapping = mapping.map(function (d) { return (d - r[0]) / (r[1] - r[0]); });\r\n        var bak = this.getMapping();\r\n        if (equalArrays(bak, mapping)) {\r\n            return;\r\n        }\r\n        this.categories.forEach(function (d, i) { return d.value = mapping[i] || 0; });\r\n        this.fire([OrdinalColumn_1.EVENT_MAPPING_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], bak, this.getMapping());\r\n    };\r\n    OrdinalColumn.prototype.getColorMapping = function () {\r\n        return this.colorMapping.clone();\r\n    };\r\n    OrdinalColumn.prototype.setColorMapping = function (mapping) {\r\n        return CategoricalColumn.prototype.setColorMapping.call(this, mapping);\r\n    };\r\n    OrdinalColumn.prototype.isFiltered = function () {\r\n        return this.currentFilter != null;\r\n    };\r\n    OrdinalColumn.prototype.filter = function (row) {\r\n        return CategoricalColumn.prototype.filter.call(this, row);\r\n    };\r\n    OrdinalColumn.prototype.group = function (row) {\r\n        return CategoricalColumn.prototype.group.call(this, row);\r\n    };\r\n    OrdinalColumn.prototype.getFilter = function () {\r\n        return this.currentFilter;\r\n    };\r\n    OrdinalColumn.prototype.setFilter = function (filter) {\r\n        return CategoricalColumn.prototype.setFilter.call(this, filter);\r\n    };\r\n    OrdinalColumn.prototype.clearFilter = function () {\r\n        return CategoricalColumn.prototype.clearFilter.call(this);\r\n    };\r\n    OrdinalColumn.prototype.toCompareValue = function (row) {\r\n        return CategoricalColumn.prototype.toCompareValue.call(this, row);\r\n    };\r\n    OrdinalColumn.prototype.toCompareValueType = function () {\r\n        return CategoricalColumn.prototype.toCompareValueType.call(this);\r\n    };\r\n    OrdinalColumn.prototype.getRenderer = function () {\r\n        return NumberColumn.prototype.getRenderer.call(this);\r\n    };\r\n    var OrdinalColumn_1;\r\n    OrdinalColumn.EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\r\n    OrdinalColumn.EVENT_FILTER_CHANGED = CategoricalColumn.EVENT_FILTER_CHANGED;\r\n    OrdinalColumn.EVENT_COLOR_MAPPING_CHANGED = CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED;\r\n    OrdinalColumn = OrdinalColumn_1 = tslib_1.__decorate([\r\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'group', 'filterOrdinal', 'colorMappedCategorical'),\r\n        Category('categorical')\r\n    ], OrdinalColumn);\r\n    return OrdinalColumn;\r\n}(ValueColumn));\r\nexport default OrdinalColumn;\r\n//# sourceMappingURL=OrdinalColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { NumberColumn } from '.';\r\nimport { SortByDefault, toolbar } from './annotations';\r\nimport Column from './Column';\r\nimport CompositeNumberColumn from './CompositeNumberColumn';\r\nimport { isDummyNumberFilter, noNumberFilter, restoreNumberFilter } from './internalNumber';\r\nimport { isNumberColumn } from './INumberColumn';\r\nimport { restoreMapping } from './MappingFunction';\r\nimport { integrateDefaults } from './internal';\r\nvar DEFAULT_SCRIPT = \"let s = 0;\\ncol.forEach((c) => s += c.v);\\nreturn s / col.length\";\r\n/**\r\n * factory for creating a description creating a mean column\r\n * @param label\r\n * @returns {{type: string, label: string}}\r\n */\r\nexport function createScriptDesc(label) {\r\n    if (label === void 0) { label = 'script'; }\r\n    return { type: 'script', label: label, script: DEFAULT_SCRIPT };\r\n}\r\nfunction wrapWithContext(code) {\r\n    var clean = code.trim();\r\n    if (!clean.includes('return')) {\r\n        clean = \"return (\" + clean + \");\";\r\n    }\r\n    return \"\\n  const max = function(arr) { return Math.max.apply(Math, arr); };\\n  const min = function(arr) { return Math.min.apply(Math, arr); };\\n  const extent = function(arr) { return [min(arr), max(arr)]; };\\n  const clamp = function(v, minValue, maxValue) { return v < minValue ? minValue : (v > maxValue ? maxValue : v); };\\n  const normalize = function(v, minMax, max) {\\n    if (Array.isArray(minMax)) {\\n      minMax = minMax[0];\\n      max = minMax[1];\\n    }\\n    return (v - minMax) / (max - minMax);\\n  };\\n  const denormalize = function(v, minMax, max) {\\n    if (Array.isArray(minMax)) {\\n      minMax = minMax[0];\\n      max = minMax[1];\\n    }\\n    return v * (max - minMax) + minMax;\\n  };\\n  const linear = function(v, source, target) {\\n    target = target || [0, 1];\\n    return denormalize(normalize(v, source), target);\\n  };\\n  const v = (function custom() {\\n    \" + clean + \"\\n  })();\\n\\n  return typeof v === 'number' ? v : NaN\";\r\n}\r\n/**\r\n * wrapper class for simpler column accessing\r\n */\r\nvar ColumnWrapper = /** @class */ (function () {\r\n    function ColumnWrapper(c, v, raw) {\r\n        this.c = c;\r\n        this.v = v;\r\n        this.raw = raw;\r\n    }\r\n    Object.defineProperty(ColumnWrapper.prototype, \"type\", {\r\n        get: function () {\r\n            return this.c.desc.type;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ColumnWrapper.prototype, \"name\", {\r\n        get: function () {\r\n            return this.c.getMetaData().label;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ColumnWrapper.prototype, \"id\", {\r\n        get: function () {\r\n            return this.c.id;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ColumnWrapper;\r\n}());\r\nvar LazyColumnWrapper = /** @class */ (function () {\r\n    function LazyColumnWrapper(c, row) {\r\n        this.c = c;\r\n        this.row = row;\r\n    }\r\n    Object.defineProperty(LazyColumnWrapper.prototype, \"type\", {\r\n        get: function () {\r\n            return this.c.desc.type;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LazyColumnWrapper.prototype, \"name\", {\r\n        get: function () {\r\n            return this.c.getMetaData().label;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LazyColumnWrapper.prototype, \"id\", {\r\n        get: function () {\r\n            return this.c.id;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LazyColumnWrapper.prototype, \"v\", {\r\n        get: function () {\r\n            return this.c.getValue(this.row);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LazyColumnWrapper.prototype, \"raw\", {\r\n        get: function () {\r\n            return isNumberColumn(this.c) ? this.c.getRawNumber(this.row) : null;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return LazyColumnWrapper;\r\n}());\r\n/**\r\n * helper context for accessing columns within a scripted columns\r\n */\r\nvar ColumnContext = /** @class */ (function () {\r\n    function ColumnContext(children, allFactory) {\r\n        var _this = this;\r\n        this.children = children;\r\n        this.allFactory = allFactory;\r\n        this.lookup = new Map();\r\n        this._all = null;\r\n        children.forEach(function (c) {\r\n            _this.lookup.set(\"ID@\" + c.id, c);\r\n            _this.lookup.set(\"ID@\" + c.id.toLowerCase(), c);\r\n            _this.lookup.set(\"NAME@\" + c.name, c);\r\n            _this.lookup.set(\"NAME@\" + c.name.toLowerCase(), c);\r\n        });\r\n    }\r\n    /**\r\n     * get a column by name\r\n     * @param {string} name\r\n     * @return {IColumnWrapper}\r\n     */\r\n    ColumnContext.prototype.byName = function (name) {\r\n        return this.lookup.get(\"NAME@\" + name);\r\n    };\r\n    /**\r\n     * get a column by id\r\n     * @param {string} id\r\n     * @return {IColumnWrapper}\r\n     */\r\n    ColumnContext.prototype.byID = function (id) {\r\n        return this.lookup.get(\"ID@\" + id);\r\n    };\r\n    /**\r\n     * get a column by index\r\n     * @param {number} index\r\n     * @return {IColumnWrapper}\r\n     */\r\n    ColumnContext.prototype.byIndex = function (index) {\r\n        return this.children[index];\r\n    };\r\n    ColumnContext.prototype.forEach = function (callback) {\r\n        return this.children.forEach(callback);\r\n    };\r\n    Object.defineProperty(ColumnContext.prototype, \"length\", {\r\n        /**\r\n         * number of columns\r\n         * @return {number}\r\n         */\r\n        get: function () {\r\n            return this.children.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ColumnContext.prototype, \"all\", {\r\n        /**\r\n         * get the all context, i.e one with all columns of this ranking\r\n         * @return {ColumnContext}\r\n         */\r\n        get: function () {\r\n            if (this._all == null) {\r\n                this._all = this.allFactory ? this.allFactory() : null;\r\n            }\r\n            return this._all;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ColumnContext;\r\n}());\r\n/**\r\n * column combiner which uses a custom JavaScript function to combined the values\r\n * The script iteslf can be any valid JavaScript code. It will be embedded in a function.\r\n * Therefore the last statement has to return a value.\r\n *\r\n * In case of a single line statement the code piece statement <code>return</code> will be automatically prefixed.\r\n *\r\n * The function signature is: <br><code>(row: any, index: number, children: Column[], values: any[], raws: (number|null)[]) => number</code>\r\n *  <dl>\r\n *    <dt>param: <code>row</code></dt>\r\n *    <dd>the row in the dataset to compute the value for</dd>\r\n *    <dt>param: <code>index</code></dt>\r\n *    <dd>the index of the row</dd>\r\n *    <dt>param: <code>children</code></dt>\r\n *    <dd>the list of LineUp columns that are part of this ScriptColumn</dd>\r\n *    <dt>param: <code>values</code></dt>\r\n *    <dd>the computed value of each column (see <code>children</code>) for the current row</dd>\r\n *    <dt>param: <code>raws</code></dt>\r\n *    <dd>similar to <code>values</code>. Numeric columns return by default the normalized value, this array gives access to the original \"raw\" values before mapping is applied</dd>\r\n *    <dt>returns:</dt>\r\n *    <dd>the computed number <strong>in the range [0, 1] or NaN</strong></dd>\r\n *  </dl>\r\n *\r\n * In addition to the standard JavaScript functions and objects (Math, ...) a couple of utility functions are available: </p>\r\n * <dl>\r\n *    <dt><code>max(arr: number[]) => number</code></dt>\r\n *    <dd>computes the maximum of the given array of numbers</dd>\r\n *    <dt><code>min(arr: number[]) => number</code></dt>\r\n *    <dd>computes the minimum of the given array of numbers</dd>\r\n *    <dt><code>extent(arr: number[]) => [number, number]</code></dt>\r\n *    <dd>computes both minimum and maximum and returning an array with the first element the minimum and the second the maximum</dd>\r\n *    <dt><code>clamp(v: number, min: number, max: number) => number</code></dt>\r\n *    <dd>ensures that the given value is within the given min/max value</dd>\r\n *    <dt><code>normalize(v: number, min: number, max: number) => number</code></dt>\r\n *    <dd>normalizes the given value <code>(v - min) / (max - min)</code></dd>\r\n *    <dt><code>denormalize(v: number, min: number, max: number) => number</code></dt>\r\n *    <dd>inverts a normalized value <code>v * (max - min) + min</code></dd>\r\n *    <dt><code>linear(v: number, input: [number, number], output: [number, number]) => number</code></dt>\r\n *    <dd>performs a linear mapping from input domain to output domain both given as an array of [min, max] values. <code>denormalize(normalize(v, input[0], input[1]), output[0], output[1])</code></dd>\r\n *  </dl>\r\n */\r\nvar ScriptColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ScriptColumn, _super);\r\n    function ScriptColumn(id, desc, factory) {\r\n        var _this = _super.call(this, id, integrateDefaults(desc, {\r\n            renderer: 'number',\r\n            groupRenderer: 'boxplot',\r\n            summaryRenderer: 'histogram'\r\n        })) || this;\r\n        _this.script = ScriptColumn_1.DEFAULT_SCRIPT;\r\n        _this.f = null;\r\n        /**\r\n         * currently active filter\r\n         * @type {{min: number, max: number}}\r\n         * @private\r\n         */\r\n        _this.currentFilter = noNumberFilter();\r\n        _this.script = desc.script || _this.script;\r\n        _this.mapping = restoreMapping(desc, factory);\r\n        _this.original = _this.mapping.clone();\r\n        _this.colorMapping = factory.colorMappingFunction(desc.colorMapping || desc.color);\r\n        return _this;\r\n    }\r\n    ScriptColumn_1 = ScriptColumn;\r\n    ScriptColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([ScriptColumn_1.EVENT_SCRIPT_CHANGED, ScriptColumn_1.EVENT_COLOR_MAPPING_CHANGED, ScriptColumn_1.EVENT_MAPPING_CHANGED]);\r\n    };\r\n    ScriptColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    ScriptColumn.prototype.setScript = function (script) {\r\n        if (this.script === script) {\r\n            return;\r\n        }\r\n        this.f = null;\r\n        this.fire([ScriptColumn_1.EVENT_SCRIPT_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], this.script, this.script = script);\r\n    };\r\n    ScriptColumn.prototype.getScript = function () {\r\n        return this.script;\r\n    };\r\n    ScriptColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        r.script = this.script;\r\n        r.filter = !isDummyNumberFilter(this.currentFilter) ? this.currentFilter : null;\r\n        r.map = this.mapping.toJSON();\r\n        r.colorMapping = this.colorMapping.toJSON();\r\n        return r;\r\n    };\r\n    ScriptColumn.prototype.restore = function (dump, factory) {\r\n        _super.prototype.restore.call(this, dump, factory);\r\n        this.script = dump.script || this.script;\r\n        if (dump.filter) {\r\n            this.currentFilter = restoreNumberFilter(dump.filter);\r\n        }\r\n        if (dump.map || dump.domain) {\r\n            this.mapping = restoreMapping(dump.map, factory);\r\n        }\r\n        if (dump.colorMapping) {\r\n            this.colorMapping = factory.colorMappingFunction(dump.colorMapping);\r\n        }\r\n    };\r\n    ScriptColumn.prototype.compute = function (row) {\r\n        var _this = this;\r\n        if (this.f == null) {\r\n            this.f = new Function('children', 'values', 'raws', 'col', 'row', 'index', wrapWithContext(this.script));\r\n        }\r\n        var children = this._children;\r\n        var values = this._children.map(function (d) { return d.getValue(row); });\r\n        var raws = this._children.map(function (d) { return isNumberColumn(d) ? d.getRawNumber(row) : null; });\r\n        var col = new ColumnContext(children.map(function (c, i) { return new ColumnWrapper(c, values[i], raws[i]); }), function () {\r\n            var cols = _this.findMyRanker().flatColumns; // all except myself\r\n            return new ColumnContext(cols.map(function (c) { return new LazyColumnWrapper(c, row); }));\r\n        });\r\n        return this.f.call(this, children, values, raws, col, row.v, row.i);\r\n    };\r\n    ScriptColumn.prototype.getExportValue = function (row, format) {\r\n        if (format === 'json') {\r\n            return {\r\n                value: this.getRawNumber(row),\r\n                children: this.children.map(function (d) { return d.getExportValue(row, format); })\r\n            };\r\n        }\r\n        return _super.prototype.getExportValue.call(this, row, format);\r\n    };\r\n    ScriptColumn.prototype.getRange = function () {\r\n        return this.mapping.getRange(this.getNumberFormat());\r\n    };\r\n    ScriptColumn.prototype.getOriginalMapping = function () {\r\n        return this.original.clone();\r\n    };\r\n    ScriptColumn.prototype.getMapping = function () {\r\n        return this.mapping.clone();\r\n    };\r\n    ScriptColumn.prototype.setMapping = function (mapping) {\r\n        if (this.mapping.eq(mapping)) {\r\n            return;\r\n        }\r\n        this.fire([ScriptColumn_1.EVENT_MAPPING_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], this.mapping.clone(), this.mapping = mapping);\r\n    };\r\n    ScriptColumn.prototype.getColor = function (row) {\r\n        return NumberColumn.prototype.getColor.call(this, row);\r\n    };\r\n    ScriptColumn.prototype.getColorMapping = function () {\r\n        return this.colorMapping.clone();\r\n    };\r\n    ScriptColumn.prototype.setColorMapping = function (mapping) {\r\n        if (this.colorMapping.eq(mapping)) {\r\n            return;\r\n        }\r\n        this.fire([ScriptColumn_1.EVENT_COLOR_MAPPING_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], this.colorMapping.clone(), this.colorMapping = mapping);\r\n    };\r\n    ScriptColumn.prototype.isFiltered = function () {\r\n        return NumberColumn.prototype.isFiltered.call(this);\r\n    };\r\n    ScriptColumn.prototype.getFilter = function () {\r\n        return NumberColumn.prototype.getFilter.call(this);\r\n    };\r\n    ScriptColumn.prototype.setFilter = function (value) {\r\n        NumberColumn.prototype.setFilter.call(this, value);\r\n    };\r\n    ScriptColumn.prototype.filter = function (row) {\r\n        return NumberColumn.prototype.filter.call(this, row);\r\n    };\r\n    ScriptColumn.prototype.clearFilter = function () {\r\n        return NumberColumn.prototype.clearFilter.call(this);\r\n    };\r\n    var ScriptColumn_1;\r\n    ScriptColumn.EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\r\n    ScriptColumn.EVENT_COLOR_MAPPING_CHANGED = NumberColumn.EVENT_COLOR_MAPPING_CHANGED;\r\n    ScriptColumn.EVENT_SCRIPT_CHANGED = 'scriptChanged';\r\n    ScriptColumn.DEFAULT_SCRIPT = DEFAULT_SCRIPT;\r\n    ScriptColumn = ScriptColumn_1 = tslib_1.__decorate([\r\n        toolbar('script', 'filterNumber', 'colorMapped', 'editMapping'),\r\n        SortByDefault('descending')\r\n    ], ScriptColumn);\r\n    return ScriptColumn;\r\n}(CompositeNumberColumn));\r\nexport default ScriptColumn;\r\n//# sourceMappingURL=ScriptColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { Category, toolbar } from './annotations';\r\nimport CategoricalColumn from './CategoricalColumn';\r\nimport Column from './Column';\r\nimport { ECompareValueType, DEFAULT_COLOR } from './interfaces';\r\nimport ValueColumn from './ValueColumn';\r\nimport { DEFAULT_CATEGORICAL_COLOR_FUNCTION } from './CategoricalColorMappingFunction';\r\nimport { toCategories, isCategoryIncluded, isEqualSetCategoricalFilter } from './internalCategorical';\r\nimport { chooseUIntByDataLength, integrateDefaults } from './internal';\r\n/**\r\n * a string column with optional alignment\r\n */\r\nvar SetColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SetColumn, _super);\r\n    function SetColumn(id, desc) {\r\n        var _this = _super.call(this, id, integrateDefaults(desc, {\r\n            renderer: 'upset',\r\n            groupRenderer: 'upset',\r\n            summaryRenderer: 'categorical'\r\n        })) || this;\r\n        _this.lookup = new Map();\r\n        /**\r\n         * set of categories to show\r\n         * @type {null}\r\n         * @private\r\n         */\r\n        _this.currentFilter = null;\r\n        _this.separator = new RegExp(desc.separator || ';');\r\n        _this.categories = toCategories(desc);\r\n        _this.categories.forEach(function (d) { return _this.lookup.set(d.name, d); });\r\n        _this.colorMapping = DEFAULT_CATEGORICAL_COLOR_FUNCTION;\r\n        return _this;\r\n    }\r\n    SetColumn_1 = SetColumn;\r\n    SetColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([SetColumn_1.EVENT_COLOR_MAPPING_CHANGED, SetColumn_1.EVENT_FILTER_CHANGED]);\r\n    };\r\n    SetColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    Object.defineProperty(SetColumn.prototype, \"labels\", {\r\n        get: function () {\r\n            return this.categories.map(function (d) { return d.label; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SetColumn.prototype, \"dataLength\", {\r\n        get: function () {\r\n            return this.categories.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SetColumn.prototype.getValue = function (row) {\r\n        var v = this.getSortedSet(row);\r\n        if (v.length === 0) {\r\n            return null;\r\n        }\r\n        return v.map(function (d) { return d.name; });\r\n    };\r\n    SetColumn.prototype.getLabel = function (row) {\r\n        return \"(\" + this.getSortedSet(row).map(function (d) { return d.label; }).join(',') + \")\";\r\n    };\r\n    SetColumn.prototype.normalize = function (v) {\r\n        if (typeof v === 'string') {\r\n            return v.split(this.separator).map(function (s) { return s.trim(); });\r\n        }\r\n        if (Array.isArray(v)) {\r\n            return v.map(function (v) { return String(v).trim(); });\r\n        }\r\n        if (v instanceof Set) {\r\n            return Array.from(v).map(String);\r\n        }\r\n        return [];\r\n    };\r\n    SetColumn.prototype.getSet = function (row) {\r\n        var _this = this;\r\n        var sv = this.normalize(_super.prototype.getValue.call(this, row));\r\n        var r = new Set();\r\n        sv.forEach(function (n) {\r\n            var cat = _this.lookup.get(n);\r\n            if (cat) {\r\n                r.add(cat);\r\n            }\r\n        });\r\n        return r;\r\n    };\r\n    SetColumn.prototype.getSortedSet = function (row) {\r\n        return Array.from(this.getSet(row)).sort(function (a, b) { return a.value === b.value ? a.label.localeCompare(b.label) : a.value - b.value; });\r\n    };\r\n    SetColumn.prototype.getCategories = function (row) {\r\n        return this.getSortedSet(row);\r\n    };\r\n    SetColumn.prototype.getColors = function (row) {\r\n        var _this = this;\r\n        return this.getSortedSet(row).map(function (d) { return _this.colorMapping.apply(d); });\r\n    };\r\n    SetColumn.prototype.getColorMapping = function () {\r\n        return this.colorMapping.clone();\r\n    };\r\n    SetColumn.prototype.setColorMapping = function (mapping) {\r\n        return CategoricalColumn.prototype.setColorMapping.call(this, mapping);\r\n    };\r\n    SetColumn.prototype.getValues = function (row) {\r\n        var s = this.getSet(row);\r\n        return this.categories.map(function (d) { return s.has(d); });\r\n    };\r\n    SetColumn.prototype.getLabels = function (row) {\r\n        return this.getValues(row).map(String);\r\n    };\r\n    SetColumn.prototype.getMap = function (row) {\r\n        return this.getSortedSet(row).map(function (d) { return ({ key: d.label, value: true }); });\r\n    };\r\n    SetColumn.prototype.getMapLabel = function (row) {\r\n        return this.getSortedSet(row).map(function (d) { return ({ key: d.label, value: 'true' }); });\r\n    };\r\n    SetColumn.prototype.iterCategory = function (row) {\r\n        var r = this.getSet(row);\r\n        if (r.size > 0) {\r\n            return Array.from(r);\r\n        }\r\n        return [null];\r\n    };\r\n    SetColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        r.filter = this.currentFilter;\r\n        r.colorMapping = this.colorMapping.toJSON();\r\n        return r;\r\n    };\r\n    SetColumn.prototype.restore = function (dump, factory) {\r\n        _super.prototype.restore.call(this, dump, factory);\r\n        this.colorMapping = factory.categoricalColorMappingFunction(dump.colorMapping, this.categories);\r\n        if (!('filter' in dump)) {\r\n            this.currentFilter = null;\r\n            return;\r\n        }\r\n        var bak = dump.filter;\r\n        if (typeof bak === 'string' || Array.isArray(bak)) {\r\n            this.currentFilter = { filter: bak, filterMissing: false, mode: 'some' };\r\n        }\r\n        else {\r\n            this.currentFilter = bak;\r\n        }\r\n    };\r\n    SetColumn.prototype.isFiltered = function () {\r\n        return this.currentFilter != null;\r\n    };\r\n    SetColumn.prototype.filter = function (row) {\r\n        var _this = this;\r\n        if (!this.currentFilter) {\r\n            return true;\r\n        }\r\n        var v = Array.from(this.getSet(row));\r\n        if (v.length === 0) {\r\n            return isCategoryIncluded(this.currentFilter, null);\r\n        }\r\n        if (this.currentFilter.mode === 'every') {\r\n            return v.every(function (s) { return isCategoryIncluded(_this.currentFilter, s); });\r\n        }\r\n        return v.some(function (s) { return isCategoryIncluded(_this.currentFilter, s); });\r\n    };\r\n    SetColumn.prototype.getFilter = function () {\r\n        return this.currentFilter == null ? null : Object.assign({}, this.currentFilter);\r\n    };\r\n    SetColumn.prototype.setFilter = function (filter) {\r\n        if (isEqualSetCategoricalFilter(this.currentFilter, filter)) {\r\n            return;\r\n        }\r\n        this.fire([CategoricalColumn.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.currentFilter, this.currentFilter = filter);\r\n    };\r\n    SetColumn.prototype.clearFilter = function () {\r\n        return CategoricalColumn.prototype.clearFilter.call(this);\r\n    };\r\n    SetColumn.prototype.toCompareValue = function (row) {\r\n        var v = this.getSet(row);\r\n        var vs = [v.size];\r\n        for (var _i = 0, _a = this.categories; _i < _a.length; _i++) {\r\n            var cat = _a[_i];\r\n            vs.push(v.has(cat) ? 1 : 0);\r\n        }\r\n        return vs;\r\n    };\r\n    SetColumn.prototype.toCompareValueType = function () {\r\n        return [chooseUIntByDataLength(this.categories.length)].concat(this.categories.map(function () { return ECompareValueType.BINARY; }));\r\n    };\r\n    SetColumn.prototype.group = function (row) {\r\n        var v = this.getSet(row);\r\n        var cardinality = v.size;\r\n        var categories = this.categories.filter(function (c) { return v.has(c); });\r\n        // by cardinality and then by intersection\r\n        var g = {\r\n            name: categories.length === 0 ? 'None' : categories.map(function (d) { return d.name; }).join(', '),\r\n            color: categories.length === 1 ? categories[0].color : DEFAULT_COLOR\r\n        };\r\n        g.parent = {\r\n            name: \"#\" + cardinality,\r\n            color: DEFAULT_COLOR,\r\n            subGroups: [g]\r\n        };\r\n        return g;\r\n    };\r\n    var SetColumn_1;\r\n    SetColumn.EVENT_FILTER_CHANGED = CategoricalColumn.EVENT_FILTER_CHANGED;\r\n    SetColumn.EVENT_COLOR_MAPPING_CHANGED = CategoricalColumn.EVENT_COLOR_MAPPING_CHANGED;\r\n    SetColumn = SetColumn_1 = tslib_1.__decorate([\r\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'filterCategorical', 'colorMappedCategorical', 'group', 'groupBy'),\r\n        Category('categorical')\r\n    ], SetColumn);\r\n    return SetColumn;\r\n}(ValueColumn));\r\nexport default SetColumn;\r\n//# sourceMappingURL=SetColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { toolbar } from './annotations';\r\nimport MapColumn from './MapColumn';\r\nimport { EAlignment } from './StringColumn';\r\nimport { isMissingValue } from './missing';\r\nimport { integrateDefaults } from './internal';\r\n/**\r\n * a string column with optional alignment\r\n */\r\nvar StringMapColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(StringMapColumn, _super);\r\n    function StringMapColumn(id, desc) {\r\n        var _this = _super.call(this, id, integrateDefaults(desc, {\r\n            width: 200,\r\n            renderer: 'map'\r\n        })) || this;\r\n        _this.alignment = desc.alignment || EAlignment.left;\r\n        _this.escape = desc.escape !== false;\r\n        return _this;\r\n    }\r\n    StringMapColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    StringMapColumn.prototype.getValue = function (row) {\r\n        var r = this.getMapValue(row);\r\n        return r.every(function (d) { return d.value === ''; }) ? null : r;\r\n    };\r\n    StringMapColumn.prototype.getMapValue = function (row) {\r\n        return _super.prototype.getMap.call(this, row).map(function (_a) {\r\n            var key = _a.key, value = _a.value;\r\n            return ({\r\n                key: key,\r\n                value: isMissingValue(value) ? '' : String(value)\r\n            });\r\n        });\r\n    };\r\n    StringMapColumn = tslib_1.__decorate([\r\n        toolbar('rename', 'search')\r\n    ], StringMapColumn);\r\n    return StringMapColumn;\r\n}(MapColumn));\r\nexport default StringMapColumn;\r\n//# sourceMappingURL=StringMapColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { toolbar } from './annotations';\r\nimport ArrayColumn from './ArrayColumn';\r\nimport { EAlignment } from './StringColumn';\r\nimport { isMissingValue } from './missing';\r\nimport { integrateDefaults } from './internal';\r\n/**\r\n * a string column with optional alignment\r\n */\r\nvar StringsColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(StringsColumn, _super);\r\n    function StringsColumn(id, desc) {\r\n        var _this = _super.call(this, id, integrateDefaults(desc, {\r\n            width: 200\r\n        })) || this;\r\n        _this.alignment = desc.alignment || EAlignment.left;\r\n        _this.escape = desc.escape !== false;\r\n        return _this;\r\n    }\r\n    StringsColumn.prototype.getValues = function (row) {\r\n        return _super.prototype.getValues.call(this, row).map(function (v) {\r\n            return isMissingValue(v) ? '' : String(v);\r\n        });\r\n    };\r\n    StringsColumn = tslib_1.__decorate([\r\n        toolbar('rename', 'search')\r\n    ], StringsColumn);\r\n    return StringsColumn;\r\n}(ArrayColumn));\r\nexport default StringsColumn;\r\n//# sourceMappingURL=StringsColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { Category, toolbar, dialogAddons } from './annotations';\r\nimport Column from './Column';\r\nimport { patternFunction, integrateDefaults } from './internal';\r\nimport ValueColumn from './ValueColumn';\r\nimport { EAlignment, EStringGroupCriteriaType } from './StringColumn';\r\nimport StringColumn from './StringColumn';\r\n/**\r\n * a string column with optional alignment\r\n */\r\nvar LinkColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(LinkColumn, _super);\r\n    function LinkColumn(id, desc) {\r\n        var _this = _super.call(this, id, integrateDefaults(desc, Object.assign({\r\n            width: 200\r\n        }, desc.pattern ? {\r\n            renderer: 'link',\r\n            groupRenderer: 'link'\r\n        } : {}))) || this;\r\n        _this.patternFunction = null;\r\n        _this.currentFilter = null;\r\n        _this.currentGroupCriteria = {\r\n            type: EStringGroupCriteriaType.startsWith,\r\n            values: []\r\n        };\r\n        _this.alignment = desc.alignment || EAlignment.left;\r\n        _this.escape = desc.escape !== false;\r\n        _this.pattern = desc.pattern || '';\r\n        _this.patternTemplates = desc.patternTemplates || [];\r\n        return _this;\r\n    }\r\n    LinkColumn_1 = LinkColumn;\r\n    LinkColumn.prototype.setPattern = function (pattern) {\r\n        if (pattern === this.pattern) {\r\n            return;\r\n        }\r\n        this.patternFunction = null; // reset cache\r\n        this.fire([LinkColumn_1.EVENT_PATTERN_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_CACHES, Column.EVENT_DIRTY], this.pattern, this.pattern = pattern);\r\n    };\r\n    LinkColumn.prototype.getPattern = function () {\r\n        return this.pattern;\r\n    };\r\n    LinkColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([LinkColumn_1.EVENT_PATTERN_CHANGED, LinkColumn_1.EVENT_GROUPING_CHANGED, LinkColumn_1.EVENT_FILTER_CHANGED]);\r\n    };\r\n    LinkColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    LinkColumn.prototype.getValue = function (row) {\r\n        var l = this.getLink(row);\r\n        return l == null ? null : l.href;\r\n    };\r\n    LinkColumn.prototype.getLink = function (row) {\r\n        var v = _super.prototype.getValue.call(this, row);\r\n        return this.transformValue(v, row);\r\n    };\r\n    LinkColumn.prototype.transformValue = function (v, row) {\r\n        if (v == null || v === '') {\r\n            return null;\r\n        }\r\n        if (typeof v === 'string') {\r\n            if (!this.pattern) {\r\n                return {\r\n                    alt: v,\r\n                    href: v\r\n                };\r\n            }\r\n            if (!this.patternFunction) {\r\n                this.patternFunction = patternFunction(this.pattern, 'item');\r\n            }\r\n            return {\r\n                alt: v,\r\n                href: this.patternFunction.call(this, v, row.v)\r\n            };\r\n        }\r\n        return v;\r\n    };\r\n    LinkColumn.prototype.getLabel = function (row) {\r\n        var l = this.getLink(row);\r\n        return l == null ? '' : l.alt;\r\n    };\r\n    LinkColumn.prototype.dump = function (toDescRef) {\r\n        var r = StringColumn.prototype.dump.call(this, toDescRef);\r\n        if (this.pattern !== this.desc.pattern) {\r\n            r.pattern = this.pattern;\r\n        }\r\n        return r;\r\n    };\r\n    LinkColumn.prototype.restore = function (dump, factory) {\r\n        StringColumn.prototype.restore.call(this, dump, factory);\r\n        if (dump.pattern) {\r\n            this.pattern = dump.pattern;\r\n        }\r\n    };\r\n    LinkColumn.prototype.isFiltered = function () {\r\n        return this.currentFilter != null;\r\n    };\r\n    LinkColumn.prototype.filter = function (row) {\r\n        return StringColumn.prototype.filter.call(this, row);\r\n    };\r\n    LinkColumn.prototype.getFilter = function () {\r\n        return this.currentFilter;\r\n    };\r\n    LinkColumn.prototype.setFilter = function (filter) {\r\n        return StringColumn.prototype.setFilter.call(this, filter);\r\n    };\r\n    LinkColumn.prototype.clearFilter = function () {\r\n        return StringColumn.prototype.clearFilter.call(this);\r\n    };\r\n    LinkColumn.prototype.getGroupCriteria = function () {\r\n        return this.currentGroupCriteria;\r\n    };\r\n    LinkColumn.prototype.setGroupCriteria = function (value) {\r\n        return StringColumn.prototype.setGroupCriteria.call(this, value);\r\n    };\r\n    LinkColumn.prototype.toCompareValue = function (a) {\r\n        return StringColumn.prototype.toCompareValue.call(this, a);\r\n    };\r\n    LinkColumn.prototype.toCompareValueType = function () {\r\n        return StringColumn.prototype.toCompareValueType.call(this);\r\n    };\r\n    LinkColumn.prototype.toCompareGroupValue = function (rows, group) {\r\n        return StringColumn.prototype.toCompareGroupValue.call(this, rows, group);\r\n    };\r\n    LinkColumn.prototype.toCompareGroupValueType = function () {\r\n        return StringColumn.prototype.toCompareGroupValueType.call(this);\r\n    };\r\n    LinkColumn.prototype.group = function (row) {\r\n        return StringColumn.prototype.group.call(this, row);\r\n    };\r\n    var LinkColumn_1;\r\n    LinkColumn.EVENT_FILTER_CHANGED = StringColumn.EVENT_FILTER_CHANGED;\r\n    LinkColumn.EVENT_GROUPING_CHANGED = StringColumn.EVENT_GROUPING_CHANGED;\r\n    LinkColumn.EVENT_PATTERN_CHANGED = 'patternChanged';\r\n    LinkColumn = LinkColumn_1 = tslib_1.__decorate([\r\n        toolbar('rename', 'clone', 'sort', 'sortBy', 'search', 'groupBy', 'filterString', 'editPattern'),\r\n        dialogAddons('group', 'groupString'),\r\n        Category('string')\r\n    ], LinkColumn);\r\n    return LinkColumn;\r\n}(ValueColumn));\r\nexport default LinkColumn;\r\n//# sourceMappingURL=LinkColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { toolbar } from './annotations';\r\nimport { patternFunction, integrateDefaults } from './internal';\r\nimport MapColumn from './MapColumn';\r\nimport LinkColumn from './LinkColumn';\r\nimport { EAlignment } from './StringColumn';\r\n/**\r\n * a string column with optional alignment\r\n */\r\nvar LinkMapColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(LinkMapColumn, _super);\r\n    function LinkMapColumn(id, desc) {\r\n        var _this = _super.call(this, id, integrateDefaults(desc, {\r\n            width: 200,\r\n            renderer: 'map'\r\n        })) || this;\r\n        _this.patternFunction = null;\r\n        _this.alignment = desc.alignment || EAlignment.left;\r\n        _this.escape = desc.escape !== false;\r\n        _this.pattern = desc.pattern || '';\r\n        _this.patternTemplates = desc.patternTemplates || [];\r\n        return _this;\r\n    }\r\n    LinkMapColumn.prototype.setPattern = function (pattern) {\r\n        LinkColumn.prototype.setPattern.call(this, pattern);\r\n    };\r\n    LinkMapColumn.prototype.getPattern = function () {\r\n        return this.pattern;\r\n    };\r\n    LinkMapColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([LinkColumn.EVENT_PATTERN_CHANGED]);\r\n    };\r\n    LinkMapColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    LinkMapColumn.prototype.getValue = function (row) {\r\n        var r = this.getLinkMap(row);\r\n        return r.every(function (d) { return d.value == null; }) ? null : r.map(function (_a) {\r\n            var key = _a.key, value = _a.value;\r\n            return ({\r\n                key: key,\r\n                value: value ? value.href : ''\r\n            });\r\n        });\r\n    };\r\n    LinkMapColumn.prototype.getLabels = function (row) {\r\n        return this.getLinkMap(row).map(function (_a) {\r\n            var key = _a.key, value = _a.value;\r\n            return ({\r\n                key: key,\r\n                value: value ? value.alt : ''\r\n            });\r\n        });\r\n    };\r\n    LinkMapColumn.prototype.getLinkMap = function (row) {\r\n        var _this = this;\r\n        return _super.prototype.getMap.call(this, row).map(function (_a) {\r\n            var key = _a.key, value = _a.value;\r\n            return ({\r\n                key: key,\r\n                value: _this.transformValue(value, row, key)\r\n            });\r\n        });\r\n    };\r\n    LinkMapColumn.prototype.transformValue = function (v, row, key) {\r\n        if (v == null || v === '') {\r\n            return null;\r\n        }\r\n        if (typeof v === 'string') {\r\n            if (!this.pattern) {\r\n                return {\r\n                    alt: v,\r\n                    href: v\r\n                };\r\n            }\r\n            if (!this.patternFunction) {\r\n                this.patternFunction = patternFunction(this.pattern, 'item', 'key');\r\n            }\r\n            return {\r\n                alt: v,\r\n                href: this.patternFunction.call(this, v, row.v, key)\r\n            };\r\n        }\r\n        return v;\r\n    };\r\n    LinkMapColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        if (this.pattern !== this.desc.pattern) {\r\n            r.pattern = this.pattern;\r\n        }\r\n        return r;\r\n    };\r\n    LinkMapColumn.prototype.restore = function (dump, factory) {\r\n        if (dump.pattern) {\r\n            this.pattern = dump.pattern;\r\n        }\r\n        _super.prototype.restore.call(this, dump, factory);\r\n    };\r\n    LinkMapColumn.EVENT_PATTERN_CHANGED = LinkColumn.EVENT_PATTERN_CHANGED;\r\n    LinkMapColumn = tslib_1.__decorate([\r\n        toolbar('rename', 'search', 'editPattern')\r\n    ], LinkMapColumn);\r\n    return LinkMapColumn;\r\n}(MapColumn));\r\nexport default LinkMapColumn;\r\n//# sourceMappingURL=LinkMapColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { toolbar } from './annotations';\r\nimport ArrayColumn from './ArrayColumn';\r\nimport { patternFunction, integrateDefaults } from './internal';\r\nimport { EAlignment } from './StringColumn';\r\nimport LinkColumn from './LinkColumn';\r\nvar LinksColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(LinksColumn, _super);\r\n    function LinksColumn(id, desc) {\r\n        var _this = _super.call(this, id, integrateDefaults(desc, {\r\n            width: 200\r\n        })) || this;\r\n        _this.patternFunction = null;\r\n        _this.alignment = desc.alignment || EAlignment.left;\r\n        _this.escape = desc.escape !== false;\r\n        _this.pattern = desc.pattern || '';\r\n        _this.patternTemplates = desc.patternTemplates || [];\r\n        return _this;\r\n    }\r\n    LinksColumn_1 = LinksColumn;\r\n    LinksColumn.prototype.setPattern = function (pattern) {\r\n        return LinkColumn.prototype.setPattern.call(this, pattern);\r\n    };\r\n    LinksColumn.prototype.getPattern = function () {\r\n        return this.pattern;\r\n    };\r\n    LinksColumn.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([LinksColumn_1.EVENT_PATTERN_CHANGED]);\r\n    };\r\n    LinksColumn.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    LinksColumn.prototype.getValues = function (row) {\r\n        return this.getLinks(row).map(function (d) { return d ? d.href : ''; });\r\n    };\r\n    LinksColumn.prototype.getLabels = function (row) {\r\n        return this.getLinks(row).map(function (d) { return d ? d.alt : ''; });\r\n    };\r\n    LinksColumn.prototype.transformValue = function (v, row, i) {\r\n        if (v == null || v === '') {\r\n            return null;\r\n        }\r\n        if (typeof v === 'string') {\r\n            if (!this.pattern) {\r\n                return {\r\n                    alt: v,\r\n                    href: v\r\n                };\r\n            }\r\n            if (!this.patternFunction) {\r\n                this.patternFunction = patternFunction(this.pattern, 'item', 'index');\r\n            }\r\n            return {\r\n                alt: v,\r\n                href: this.patternFunction.call(this, v, row.v, i)\r\n            };\r\n        }\r\n        return v;\r\n    };\r\n    LinksColumn.prototype.getLinks = function (row) {\r\n        var _this = this;\r\n        return _super.prototype.getValues.call(this, row).map(function (v, i) {\r\n            return _this.transformValue(v, row, i);\r\n        });\r\n    };\r\n    LinksColumn.prototype.dump = function (toDescRef) {\r\n        var r = _super.prototype.dump.call(this, toDescRef);\r\n        if (this.pattern !== this.desc.pattern) {\r\n            r.pattern = this.pattern;\r\n        }\r\n        return r;\r\n    };\r\n    LinksColumn.prototype.restore = function (dump, factory) {\r\n        if (dump.pattern) {\r\n            this.pattern = dump.pattern;\r\n        }\r\n        _super.prototype.restore.call(this, dump, factory);\r\n    };\r\n    var LinksColumn_1;\r\n    LinksColumn.EVENT_PATTERN_CHANGED = LinkColumn.EVENT_PATTERN_CHANGED;\r\n    LinksColumn = LinksColumn_1 = tslib_1.__decorate([\r\n        toolbar('rename', 'search', 'editPattern')\r\n    ], LinksColumn);\r\n    return LinksColumn;\r\n}(ArrayColumn));\r\nexport default LinksColumn;\r\n//# sourceMappingURL=LinksColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { AEventDispatcher, debounce, OrderedSet, suffix } from '../internal';\r\nimport { Column, Ranking, AggregateGroupColumn, createAggregateDesc, isSupportType, EDirtyReason, RankColumn, createRankDesc, createSelectionDesc, EAggregationState } from '../model';\r\nimport { models } from '../model/models';\r\nimport { forEachIndices, everyIndices, toGroupID, unifyParents } from '../model/internal';\r\nimport { SCHEMA_REF } from './interfaces';\r\nimport { exportRanking, map2Object, object2Map } from './utils';\r\nimport { restoreCategoricalColorMapping } from '../model/CategoricalColorMappingFunction';\r\nimport { createColorMappingFunction, colorMappingFunctions } from '../model/ColorMappingFunction';\r\nimport { createMappingFunction, mappingFunctions } from '../model/MappingFunction';\r\nfunction toDirtyReason(ctx) {\r\n    var primary = ctx.primaryType;\r\n    switch (primary || '') {\r\n        case Ranking.EVENT_DIRTY_ORDER:\r\n            return ctx.args[0] || [EDirtyReason.UNKNOWN];\r\n        case Ranking.EVENT_SORT_CRITERIA_CHANGED:\r\n            return [EDirtyReason.SORT_CRITERIA_CHANGED];\r\n        case Ranking.EVENT_GROUP_CRITERIA_CHANGED:\r\n            return [EDirtyReason.GROUP_CRITERIA_CHANGED];\r\n        case Ranking.EVENT_GROUP_SORT_CRITERIA_CHANGED:\r\n            return [EDirtyReason.GROUP_SORT_CRITERIA_CHANGED];\r\n        default:\r\n            return [EDirtyReason.UNKNOWN];\r\n    }\r\n}\r\nfunction mergeDirtyOrderContext(current, next) {\r\n    var currentReason = toDirtyReason(current.self);\r\n    var nextReason = toDirtyReason(next.self);\r\n    var combined = new Set(currentReason);\r\n    for (var _i = 0, nextReason_1 = nextReason; _i < nextReason_1.length; _i++) {\r\n        var r = nextReason_1[_i];\r\n        combined.add(r);\r\n    }\r\n    var args = [Array.from(combined)];\r\n    return {\r\n        self: {\r\n            primaryType: Ranking.EVENT_DIRTY_ORDER,\r\n            args: args\r\n        },\r\n        args: args\r\n    };\r\n}\r\n/**\r\n * a basic data provider holding the data and rankings\r\n */\r\nvar ADataProvider = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ADataProvider, _super);\r\n    function ADataProvider(options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * all rankings\r\n         * @type {Array}\r\n         * @private\r\n         */\r\n        _this.rankings = [];\r\n        /**\r\n         * the current selected indices\r\n         * @type {OrderedSet}\r\n         */\r\n        _this.selection = new OrderedSet();\r\n        //Map<ranking.id@group.name, -1=expand,0=collapse,N=topN>\r\n        _this.aggregations = new Map(); // not part of = show all\r\n        _this.uid = 0;\r\n        _this.options = {\r\n            columnTypes: {},\r\n            colorMappingFunctionTypes: {},\r\n            mappingFunctionTypes: {},\r\n            singleSelection: false,\r\n            showTopN: 10,\r\n            aggregationStrategy: 'item'\r\n        };\r\n        Object.assign(_this.options, options);\r\n        _this.columnTypes = Object.assign(models(), _this.options.columnTypes);\r\n        _this.colorMappingFunctionTypes = Object.assign(colorMappingFunctions(), _this.options.colorMappingFunctionTypes);\r\n        _this.mappingFunctionTypes = Object.assign(mappingFunctions(), _this.options.mappingFunctionTypes);\r\n        _this.showTopN = _this.options.showTopN;\r\n        _this.typeFactory = _this.createTypeFactory();\r\n        return _this;\r\n    }\r\n    ADataProvider.prototype.createTypeFactory = function () {\r\n        var _this = this;\r\n        var factory = (function (d) {\r\n            var desc = _this.fromDescRef(d.desc);\r\n            if (!desc || !desc.type) {\r\n                console.warn('cannot restore column dump', d);\r\n                return new Column(d.id || '', d.desc || {});\r\n            }\r\n            _this.fixDesc(desc);\r\n            var type = _this.columnTypes[desc.type];\r\n            if (type == null) {\r\n                console.warn('invalid column type in column dump using column', d);\r\n                return new Column(d.id || '', desc);\r\n            }\r\n            var c = _this.instantiateColumn(type, '', desc, _this.typeFactory);\r\n            c.restore(d, factory);\r\n            return c;\r\n        });\r\n        factory.colorMappingFunction = createColorMappingFunction(this.colorMappingFunctionTypes, factory);\r\n        factory.mappingFunction = createMappingFunction(this.mappingFunctionTypes);\r\n        factory.categoricalColorMappingFunction = restoreCategoricalColorMapping;\r\n        return factory;\r\n    };\r\n    ADataProvider.prototype.getTypeFactory = function () {\r\n        return this.typeFactory;\r\n    };\r\n    /**\r\n     * events:\r\n     *  * column changes: addColumn, removeColumn\r\n     *  * ranking changes: addRanking, removeRanking\r\n     *  * dirty: dirty, dirtyHeder, dirtyValues\r\n     *  * selectionChanged\r\n     * @returns {string[]}\r\n     */\r\n    ADataProvider.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([\r\n            ADataProvider.EVENT_DATA_CHANGED, ADataProvider.EVENT_BUSY,\r\n            ADataProvider.EVENT_SHOWTOPN_CHANGED,\r\n            ADataProvider.EVENT_ADD_COLUMN, ADataProvider.EVENT_REMOVE_COLUMN, ADataProvider.EVENT_MOVE_COLUMN,\r\n            ADataProvider.EVENT_ADD_RANKING, ADataProvider.EVENT_REMOVE_RANKING,\r\n            ADataProvider.EVENT_DIRTY, ADataProvider.EVENT_DIRTY_HEADER, ADataProvider.EVENT_DIRTY_VALUES, ADataProvider.EVENT_DIRTY_CACHES,\r\n            ADataProvider.EVENT_ORDER_CHANGED, ADataProvider.EVENT_SELECTION_CHANGED,\r\n            ADataProvider.EVENT_ADD_DESC, ADataProvider.EVENT_CLEAR_DESC,\r\n            ADataProvider.EVENT_JUMP_TO_NEAREST, ADataProvider.EVENT_GROUP_AGGREGATION_CHANGED\r\n        ]);\r\n    };\r\n    ADataProvider.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    /**\r\n     * adds a new ranking\r\n     * @param existing an optional existing ranking to clone\r\n     * @return the new ranking\r\n     */\r\n    ADataProvider.prototype.pushRanking = function (existing) {\r\n        var r = this.cloneRanking(existing);\r\n        this.insertRanking(r);\r\n        return r;\r\n    };\r\n    ADataProvider.prototype.fireBusy = function (busy) {\r\n        this.fire(ADataProvider.EVENT_BUSY, busy);\r\n    };\r\n    ADataProvider.prototype.takeSnapshot = function (col) {\r\n        var _this = this;\r\n        this.fireBusy(true);\r\n        var r = this.cloneRanking();\r\n        var ranking = col.findMyRanker();\r\n        // by convention copy all support types and the first string column\r\n        var hasString = col.desc.type === 'string';\r\n        var hasColumn = false;\r\n        var toClone = !ranking ? [col] : ranking.children.filter(function (c) {\r\n            if (c === col) {\r\n                hasColumn = true;\r\n                return true;\r\n            }\r\n            if (!hasString && c.desc.type === 'string') {\r\n                hasString = true;\r\n                return true;\r\n            }\r\n            return isSupportType(c);\r\n        });\r\n        if (!hasColumn) {\r\n            // maybe a nested one thus not in the top level\r\n            toClone.push(col);\r\n        }\r\n        toClone.forEach(function (c) {\r\n            var clone = _this.clone(c);\r\n            r.push(clone);\r\n            if (c === col) {\r\n                clone.sortByMe();\r\n            }\r\n        });\r\n        this.insertRanking(r);\r\n        this.fireBusy(false);\r\n        return r;\r\n    };\r\n    ADataProvider.prototype.insertRanking = function (r, index) {\r\n        if (index === void 0) { index = this.rankings.length; }\r\n        this.rankings.splice(index, 0, r);\r\n        this.forward.apply(this, [r].concat(ADataProvider.FORWARD_RANKING_EVENTS));\r\n        //delayed reordering per ranking\r\n        var that = this;\r\n        r.on(Ranking.EVENT_DIRTY_ORDER + \".provider\", debounce(function () {\r\n            that.triggerReorder(r, toDirtyReason(this));\r\n        }, 100, mergeDirtyOrderContext));\r\n        this.fire([ADataProvider.EVENT_ADD_RANKING, ADataProvider.EVENT_DIRTY_HEADER, ADataProvider.EVENT_DIRTY_VALUES, ADataProvider.EVENT_DIRTY], r, index);\r\n        this.triggerReorder(r);\r\n    };\r\n    ADataProvider.prototype.triggerReorder = function (ranking, dirtyReason) {\r\n        var _this = this;\r\n        this.fireBusy(true);\r\n        var reason = dirtyReason || [EDirtyReason.UNKNOWN];\r\n        Promise.resolve(this.sort(ranking, reason)).then(function (_a) {\r\n            var groups = _a.groups, index2pos = _a.index2pos;\r\n            groups = unifyParents(groups);\r\n            _this.initAggregateState(ranking, groups);\r\n            ranking.setGroups(groups, index2pos, reason);\r\n            _this.fireBusy(false);\r\n        });\r\n    };\r\n    /**\r\n     * removes a ranking from this data provider\r\n     * @param ranking\r\n     * @returns {boolean}\r\n     */\r\n    ADataProvider.prototype.removeRanking = function (ranking) {\r\n        var i = this.rankings.indexOf(ranking);\r\n        if (i < 0) {\r\n            return false;\r\n        }\r\n        this.unforward.apply(this, [ranking].concat(ADataProvider.FORWARD_RANKING_EVENTS));\r\n        this.rankings.splice(i, 1);\r\n        ranking.on(Ranking.EVENT_DIRTY_ORDER + \".provider\", null);\r\n        this.cleanUpRanking(ranking);\r\n        this.fire([ADataProvider.EVENT_REMOVE_RANKING, ADataProvider.EVENT_DIRTY_HEADER, ADataProvider.EVENT_DIRTY_VALUES, ADataProvider.EVENT_DIRTY], ranking, i);\r\n        return true;\r\n    };\r\n    /**\r\n     * removes all rankings\r\n     */\r\n    ADataProvider.prototype.clearRankings = function () {\r\n        var _this = this;\r\n        this.rankings.forEach(function (ranking) {\r\n            _this.unforward.apply(_this, [ranking].concat(ADataProvider.FORWARD_RANKING_EVENTS));\r\n            ranking.on(Ranking.EVENT_DIRTY_ORDER + \".provider\", null);\r\n            _this.cleanUpRanking(ranking);\r\n        });\r\n        // clear\r\n        this.rankings.splice(0, this.rankings.length);\r\n        this.fire([ADataProvider.EVENT_REMOVE_RANKING, ADataProvider.EVENT_DIRTY_HEADER, ADataProvider.EVENT_DIRTY_VALUES, ADataProvider.EVENT_DIRTY], null, -1);\r\n    };\r\n    ADataProvider.prototype.clearFilters = function () {\r\n        this.rankings.forEach(function (ranking) { return ranking.clearFilters(); });\r\n    };\r\n    /**\r\n     * returns a list of all current rankings\r\n     * @returns {Ranking[]}\r\n     */\r\n    ADataProvider.prototype.getRankings = function () {\r\n        return this.rankings.slice();\r\n    };\r\n    /**\r\n     * returns the last ranking for quicker access\r\n     * @returns {Ranking}\r\n     */\r\n    ADataProvider.prototype.getFirstRanking = function () {\r\n        return this.rankings[0] || null;\r\n    };\r\n    /**\r\n     * returns the last ranking for quicker access\r\n     * @returns {Ranking}\r\n     */\r\n    ADataProvider.prototype.getLastRanking = function () {\r\n        return this.rankings[this.rankings.length - 1];\r\n    };\r\n    ADataProvider.prototype.ensureOneRanking = function () {\r\n        if (this.rankings.length === 0) {\r\n            var r = this.pushRanking();\r\n            this.push(r, createRankDesc());\r\n        }\r\n    };\r\n    ADataProvider.prototype.destroy = function () {\r\n        // dummy\r\n    };\r\n    /**\r\n     * hook method for cleaning up a ranking\r\n     * @param _ranking\r\n     */\r\n    ADataProvider.prototype.cleanUpRanking = function (_ranking) {\r\n        // dummy\r\n    };\r\n    /**\r\n     * adds a column to a ranking described by its column description\r\n     * @param ranking the ranking to add the column to\r\n     * @param desc the description of the column\r\n     * @return {Column} the newly created column or null\r\n     */\r\n    ADataProvider.prototype.push = function (ranking, desc) {\r\n        var r = this.create(desc);\r\n        if (r) {\r\n            ranking.push(r);\r\n            return r;\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     * adds a column to a ranking described by its column description\r\n     * @param ranking the ranking to add the column to\r\n     * @param index the position to insert the column\r\n     * @param desc the description of the column\r\n     * @return {Column} the newly created column or null\r\n     */\r\n    ADataProvider.prototype.insert = function (ranking, index, desc) {\r\n        var r = this.create(desc);\r\n        if (r) {\r\n            ranking.insert(r, index);\r\n            return r;\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     * creates a new unique id for a column\r\n     * @returns {string}\r\n     */\r\n    ADataProvider.prototype.nextId = function () {\r\n        return \"col\" + this.uid++;\r\n    };\r\n    ADataProvider.prototype.fixDesc = function (desc) {\r\n        var _this = this;\r\n        //hacks for provider dependent descriptors\r\n        if (desc.type === 'selection') {\r\n            desc.accessor = function (row) { return _this.isSelected(row.i); };\r\n            desc.setter = function (index, value) { return value ? _this.select(index) : _this.deselect(index); };\r\n            desc.setterAll = function (indices, value) { return value ? _this.selectAll(indices) : _this.deselectAll(indices); };\r\n        }\r\n        else if (desc.type === 'aggregate') {\r\n            desc.isAggregated = function (ranking, group) { return _this.getAggregationState(ranking, group); };\r\n            desc.setAggregated = function (ranking, group, value) { return _this.setAggregationState(ranking, group, value); };\r\n        }\r\n        return desc;\r\n    };\r\n    ADataProvider.prototype.cleanDesc = function (desc) {\r\n        //hacks for provider dependent descriptors\r\n        if (desc.type === 'selection') {\r\n            delete desc.accessor;\r\n            delete desc.setter;\r\n            delete desc.setterAll;\r\n        }\r\n        else if (desc.type === 'aggregate') {\r\n            delete desc.isAggregated;\r\n            delete desc.setAggregated;\r\n        }\r\n        return desc;\r\n    };\r\n    /**\r\n     * creates an internal column model out of the given column description\r\n     * @param desc\r\n     * @returns {Column} the new column or null if it can't be created\r\n     */\r\n    ADataProvider.prototype.create = function (desc) {\r\n        this.fixDesc(desc);\r\n        //find by type and instantiate\r\n        var type = this.columnTypes[desc.type];\r\n        if (type) {\r\n            return this.instantiateColumn(type, this.nextId(), desc, this.typeFactory);\r\n        }\r\n        return null;\r\n    };\r\n    ADataProvider.prototype.instantiateColumn = function (type, id, desc, typeFactory) {\r\n        return new type(id, desc, typeFactory);\r\n    };\r\n    /**\r\n     * clones a column by dumping and restoring\r\n     * @param col\r\n     * @returns {Column}\r\n     */\r\n    ADataProvider.prototype.clone = function (col) {\r\n        var dump = this.dumpColumn(col);\r\n        return this.restoreColumn(dump);\r\n    };\r\n    /**\r\n     * restores a column from a dump\r\n     * @param dump\r\n     * @returns {Column}\r\n     */\r\n    ADataProvider.prototype.restoreColumn = function (dump) {\r\n        var c = this.typeFactory(dump);\r\n        c.assignNewId(this.nextId.bind(this));\r\n        return c;\r\n    };\r\n    /**\r\n     * finds a column in all rankings returning the first match\r\n     * @param idOrFilter by id or by a filter function\r\n     * @returns {Column}\r\n     */\r\n    ADataProvider.prototype.find = function (idOrFilter) {\r\n        //convert to function\r\n        var filter = typeof (idOrFilter) === 'string' ? function (col) { return col.id === idOrFilter; } : idOrFilter;\r\n        for (var _i = 0, _a = this.rankings; _i < _a.length; _i++) {\r\n            var ranking = _a[_i];\r\n            var r = ranking.find(filter);\r\n            if (r) {\r\n                return r;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     * dumps this whole provider including selection and the rankings\r\n     * @returns {{uid: number, selection: number[], rankings: *[]}}\r\n     */\r\n    ADataProvider.prototype.dump = function () {\r\n        var _this = this;\r\n        return {\r\n            '$schema': SCHEMA_REF,\r\n            uid: this.uid,\r\n            selection: this.getSelection(),\r\n            aggregations: map2Object(this.aggregations),\r\n            rankings: this.rankings.map(function (r) { return r.dump(_this.toDescRef.bind(_this)); }),\r\n            showTopN: this.showTopN\r\n        };\r\n    };\r\n    /**\r\n     * dumps a specific column\r\n     */\r\n    ADataProvider.prototype.dumpColumn = function (col) {\r\n        return col.dump(this.toDescRef.bind(this));\r\n    };\r\n    /**\r\n     * for better dumping describe reference, by default just return the description\r\n     */\r\n    ADataProvider.prototype.toDescRef = function (desc) {\r\n        return desc;\r\n    };\r\n    /**\r\n     * inverse operation of toDescRef\r\n     */\r\n    ADataProvider.prototype.fromDescRef = function (descRef) {\r\n        return descRef;\r\n    };\r\n    ADataProvider.prototype.restoreRanking = function (dump) {\r\n        var ranking = this.cloneRanking();\r\n        ranking.restore(dump, this.typeFactory);\r\n        var idGenerator = this.nextId.bind(this);\r\n        ranking.children.forEach(function (c) { return c.assignNewId(idGenerator); });\r\n        return ranking;\r\n    };\r\n    ADataProvider.prototype.restore = function (dump) {\r\n        var _this = this;\r\n        //clean old\r\n        this.clearRankings();\r\n        //restore selection\r\n        this.uid = dump.uid || 0;\r\n        if (dump.selection) {\r\n            dump.selection.forEach(function (s) { return _this.selection.add(s); });\r\n        }\r\n        if (dump.showTopN != null) {\r\n            this.showTopN = dump.showTopN;\r\n        }\r\n        if (dump.aggregations) {\r\n            this.aggregations.clear();\r\n            if (Array.isArray(dump.aggregations)) {\r\n                dump.aggregations.forEach(function (a) { return _this.aggregations.set(a, 0); });\r\n            }\r\n            else {\r\n                object2Map(dump.aggregations).forEach(function (v, k) { return _this.aggregations.set(k, v); });\r\n            }\r\n        }\r\n        //restore rankings\r\n        if (dump.rankings) {\r\n            dump.rankings.forEach(function (r) {\r\n                var ranking = _this.cloneRanking();\r\n                ranking.restore(r, _this.typeFactory);\r\n                //if no rank column add one\r\n                if (!ranking.children.some(function (d) { return d instanceof RankColumn; })) {\r\n                    ranking.insert(_this.create(createRankDesc()), 0);\r\n                }\r\n                _this.insertRanking(ranking);\r\n            });\r\n        }\r\n        //assign new ids\r\n        var idGenerator = this.nextId.bind(this);\r\n        this.rankings.forEach(function (r) {\r\n            r.children.forEach(function (c) { return c.assignNewId(idGenerator); });\r\n        });\r\n    };\r\n    /**\r\n     * generates a default ranking by using all column descriptions ones\r\n     */\r\n    ADataProvider.prototype.deriveDefault = function (addSupportType) {\r\n        var _this = this;\r\n        if (addSupportType === void 0) { addSupportType = true; }\r\n        var r = this.pushRanking();\r\n        if (addSupportType) {\r\n            r.push(this.create(createAggregateDesc()));\r\n            r.push(this.create(createRankDesc()));\r\n            if (this.options.singleSelection !== false) {\r\n                r.push(this.create(createSelectionDesc()));\r\n            }\r\n        }\r\n        this.getColumns().forEach(function (col) {\r\n            var c = _this.create(col);\r\n            if (!c || isSupportType(c)) {\r\n                return;\r\n            }\r\n            r.push(c);\r\n        });\r\n        return r;\r\n    };\r\n    ADataProvider.prototype.isAggregated = function (ranking, group) {\r\n        return this.getTopNAggregated(ranking, group) >= 0;\r\n    };\r\n    ADataProvider.prototype.getAggregationState = function (ranking, group) {\r\n        var n = this.getTopNAggregated(ranking, group);\r\n        return n < 0 ? EAggregationState.EXPAND : (n === 0 ? EAggregationState.COLLAPSE : EAggregationState.EXPAND_TOP_N);\r\n    };\r\n    ADataProvider.prototype.setAggregated = function (ranking, group, value) {\r\n        return this.setAggregationState(ranking, group, value ? EAggregationState.COLLAPSE : EAggregationState.EXPAND);\r\n    };\r\n    ADataProvider.prototype.setAggregationState = function (ranking, group, value) {\r\n        this.setTopNAggregated(ranking, group, value === EAggregationState.COLLAPSE ? 0 : (value === EAggregationState.EXPAND_TOP_N ? this.showTopN : -1));\r\n    };\r\n    ADataProvider.prototype.getTopNAggregated = function (ranking, group) {\r\n        var g = group;\r\n        while (g) {\r\n            var key = ranking.id + \"@\" + toGroupID(g);\r\n            if (this.aggregations.has(key)) {\r\n                // propagate to leaf\r\n                var v = this.aggregations.get(key);\r\n                this.aggregations.set(ranking.id + \"@\" + toGroupID(group), v);\r\n                return v;\r\n            }\r\n            g = g.parent;\r\n        }\r\n        return -1;\r\n    };\r\n    ADataProvider.prototype.unaggregateParents = function (ranking, group) {\r\n        var g = group.parent;\r\n        while (g) {\r\n            this.aggregations.delete(ranking.id + \"@\" + toGroupID(g));\r\n            g = g.parent;\r\n        }\r\n    };\r\n    ADataProvider.prototype.getAggregationStrategy = function () {\r\n        return this.options.aggregationStrategy;\r\n    };\r\n    ADataProvider.prototype.initAggregateState = function (ranking, groups) {\r\n        var initial = -1;\r\n        switch (this.getAggregationStrategy()) {\r\n            case 'group':\r\n                initial = 0;\r\n                break;\r\n            case 'item':\r\n            case 'group+item':\r\n            case 'group+item+top':\r\n                initial = -1;\r\n                break;\r\n            case 'group+top+item':\r\n                initial = this.showTopN;\r\n                break;\r\n        }\r\n        for (var _i = 0, groups_1 = groups; _i < groups_1.length; _i++) {\r\n            var group = groups_1[_i];\r\n            var key = ranking.id + \"@\" + toGroupID(group);\r\n            if (!this.aggregations.has(key) && initial >= 0) {\r\n                this.aggregations.set(key, initial);\r\n            }\r\n        }\r\n    };\r\n    ADataProvider.prototype.setTopNAggregated = function (ranking, group, value) {\r\n        this.unaggregateParents(ranking, group);\r\n        var key = ranking.id + \"@\" + toGroupID(group);\r\n        var current = this.getTopNAggregated(ranking, group);\r\n        if (current === value) {\r\n            return;\r\n        }\r\n        if (value >= 0) {\r\n            this.aggregations.set(key, value);\r\n        }\r\n        else {\r\n            this.aggregations.delete(key);\r\n        }\r\n        this.fire([ADataProvider.EVENT_GROUP_AGGREGATION_CHANGED, ADataProvider.EVENT_DIRTY_VALUES, ADataProvider.EVENT_DIRTY], ranking, group, value);\r\n    };\r\n    ADataProvider.prototype.aggregateAllOf = function (ranking, aggregateAll, groups) {\r\n        if (groups === void 0) { groups = ranking.getGroups(); }\r\n        var v;\r\n        if (typeof aggregateAll === 'boolean') {\r\n            v = aggregateAll ? 0 : -1;\r\n        }\r\n        else if (aggregateAll === EAggregationState.COLLAPSE) {\r\n            v = 0;\r\n        }\r\n        else if (aggregateAll === EAggregationState.EXPAND) {\r\n            v = -1;\r\n        }\r\n        else if (aggregateAll === EAggregationState.EXPAND_TOP_N) {\r\n            v = this.showTopN;\r\n        }\r\n        else {\r\n            v = aggregateAll;\r\n        }\r\n        for (var _i = 0, groups_2 = groups; _i < groups_2.length; _i++) {\r\n            var group = groups_2[_i];\r\n            this.unaggregateParents(ranking, group);\r\n            var current = this.getTopNAggregated(ranking, group);\r\n            if (current === v) {\r\n                continue;\r\n            }\r\n            var key = ranking.id + \"@\" + toGroupID(group);\r\n            if (v >= 0) {\r\n                this.aggregations.set(key, v);\r\n            }\r\n            else {\r\n                this.aggregations.delete(key);\r\n            }\r\n        }\r\n        this.fire([ADataProvider.EVENT_GROUP_AGGREGATION_CHANGED, ADataProvider.EVENT_DIRTY_VALUES, ADataProvider.EVENT_DIRTY], ranking, groups, v >= 0, v);\r\n    };\r\n    ADataProvider.prototype.getShowTopN = function () {\r\n        return this.showTopN;\r\n    };\r\n    ADataProvider.prototype.setShowTopN = function (value) {\r\n        if (this.showTopN === value) {\r\n            return;\r\n        }\r\n        // update entries\r\n        for (var _i = 0, _a = Array.from(this.aggregations.entries()); _i < _a.length; _i++) {\r\n            var _b = _a[_i], k = _b[0], v = _b[1];\r\n            if (v === this.showTopN) {\r\n                this.aggregations.set(k, value);\r\n            }\r\n        }\r\n        this.fire([ADataProvider.EVENT_SHOWTOPN_CHANGED, ADataProvider.EVENT_DIRTY_VALUES, ADataProvider.EVENT_DIRTY], this.showTopN, this.showTopN = value);\r\n    };\r\n    /**\r\n     * is the given row selected\r\n     * @param index\r\n     * @return {boolean}\r\n     */\r\n    ADataProvider.prototype.isSelected = function (index) {\r\n        return this.selection.has(index);\r\n    };\r\n    /**\r\n     * also select the given row\r\n     * @param index\r\n     */\r\n    ADataProvider.prototype.select = function (index) {\r\n        if (this.selection.has(index)) {\r\n            return; //no change\r\n        }\r\n        if (this.options.singleSelection === true && this.selection.size > 0) {\r\n            this.selection.clear();\r\n        }\r\n        this.selection.add(index);\r\n        this.fire(ADataProvider.EVENT_SELECTION_CHANGED, this.getSelection());\r\n    };\r\n    ADataProvider.prototype.jumpToNearest = function (indices) {\r\n        if (indices.length === 0) {\r\n            return;\r\n        }\r\n        this.fire(ADataProvider.EVENT_JUMP_TO_NEAREST, indices);\r\n    };\r\n    /**\r\n     * also select all the given rows\r\n     * @param indices\r\n     */\r\n    ADataProvider.prototype.selectAll = function (indices) {\r\n        var _this = this;\r\n        if (everyIndices(indices, function (i) { return _this.selection.has(i); })) {\r\n            return; //no change\r\n        }\r\n        if (this.options.singleSelection === true) {\r\n            this.selection.clear();\r\n            if (indices.length > 0) {\r\n                this.selection.add(indices[0]);\r\n            }\r\n        }\r\n        else {\r\n            forEachIndices(indices, function (index) {\r\n                _this.selection.add(index);\r\n            });\r\n        }\r\n        this.fire(ADataProvider.EVENT_SELECTION_CHANGED, this.getSelection());\r\n    };\r\n    ADataProvider.prototype.selectAllOf = function (ranking) {\r\n        this.setSelection(Array.from(ranking.getOrder()));\r\n    };\r\n    /**\r\n     * set the selection to the given rows\r\n     * @param indices\r\n     */\r\n    ADataProvider.prototype.setSelection = function (indices) {\r\n        var _this = this;\r\n        if (indices.length === 0) {\r\n            return this.clearSelection();\r\n        }\r\n        if (this.selection.size === indices.length && indices.every(function (i) { return _this.selection.has(i); })) {\r\n            return; //no change\r\n        }\r\n        this.selection.clear();\r\n        this.selectAll(indices);\r\n    };\r\n    /**\r\n     * toggles the selection of the given data index\r\n     * @param index\r\n     * @param additional just this element or all\r\n     * @returns {boolean} whether the index is currently selected\r\n     */\r\n    ADataProvider.prototype.toggleSelection = function (index, additional) {\r\n        if (additional === void 0) { additional = false; }\r\n        if (this.isSelected(index)) {\r\n            if (additional) {\r\n                this.deselect(index);\r\n            }\r\n            else {\r\n                this.clearSelection();\r\n            }\r\n            return false;\r\n        }\r\n        if (additional) {\r\n            this.select(index);\r\n        }\r\n        else {\r\n            this.setSelection([index]);\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * deselect the given row\r\n     * @param index\r\n     */\r\n    ADataProvider.prototype.deselect = function (index) {\r\n        if (!this.selection.has(index)) {\r\n            return; //no change\r\n        }\r\n        this.selection.delete(index);\r\n        this.fire(ADataProvider.EVENT_SELECTION_CHANGED, this.getSelection());\r\n    };\r\n    /**\r\n     * also select all the given rows\r\n     * @param indices\r\n     */\r\n    ADataProvider.prototype.deselectAll = function (indices) {\r\n        var _this = this;\r\n        if (everyIndices(indices, function (i) { return !_this.selection.has(i); })) {\r\n            return; //no change\r\n        }\r\n        forEachIndices(indices, function (index) {\r\n            _this.selection.delete(index);\r\n        });\r\n        this.fire(ADataProvider.EVENT_SELECTION_CHANGED, this.getSelection());\r\n    };\r\n    /**\r\n     * returns a promise containing the selected rows\r\n     * @return {Promise<any[]>}\r\n     */\r\n    ADataProvider.prototype.selectedRows = function () {\r\n        if (this.selection.size === 0) {\r\n            return [];\r\n        }\r\n        return this.view(this.getSelection());\r\n    };\r\n    /**\r\n     * returns the currently selected indices\r\n     * @returns {Array}\r\n     */\r\n    ADataProvider.prototype.getSelection = function () {\r\n        return Array.from(this.selection);\r\n    };\r\n    /**\r\n     * clears the selection\r\n     */\r\n    ADataProvider.prototype.clearSelection = function () {\r\n        if (this.selection.size === 0) {\r\n            return; //no change\r\n        }\r\n        this.selection.clear();\r\n        this.fire(ADataProvider.EVENT_SELECTION_CHANGED, [], false);\r\n    };\r\n    /**\r\n     * utility to export a ranking to a table with the given separator\r\n     * @param ranking\r\n     * @param options\r\n     * @returns {Promise<string>}\r\n     */\r\n    ADataProvider.prototype.exportTable = function (ranking, options) {\r\n        if (options === void 0) { options = {}; }\r\n        return Promise.resolve(this.view(ranking.getOrder())).then(function (data) { return exportRanking(ranking, data, options); });\r\n    };\r\n    ADataProvider.EVENT_SELECTION_CHANGED = 'selectionChanged';\r\n    ADataProvider.EVENT_DATA_CHANGED = 'dataChanged';\r\n    ADataProvider.EVENT_ADD_COLUMN = Ranking.EVENT_ADD_COLUMN;\r\n    ADataProvider.EVENT_MOVE_COLUMN = Ranking.EVENT_MOVE_COLUMN;\r\n    ADataProvider.EVENT_REMOVE_COLUMN = Ranking.EVENT_REMOVE_COLUMN;\r\n    ADataProvider.EVENT_ADD_RANKING = 'addRanking';\r\n    ADataProvider.EVENT_REMOVE_RANKING = 'removeRanking';\r\n    ADataProvider.EVENT_DIRTY = Ranking.EVENT_DIRTY;\r\n    ADataProvider.EVENT_DIRTY_HEADER = Ranking.EVENT_DIRTY_HEADER;\r\n    ADataProvider.EVENT_DIRTY_VALUES = Ranking.EVENT_DIRTY_VALUES;\r\n    ADataProvider.EVENT_DIRTY_CACHES = Ranking.EVENT_DIRTY_CACHES;\r\n    ADataProvider.EVENT_ORDER_CHANGED = Ranking.EVENT_ORDER_CHANGED;\r\n    ADataProvider.EVENT_SHOWTOPN_CHANGED = 'showTopNChanged';\r\n    ADataProvider.EVENT_ADD_DESC = 'addDesc';\r\n    ADataProvider.EVENT_CLEAR_DESC = 'clearDesc';\r\n    ADataProvider.EVENT_JUMP_TO_NEAREST = 'jumpToNearest';\r\n    ADataProvider.EVENT_GROUP_AGGREGATION_CHANGED = AggregateGroupColumn.EVENT_AGGREGATE;\r\n    ADataProvider.EVENT_BUSY = 'busy';\r\n    ADataProvider.FORWARD_RANKING_EVENTS = suffix('.provider', Ranking.EVENT_ADD_COLUMN, Ranking.EVENT_REMOVE_COLUMN, Ranking.EVENT_DIRTY, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_MOVE_COLUMN, Ranking.EVENT_ORDER_CHANGED, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY_CACHES);\r\n    return ADataProvider;\r\n}(AEventDispatcher));\r\nexport default ADataProvider;\r\n//# sourceMappingURL=ADataProvider.js.map","import { ActionColumn, AggregateGroupColumn, AnnotateColumn, BooleanColumn, BooleansColumn, BoxPlotColumn, CategoricalColumn, CategoricalMapColumn, CategoricalsColumn, DateColumn, DatesColumn, DatesMapColumn, GroupColumn, HierarchyColumn, ImpositionBoxPlotColumn, ImpositionCompositeColumn, ImpositionCompositesColumn, LinkColumn, LinkMapColumn, LinksColumn, NestedColumn, NumberColumn, NumberMapColumn, NumbersColumn, OrdinalColumn, RankColumn, ReduceColumn, ScriptColumn, SelectionColumn, SetColumn, StackColumn, StringColumn, StringMapColumn, StringsColumn } from './';\r\n/**\r\n * a map of all known column types\r\n */\r\nexport function models() {\r\n    return {\r\n        actions: ActionColumn,\r\n        aggregate: AggregateGroupColumn,\r\n        annotate: AnnotateColumn,\r\n        boolean: BooleanColumn,\r\n        booleans: BooleansColumn,\r\n        boxplot: BoxPlotColumn,\r\n        categorical: CategoricalColumn,\r\n        categoricalMap: CategoricalMapColumn,\r\n        categoricals: CategoricalsColumn,\r\n        date: DateColumn,\r\n        dateMap: DatesMapColumn,\r\n        dates: DatesColumn,\r\n        group: GroupColumn,\r\n        hierarchy: HierarchyColumn,\r\n        imposition: ImpositionCompositeColumn,\r\n        impositionBoxPlot: ImpositionBoxPlotColumn,\r\n        impositions: ImpositionCompositesColumn,\r\n        reduce: ReduceColumn,\r\n        nested: NestedColumn,\r\n        number: NumberColumn,\r\n        numbers: NumbersColumn,\r\n        numberMap: NumberMapColumn,\r\n        ordinal: OrdinalColumn,\r\n        rank: RankColumn,\r\n        script: ScriptColumn,\r\n        selection: SelectionColumn,\r\n        set: SetColumn,\r\n        stack: StackColumn,\r\n        string: StringColumn,\r\n        stringMap: StringMapColumn,\r\n        strings: StringsColumn,\r\n        link: LinkColumn,\r\n        linkMap: LinkMapColumn,\r\n        links: LinksColumn\r\n    };\r\n}\r\n//# sourceMappingURL=models.js.map","export { ABORTED } from 'lineupengine';\r\nexport var SCHEMA_REF = \"https://lineup.js.org/develop/schema.4.0.0.json\";\r\n//# sourceMappingURL=interfaces.js.map","import * as tslib_1 from \"tslib\";\r\nimport { Ranking } from '../model';\r\nimport ADataProvider from './ADataProvider';\r\nimport { isComplexAccessor, rowGetter, rowComplexGetter, rowGuessGetter } from '../internal';\r\nfunction injectAccessor(d) {\r\n    d.accessor = d.accessor || (d.column ? (isComplexAccessor(d.column) ? rowComplexGetter : rowGetter) : rowGuessGetter);\r\n    d.label = d.label || d.column;\r\n    return d;\r\n}\r\n/**\r\n * common base implementation of a DataProvider with a fixed list of column descriptions\r\n */\r\nvar ACommonDataProvider = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ACommonDataProvider, _super);\r\n    function ACommonDataProvider(columns, options) {\r\n        if (columns === void 0) { columns = []; }\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this, options) || this;\r\n        _this.columns = columns;\r\n        _this.rankingIndex = 0;\r\n        //generate the accessor\r\n        columns.forEach(injectAccessor);\r\n        return _this;\r\n    }\r\n    ACommonDataProvider.prototype.cloneRanking = function (existing) {\r\n        var _this = this;\r\n        var id = this.nextRankingId();\r\n        var clone = new Ranking(id);\r\n        if (existing) { //copy the ranking of the other one\r\n            //TODO better cloning\r\n            existing.children.forEach(function (child) {\r\n                _this.push(clone, child.desc);\r\n            });\r\n        }\r\n        return clone;\r\n    };\r\n    /**\r\n     * adds another column description to this data provider\r\n     * @param column\r\n     */\r\n    ACommonDataProvider.prototype.pushDesc = function (column) {\r\n        injectAccessor(column);\r\n        this.columns.push(column);\r\n        this.fire(ADataProvider.EVENT_ADD_DESC, column);\r\n    };\r\n    ACommonDataProvider.prototype.clearColumns = function () {\r\n        this.clearRankings();\r\n        this.columns.splice(0, this.columns.length);\r\n        this.fire(ADataProvider.EVENT_CLEAR_DESC);\r\n    };\r\n    ACommonDataProvider.prototype.getColumns = function () {\r\n        return this.columns.slice();\r\n    };\r\n    ACommonDataProvider.prototype.findDesc = function (ref) {\r\n        return this.columns.filter(function (c) { return c.column === ref; })[0];\r\n    };\r\n    /**\r\n     * identify by the tuple type@columnname\r\n     * @param desc\r\n     * @returns {string}\r\n     */\r\n    ACommonDataProvider.prototype.toDescRef = function (desc) {\r\n        return typeof desc.column !== 'undefined' ? desc.type + \"@\" + desc.column : this.cleanDesc(Object.assign({}, desc));\r\n    };\r\n    ACommonDataProvider.prototype.fromDescRef = function (descRef) {\r\n        if (typeof (descRef) === 'string') {\r\n            return this.columns.find(function (d) { return d.type + \"@\" + d.column === descRef || d.type === descRef; });\r\n        }\r\n        var existing = this.columns.find(function (d) { return descRef.column === d.column && descRef.label === d.label && descRef.type === d.type; });\r\n        if (existing) {\r\n            return existing;\r\n        }\r\n        return descRef;\r\n    };\r\n    ACommonDataProvider.prototype.restore = function (dump) {\r\n        _super.prototype.restore.call(this, dump);\r\n        this.rankingIndex = 1 + Math.max.apply(Math, this.getRankings().map(function (r) { return +r.id.substring(4); }));\r\n    };\r\n    ACommonDataProvider.prototype.nextRankingId = function () {\r\n        return \"rank\" + this.rankingIndex++;\r\n    };\r\n    return ACommonDataProvider;\r\n}(ADataProvider));\r\nexport default ACommonDataProvider;\r\n//# sourceMappingURL=ACommonDataProvider.js.map","import { createIndexArray } from '../internal';\r\nimport { FIRST_IS_MISSING, FIRST_IS_NAN, ECompareValueType } from '../model';\r\nvar missingUInt8 = FIRST_IS_MISSING > 0 ? 255 : 0;\r\nvar missingBinary = missingUInt8;\r\nvar missingUInt16 = FIRST_IS_MISSING > 0 ? 65535 : 0; // max or 0\r\nvar missingUInt32 = FIRST_IS_MISSING > 0 ? 4294967295 : 0; // max or 0\r\nvar missingInt8 = FIRST_IS_MISSING > 0 ? 127 : -128; // max or min\r\nvar missingInt16 = FIRST_IS_MISSING > 0 ? 32767 : -32768; // max or min\r\nvar missingInt32 = FIRST_IS_MISSING > 0 ? 2147483647 : -2147483648; // max or min\r\nvar missingFloat = FIRST_IS_NAN > 0 ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;\r\nvar missingFloatAsc = FIRST_IS_MISSING > 0 ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;\r\nvar missingString = FIRST_IS_MISSING > 0 ? '\\uffff' : '\\u0000'; // first or last character\r\nfunction chooseMissingByLength(length) {\r\n    if (length <= 255) {\r\n        return missingBinary;\r\n    }\r\n    if (length <= 65535) {\r\n        return missingUInt16;\r\n    }\r\n    return missingUInt32;\r\n}\r\nfunction toCompareLookUp(rawLength, type) {\r\n    switch (type) {\r\n        case ECompareValueType.COUNT:\r\n            return createIndexArray(rawLength + 1);\r\n        case ECompareValueType.BINARY:\r\n        case ECompareValueType.UINT8:\r\n            return new Uint8Array(rawLength);\r\n        case ECompareValueType.UINT16:\r\n            return new Uint16Array(rawLength);\r\n        case ECompareValueType.UINT32:\r\n            return new Uint32Array(rawLength);\r\n        case ECompareValueType.INT8:\r\n            return new Int8Array(rawLength);\r\n        case ECompareValueType.INT16:\r\n            return new Int16Array(rawLength);\r\n        case ECompareValueType.INT32:\r\n            return new Int32Array(rawLength);\r\n        case ECompareValueType.STRING:\r\n            return [];\r\n        case ECompareValueType.FLOAT_ASC:\r\n        case ECompareValueType.FLOAT:\r\n            return new Float32Array(rawLength);\r\n        case ECompareValueType.DOUBLE_ASC:\r\n        case ECompareValueType.DOUBLE:\r\n            return new Float64Array(rawLength);\r\n    }\r\n}\r\nfunction createSetter(type, lookup, missingCount) {\r\n    switch (type) {\r\n        case ECompareValueType.BINARY: // just 0 or 1 -> convert to 0=-Ininity 1 2 255=+Infinity\r\n            return function (index, v) { return lookup[index] = v == null || isNaN(v) ? missingBinary : v + 1; };\r\n        case ECompareValueType.COUNT: // uint32\r\n            return function (index, v) { return lookup[index] = v == null || isNaN(v) ? missingCount : v + 1; };\r\n        case ECompareValueType.UINT8: // shift by one to have 0 for -Inf\r\n            return function (index, v) { return lookup[index] = v == null || isNaN(v) ? missingInt8 : v + 1; };\r\n        case ECompareValueType.UINT16: // shift by one to have 0 for -Inf\r\n            return function (index, v) { return lookup[index] = v == null || isNaN(v) ? missingInt16 : v + 1; };\r\n        case ECompareValueType.UINT32: // shift by one to have 0 for -Inf\r\n            return function (index, v) { return lookup[index] = v == null || isNaN(v) ? missingInt32 : v + 1; };\r\n        case ECompareValueType.INT8:\r\n            return function (index, v) { return lookup[index] = v == null || isNaN(v) ? missingInt8 : v; };\r\n        case ECompareValueType.INT16:\r\n            return function (index, v) { return lookup[index] = v == null || isNaN(v) ? missingInt16 : v; };\r\n        case ECompareValueType.INT32:\r\n            return function (index, v) { return lookup[index] = v == null || isNaN(v) ? missingInt32 : v; };\r\n        case ECompareValueType.STRING:\r\n            return function (index, v) { return lookup[index] = v == null || v === '' ? missingString : v; };\r\n        case ECompareValueType.FLOAT:\r\n        case ECompareValueType.DOUBLE:\r\n            return function (index, v) { return lookup[index] = v == null || isNaN(v) ? missingFloat : v; };\r\n        case ECompareValueType.FLOAT_ASC:\r\n        case ECompareValueType.DOUBLE_ASC:\r\n            return function (index, v) { return lookup[index] = v == null || isNaN(v) ? missingFloatAsc : v; };\r\n    }\r\n}\r\nvar CompareLookup = /** @class */ (function () {\r\n    function CompareLookup(rawLength, isSorting, ranking, valueCaches) {\r\n        this.criteria = [];\r\n        this.data = [];\r\n        var missingCount = chooseMissingByLength(rawLength + 1); // + 1 for the value shift to have 0 as start\r\n        for (var _i = 0, _a = (isSorting ? ranking.getSortCriteria() : ranking.getGroupSortCriteria()); _i < _a.length; _i++) {\r\n            var c = _a[_i];\r\n            var v = (isSorting ? c.col.toCompareValueType() : c.col.toCompareGroupValueType());\r\n            var valueCache = valueCaches ? valueCaches(c.col) : undefined;\r\n            this.criteria.push({ col: c.col, valueCache: valueCache });\r\n            if (!Array.isArray(v)) {\r\n                var lookup = toCompareLookUp(rawLength, v);\r\n                this.data.push({ asc: c.asc, v: v, lookup: lookup, setter: createSetter(v, lookup, missingCount) });\r\n                continue;\r\n            }\r\n            for (var _b = 0, v_1 = v; _b < v_1.length; _b++) {\r\n                var vi = v_1[_b];\r\n                var lookup = toCompareLookUp(rawLength, vi);\r\n                this.data.push({ asc: c.asc, v: vi, lookup: lookup, setter: createSetter(vi, lookup, missingCount) });\r\n            }\r\n        }\r\n        if (isSorting) {\r\n            return;\r\n        }\r\n        {\r\n            var v = ECompareValueType.STRING;\r\n            var lookup = toCompareLookUp(rawLength, v);\r\n            this.data.push({ asc: true, v: v, lookup: lookup, setter: createSetter(v, lookup, missingCount) });\r\n        }\r\n    }\r\n    Object.defineProperty(CompareLookup.prototype, \"sortOrders\", {\r\n        get: function () {\r\n            return this.data.map(function (d) { return ({ asc: d.asc, lookup: d.lookup }); });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CompareLookup.prototype, \"transferAbles\", {\r\n        get: function () {\r\n            // so a typed array\r\n            return this.data.map(function (d) { return d.lookup; }).filter(function (d) { return !Array.isArray(d); }).map(function (d) { return d.buffer; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    CompareLookup.prototype.push = function (row) {\r\n        var i = 0;\r\n        for (var _i = 0, _a = this.criteria; _i < _a.length; _i++) {\r\n            var c = _a[_i];\r\n            var r = c.col.toCompareValue(row, c.valueCache ? c.valueCache(row.i) : undefined);\r\n            if (!Array.isArray(r)) {\r\n                this.data[i++].setter(row.i, r);\r\n                continue;\r\n            }\r\n            for (var _b = 0, r_1 = r; _b < r_1.length; _b++) {\r\n                var ri = r_1[_b];\r\n                this.data[i++].setter(row.i, ri);\r\n            }\r\n        }\r\n    };\r\n    CompareLookup.prototype.pushValues = function (dataIndex, vs) {\r\n        for (var i = 0; i < vs.length; ++i) {\r\n            this.data[i].setter(dataIndex, vs[i]);\r\n        }\r\n    };\r\n    CompareLookup.prototype.free = function () {\r\n        // free up to save memory\r\n        this.data.splice(0, this.data.length);\r\n    };\r\n    return CompareLookup;\r\n}());\r\nexport { CompareLookup };\r\n//# sourceMappingURL=sort.js.map","export function isPromiseLike(p) {\r\n    return p != null && p && typeof p.then === 'function';\r\n}\r\n/**\r\n * the symbol returned when the promise was aborted\r\n */\r\nexport var ABORTED = Symbol('aborted');\r\nfunction thenFactory(loader, isAborted, abort) {\r\n    function then(onfulfilled, _onrejected) {\r\n        var fullfiller = loader.then(function (loaded) {\r\n            var loadedOrAborted = isAborted() ? ABORTED : loaded;\r\n            var res = onfulfilled ? onfulfilled(loadedOrAborted) : loadedOrAborted;\r\n            if (isPromiseLike(res)) {\r\n                return res.then(function (r) {\r\n                    return isAborted() ? ABORTED : r;\r\n                });\r\n            }\r\n            return isAborted() ? ABORTED : res;\r\n        });\r\n        return {\r\n            then: thenFactory(fullfiller, isAborted, abort),\r\n            abort: abort,\r\n            isAborted: isAborted\r\n        };\r\n    }\r\n    return then;\r\n}\r\n/**\r\n * abort able Promise wrapper, returns a promise which can be aborted, and trying to avoid executing therefore the wrapped promise\r\n * @param {Promise<T>} loader\r\n * @returns {any}\r\n */\r\nexport default function abortAble(loader) {\r\n    var aborted = null;\r\n    var isAborted = function () { return aborted === null; };\r\n    var aborter = new Promise(function (resolve) { return aborted = resolve; });\r\n    var abort = function () {\r\n        if (aborted == null) {\r\n            return;\r\n        }\r\n        aborted(ABORTED);\r\n        aborted = null;\r\n    };\r\n    var race = Promise.race([aborter, loader]);\r\n    return {\r\n        then: thenFactory(race, isAborted, abort),\r\n        abort: abort,\r\n        isAborted: isAborted\r\n    };\r\n}\r\nexport function abortAbleFetch(input, init) {\r\n    var controller = new AbortController();\r\n    var race = new Promise(function (resolve, reject) {\r\n        var r = fetch(input, Object.assign({ signal: controller.signal }, init || {}));\r\n        r.then(resolve);\r\n        r.catch(function (error) {\r\n            if (error instanceof DOMException) {\r\n                resolve(ABORTED);\r\n            }\r\n            else {\r\n                reject(error);\r\n            }\r\n        });\r\n    });\r\n    var abort = controller.abort.bind(controller);\r\n    var isAborted = function () { return controller.signal.aborted; };\r\n    return {\r\n        then: thenFactory(race, isAborted, abort),\r\n        abort: abort,\r\n        isAborted: isAborted\r\n    };\r\n}\r\n/**\r\n * similar to Promise.all but for abortAble\r\n */\r\nexport function abortAbleAll(values) {\r\n    var loader = Promise.all(values);\r\n    var aborted = null;\r\n    var isAborted = function () { return aborted === null; };\r\n    var aborter = new Promise(function (resolve) { return aborted = resolve; });\r\n    var abort = function () {\r\n        if (aborted == null) {\r\n            return;\r\n        }\r\n        aborted(ABORTED);\r\n        for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\r\n            var v = values_1[_i];\r\n            if (isAbortAble(v)) {\r\n                v.abort();\r\n            }\r\n        }\r\n        aborted = null;\r\n    };\r\n    var race = Promise.race([aborter, loader]);\r\n    return {\r\n        then: thenFactory(race, isAborted, abort),\r\n        abort: abort,\r\n        isAborted: isAborted\r\n    };\r\n}\r\n/**\r\n * checked whether the given argument is an abortable Promise\r\n * @param {IAbortAblePromise<any> | any} abortAble\r\n * @returns {boolean}\r\n */\r\nexport function isAbortAble(abortAble) {\r\n    return abortAble != null && abortAble && typeof abortAble.then === 'function' && typeof abortAble.abort === 'function';\r\n}\r\nexport function isAsyncUpdate(update) {\r\n    return update !== undefined && update !== null && update && isAbortAble(update.ready);\r\n}\r\n/**\r\n * similar to Promise.resolve\r\n */\r\nexport function abortAbleResolveNow(value) {\r\n    function then(onfulfilled, _onrejected) {\r\n        var res = onfulfilled ? onfulfilled(value) : value;\r\n        if (isAbortAble(res)) {\r\n            return res;\r\n        }\r\n        if (isPromiseLike(res)) {\r\n            return abortAble(res);\r\n        }\r\n        return {\r\n            then: abortAbleResolveNow(res),\r\n            abort: function () { return undefined; },\r\n            isAborted: function () { return false; }\r\n        };\r\n    }\r\n    return {\r\n        then: then,\r\n        abort: function () { return undefined; },\r\n        isAborted: function () { return false; }\r\n    };\r\n}\r\n//# sourceMappingURL=abortAble.js.map","import { ABORTED } from 'lineupengine';\r\nexport { ABORTED } from 'lineupengine';\r\n/**\r\n * iterator result for another round\r\n * @internal\r\n */\r\nexport var ANOTHER_ROUND = {\r\n    value: null,\r\n    done: false\r\n};\r\n/**\r\n * iterator for just one entry\r\n * @internal\r\n */\r\nexport function oneShotIterator(calc) {\r\n    return {\r\n        next: function () { return ({ done: true, value: calc() }); }\r\n    };\r\n}\r\nfunction thenFactory(wrappee, abort, isAborted) {\r\n    function then(onfulfilled, onrejected) {\r\n        var r = wrappee.then(onfulfilled, onrejected);\r\n        return {\r\n            then: thenFactory(r, abort, isAborted),\r\n            abort: abort,\r\n            isAborted: isAborted\r\n        };\r\n    }\r\n    return then;\r\n}\r\n/**\r\n * task scheduler for running tasks in idle callbacks\r\n * @internal\r\n */\r\nvar TaskScheduler = /** @class */ (function () {\r\n    function TaskScheduler() {\r\n        var _this = this;\r\n        this.tasks = [];\r\n        // idle callback id\r\n        this.taskId = -1;\r\n        this.runTasks = function (deadline) {\r\n            var _loop_1 = function () {\r\n                var task = _this.tasks.shift();\r\n                var r = task.it.next();\r\n                // call next till done or ran out of time\r\n                while (!r.done && (deadline.didTimeout || deadline.timeRemaining() > 0)) {\r\n                    r = task.it.next();\r\n                }\r\n                if (r.done) {\r\n                    // resolve async\r\n                    requestAnimationFrame(function () { return task.resolve(r.value); });\r\n                }\r\n                else {\r\n                    // reschedule again\r\n                    _this.tasks.unshift(task);\r\n                }\r\n            };\r\n            // while more tasks and not timed out\r\n            while (_this.tasks.length > 0 && (deadline.didTimeout || deadline.timeRemaining() > 0)) {\r\n                _loop_1();\r\n            }\r\n            _this.taskId = -1;\r\n            _this.reSchedule();\r\n        };\r\n    }\r\n    TaskScheduler.prototype.reSchedule = function () {\r\n        if (this.tasks.length === 0 || this.taskId > -1) {\r\n            return;\r\n        }\r\n        var ww = self;\r\n        if (ww.requestIdleCallback) {\r\n            this.taskId = ww.requestIdleCallback(this.runTasks);\r\n        }\r\n        else {\r\n            this.taskId = self.setTimeout(this.runTasks, 1);\r\n        }\r\n    };\r\n    /**\r\n     * pushes a task with multi hops using an iterator\r\n     * @param id task id\r\n     * @param it iterator to execute\r\n     */\r\n    TaskScheduler.prototype.pushMulti = function (id, it, abortAble) {\r\n        var _this = this;\r\n        if (abortAble === void 0) { abortAble = true; }\r\n        // abort task with the same id\r\n        var abort = function () {\r\n            var index = _this.tasks.findIndex(function (d) { return d.id === id; });\r\n            if (index < 0) {\r\n                return; // too late or none\r\n            }\r\n            var task = _this.tasks[index];\r\n            _this.tasks.splice(index, 1);\r\n            task.isAborted = true;\r\n            task.resolve(ABORTED);\r\n        };\r\n        {\r\n            // abort existing\r\n            var index = this.tasks.findIndex(function (d) { return d.id === id; });\r\n            if (index >= 0) {\r\n                var task_1 = this.tasks[index];\r\n                task_1.abort();\r\n            }\r\n        }\r\n        var resolve;\r\n        var p = new Promise(function (r) {\r\n            // called during constructor\r\n            resolve = r;\r\n        });\r\n        var task = {\r\n            id: id,\r\n            it: it,\r\n            result: p,\r\n            abort: abort,\r\n            isAborted: false,\r\n            resolve: resolve\r\n        };\r\n        var isAborted = function () { return task.isAborted; };\r\n        this.tasks.push(task);\r\n        this.reSchedule();\r\n        var abortOrDummy = abortAble ? abort : function () { return undefined; };\r\n        var isAbortedOrDummy = abortAble ? isAborted : function () { return false; };\r\n        return {\r\n            then: thenFactory(p, abortOrDummy, isAbortedOrDummy),\r\n            abort: abortOrDummy,\r\n            isAborted: isAbortedOrDummy\r\n        };\r\n    };\r\n    /**\r\n     * pushes a simple task\r\n     * @param id task id\r\n     * @param calc task function\r\n     */\r\n    TaskScheduler.prototype.push = function (id, calc) {\r\n        return this.pushMulti(id, oneShotIterator(calc));\r\n    };\r\n    /**\r\n     * abort a task with the given id\r\n     * @param id task id\r\n     */\r\n    TaskScheduler.prototype.abort = function (id) {\r\n        var index = this.tasks.findIndex(function (d) { return d.id === id; });\r\n        if (index < 0) {\r\n            return false; // too late or none\r\n        }\r\n        var task = this.tasks[index];\r\n        task.abort();\r\n        return true;\r\n    };\r\n    TaskScheduler.prototype.abortAll = function (filter) {\r\n        var abort = this.tasks.filter(filter);\r\n        if (abort.length === 0) {\r\n            return;\r\n        }\r\n        this.tasks = this.tasks.filter(function (d) { return !filter(d); });\r\n        for (var _i = 0, abort_1 = abort; _i < abort_1.length; _i++) {\r\n            var task = abort_1[_i];\r\n            task.resolve(ABORTED);\r\n            task.abort();\r\n        }\r\n    };\r\n    TaskScheduler.prototype.clear = function () {\r\n        if (this.taskId === -1) {\r\n            return;\r\n        }\r\n        var ww = self;\r\n        if (ww.requestIdleCallback) {\r\n            ww.clearIdleCallback(this.taskId);\r\n        }\r\n        else {\r\n            self.clearTimeout(this.taskId);\r\n        }\r\n        this.taskId = -1;\r\n        this.tasks.splice(0, this.tasks.length).forEach(function (d) {\r\n            d.resolve(ABORTED);\r\n            d.abort();\r\n        });\r\n    };\r\n    return TaskScheduler;\r\n}());\r\nexport default TaskScheduler;\r\n//# sourceMappingURL=scheduler.js.map","import { abortAbleAll } from 'lineupengine';\r\nimport { ANOTHER_ROUND } from '../internal/scheduler';\r\nimport { lazySeq, boxplotBuilder, categoricalStatsBuilder, categoricalValueCacheBuilder, dateStatsBuilder, dateValueCacheBuilder, normalizedStatsBuilder, dateValueCache2Value, categoricalValueCache2Value, joinIndexArrays } from '../internal';\r\nimport { CategoricalColumn, DateColumn, ImpositionCompositeColumn, NumberColumn, OrdinalColumn } from '../model';\r\n/**\r\n * a render task that is already resolved\r\n */\r\nvar TaskNow = /** @class */ (function () {\r\n    function TaskNow(v) {\r\n        this.v = v;\r\n    }\r\n    TaskNow.prototype.then = function (onfullfilled) {\r\n        return onfullfilled(this.v);\r\n    };\r\n    return TaskNow;\r\n}());\r\nexport { TaskNow };\r\n/**\r\n * factory function for\r\n */\r\nexport function taskNow(v) {\r\n    return new TaskNow(v);\r\n}\r\n/**\r\n * a render task based on an abortable promise\r\n */\r\nvar TaskLater = /** @class */ (function () {\r\n    function TaskLater(v) {\r\n        this.v = v;\r\n    }\r\n    TaskLater.prototype.then = function (onfullfilled) {\r\n        return this.v.then(onfullfilled);\r\n    };\r\n    return TaskLater;\r\n}());\r\nexport { TaskLater };\r\nexport function taskLater(v) {\r\n    return new TaskLater(v);\r\n}\r\n/**\r\n * similar to Promise.all\r\n */\r\nexport function tasksAll(tasks) {\r\n    if (tasks.every(function (t) { return t instanceof TaskNow; })) {\r\n        return taskNow(tasks.map(function (d) { return d.v; }));\r\n    }\r\n    return taskLater(abortAbleAll(tasks.map(function (d) { return d.v; })));\r\n}\r\nvar MultiIndices = /** @class */ (function () {\r\n    function MultiIndices(indices, maxDataIndex) {\r\n        this.indices = indices;\r\n        this.maxDataIndex = maxDataIndex;\r\n        this._joined = null;\r\n    }\r\n    Object.defineProperty(MultiIndices.prototype, \"joined\", {\r\n        get: function () {\r\n            if (this.indices.length === 1) {\r\n                return this.indices[0];\r\n            }\r\n            if (this.indices.length === 0) {\r\n                return new Uint8Array(0);\r\n            }\r\n            if (this._joined) {\r\n                return this._joined;\r\n            }\r\n            return this._joined = joinIndexArrays(this.indices, this.maxDataIndex);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return MultiIndices;\r\n}());\r\nexport { MultiIndices };\r\n/**\r\n * number of data points to build per iteration / chunk\r\n */\r\nvar CHUNK_SIZE = 100;\r\nvar ARenderTasks = /** @class */ (function () {\r\n    function ARenderTasks(data) {\r\n        var _this = this;\r\n        if (data === void 0) { data = []; }\r\n        this.data = data;\r\n        this.valueCacheData = new Map();\r\n        this.byIndex = function (i) { return _this.data[i]; };\r\n    }\r\n    ARenderTasks.prototype.byOrder = function (indices) {\r\n        return lazySeq(indices).map(this.byIndex);\r\n    };\r\n    ARenderTasks.prototype.byOrderAcc = function (indices, acc) {\r\n        var _this = this;\r\n        return lazySeq(indices).map(function (i) { return acc(_this.data[i]); });\r\n    };\r\n    /**\r\n     * builder factory to create an iterator that can be used to schedule\r\n     * @param builder the builder to use\r\n     * @param order the order to iterate over\r\n     * @param acc the accessor to get the value out of the data\r\n     * @param build optional build mapper\r\n     */\r\n    ARenderTasks.prototype.builder = function (builder, order, acc, build) {\r\n        var _this = this;\r\n        var i = 0;\r\n        // no indices given over the whole data\r\n        var nextData = function (currentChunkSize) {\r\n            if (currentChunkSize === void 0) { currentChunkSize = CHUNK_SIZE; }\r\n            var chunkCounter = currentChunkSize;\r\n            var data = _this.data;\r\n            for (; i < data.length && chunkCounter > 0; ++i, --chunkCounter) {\r\n                builder.push(acc(i));\r\n            }\r\n            if (i < data.length) { // need another round\r\n                return ANOTHER_ROUND;\r\n            }\r\n            // done\r\n            return {\r\n                done: true,\r\n                value: build ? build(builder.build()) : builder.build()\r\n            };\r\n        };\r\n        var o = 0;\r\n        var orders = order instanceof MultiIndices ? order.indices : [order];\r\n        var nextOrder = function (currentChunkSize) {\r\n            if (currentChunkSize === void 0) { currentChunkSize = CHUNK_SIZE; }\r\n            var chunkCounter = currentChunkSize;\r\n            while (o < orders.length) {\r\n                var actOrder = orders[o];\r\n                for (; i < actOrder.length && chunkCounter > 0; ++i, --chunkCounter) {\r\n                    builder.push(acc(actOrder[i]));\r\n                }\r\n                if (i < actOrder.length) { // need another round\r\n                    return ANOTHER_ROUND;\r\n                }\r\n                // done with this order\r\n                o++;\r\n                i = 0;\r\n            }\r\n            return {\r\n                done: true,\r\n                value: build ? build(builder.build()) : builder.build()\r\n            };\r\n        };\r\n        return { next: order == null ? nextData : nextOrder };\r\n    };\r\n    ARenderTasks.prototype.builderForEach = function (builder, order, acc, build) {\r\n        return this.builder({\r\n            push: builder.pushAll,\r\n            build: builder.build\r\n        }, order, acc, build);\r\n    };\r\n    ARenderTasks.prototype.boxplotBuilder = function (order, col, raw, build) {\r\n        var b = boxplotBuilder();\r\n        return this.numberStatsBuilder(b, order, col, raw, build);\r\n    };\r\n    ARenderTasks.prototype.normalizedStatsBuilder = function (order, col, numberOfBins, raw, build) {\r\n        var b = normalizedStatsBuilder(numberOfBins);\r\n        return this.numberStatsBuilder(b, order, col, raw, build);\r\n    };\r\n    ARenderTasks.prototype.numberStatsBuilder = function (b, order, col, raw, build) {\r\n        var _this = this;\r\n        if (col instanceof NumberColumn || col instanceof OrdinalColumn || col instanceof ImpositionCompositeColumn) {\r\n            var key_1 = raw ? col.id + \":r\" : col.id;\r\n            var dacc = raw ? function (i) { return col.getRawNumber(_this.data[i]); } : function (i) { return col.getNumber(_this.data[i]); };\r\n            if (order == null && !this.valueCacheData.has(key_1)) {\r\n                // build and valueCache\r\n                var vs_1 = new Float32Array(this.data.length);\r\n                var i_1 = 0;\r\n                return this.builder({\r\n                    push: function (v) {\r\n                        b.push(v);\r\n                        vs_1[i_1++] = v;\r\n                    },\r\n                    build: function () {\r\n                        _this.setValueCacheData(key_1, vs_1);\r\n                        return b.build();\r\n                    }\r\n                }, null, dacc, build);\r\n            }\r\n            var cache_1 = this.valueCacheData.get(key_1);\r\n            var acc_1 = cache_1 ? function (i) { return cache_1[i]; } : dacc;\r\n            return this.builder(b, order, acc_1, build);\r\n        }\r\n        var acc = raw ? function (i) { return col.iterRawNumber(_this.data[i]); } : function (i) { return col.iterNumber(_this.data[i]); };\r\n        return this.builderForEach(b, order, acc, build);\r\n    };\r\n    ARenderTasks.prototype.dateStatsBuilder = function (order, col, template, build) {\r\n        var _this = this;\r\n        var b = dateStatsBuilder(template);\r\n        if (col instanceof DateColumn) {\r\n            if (order == null) {\r\n                // build and valueCache\r\n                var vs_2 = dateValueCacheBuilder(this.data.length);\r\n                return this.builder({\r\n                    push: function (v) {\r\n                        b.push(v);\r\n                        vs_2.push(v);\r\n                    },\r\n                    build: function () {\r\n                        _this.setValueCacheData(col.id, vs_2.cache);\r\n                        return b.build();\r\n                    }\r\n                }, null, function (i) { return col.getDate(_this.data[i]); }, build);\r\n            }\r\n            var cache_2 = this.valueCacheData.get(col.id);\r\n            var acc = cache_2 ? function (i) { return dateValueCache2Value(cache_2[i]); } : function (i) { return col.getDate(_this.data[i]); };\r\n            return this.builder(b, order, acc, build);\r\n        }\r\n        return this.builderForEach(b, order, function (i) { return col.iterDate(_this.data[i]); }, build);\r\n    };\r\n    ARenderTasks.prototype.categoricalStatsBuilder = function (order, col, build) {\r\n        var _this = this;\r\n        var b = categoricalStatsBuilder(col.categories);\r\n        if (col instanceof CategoricalColumn || col instanceof OrdinalColumn) {\r\n            if (order == null) {\r\n                // build and valueCache\r\n                var vs_3 = categoricalValueCacheBuilder(this.data.length, col.categories);\r\n                return this.builder({\r\n                    push: function (v) {\r\n                        b.push(v);\r\n                        vs_3.push(v);\r\n                    },\r\n                    build: function () {\r\n                        _this.setValueCacheData(col.id, vs_3.cache);\r\n                        return b.build();\r\n                    }\r\n                }, null, function (i) { return col.getCategory(_this.data[i]); }, build);\r\n            }\r\n            var cache_3 = this.valueCacheData.get(col.id);\r\n            var acc = cache_3 ? function (i) { return categoricalValueCache2Value(cache_3[i], col.categories); } : function (i) { return col.getCategory(_this.data[i]); };\r\n            return this.builder(b, order, acc, build);\r\n        }\r\n        return this.builderForEach(b, order, function (i) { return col.iterCategory(_this.data[i]); }, build);\r\n    };\r\n    ARenderTasks.prototype.dirtyColumn = function (col, type) {\r\n        if (type !== 'data') {\r\n            return;\r\n        }\r\n        this.valueCacheData.delete(col.id);\r\n        this.valueCacheData.delete(col.id + \":r\");\r\n    };\r\n    ARenderTasks.prototype.setValueCacheData = function (key, value) {\r\n        if (value == null) {\r\n            this.valueCacheData.delete(key);\r\n        }\r\n        else {\r\n            this.valueCacheData.set(key, value);\r\n        }\r\n    };\r\n    ARenderTasks.prototype.valueCache = function (col) {\r\n        var v = this.valueCacheData.get(col.id);\r\n        if (!v) {\r\n            return undefined;\r\n        }\r\n        if (col instanceof DateColumn) {\r\n            return function (dataIndex) { return dateValueCache2Value(v[dataIndex]); };\r\n        }\r\n        if (col instanceof CategoricalColumn || col instanceof OrdinalColumn) {\r\n            return function (dataIndex) { return categoricalValueCache2Value(v[dataIndex], col.categories); };\r\n        }\r\n        return function (dataIndex) { return v[dataIndex]; };\r\n    };\r\n    return ARenderTasks;\r\n}());\r\nexport { ARenderTasks };\r\n//# sourceMappingURL=tasks.js.map","import * as tslib_1 from \"tslib\";\r\nimport { ARenderTasks, taskNow } from './tasks';\r\nimport { toIndexArray, sortComplex, getNumberOfBins } from '../internal';\r\n/**\r\n * @internal\r\n */\r\nexport function sortDirect(indices, maxDataIndex, lookups) {\r\n    var order = toIndexArray(indices, maxDataIndex);\r\n    if (lookups) {\r\n        sortComplex(order, lookups.sortOrders);\r\n    }\r\n    return order;\r\n}\r\n/**\r\n * @internal\r\n */\r\nvar DirectRenderTasks = /** @class */ (function (_super) {\r\n    tslib_1.__extends(DirectRenderTasks, _super);\r\n    function DirectRenderTasks() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.cache = new Map();\r\n        return _this;\r\n    }\r\n    DirectRenderTasks.prototype.setData = function (data) {\r\n        this.data = data;\r\n        this.cache.clear();\r\n        this.valueCacheData.clear();\r\n    };\r\n    DirectRenderTasks.prototype.dirtyColumn = function (col, type) {\r\n        _super.prototype.dirtyColumn.call(this, col, type);\r\n        if (type === 'group') {\r\n            return; // not cached\r\n        }\r\n        this.cache.delete(col.id + \":summary\");\r\n        this.cache.delete(col.id + \":summary:raw\");\r\n        this.cache.delete(col.id + \":summary:b\");\r\n        this.cache.delete(col.id + \":summary:braw\");\r\n        if (type === 'summary') {\r\n            return;\r\n        }\r\n        this.cache.delete(col.id + \":data\");\r\n        this.cache.delete(col.id + \":data:raw\");\r\n        this.cache.delete(col.id + \":data:b\");\r\n        this.cache.delete(col.id + \":data:braw\");\r\n    };\r\n    DirectRenderTasks.prototype.dirtyRanking = function (ranking, type) {\r\n        for (var _i = 0, _a = ranking.flatColumns; _i < _a.length; _i++) {\r\n            var col = _a[_i];\r\n            this.dirtyColumn(col, type);\r\n        }\r\n    };\r\n    DirectRenderTasks.prototype.preCompute = function () {\r\n        // dummy\r\n    };\r\n    DirectRenderTasks.prototype.preComputeData = function () {\r\n        // dummy\r\n    };\r\n    DirectRenderTasks.prototype.preComputeCol = function () {\r\n        // dummy\r\n    };\r\n    DirectRenderTasks.prototype.copyData2Summary = function () {\r\n        // dummy\r\n    };\r\n    DirectRenderTasks.prototype.copyCache = function (col, from) {\r\n        var fromPrefix = from.id + \":\";\r\n        for (var _i = 0, _a = Array.from(this.cache.keys()).sort(); _i < _a.length; _i++) {\r\n            var key = _a[_i];\r\n            if (!key.startsWith(fromPrefix)) {\r\n                continue;\r\n            }\r\n            var tkey = col.id + \":\" + key.slice(fromPrefix.length);\r\n            this.cache.set(tkey, this.cache.get(key));\r\n        }\r\n    };\r\n    DirectRenderTasks.prototype.sort = function (_ranking, _group, indices, _singleCall, maxDataIndex, lookups) {\r\n        return Promise.resolve(sortDirect(indices, maxDataIndex, lookups));\r\n    };\r\n    DirectRenderTasks.prototype.groupCompare = function (ranking, group, rows) {\r\n        var rg = ranking.getGroupSortCriteria();\r\n        if (rg.length === 0) {\r\n            return taskNow([group.name.toLowerCase()]);\r\n        }\r\n        var o = this.byOrder(rows);\r\n        var vs = [];\r\n        for (var _i = 0, rg_1 = rg; _i < rg_1.length; _i++) {\r\n            var s = rg_1[_i];\r\n            var r = s.col.toCompareGroupValue(o, group);\r\n            if (Array.isArray(r)) {\r\n                vs.push.apply(vs, r);\r\n            }\r\n            else {\r\n                vs.push(r);\r\n            }\r\n        }\r\n        vs.push(group.name.toLowerCase());\r\n        return taskNow(vs);\r\n    };\r\n    DirectRenderTasks.prototype.groupRows = function (_col, group, _key, compute) {\r\n        return taskNow(compute(this.byOrder(group.order)));\r\n    };\r\n    DirectRenderTasks.prototype.groupExampleRows = function (_col, group, _key, compute) {\r\n        return taskNow(compute(this.byOrder(group.order.slice(0, 5))));\r\n    };\r\n    DirectRenderTasks.prototype.groupBoxPlotStats = function (col, group, raw) {\r\n        var _a = this.summaryBoxPlotStatsD(col, raw), summary = _a.summary, data = _a.data;\r\n        return taskNow({ group: this.boxplotBuilder(group.order, col, raw).next(Infinity).value, summary: summary, data: data });\r\n    };\r\n    DirectRenderTasks.prototype.groupNumberStats = function (col, group, raw) {\r\n        var _a = this.summaryNumberStatsD(col, raw), summary = _a.summary, data = _a.data;\r\n        return taskNow({ group: this.normalizedStatsBuilder(group.order, col, summary.hist.length, raw).next(Infinity).value, summary: summary, data: data });\r\n    };\r\n    DirectRenderTasks.prototype.groupCategoricalStats = function (col, group) {\r\n        var _a = this.summaryCategoricalStatsD(col), summary = _a.summary, data = _a.data;\r\n        return taskNow({ group: this.categoricalStatsBuilder(group.order, col).next(Infinity).value, summary: summary, data: data });\r\n    };\r\n    DirectRenderTasks.prototype.groupDateStats = function (col, group) {\r\n        var _a = this.summaryDateStatsD(col), summary = _a.summary, data = _a.data;\r\n        return taskNow({ group: this.dateStatsBuilder(group.order, col, summary).next(Infinity).value, summary: summary, data: data });\r\n    };\r\n    DirectRenderTasks.prototype.summaryBoxPlotStats = function (col, raw) {\r\n        return taskNow(this.summaryBoxPlotStatsD(col, raw));\r\n    };\r\n    DirectRenderTasks.prototype.summaryNumberStats = function (col, raw) {\r\n        return taskNow(this.summaryNumberStatsD(col, raw));\r\n    };\r\n    DirectRenderTasks.prototype.summaryCategoricalStats = function (col) {\r\n        return taskNow(this.summaryCategoricalStatsD(col));\r\n    };\r\n    DirectRenderTasks.prototype.summaryDateStats = function (col) {\r\n        return taskNow(this.summaryDateStatsD(col));\r\n    };\r\n    DirectRenderTasks.prototype.summaryNumberStatsD = function (col, raw) {\r\n        var _this = this;\r\n        return this.cached('summary', col, function () {\r\n            var ranking = col.findMyRanker().getOrder();\r\n            var data = _this.dataNumberStats(col, raw);\r\n            return { summary: _this.normalizedStatsBuilder(ranking, col, data.hist.length, raw).next(Infinity).value, data: data };\r\n        }, raw ? ':raw' : '', col.findMyRanker().getOrderLength() === 0);\r\n    };\r\n    DirectRenderTasks.prototype.summaryBoxPlotStatsD = function (col, raw) {\r\n        var _this = this;\r\n        return this.cached('summary', col, function () {\r\n            var ranking = col.findMyRanker().getOrder();\r\n            var data = _this.dataBoxPlotStats(col, raw);\r\n            return { summary: _this.boxplotBuilder(ranking, col, raw).next(Infinity).value, data: data };\r\n        }, raw ? ':braw' : ':b', col.findMyRanker().getOrderLength() === 0);\r\n    };\r\n    DirectRenderTasks.prototype.summaryCategoricalStatsD = function (col) {\r\n        var _this = this;\r\n        return this.cached('summary', col, function () {\r\n            var ranking = col.findMyRanker().getOrder();\r\n            var data = _this.dataCategoricalStats(col);\r\n            return { summary: _this.categoricalStatsBuilder(ranking, col).next(Infinity).value, data: data };\r\n        }, '', col.findMyRanker().getOrderLength() === 0);\r\n    };\r\n    DirectRenderTasks.prototype.summaryDateStatsD = function (col) {\r\n        var _this = this;\r\n        return this.cached('summary', col, function () {\r\n            var ranking = col.findMyRanker().getOrder();\r\n            var data = _this.dataDateStats(col);\r\n            return { summary: _this.dateStatsBuilder(ranking, col, data).next(Infinity).value, data: data };\r\n        }, '', col.findMyRanker().getOrderLength() === 0);\r\n    };\r\n    DirectRenderTasks.prototype.cached = function (prefix, col, creator, suffix, dontCache) {\r\n        if (suffix === void 0) { suffix = ''; }\r\n        if (dontCache === void 0) { dontCache = false; }\r\n        var key = col.id + \":\" + prefix + suffix;\r\n        if (this.cache.has(key)) {\r\n            return this.cache.get(key);\r\n        }\r\n        var s = creator();\r\n        if (!dontCache) {\r\n            this.cache.set(key, s);\r\n        }\r\n        return s;\r\n    };\r\n    DirectRenderTasks.prototype.dataBoxPlotStats = function (col, raw) {\r\n        var _this = this;\r\n        return this.cached('data', col, function () { return _this.boxplotBuilder(null, col, raw).next(Infinity).value; }, raw ? ':braw' : ':b');\r\n    };\r\n    DirectRenderTasks.prototype.dataNumberStats = function (col, raw) {\r\n        var _this = this;\r\n        return this.cached('data', col, function () { return _this.normalizedStatsBuilder(null, col, getNumberOfBins(_this.data.length), raw).next(Infinity).value; }, raw ? ':raw' : '');\r\n    };\r\n    DirectRenderTasks.prototype.dataCategoricalStats = function (col) {\r\n        var _this = this;\r\n        return this.cached('data', col, function () { return _this.categoricalStatsBuilder(null, col).next(Infinity).value; });\r\n    };\r\n    DirectRenderTasks.prototype.dataDateStats = function (col) {\r\n        var _this = this;\r\n        return this.cached('data', col, function () { return _this.dateStatsBuilder(null, col).next(Infinity).value; });\r\n    };\r\n    DirectRenderTasks.prototype.terminate = function () {\r\n        this.cache.clear();\r\n    };\r\n    return DirectRenderTasks;\r\n}(ARenderTasks));\r\nexport { DirectRenderTasks };\r\n//# sourceMappingURL=DirectRenderTasks.js.map","import Column from './Column';\r\nexport function isMapColumn(col) {\r\n    return (col instanceof Column && typeof col.getMap === 'function' && typeof col.getMapLabel === 'function') || (!(col instanceof Column) && col.type.endsWith('Map'));\r\n}\r\nexport function isArrayColumn(col) {\r\n    return (col instanceof Column && typeof col.getLabels === 'function' && typeof col.getValues === 'function' && isMapColumn(col) || (!(col instanceof Column) && col.type.endsWith('s') && col.type !== 'actions'));\r\n}\r\n//# sourceMappingURL=IArrayColumn.js.map","import Column from './Column';\r\nimport { isArrayColumn } from './IArrayColumn';\r\nexport function isCategoricalLikeColumn(col) {\r\n    return typeof col.categories !== 'undefined' && typeof col.iterCategory === 'function';\r\n}\r\nexport function isSetColumn(col) {\r\n    return isCategoricalLikeColumn(col) && typeof col.getSet === 'function';\r\n}\r\nexport function isCategoricalColumn(col) {\r\n    return (col instanceof Column && typeof col.getCategory === 'function' || (!(col instanceof Column) && col.type.match(/(categorical|ordinal|hierarchy)/) != null));\r\n}\r\nexport function isCategoricalsColumn(col) {\r\n    return isCategoricalLikeColumn(col) && isArrayColumn(col) && !isSetColumn(col);\r\n}\r\nexport function isCategory(v) {\r\n    return typeof v.name === 'string' && typeof v.label === 'string' && typeof v.color === 'string' && typeof v.value === 'number';\r\n}\r\n//# sourceMappingURL=ICategoricalColumn.js.map","import Column from './Column';\r\nexport function isDateColumn(col) {\r\n    return (col instanceof Column && typeof col.getDate === 'function' || (!(col instanceof Column) && col.type.startsWith('date')));\r\n}\r\nexport function isDatesColumn(col) {\r\n    return typeof col.getDates === 'function';\r\n}\r\n//# sourceMappingURL=IDateColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { abortAble } from 'lineupengine';\r\nimport { getNumberOfBins, lazySeq, toIndexArray, WorkerTaskScheduler, createWorkerBlob } from '../internal';\r\nimport TaskScheduler, { ABORTED, oneShotIterator } from '../internal/scheduler';\r\nimport { isCategoricalLikeColumn, isDateColumn, isNumberColumn } from '../model';\r\nimport { sortDirect } from './DirectRenderTasks';\r\nimport { ARenderTasks, MultiIndices, taskLater, TaskLater, taskNow, TaskNow } from './tasks';\r\nvar ScheduleRenderTasks = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ScheduleRenderTasks, _super);\r\n    function ScheduleRenderTasks() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.cache = new Map();\r\n        _this.tasks = new TaskScheduler();\r\n        _this.workers = new WorkerTaskScheduler(createWorkerBlob());\r\n        return _this;\r\n    }\r\n    ScheduleRenderTasks.prototype.setData = function (data) {\r\n        this.data = data;\r\n        this.cache.clear();\r\n        this.tasks.clear();\r\n        this.valueCacheData.clear();\r\n        this.workers.deleteRefs();\r\n    };\r\n    ScheduleRenderTasks.prototype.dirtyColumn = function (col, type) {\r\n        _super.prototype.dirtyColumn.call(this, col, type);\r\n        // order designed such that first groups, then summaries, then data is deleted\r\n        for (var _i = 0, _a = Array.from(this.cache.keys()).sort(); _i < _a.length; _i++) {\r\n            var key = _a[_i];\r\n            // data = all\r\n            // summary = summary + group\r\n            // group = group only\r\n            if ((type === 'data' && key.startsWith(col.id + \":\") ||\r\n                (type === 'summary' && key.startsWith(col.id + \":b:summary:\")) ||\r\n                (key.startsWith(col.id + \":a:group\")))) {\r\n                this.cache.delete(key);\r\n                this.tasks.abort(key);\r\n            }\r\n        }\r\n        if (type !== 'data') {\r\n            return;\r\n        }\r\n        this.valueCacheData.delete(col.id);\r\n        this.workers.deleteRef(col.id);\r\n    };\r\n    ScheduleRenderTasks.prototype.dirtyRanking = function (ranking, type) {\r\n        var cols = ranking.flatColumns;\r\n        var checker;\r\n        switch (type) {\r\n            case 'group':\r\n                checker = cols.map(function (col) { return function (key) { return key.startsWith(col.id + \":a:group\"); }; });\r\n                break;\r\n            case 'summary':\r\n                checker = cols.map(function (col) { return function (key) { return key.startsWith(col.id + \":b:summary\") || key.startsWith(col.id + \":a:group\"); }; });\r\n                break;\r\n            case 'data':\r\n            default:\r\n                checker = cols.map(function (col) { return function (key) { return key.startsWith(col.id + \":\"); }; });\r\n                break;\r\n        }\r\n        var _loop_1 = function (key) {\r\n            if (checker.some(function (f) { return f(key); })) {\r\n                this_1.cache.delete(key);\r\n                this_1.tasks.abort(key);\r\n            }\r\n        };\r\n        var this_1 = this;\r\n        for (var _i = 0, _a = Array.from(this.cache.keys()).sort(); _i < _a.length; _i++) {\r\n            var key = _a[_i];\r\n            _loop_1(key);\r\n        }\r\n        // group compare tasks\r\n        this.tasks.abortAll(function (t) { return t.id.startsWith(\"r\" + ranking.id + \":\"); });\r\n        // delete remote caches\r\n        this.workers.deleteRef(ranking.id, true);\r\n        if (type !== 'data') {\r\n            return;\r\n        }\r\n        for (var _b = 0, cols_1 = cols; _b < cols_1.length; _b++) {\r\n            var col = cols_1[_b];\r\n            _super.prototype.dirtyColumn.call(this, col, type);\r\n            this.workers.deleteRef(col.id);\r\n        }\r\n    };\r\n    ScheduleRenderTasks.prototype.preCompute = function (ranking, groups, maxDataIndex) {\r\n        if (groups.length === 0) {\r\n            return;\r\n        }\r\n        var cols = ranking.flatColumns;\r\n        if (groups.length === 1) {\r\n            var _a = groups[0], group = _a.group, rows = _a.rows;\r\n            var multi = new MultiIndices([rows], maxDataIndex);\r\n            for (var _i = 0, cols_2 = cols; _i < cols_2.length; _i++) {\r\n                var col = cols_2[_i];\r\n                if (isCategoricalLikeColumn(col)) {\r\n                    this.summaryCategoricalStats(col, multi);\r\n                }\r\n                else if (isNumberColumn(col)) {\r\n                    this.summaryNumberStats(col, false, multi);\r\n                    this.summaryNumberStats(col, true, multi);\r\n                }\r\n                else if (isDateColumn(col)) {\r\n                    this.summaryDateStats(col, multi);\r\n                }\r\n                else {\r\n                    continue;\r\n                }\r\n                // copy from summary to group and create proper structure\r\n                this.chainCopy(col.id + \":a:group:\" + group.name, this.cache.get(col.id + \":b:summary\"), function (v) { return ({ group: v.summary, summary: v.summary, data: v.data }); });\r\n                if (isNumberColumn(col)) {\r\n                    this.chainCopy(col.id + \":a:group:\" + group.name + \":raw\", this.cache.get(col.id + \":b:summary:raw\"), function (v) { return ({ group: v.summary, summary: v.summary, data: v.data }); });\r\n                }\r\n            }\r\n            return;\r\n        }\r\n        var ogroups = groups.map(function (_a) {\r\n            var rows = _a.rows, group = _a.group;\r\n            return Object.assign({ order: rows }, group);\r\n        });\r\n        var full = new MultiIndices(groups.map(function (d) { return d.rows; }), maxDataIndex);\r\n        for (var _b = 0, cols_3 = cols; _b < cols_3.length; _b++) {\r\n            var col = cols_3[_b];\r\n            if (isCategoricalLikeColumn(col)) {\r\n                this.summaryCategoricalStats(col, full);\r\n                for (var _c = 0, ogroups_1 = ogroups; _c < ogroups_1.length; _c++) {\r\n                    var g = ogroups_1[_c];\r\n                    this.groupCategoricalStats(col, g);\r\n                }\r\n            }\r\n            else if (isDateColumn(col)) {\r\n                this.summaryDateStats(col, full);\r\n                for (var _d = 0, ogroups_2 = ogroups; _d < ogroups_2.length; _d++) {\r\n                    var g = ogroups_2[_d];\r\n                    this.groupDateStats(col, g);\r\n                }\r\n            }\r\n            else if (isNumberColumn(col)) {\r\n                this.summaryNumberStats(col, false, full);\r\n                this.summaryNumberStats(col, true, full);\r\n                for (var _e = 0, ogroups_3 = ogroups; _e < ogroups_3.length; _e++) {\r\n                    var g = ogroups_3[_e];\r\n                    this.groupNumberStats(col, g, false);\r\n                    this.groupNumberStats(col, g, true);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    ScheduleRenderTasks.prototype.preComputeData = function (ranking) {\r\n        for (var _i = 0, _a = ranking.flatColumns; _i < _a.length; _i++) {\r\n            var col = _a[_i];\r\n            if (isCategoricalLikeColumn(col)) {\r\n                this.dataCategoricalStats(col);\r\n            }\r\n            else if (isNumberColumn(col)) {\r\n                this.dataNumberStats(col, false);\r\n                this.dataNumberStats(col, true);\r\n            }\r\n            else if (isDateColumn(col)) {\r\n                this.dataDateStats(col);\r\n            }\r\n        }\r\n    };\r\n    ScheduleRenderTasks.prototype.preComputeCol = function (col) {\r\n        var ranking = col.findMyRanker();\r\n        if (isCategoricalLikeColumn(col)) {\r\n            this.dataCategoricalStats(col);\r\n            if (!ranking) {\r\n                return;\r\n            }\r\n            this.summaryCategoricalStats(col);\r\n            for (var _i = 0, _a = ranking.getGroups(); _i < _a.length; _i++) {\r\n                var group = _a[_i];\r\n                this.groupCategoricalStats(col, group);\r\n            }\r\n            return;\r\n        }\r\n        if (isNumberColumn(col)) {\r\n            this.dataNumberStats(col, false);\r\n            this.dataNumberStats(col, true);\r\n            if (!ranking) {\r\n                return;\r\n            }\r\n            this.summaryNumberStats(col, false);\r\n            this.summaryNumberStats(col, true);\r\n            for (var _b = 0, _c = ranking.getGroups(); _b < _c.length; _b++) {\r\n                var group = _c[_b];\r\n                this.groupNumberStats(col, group, false);\r\n                this.groupNumberStats(col, group, true);\r\n            }\r\n            return;\r\n        }\r\n        if (!isDateColumn(col)) {\r\n            return;\r\n        }\r\n        this.dataDateStats(col);\r\n        if (!ranking) {\r\n            return;\r\n        }\r\n        this.summaryDateStats(col);\r\n        for (var _d = 0, _e = ranking.getGroups(); _d < _e.length; _d++) {\r\n            var group = _e[_d];\r\n            this.groupDateStats(col, group);\r\n        }\r\n    };\r\n    ScheduleRenderTasks.prototype.copyData2Summary = function (ranking) {\r\n        for (var _i = 0, _a = ranking.flatColumns; _i < _a.length; _i++) {\r\n            var col = _a[_i];\r\n            if (isCategoricalLikeColumn(col)) {\r\n                this.dataCategoricalStats(col);\r\n            }\r\n            else if (isNumberColumn(col)) {\r\n                this.dataNumberStats(col, false);\r\n                this.dataNumberStats(col, true);\r\n            }\r\n            else if (isDateColumn(col)) {\r\n                this.dataDateStats(col);\r\n            }\r\n            else {\r\n                continue;\r\n            }\r\n            // copy from data to summary and create proper structure\r\n            this.chainCopy(col.id + \":b:summary\", this.cache.get(col.id + \":c:data\"), function (data) { return ({ summary: data, data: data }); });\r\n            if (isNumberColumn(col)) {\r\n                this.chainCopy(col.id + \":b:summary:raw\", this.cache.get(col.id + \":c:data:raw\"), function (data) { return ({ summary: data, data: data }); });\r\n            }\r\n        }\r\n    };\r\n    ScheduleRenderTasks.prototype.copyCache = function (col, from) {\r\n        var fromPrefix = from.id + \":\";\r\n        for (var _i = 0, _a = Array.from(this.cache.keys()).sort(); _i < _a.length; _i++) {\r\n            var key = _a[_i];\r\n            if (!key.startsWith(fromPrefix)) {\r\n                continue;\r\n            }\r\n            var tkey = col.id + \":\" + key.slice(fromPrefix.length);\r\n            this.chainCopy(tkey, this.cache.get(key), function (data) { return data; });\r\n        }\r\n    };\r\n    ScheduleRenderTasks.prototype.groupCompare = function (ranking, group, rows) {\r\n        var _this = this;\r\n        return taskLater(this.tasks.push(\"r\" + ranking.id + \":\" + group.name, function () {\r\n            var rg = ranking.getGroupSortCriteria();\r\n            if (rg.length === 0) {\r\n                return [group.name.toLowerCase()];\r\n            }\r\n            var o = _this.byOrder(rows);\r\n            var vs = [];\r\n            var _loop_2 = function (s) {\r\n                var cache = _this.valueCache(s.col);\r\n                var r = s.col.toCompareGroupValue(o, group, cache ? lazySeq(rows).map(function (d) { return cache(d); }) : undefined);\r\n                if (Array.isArray(r)) {\r\n                    vs.push.apply(vs, r);\r\n                }\r\n                else {\r\n                    vs.push(r);\r\n                }\r\n            };\r\n            for (var _i = 0, rg_1 = rg; _i < rg_1.length; _i++) {\r\n                var s = rg_1[_i];\r\n                _loop_2(s);\r\n            }\r\n            vs.push(group.name.toLowerCase());\r\n            return vs;\r\n        }));\r\n    };\r\n    ScheduleRenderTasks.prototype.groupRows = function (col, group, key, compute) {\r\n        var _this = this;\r\n        return this.cached(col.id + \":a:group:\" + group.name + \":\" + key, true, oneShotIterator(function () { return compute(_this.byOrder(group.order)); }));\r\n    };\r\n    ScheduleRenderTasks.prototype.groupExampleRows = function (_col, group, _key, compute) {\r\n        return taskNow(compute(this.byOrder(group.order.slice(0, 5))));\r\n    };\r\n    ScheduleRenderTasks.prototype.groupBoxPlotStats = function (col, group, raw) {\r\n        var _this = this;\r\n        return this.chain(col.id + \":a:group:\" + group.name + (raw ? ':braw' : ':b'), this.summaryBoxPlotStats(col, raw), function (_a) {\r\n            var summary = _a.summary, data = _a.data;\r\n            var ranking = col.findMyRanker();\r\n            var key = raw ? col.id + \":r\" : col.id;\r\n            if (_this.valueCacheData.has(key) && group.order.length > 0) {\r\n                // web worker version\r\n                return function () { return _this.workers.pushStats('boxplotStats', {}, key, _this.valueCacheData.get(key), ranking.id + \":\" + group.name, group.order)\r\n                    .then(function (group) { return ({ group: group, summary: summary, data: data }); }); };\r\n            }\r\n            return _this.boxplotBuilder(group.order, col, raw, function (group) { return ({ group: group, summary: summary, data: data }); });\r\n        });\r\n    };\r\n    ScheduleRenderTasks.prototype.groupNumberStats = function (col, group, raw) {\r\n        var _this = this;\r\n        return this.chain(col.id + \":a:group:\" + group.name + (raw ? ':raw' : ''), this.summaryNumberStats(col, raw), function (_a) {\r\n            var summary = _a.summary, data = _a.data;\r\n            var ranking = col.findMyRanker();\r\n            var key = raw ? col.id + \":r\" : col.id;\r\n            if (_this.valueCacheData.has(key) && group.order.length > 0) {\r\n                // web worker version\r\n                return function () { return _this.workers.pushStats('numberStats', { numberOfBins: summary.hist.length }, key, _this.valueCacheData.get(key), ranking.id + \":\" + group.name, group.order)\r\n                    .then(function (group) { return ({ group: group, summary: summary, data: data }); }); };\r\n            }\r\n            return _this.normalizedStatsBuilder(group.order, col, summary.hist.length, raw, function (group) { return ({ group: group, summary: summary, data: data }); });\r\n        });\r\n    };\r\n    ScheduleRenderTasks.prototype.groupCategoricalStats = function (col, group) {\r\n        var _this = this;\r\n        return this.chain(col.id + \":a:group:\" + group.name, this.summaryCategoricalStats(col), function (_a) {\r\n            var summary = _a.summary, data = _a.data;\r\n            var ranking = col.findMyRanker();\r\n            if (_this.valueCacheData.has(col.id) && group.order.length > 0) {\r\n                // web worker version\r\n                return function () { return _this.workers.pushStats('categoricalStats', { categories: col.categories.map(function (d) { return d.name; }) }, col.id, _this.valueCacheData.get(col.id), ranking.id + \":\" + group.name, group.order)\r\n                    .then(function (group) { return ({ group: group, summary: summary, data: data }); }); };\r\n            }\r\n            return _this.categoricalStatsBuilder(group.order, col, function (group) { return ({ group: group, summary: summary, data: data }); });\r\n        });\r\n    };\r\n    ScheduleRenderTasks.prototype.groupDateStats = function (col, group) {\r\n        var _this = this;\r\n        var key = col.id + \":a:group:\" + group.name;\r\n        return this.chain(key, this.summaryDateStats(col), function (_a) {\r\n            var summary = _a.summary, data = _a.data;\r\n            var ranking = col.findMyRanker();\r\n            if (_this.valueCacheData.has(col.id) && group.order.length > 0) {\r\n                // web worker version\r\n                return function () { return _this.workers.pushStats('dateStats', { template: summary }, col.id, _this.valueCacheData.get(col.id), ranking.id + \":\" + group.name, group.order)\r\n                    .then(function (group) { return ({ group: group, summary: summary, data: data }); }); };\r\n            }\r\n            return _this.dateStatsBuilder(group.order, col, summary, function (group) { return ({ group: group, summary: summary, data: data }); });\r\n        });\r\n    };\r\n    ScheduleRenderTasks.prototype.summaryBoxPlotStats = function (col, raw, order) {\r\n        var _this = this;\r\n        return this.chain(col.id + \":b:summary\" + (raw ? ':braw' : ':b'), this.dataBoxPlotStats(col, raw), function (data) {\r\n            var ranking = col.findMyRanker();\r\n            var key = raw ? col.id + \":r\" : col.id;\r\n            if (_this.valueCacheData.has(key)) {\r\n                // web worker version\r\n                return function () { return _this.workers.pushStats('boxplotStats', {}, key, _this.valueCacheData.get(key), ranking.id, order ? order.joined : ranking.getOrder())\r\n                    .then(function (summary) { return ({ summary: summary, data: data }); }); };\r\n            }\r\n            return _this.boxplotBuilder(order ? order : ranking.getOrder(), col, raw, function (summary) { return ({ summary: summary, data: data }); });\r\n        });\r\n    };\r\n    ScheduleRenderTasks.prototype.summaryNumberStats = function (col, raw, order) {\r\n        var _this = this;\r\n        return this.chain(col.id + \":b:summary\" + (raw ? ':raw' : ''), this.dataNumberStats(col, raw), function (data) {\r\n            var ranking = col.findMyRanker();\r\n            var key = raw ? col.id + \":r\" : col.id;\r\n            if (_this.valueCacheData.has(key)) {\r\n                // web worker version\r\n                return function () { return _this.workers.pushStats('numberStats', { numberOfBins: data.hist.length }, key, _this.valueCacheData.get(key), ranking.id, order ? order.joined : ranking.getOrder())\r\n                    .then(function (summary) { return ({ summary: summary, data: data }); }); };\r\n            }\r\n            return _this.normalizedStatsBuilder(order ? order : ranking.getOrder(), col, data.hist.length, raw, function (summary) { return ({ summary: summary, data: data }); });\r\n        });\r\n    };\r\n    ScheduleRenderTasks.prototype.summaryCategoricalStats = function (col, order) {\r\n        var _this = this;\r\n        return this.chain(col.id + \":b:summary\", this.dataCategoricalStats(col), function (data) {\r\n            var ranking = col.findMyRanker();\r\n            if (_this.valueCacheData.has(col.id)) {\r\n                // web worker version\r\n                return function () { return _this.workers.pushStats('categoricalStats', { categories: col.categories.map(function (d) { return d.name; }) }, col.id, _this.valueCacheData.get(col.id), ranking.id, order ? order.joined : ranking.getOrder())\r\n                    .then(function (summary) { return ({ summary: summary, data: data }); }); };\r\n            }\r\n            return _this.categoricalStatsBuilder(order ? order : ranking.getOrder(), col, function (summary) { return ({ summary: summary, data: data }); });\r\n        });\r\n    };\r\n    ScheduleRenderTasks.prototype.summaryDateStats = function (col, order) {\r\n        var _this = this;\r\n        return this.chain(col.id + \":b:summary\", this.dataDateStats(col), function (data) {\r\n            var ranking = col.findMyRanker();\r\n            if (_this.valueCacheData.has(col.id)) {\r\n                // web worker version\r\n                return function () { return _this.workers.pushStats('dateStats', { template: data }, col.id, _this.valueCacheData.get(col.id), ranking.id, order ? order.joined : ranking.getOrder())\r\n                    .then(function (summary) { return ({ summary: summary, data: data }); }); };\r\n            }\r\n            return _this.dateStatsBuilder(order ? order : ranking.getOrder(), col, data, function (summary) { return ({ summary: summary, data: data }); });\r\n        });\r\n    };\r\n    ScheduleRenderTasks.prototype.cached = function (key, canAbort, it) {\r\n        var _this = this;\r\n        var dontCache = this.data.length === 0;\r\n        if (this.isValidCacheEntry(key) && !dontCache) {\r\n            return this.cache.get(key);\r\n        }\r\n        var task = typeof it === 'function' ? abortAble(it()) : this.tasks.pushMulti(key, it, canAbort);\r\n        var s = taskLater(task);\r\n        if (!dontCache) {\r\n            this.cache.set(key, s);\r\n        }\r\n        task.then(function (r) {\r\n            if (_this.cache.get(key) !== s) {\r\n                return;\r\n            }\r\n            if (typeof r === 'symbol') {\r\n                _this.cache.delete(key);\r\n            }\r\n            else {\r\n                _this.cache.set(key, taskNow(r));\r\n            }\r\n        });\r\n        return s;\r\n    };\r\n    ScheduleRenderTasks.prototype.chain = function (key, task, creator) {\r\n        var _this = this;\r\n        if (this.isValidCacheEntry(key)) {\r\n            return this.cache.get(key);\r\n        }\r\n        if (task instanceof TaskNow) {\r\n            if (typeof task.v === 'symbol') {\r\n                // aborted\r\n                return taskNow(ABORTED);\r\n            }\r\n            return this.cached(key, true, creator(task.v));\r\n        }\r\n        var v = task.v;\r\n        var subTask = v.then(function (data) {\r\n            if (typeof data === 'symbol') {\r\n                return ABORTED;\r\n            }\r\n            var created = creator(data);\r\n            if (typeof created === 'function') {\r\n                // promise\r\n                return created();\r\n            }\r\n            return _this.tasks.pushMulti(key, created);\r\n        });\r\n        var s = taskLater(subTask);\r\n        this.cache.set(key, s);\r\n        subTask.then(function (r) {\r\n            if (_this.cache.get(key) !== s) {\r\n                return;\r\n            }\r\n            if (typeof r === 'symbol') {\r\n                _this.cache.delete(key);\r\n            }\r\n            else {\r\n                _this.cache.set(key, taskNow(r));\r\n            }\r\n        });\r\n        return s;\r\n    };\r\n    ScheduleRenderTasks.prototype.isValidCacheEntry = function (key) {\r\n        if (!this.cache.has(key)) {\r\n            return false;\r\n        }\r\n        var v = this.cache.get(key);\r\n        // not an aborted task\r\n        return !((v instanceof TaskNow) && typeof v.v === 'symbol') && !(v instanceof TaskLater && v.v.isAborted());\r\n    };\r\n    ScheduleRenderTasks.prototype.chainCopy = function (key, task, creator) {\r\n        var _this = this;\r\n        if (this.isValidCacheEntry(key)) {\r\n            return this.cache.get(key);\r\n        }\r\n        if (task instanceof TaskNow) {\r\n            if (typeof task.v === 'symbol') {\r\n                // aborted\r\n                return taskNow(ABORTED);\r\n            }\r\n            var subTask_1 = taskNow(creator(task.v));\r\n            this.cache.set(key, subTask_1);\r\n            return subTask_1;\r\n        }\r\n        var v = task.v;\r\n        var subTask = v.then(function (data) {\r\n            if (typeof data === 'symbol') {\r\n                return ABORTED;\r\n            }\r\n            return creator(data);\r\n        });\r\n        var s = taskLater(subTask);\r\n        this.cache.set(key, s);\r\n        subTask.then(function (r) {\r\n            if (_this.cache.get(key) !== s) {\r\n                return;\r\n            }\r\n            if (typeof r === 'symbol') {\r\n                _this.cache.delete(key);\r\n            }\r\n            else {\r\n                _this.cache.set(key, taskNow(r));\r\n            }\r\n        });\r\n        return s;\r\n    };\r\n    ScheduleRenderTasks.prototype.dataBoxPlotStats = function (col, raw) {\r\n        var _this = this;\r\n        var key = col.id + \":c:data\" + (raw ? ':braw' : ':b');\r\n        var valueCacheKey = raw ? col.id + \":r\" : col.id;\r\n        if (this.valueCacheData.has(valueCacheKey) && this.data.length > 0) {\r\n            // use webworker\r\n            return this.cached(key, false, function () { return _this.workers.pushStats('boxplotStats', {}, valueCacheKey, _this.valueCacheData.get(valueCacheKey)); });\r\n        }\r\n        return this.cached(key, false, this.boxplotBuilder(null, col, raw));\r\n    };\r\n    ScheduleRenderTasks.prototype.dataNumberStats = function (col, raw) {\r\n        return this.cached(col.id + \":c:data\" + (raw ? ':raw' : ''), false, this.normalizedStatsBuilder(null, col, getNumberOfBins(this.data.length), raw));\r\n    };\r\n    ScheduleRenderTasks.prototype.dataCategoricalStats = function (col) {\r\n        return this.cached(col.id + \":c:data\", false, this.categoricalStatsBuilder(null, col));\r\n    };\r\n    ScheduleRenderTasks.prototype.dataDateStats = function (col) {\r\n        return this.cached(col.id + \":c:data\", false, this.dateStatsBuilder(null, col));\r\n    };\r\n    ScheduleRenderTasks.prototype.sort = function (ranking, group, indices, singleCall, maxDataIndex, lookups) {\r\n        if (!lookups || indices.length < 1000) {\r\n            // no thread needed\r\n            var order = sortDirect(indices, maxDataIndex, lookups);\r\n            return Promise.resolve(order);\r\n        }\r\n        var indexArray = toIndexArray(indices, maxDataIndex);\r\n        var toTransfer = [indexArray.buffer];\r\n        if (singleCall) {\r\n            // can transfer otherwise need to copy\r\n            toTransfer.push.apply(toTransfer, lookups.transferAbles);\r\n        }\r\n        return this.workers.push('sort', {\r\n            ref: ranking.id + \":\" + group.name,\r\n            indices: indexArray,\r\n            sortOrders: lookups.sortOrders\r\n        }, toTransfer, function (r) { return r.order; });\r\n    };\r\n    ScheduleRenderTasks.prototype.terminate = function () {\r\n        this.workers.terminate();\r\n        this.cache.clear();\r\n        this.valueCacheData.clear();\r\n    };\r\n    return ScheduleRenderTasks;\r\n}(ARenderTasks));\r\nexport { ScheduleRenderTasks };\r\n//# sourceMappingURL=ScheduledTasks.js.map","export var ERenderMode;\r\n(function (ERenderMode) {\r\n    ERenderMode[ERenderMode[\"CELL\"] = 0] = \"CELL\";\r\n    ERenderMode[ERenderMode[\"GROUP\"] = 1] = \"GROUP\";\r\n    ERenderMode[ERenderMode[\"SUMMARY\"] = 2] = \"SUMMARY\";\r\n})(ERenderMode || (ERenderMode = {}));\r\n//# sourceMappingURL=interfaces.js.map","import * as tslib_1 from \"tslib\";\r\nimport { createIndexArray, sortComplex, lazySeq } from '../internal';\r\nimport { Column, EDirtyReason, Ranking, defaultGroup, CompositeColumn } from '../model';\r\nimport ACommonDataProvider from './ACommonDataProvider';\r\nimport ADataProvider from './ADataProvider';\r\nimport { CompareLookup } from './sort';\r\nimport { DirectRenderTasks } from './DirectRenderTasks';\r\nimport { ScheduleRenderTasks } from './ScheduledTasks';\r\nimport { joinGroups, mapIndices, duplicateGroup } from '../model/internal';\r\n/**\r\n * a data provider based on an local array\r\n */\r\nvar LocalDataProvider = /** @class */ (function (_super) {\r\n    tslib_1.__extends(LocalDataProvider, _super);\r\n    function LocalDataProvider(_data, columns, options) {\r\n        if (columns === void 0) { columns = []; }\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this, columns, options) || this;\r\n        _this._data = _data;\r\n        _this.ooptions = {\r\n            /**\r\n             * whether the filter should be applied to all rankings regardless where they are\r\n             */\r\n            filterGlobally: false,\r\n            jumpToSearchResult: false,\r\n            taskExecutor: 'direct'\r\n        };\r\n        _this.filter = null;\r\n        _this.mapToDataRow = function (i) {\r\n            if (i < 0 || i >= _this._dataRows.length) {\r\n                return { i: i, v: {} };\r\n            }\r\n            return _this._dataRows[i];\r\n        };\r\n        Object.assign(_this.ooptions, options);\r\n        _this._dataRows = toRows(_data);\r\n        _this.tasks = _this.ooptions.taskExecutor === 'direct' ? new DirectRenderTasks() : new ScheduleRenderTasks();\r\n        _this.tasks.setData(_this._dataRows);\r\n        var that = _this;\r\n        _this.reorderAll = function () {\r\n            //fire for all other rankings a dirty order event, too\r\n            var ranking = this.source;\r\n            var type = this.type;\r\n            for (var _i = 0, _a = that.getRankings(); _i < _a.length; _i++) {\r\n                var r = _a[_i];\r\n                if (r !== ranking) {\r\n                    r.dirtyOrder(type === Ranking.EVENT_FILTER_CHANGED ? [EDirtyReason.FILTER_CHANGED] : [EDirtyReason.UNKNOWN]);\r\n                }\r\n            }\r\n        };\r\n        return _this;\r\n    }\r\n    /**\r\n     * set a globally applied filter to all data without changing the data source itself\r\n     * @param {((row: IDataRow) => boolean) | null} filter\r\n     */\r\n    LocalDataProvider.prototype.setFilter = function (filter) {\r\n        this.filter = filter;\r\n        this.reorderAll.call({ type: Ranking.EVENT_FILTER_CHANGED });\r\n    };\r\n    LocalDataProvider.prototype.getFilter = function () {\r\n        return this.filter;\r\n    };\r\n    LocalDataProvider.prototype.getTotalNumberOfRows = function () {\r\n        return this.data.length;\r\n    };\r\n    LocalDataProvider.prototype.getTaskExecutor = function () {\r\n        return this.tasks;\r\n    };\r\n    Object.defineProperty(LocalDataProvider.prototype, \"data\", {\r\n        get: function () {\r\n            return this._data;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LocalDataProvider.prototype.destroy = function () {\r\n        _super.prototype.destroy.call(this);\r\n        this.tasks.terminate();\r\n    };\r\n    /**\r\n     * replaces the dataset rows with a new one\r\n     * @param data\r\n     */\r\n    LocalDataProvider.prototype.setData = function (data) {\r\n        this._data = data;\r\n        this._dataRows = toRows(data);\r\n        this.dataChanged();\r\n    };\r\n    LocalDataProvider.prototype.dataChanged = function () {\r\n        this.tasks.setData(this._dataRows);\r\n        for (var _i = 0, _a = this.getRankings(); _i < _a.length; _i++) {\r\n            var ranking = _a[_i];\r\n            this.tasks.preComputeData(ranking);\r\n        }\r\n        this.fire(ADataProvider.EVENT_DATA_CHANGED, this._dataRows);\r\n        this.reorderAll.call({ type: Ranking.EVENT_FILTER_CHANGED });\r\n    };\r\n    LocalDataProvider.prototype.clearData = function () {\r\n        this.setData([]);\r\n    };\r\n    /**\r\n     * append rows to the dataset\r\n     * @param data\r\n     */\r\n    LocalDataProvider.prototype.appendData = function (data) {\r\n        for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\r\n            var d = data_1[_i];\r\n            this._data.push(d);\r\n            this._dataRows.push({ v: d, i: this._dataRows.length });\r\n        }\r\n        this.dataChanged();\r\n    };\r\n    LocalDataProvider.prototype.cloneRanking = function (existing) {\r\n        var ranking = _super.prototype.cloneRanking.call(this, existing);\r\n        if (this.ooptions.filterGlobally) {\r\n            ranking.on(Ranking.EVENT_FILTER_CHANGED + \".reorderAll\", this.reorderAll);\r\n        }\r\n        this.trackRanking(ranking, existing);\r\n        return ranking;\r\n    };\r\n    LocalDataProvider.prototype.trackRanking = function (ranking, existing) {\r\n        var _this = this;\r\n        var that = this;\r\n        ranking.on(Column.EVENT_DIRTY_CACHES + \".cache\", function () {\r\n            var col = this.origin;\r\n            while (col instanceof Column) {\r\n                // console.log(col.label, 'dirty data');\r\n                that.tasks.dirtyColumn(col, 'data');\r\n                that.tasks.preComputeCol(col);\r\n                col = col.parent;\r\n            }\r\n        });\r\n        var cols = ranking.flatColumns;\r\n        var addKey = Ranking.EVENT_ADD_COLUMN + \".cache\";\r\n        var removeKey = Ranking.EVENT_REMOVE_COLUMN + \".cache\";\r\n        var removeCol = function (col) {\r\n            _this.tasks.dirtyColumn(col, 'data');\r\n            if (col instanceof CompositeColumn) {\r\n                col.on(addKey, null);\r\n                col.on(removeKey, null);\r\n            }\r\n        };\r\n        var addCol = function (col) {\r\n            _this.tasks.preComputeCol(col);\r\n            if (col instanceof CompositeColumn) {\r\n                col.on(addKey, addCol);\r\n                col.on(removeKey, removeCol);\r\n            }\r\n        };\r\n        ranking.on(addKey, addCol);\r\n        ranking.on(removeKey, removeCol);\r\n        for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\r\n            var col = cols_1[_i];\r\n            if (col instanceof CompositeColumn) {\r\n                col.on(addKey, addCol);\r\n                col.on(removeKey, removeCol);\r\n            }\r\n        }\r\n        if (existing) {\r\n            var copy = existing.flatColumns;\r\n            for (var i = 0; i < cols.length; ++i) {\r\n                this.tasks.copyCache(cols[i], copy[i]);\r\n            }\r\n        }\r\n        this.tasks.preComputeData(ranking);\r\n    };\r\n    LocalDataProvider.prototype.cleanUpRanking = function (ranking) {\r\n        if (this.ooptions.filterGlobally) {\r\n            ranking.on(Ranking.EVENT_FILTER_CHANGED + \".reorderAll\", null);\r\n        }\r\n        var cols = ranking.flatColumns;\r\n        var addKey = Ranking.EVENT_ADD_COLUMN + \".cache\";\r\n        var removeKey = Ranking.EVENT_REMOVE_COLUMN + \".cache\";\r\n        ranking.on(addKey, null);\r\n        ranking.on(removeKey, null);\r\n        for (var _i = 0, cols_2 = cols; _i < cols_2.length; _i++) {\r\n            var col = cols_2[_i];\r\n            if (col instanceof CompositeColumn) {\r\n                col.on(addKey, null);\r\n                col.on(removeKey, null);\r\n            }\r\n        }\r\n        this.tasks.dirtyRanking(ranking, 'data');\r\n        _super.prototype.cleanUpRanking.call(this, ranking);\r\n    };\r\n    LocalDataProvider.prototype.resolveFilter = function (ranking) {\r\n        //do the optional filtering step\r\n        var filter = [];\r\n        if (this.ooptions.filterGlobally) {\r\n            for (var _i = 0, _a = this.getRankings(); _i < _a.length; _i++) {\r\n                var r = _a[_i];\r\n                if (r.isFiltered()) {\r\n                    filter.push.apply(filter, r.flatColumns.filter(function (d) { return d.isFiltered(); }));\r\n                }\r\n            }\r\n        }\r\n        else if (ranking.isFiltered()) {\r\n            filter.push.apply(filter, ranking.flatColumns.filter(function (d) { return d.isFiltered(); }));\r\n        }\r\n        if (this.filter) {\r\n            filter.push(this.filter);\r\n        }\r\n        return filter;\r\n    };\r\n    LocalDataProvider.prototype.noSorting = function (ranking) {\r\n        // initial no sorting required just index mapping\r\n        var l = this._data.length;\r\n        var order = createIndexArray(l, l - 1);\r\n        var index2pos = order.slice();\r\n        for (var i = 0; i < l; ++i) {\r\n            order[i] = i;\r\n            index2pos[i] = i + 1; // shift since default is 0\r\n        }\r\n        this.tasks.preCompute(ranking, [{ rows: order, group: defaultGroup }], l - 1);\r\n        return { groups: [Object.assign({ order: order }, defaultGroup)], index2pos: index2pos };\r\n    };\r\n    LocalDataProvider.prototype.createSorter = function (ranking, filter, needsFiltering, needsGrouping, needsSorting) {\r\n        var _this = this;\r\n        var groups = new Map();\r\n        var groupOrder = [];\r\n        var maxDataIndex = -1;\r\n        var groupCriteria = ranking.getGroupCriteria();\r\n        var lookups = needsSorting ? new CompareLookup(this._data.length, true, ranking, this.tasks.valueCache.bind(this.tasks)) : undefined;\r\n        var pushGroup = function (group, r) {\r\n            var groupKey = group.name.toLowerCase();\r\n            if (groups.has(groupKey)) {\r\n                groups.get(groupKey).rows.push(r.i);\r\n                return;\r\n            }\r\n            var s = { group: group, rows: [r.i] };\r\n            groups.set(groupKey, s);\r\n            groupOrder.push(s);\r\n        };\r\n        var groupCaches = groupCriteria.map(function (c) { return _this.tasks.valueCache(c); });\r\n        var filterCaches = filter.map(function (c) { return typeof c === 'function' ? undefined : _this.tasks.valueCache(c); });\r\n        var toGroup = groupCriteria.length === 1 ?\r\n            function (r) { return joinGroups([groupCriteria[0].group(r, groupCaches[0] ? groupCaches[0](r.i) : undefined)]); } :\r\n            function (r) { return joinGroups(groupCriteria.map(function (c, i) { return c.group(r, groupCaches[i] ? groupCaches[i](r.i) : undefined); })); };\r\n        if (needsFiltering) {\r\n            // filter, group, sort\r\n            outer: for (var _i = 0, _a = this._dataRows; _i < _a.length; _i++) {\r\n                var r = _a[_i];\r\n                for (var f = 0; f < filter.length; ++f) {\r\n                    var fc = filter[f];\r\n                    var c = filterCaches[f];\r\n                    if ((typeof fc === 'function' && !fc(r)) || (fc instanceof Column && !fc.filter(r, c ? c(r.i) : undefined))) {\r\n                        continue outer;\r\n                    }\r\n                }\r\n                if (maxDataIndex < r.i) {\r\n                    maxDataIndex = r.i;\r\n                }\r\n                if (lookups) {\r\n                    lookups.push(r);\r\n                }\r\n                pushGroup(toGroup(r), r);\r\n            }\r\n            // some default sorting\r\n            groupOrder.sort(function (a, b) { return a.group.name.toLowerCase().localeCompare(b.group.name.toLowerCase()); });\r\n            return { maxDataIndex: maxDataIndex, lookups: lookups, groupOrder: groupOrder };\r\n        }\r\n        // reuse the existing groups\r\n        for (var _b = 0, _c = ranking.getGroups(); _b < _c.length; _b++) {\r\n            var before = _c[_b];\r\n            var order = before.order;\r\n            if (!needsGrouping) {\r\n                var clone = duplicateGroup(before);\r\n                // reuse in full\r\n                groupOrder.push({ group: clone, rows: order });\r\n                if (!lookups) {\r\n                    maxDataIndex = order.reduce(function (a, b) { return Math.max(a, b); }, maxDataIndex);\r\n                    continue;\r\n                }\r\n                // sort\r\n                // tslint:disable-next-line:prefer-for-of\r\n                for (var o = 0; o < order.length; ++o) {\r\n                    var i = order[o];\r\n                    if (maxDataIndex < i) {\r\n                        maxDataIndex = i;\r\n                    }\r\n                    lookups.push(this._dataRows[i]);\r\n                }\r\n                continue;\r\n            }\r\n            // group, [sort]\r\n            // tslint:disable-next-line:prefer-for-of\r\n            for (var o = 0; o < order.length; ++o) {\r\n                var i = order[o];\r\n                if (maxDataIndex < i) {\r\n                    maxDataIndex = i;\r\n                }\r\n                var r = this._dataRows[i];\r\n                if (lookups) {\r\n                    lookups.push(r);\r\n                }\r\n                pushGroup(toGroup(r), r);\r\n            }\r\n        }\r\n        if (needsGrouping) {\r\n            // some default sorting\r\n            groupOrder.sort(function (a, b) { return a.group.name.toLowerCase().localeCompare(b.group.name.toLowerCase()); });\r\n        }\r\n        return { maxDataIndex: maxDataIndex, lookups: lookups, groupOrder: groupOrder };\r\n    };\r\n    LocalDataProvider.prototype.sortGroup = function (g, i, ranking, lookups, groupLookup, singleGroup, maxDataIndex) {\r\n        var group = g.group;\r\n        var sortTask = this.tasks.sort(ranking, group, g.rows, singleGroup, maxDataIndex, lookups);\r\n        // compute sort group value as task\r\n        var groupSortTask = groupLookup ? this.tasks.groupCompare(ranking, group, g.rows).then(function (r) { return r; }) : [];\r\n        // trigger task for groups to compute for this group\r\n        return Promise.all([sortTask, groupSortTask]).then(function (_a) {\r\n            var order = _a[0], groupC = _a[1];\r\n            if (groupLookup && Array.isArray(groupC)) {\r\n                groupLookup.pushValues(i, groupC);\r\n            }\r\n            return Object.assign(group, { order: order });\r\n        });\r\n    };\r\n    LocalDataProvider.prototype.sortGroups = function (groups, groupLookup, enforceSorting) {\r\n        // sort groups\r\n        if (groupLookup) {\r\n            var groupIndices = groups.map(function (_, i) { return i; });\r\n            sortComplex(groupIndices, groupLookup.sortOrders);\r\n            return groupIndices.map(function (i) { return groups[i]; });\r\n        }\r\n        if (enforceSorting) {\r\n            // create a default sorting\r\n            return groups.sort(function (a, b) { return a.name.localeCompare(b.name); });\r\n        }\r\n        return groups;\r\n    };\r\n    LocalDataProvider.prototype.index2pos = function (groups, maxDataIndex) {\r\n        var total = groups.reduce(function (a, b) { return a + b.order.length; }, 1);\r\n        var index2pos = createIndexArray(maxDataIndex + 1, total);\r\n        var offset = 1;\r\n        for (var _i = 0, groups_1 = groups; _i < groups_1.length; _i++) {\r\n            var g = groups_1[_i];\r\n            // tslint:disable-next-line\r\n            for (var i = 0; i < g.order.length; i++, offset++) {\r\n                index2pos[g.order[i]] = offset;\r\n            }\r\n        }\r\n        return { groups: groups, index2pos: index2pos };\r\n    };\r\n    LocalDataProvider.prototype.sort = function (ranking, dirtyReason) {\r\n        var _this = this;\r\n        var reasons = new Set(dirtyReason);\r\n        if (this._data.length === 0) {\r\n            return { groups: [], index2pos: [] };\r\n        }\r\n        // console.log(dirtyReason);\r\n        var filter = this.resolveFilter(ranking);\r\n        var needsFiltering = reasons.has(EDirtyReason.UNKNOWN) || reasons.has(EDirtyReason.FILTER_CHANGED);\r\n        var needsGrouping = needsFiltering || reasons.has(EDirtyReason.GROUP_CRITERIA_CHANGED) || reasons.has(EDirtyReason.GROUP_CRITERIA_DIRTY);\r\n        var needsSorting = needsGrouping || reasons.has(EDirtyReason.SORT_CRITERIA_CHANGED) || reasons.has(EDirtyReason.SORT_CRITERIA_DIRTY);\r\n        var needsGroupSorting = needsGrouping || reasons.has(EDirtyReason.GROUP_SORT_CRITERIA_CHANGED) || reasons.has(EDirtyReason.GROUP_SORT_CRITERIA_DIRTY);\r\n        if (needsFiltering) {\r\n            this.tasks.dirtyRanking(ranking, 'summary');\r\n        }\r\n        else if (needsGrouping) {\r\n            this.tasks.dirtyRanking(ranking, 'group');\r\n        }\r\n        // otherwise the summary and group summaries should still be valid\r\n        if (filter.length === 0) {\r\n            // all rows so summary = data\r\n            this.tasks.copyData2Summary(ranking);\r\n        }\r\n        var isGroupedBy = ranking.getGroupCriteria().length > 0;\r\n        var isSortedBy = ranking.getSortCriteria().length > 0;\r\n        var isGroupedSortedBy = ranking.getGroupSortCriteria().length > 0;\r\n        if (!isGroupedBy && !isSortedBy && filter.length === 0) {\r\n            return this.noSorting(ranking);\r\n        }\r\n        var _a = this.createSorter(ranking, filter, needsFiltering, needsGrouping, needsSorting), maxDataIndex = _a.maxDataIndex, lookups = _a.lookups, groupOrder = _a.groupOrder;\r\n        if (groupOrder.length === 0) {\r\n            return { groups: [], index2pos: [] };\r\n        }\r\n        this.tasks.preCompute(ranking, groupOrder, maxDataIndex);\r\n        if (groupOrder.length === 1) {\r\n            var g = groupOrder[0];\r\n            // not required if: group sort criteria changed -> lookups will be none\r\n            return this.sortGroup(g, 0, ranking, lookups, undefined, true, maxDataIndex).then(function (group) {\r\n                return _this.index2pos([group], maxDataIndex);\r\n            });\r\n        }\r\n        var groupLookup = isGroupedSortedBy && needsGroupSorting ? new CompareLookup(groupOrder.length, false, ranking) : undefined;\r\n        return Promise.all(groupOrder.map(function (g, i) {\r\n            // not required if: group sort criteria changed -> lookups will be none\r\n            return _this.sortGroup(g, i, ranking, lookups, groupLookup, false, maxDataIndex);\r\n        })).then(function (groups) {\r\n            // not required if: sort criteria changed -> groupLookup will be none\r\n            var sortedGroups = _this.sortGroups(groups, groupLookup, needsGroupSorting);\r\n            return _this.index2pos(sortedGroups, maxDataIndex);\r\n        });\r\n    };\r\n    LocalDataProvider.prototype.viewRaw = function (indices) {\r\n        var _this = this;\r\n        return mapIndices(indices, function (i) { return _this._data[i] || {}; });\r\n    };\r\n    LocalDataProvider.prototype.viewRawRows = function (indices) {\r\n        return mapIndices(indices, this.mapToDataRow);\r\n    };\r\n    LocalDataProvider.prototype.getRow = function (index) {\r\n        return this._dataRows[index];\r\n    };\r\n    LocalDataProvider.prototype.seq = function (indices) {\r\n        return lazySeq(indices).map(this.mapToDataRow);\r\n    };\r\n    LocalDataProvider.prototype.view = function (indices) {\r\n        return this.viewRaw(indices);\r\n    };\r\n    LocalDataProvider.prototype.mappingSample = function (col) {\r\n        var _this = this;\r\n        var MAX_SAMPLE = 120; //at most 120 sample lines\r\n        var l = this._dataRows.length;\r\n        if (l <= MAX_SAMPLE) {\r\n            return lazySeq(this._dataRows).map(function (v) { return col.getRawNumber(v); });\r\n        }\r\n        //randomly select 500 elements\r\n        var indices = new Set();\r\n        for (var i = 0; i < MAX_SAMPLE; ++i) {\r\n            var j = Math.floor(Math.random() * (l - 1));\r\n            while (indices.has(j)) {\r\n                j = Math.floor(Math.random() * (l - 1));\r\n            }\r\n            indices.add(j);\r\n        }\r\n        return lazySeq(Array.from(indices)).map(function (i) { return col.getRawNumber(_this._dataRows[i]); });\r\n    };\r\n    LocalDataProvider.prototype.searchAndJump = function (search, col) {\r\n        //case insensitive search\r\n        search = typeof search === 'string' ? search.toLowerCase() : search;\r\n        var f = typeof search === 'string' ? function (v) { return v.toLowerCase().indexOf(search) >= 0; } : search.test.bind(search);\r\n        var indices = [];\r\n        for (var i = 0; i < this._dataRows.length; ++i) {\r\n            if (f(col.getLabel(this._dataRows[i]))) {\r\n                indices.push(i);\r\n            }\r\n        }\r\n        this.jumpToNearest(indices);\r\n    };\r\n    return LocalDataProvider;\r\n}(ACommonDataProvider));\r\nexport default LocalDataProvider;\r\nfunction toRows(data) {\r\n    return data.map(function (v, i) { return ({ v: v, i: i }); });\r\n}\r\n//# sourceMappingURL=LocalDataProvider.js.map","/**\r\n * number of bins before switching to dense mode\r\n * @internal\r\n */\r\nexport var DENSE_HISTOGRAM = 19;\r\n/**\r\n * minimal witdh of a column to show the label in the header\r\n * @internal\r\n */\r\nexport var MIN_LABEL_WIDTH = 30;\r\n/**\r\n * number of milliseconds to wait before a hovered canvas row will be replaced with a DOM one\r\n * @type {number}\r\n * @internal\r\n */\r\nexport var HOVER_DELAY_SHOW_DETAIL = 500;\r\nexport var GUESSED_ROW_HEIGHT = 18;\r\nexport var GUESSES_GROUP_HEIGHT = 40;\r\n//# sourceMappingURL=constants.js.map","var styles = new Map();\r\n// {\r\n//   const r = /^[$]([\\w]+): ([\\w #.()'\\/,-]+)( !default)?;/gmi;\r\n//   const s = String(vars);\r\n//   let m: RegExpMatchArray | null = r.exec(s);\r\n//   while (m != null) {\r\n//     styles.set(m[1], m[2]);\r\n//     m = r.exec(s);\r\n//   }\r\n// }\r\n/** @internal */\r\nexport default function getStyle(key, defaultValue) {\r\n    if (defaultValue === void 0) { defaultValue = ''; }\r\n    if (key[0] === '$') {\r\n        key = key.slice(1);\r\n    }\r\n    if (styles.has(key)) {\r\n        return styles.get(key);\r\n    }\r\n    return defaultValue;\r\n}\r\n/** @internal */\r\nexport var COLUMN_PADDING = parseInt(getStyle('lu_engine_grip_gap', '5px'), 10);\r\n/** @internal */\r\nexport var FILTERED_OPACITY = parseFloat(getStyle('lu_filtered_opacity', '0.2'));\r\n/** @internal */\r\nexport var DASH = {\r\n    width: parseInt(getStyle('lu_missing_dash_width', '3px'), 10),\r\n    height: parseInt(getStyle('lu_missing_dash_height', '10px'), 10),\r\n    color: getStyle('lu_missing_dash_color', 'gray')\r\n};\r\n/** @internal */\r\nexport var UPSET = {\r\n    color: getStyle('lu_renderer_upset_color'),\r\n    inactive: parseFloat(getStyle('lu_renderer_upset_inactive_opacity', '0.1'))\r\n};\r\n/** @internal */\r\nexport var DOT = {\r\n    color: getStyle('lu_renderer_dot_color', 'gray'),\r\n    size: parseInt(getStyle('lu_renderer_dot_size', '5px'), 10),\r\n    opacity: parseFloat(getStyle('lu_renderer_dot_opacity', '0.5'))\r\n};\r\n/** @internal */\r\nexport var BOX_PLOT = {\r\n    box: getStyle('lu_renderer_boxplot_box', '#e0e0e0'),\r\n    stroke: getStyle('lu_renderer_boxplot_stroke', 'black'),\r\n    sort: getStyle('lu_renderer_boxplot_sort_indicator', '#ffa500'),\r\n    outlier: getStyle('lu_renderer_boxplot_outlier', '#e0e0e0')\r\n};\r\n/** @internal */\r\nexport var AGGREGATE = {\r\n    width: parseInt(getStyle('lu_aggregate_square_bracket_width', '4px'), 10),\r\n    strokeWidth: parseInt(getStyle('lu_aggregate_square_bracket_stroke_width', '2px'), 10),\r\n    color: getStyle('lu_aggregate_square_bracket_stroke_color', '#000'),\r\n    levelOffset: parseInt(getStyle('lu_aggregate_level_offset', '2px'), 10),\r\n    levelWidth: parseInt(getStyle('lu_aggregate_level_width', '22px'), 10)\r\n};\r\n/** @internal */\r\nexport var SLOPEGRAPH_WIDTH = parseInt(getStyle('lu_slope_width', '200px'), 10);\r\n/** @internal */\r\nexport var CANVAS_HEIGHT = 4;\r\n/** @internal */\r\nexport var CSS_PREFIX = getStyle('lu_css_prefix', 'lu');\r\n/** @internal */\r\nexport var ENGINE_CSS_PREFIX = 'le';\r\n/** @internal */\r\nexport var RESIZE_SPACE = parseInt(getStyle('lu_engine_resize_space', '50px'), 10);\r\n/** @internal */\r\nexport var RESIZE_ANIMATION_DURATION = parseInt(getStyle('lu_engine_resize_animation_duration', '1000ms'), 10);\r\n/** @internal */\r\nexport function cssClass(suffix) {\r\n    return suffix ? CSS_PREFIX + \"-\" + suffix : CSS_PREFIX;\r\n}\r\n/** @internal */\r\nexport function engineCssClass(suffix) {\r\n    return suffix ? ENGINE_CSS_PREFIX + \"-\" + suffix : ENGINE_CSS_PREFIX;\r\n}\r\n/** @internal */\r\nexport function aria(text) {\r\n    return \"<span class=\\\"\" + cssClass('aria') + \"\\\" aria-hidden=\\\"true\\\">\" + text + \"</span>\";\r\n}\r\n//# sourceMappingURL=index.js.map","import { MIN_LABEL_WIDTH } from '../constants';\r\nimport { isMapAbleColumn, DEFAULT_COLOR } from '../model';\r\nimport { hsl } from 'd3-color';\r\nimport { cssClass } from '../styles';\r\n/** @internal */\r\nexport function noop() {\r\n    // no op\r\n}\r\nexport var noRenderer = {\r\n    template: \"<div></div>\",\r\n    update: noop\r\n};\r\n/** @internal */\r\nexport function setText(node, text) {\r\n    if (text === undefined) {\r\n        return node;\r\n    }\r\n    //no performance boost if setting the text node directly\r\n    //const textNode = <Text>node.firstChild;\r\n    //if (textNode == null) {\r\n    //  node.appendChild(node.ownerDocument!.createTextNode(text));\r\n    //} else {\r\n    //  textNode.data = text;\r\n    //}\r\n    if (node.textContent !== text) {\r\n        node.textContent = text;\r\n    }\r\n    return node;\r\n}\r\n/**\r\n * for each item matching the selector execute the callback\r\n * @param node\r\n * @param selector\r\n * @param callback\r\n * @internal\r\n */\r\nexport function forEach(node, selector, callback) {\r\n    Array.from(node.querySelectorAll(selector)).forEach(callback);\r\n}\r\n/** @internal */\r\nexport function forEachChild(node, callback) {\r\n    Array.from(node.children).forEach(callback);\r\n}\r\n/**\r\n * matches the columns and the dom nodes representing them\r\n * @param {HTMLElement} node row\r\n * @param columns columns to check\r\n * @internal\r\n */\r\nexport function matchColumns(node, columns, ctx) {\r\n    if (node.childElementCount === 0) {\r\n        // initial call fast method\r\n        node.innerHTML = columns.map(function (c) { return c.template; }).join('');\r\n        var children_1 = Array.from(node.children);\r\n        columns.forEach(function (col, i) {\r\n            var cnode = children_1[i];\r\n            // set attribute for finding again\r\n            cnode.dataset.columnId = col.column.id;\r\n            // store current renderer\r\n            cnode.dataset.renderer = col.rendererId;\r\n            cnode.classList.add(cssClass(\"renderer-\" + col.rendererId));\r\n        });\r\n        return;\r\n    }\r\n    function matches(c, i) {\r\n        //do both match?\r\n        var n = node.children[i];\r\n        return n != null && n.dataset.columnId === c.column.id && n.dataset.renderer === c.rendererId;\r\n    }\r\n    if (columns.every(matches)) {\r\n        return; //nothing to do\r\n    }\r\n    var idsAndRenderer = new Set(columns.map(function (c) { return c.column.id + \"@\" + c.rendererId; }));\r\n    //remove all that are not existing anymore\r\n    forEachChild(node, function (n) {\r\n        var id = n.dataset.columnId;\r\n        var renderer = n.dataset.renderer;\r\n        var idAndRenderer = id + \"@\" + renderer;\r\n        if (!idsAndRenderer.has(idAndRenderer)) {\r\n            node.removeChild(n);\r\n        }\r\n    });\r\n    columns.forEach(function (col) {\r\n        var cnode = node.querySelector(\"[data-column-id=\\\"\" + col.column.id + \"\\\"]\");\r\n        if (!cnode) {\r\n            cnode = ctx.asElement(col.template);\r\n            cnode.dataset.columnId = col.column.id;\r\n            cnode.dataset.renderer = col.rendererId;\r\n            cnode.classList.add(cssClass(\"renderer-\" + col.rendererId));\r\n        }\r\n        node.appendChild(cnode);\r\n    });\r\n}\r\nexport function wideEnough(col, length) {\r\n    if (length === void 0) { length = col.labels.length; }\r\n    var w = col.getWidth();\r\n    return w / length > MIN_LABEL_WIDTH; // at least 30 pixel\r\n}\r\nexport function wideEnoughCat(col) {\r\n    var w = col.getWidth();\r\n    return w / col.categories.length > MIN_LABEL_WIDTH; // at least 30 pixel\r\n}\r\n// side effect\r\nvar adaptColorCache = {};\r\n/**\r\n * Adapts the text color for a given background color\r\n * @param {string} bgColor as `#ff0000`\r\n * @returns {string} returns `black` or `white` for best contrast\r\n */\r\nexport function adaptTextColorToBgColor(bgColor) {\r\n    var bak = adaptColorCache[bgColor];\r\n    if (bak) {\r\n        return bak;\r\n    }\r\n    return adaptColorCache[bgColor] = hsl(bgColor).l > 0.5 ? 'black' : 'white';\r\n}\r\n/**\r\n *\r\n * Adapts the text color for a given background color\r\n * @param {HTMLElement} node the node containing the text\r\n * @param {string} bgColor as `#ff0000`\r\n * @param {string} title the title to render\r\n * @param {number} width for which percentages of the cell this background applies (0..1)\r\n */\r\nexport function adaptDynamicColorToBgColor(node, bgColor, title, width) {\r\n    var adapt = adaptTextColorToBgColor(bgColor);\r\n    if ((width <= 0.05 || adapt === 'black') || width > 0.9) { // almost empty or full\r\n        node.style.color = adapt === 'black' || width <= 0.05 ? null : adapt; // null = black\r\n        // node.classList.remove('lu-gradient-text');\r\n        // node.style.backgroundImage = null;\r\n        return;\r\n    }\r\n    node.style.color = null;\r\n    node.innerText = title;\r\n    var span = node.ownerDocument.createElement('span');\r\n    span.classList.add(cssClass('gradient-text'));\r\n    span.style.color = adapt;\r\n    span.innerText = title;\r\n    node.appendChild(span);\r\n}\r\n/** @internal */\r\nexport var uniqueId = (function () {\r\n    // side effect but just within the function itself, so good for the library\r\n    var idCounter = 0;\r\n    return function (prefix) { return \"\" + prefix + (idCounter++).toString(36); };\r\n})();\r\nvar NUM_EXAMPLE_VALUES = 5;\r\n/** @internal */\r\nexport function exampleText(col, rows) {\r\n    var examples = [];\r\n    rows.every(function (row) {\r\n        if (col.getValue(row) == null) {\r\n            return true;\r\n        }\r\n        var v = col.getLabel(row);\r\n        examples.push(v);\r\n        return examples.length < NUM_EXAMPLE_VALUES;\r\n    });\r\n    if (examples.length === 0) {\r\n        return '';\r\n    }\r\n    return \"\" + examples.join(', ') + (examples.length < rows.length ? ', ...' : '');\r\n}\r\n/** @internal */\r\nexport function multiLevelGridCSSClass(idPrefix, column) {\r\n    return cssClass(\"stacked-\" + idPrefix + \"-\" + column.id);\r\n}\r\n/** @internal */\r\nexport function colorOf(col) {\r\n    if (isMapAbleColumn(col)) {\r\n        return col.getColorMapping().apply(0);\r\n    }\r\n    return DEFAULT_COLOR;\r\n}\r\n//# sourceMappingURL=utils.js.map","import { ActionColumn } from '../model';\r\nimport { ERenderMode } from './interfaces';\r\nimport { forEachChild, noRenderer } from './utils';\r\nimport { cssClass } from '../styles';\r\nvar ActionRenderer = /** @class */ (function () {\r\n    function ActionRenderer() {\r\n        this.title = 'Default';\r\n    }\r\n    ActionRenderer.prototype.canRender = function (col, mode) {\r\n        return col instanceof ActionColumn && mode !== ERenderMode.SUMMARY;\r\n    };\r\n    ActionRenderer.prototype.create = function (col) {\r\n        var actions = col.actions;\r\n        return {\r\n            template: \"<div class=\\\"\" + cssClass('actions') + \" \" + cssClass('hover-only') + \"\\\">\" + actions.map(function (a) { return \"<span title='\" + a.name + \"' class='\" + (a.className || '') + \"'>\" + (a.icon || '') + \"</span>\"; }).join('') + \"</div>\",\r\n            update: function (n, d) {\r\n                forEachChild(n, function (ni, i) {\r\n                    ni.onclick = function (event) {\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n                        setTimeout(function () { return actions[i].action(d); }, 1); // async\r\n                    };\r\n                });\r\n            }\r\n        };\r\n    };\r\n    ActionRenderer.prototype.createGroup = function (col, context) {\r\n        var actions = col.groupActions;\r\n        return {\r\n            template: \"<div class=\\\"\" + cssClass('actions') + \" \" + cssClass('hover-only') + \"\\\">\" + actions.map(function (a) { return \"<span title='\" + a.name + \"' class='\" + (a.className || '') + \"'>\" + (a.icon || '') + \"</span>\"; }).join('') + \"</div>\",\r\n            update: function (n, group) {\r\n                forEachChild(n, function (ni, i) {\r\n                    ni.onclick = function (event) {\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n                        context.tasks.groupRows(col, group, 'identity', function (r) { return r; }).then(function (rows) {\r\n                            if (typeof rows === 'symbol') {\r\n                                return;\r\n                            }\r\n                            setTimeout(function () { return actions[i].action(group, Array.from(rows)); }, 1); // async\r\n                        });\r\n                    };\r\n                });\r\n            }\r\n        };\r\n    };\r\n    ActionRenderer.prototype.createSummary = function () {\r\n        return noRenderer;\r\n    };\r\n    return ActionRenderer;\r\n}());\r\nexport default ActionRenderer;\r\n//# sourceMappingURL=ActionRenderer.js.map","import { isGroup } from '../model';\r\nexport function isAlwaysShowingGroupStrategy(strategy) {\r\n    return strategy === 'group+item' || strategy === 'group+item+top' || strategy === 'group+top+item';\r\n}\r\nexport function hasTopNStrategy(strategy) {\r\n    return strategy === 'group+item+top' || strategy === 'group+top+item';\r\n}\r\nexport function toItemMeta(relativeIndex, group, topN) {\r\n    if (relativeIndex === 0) {\r\n        return group.order.length === 1 ? 'first last' : 'first';\r\n    }\r\n    if ((relativeIndex === (group.order.length - 1)) || (topN > 0 && relativeIndex === (topN - 1))) {\r\n        return 'last';\r\n    }\r\n    return null;\r\n}\r\nexport function groupParents(group, meta) {\r\n    var parents = [{ group: group, meta: meta }];\r\n    var prev = group;\r\n    var prevMeta = meta;\r\n    var parent = group.parent;\r\n    while (parent) {\r\n        if (parent.subGroups.length === 1 && (prevMeta === 'first last')) {\r\n            meta = 'first last';\r\n        }\r\n        else if (parent.subGroups[0] === prev && (prevMeta === 'first last' || prevMeta === 'first')) {\r\n            meta = 'first';\r\n        }\r\n        else if (parent.subGroups[parent.subGroups.length - 1] === prev && (prevMeta === 'last' || prevMeta === 'first last')) {\r\n            meta = 'last';\r\n        }\r\n        else {\r\n            meta = null;\r\n        }\r\n        parents.unshift({ group: parent, meta: meta });\r\n        prev = parent;\r\n        prevMeta = meta;\r\n        parent = parent.parent;\r\n    }\r\n    return parents;\r\n}\r\n/**\r\n * number of group levels this items ends\r\n */\r\nexport function groupEndLevel(item, topNGetter) {\r\n    var group = isGroup(item) ? item : item.group;\r\n    var last = isGroup(item) ? 'first last' : toItemMeta(item.relativeIndex, item.group, topNGetter(group));\r\n    if (last !== 'last' && last !== 'first last') {\r\n        return 0;\r\n    }\r\n    var prev = group;\r\n    var parent = group.parent;\r\n    var i = 1;\r\n    while (parent) {\r\n        if (!(parent.subGroups.length === 1 || (parent.subGroups[parent.subGroups.length - 1] === prev))) {\r\n            // not last of group - end\r\n            return i;\r\n        }\r\n        ++i;\r\n        prev = parent;\r\n        parent = parent.parent;\r\n    }\r\n    return i;\r\n}\r\nexport function isSummaryGroup(group, strategy, topNGetter) {\r\n    var topN = topNGetter(group);\r\n    return isAlwaysShowingGroupStrategy(strategy) && topN !== 0;\r\n}\r\nexport function toRowMeta(item, strategy, topNGetter) {\r\n    if (isGroup(item)) {\r\n        if (isSummaryGroup(item, strategy, topNGetter)) {\r\n            return 'first';\r\n        }\r\n        var level_1 = groupEndLevel(item, topNGetter);\r\n        if (level_1 === 0) {\r\n            return 'first';\r\n        }\r\n        return \"first last\" + (level_1 === 1 ? '' : level_1 - 1);\r\n    }\r\n    var last = toItemMeta(item.relativeIndex, item.group, topNGetter(item.group));\r\n    if (last == null) {\r\n        return null;\r\n    }\r\n    var level = groupEndLevel(item, topNGetter);\r\n    if (level === 0) {\r\n        return null;\r\n    }\r\n    return \"last\" + (level === 1 ? '' : level - 1);\r\n}\r\n//# sourceMappingURL=internal.js.map","import { AggregateGroupColumn, EAggregationState, defaultGroup } from '../model';\r\nimport { AGGREGATE, CANVAS_HEIGHT, cssClass } from '../styles';\r\nimport { groupParents, toItemMeta, isAlwaysShowingGroupStrategy, hasTopNStrategy, isSummaryGroup } from '../provider/internal';\r\nimport { clear } from '../internal';\r\nfunction preventDefault(event) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n}\r\nfunction matchNodes(node, length, clazz, addTopN) {\r\n    if (clazz === void 0) { clazz = 'agg-level'; }\r\n    if (addTopN === void 0) { addTopN = false; }\r\n    var doc = node.ownerDocument;\r\n    var children = Array.from(node.children);\r\n    if (addTopN) { // top N buttons\r\n        length = length + 1;\r\n    }\r\n    // add missing\r\n    for (var i = children.length; i < length; ++i) {\r\n        var child = doc.createElement('div');\r\n        child.classList.add(cssClass(clazz));\r\n        children.push(child);\r\n        node.appendChild(child);\r\n    }\r\n    // remove too many\r\n    for (var _i = 0, _a = children.splice(length, children.length - length); _i < _a.length; _i++) {\r\n        var r = _a[_i];\r\n        r.remove();\r\n    }\r\n    if (addTopN) {\r\n        var last = children[children.length - 1];\r\n        last.classList.remove(cssClass(clazz));\r\n        last.classList.add(cssClass('agg-all'));\r\n    }\r\n    return children;\r\n}\r\nfunction renderGroups(node, group, relativeIndex, col, provider) {\r\n    var strategy = provider.getAggregationStrategy();\r\n    var ranking = col.findMyRanker();\r\n    var topNGetter = function (group) { return provider.getTopNAggregated(ranking, group); };\r\n    var isRow = relativeIndex >= 0;\r\n    var isLeafGroup = !group.subGroups || group.subGroups.length === 0;\r\n    var alwaysShowGroup = isAlwaysShowingGroupStrategy(strategy);\r\n    var isSummary = !isRow && isSummaryGroup(group, strategy, topNGetter);\r\n    var hasTopN = isSummary && isLeafGroup && hasTopNStrategy(strategy);\r\n    var parents = groupParents(group, relativeIndex >= 0 ? toItemMeta(relativeIndex, group, provider.getTopNAggregated(ranking, group)) : 'first last');\r\n    var children = matchNodes(node, parents.length, 'agg-level', hasTopN);\r\n    var lastParent = parents.length - 1;\r\n    var _loop_1 = function (i) {\r\n        var parent_1 = parents[i];\r\n        var child = children[i];\r\n        var state = provider.getAggregationState(ranking, parent_1.group);\r\n        var isLastGroup = i === lastParent;\r\n        child.dataset.level = String(parents.length - 1 - i); // count backwards\r\n        if (alwaysShowGroup && (isRow || i < lastParent)) {\r\n            // inner or last\r\n            if (!isSummary && (parent_1.meta === 'last' || parent_1.meta === 'first last')) {\r\n                child.dataset.meta = 'last';\r\n            }\r\n            else {\r\n                delete child.dataset.meta;\r\n            }\r\n            child.classList.toggle(cssClass('agg-inner'), isRow && isLastGroup);\r\n            child.classList.remove(cssClass('agg-expand'), cssClass('agg-collapse'));\r\n            child.title = '';\r\n            delete child.onclick;\r\n            return \"continue\";\r\n        }\r\n        var isCollapsed = state === EAggregationState.COLLAPSE;\r\n        var isFirst = parent_1.meta === 'first' || parent_1.meta === 'first last';\r\n        var isShowAll = state === EAggregationState.EXPAND;\r\n        var childTopN = hasTopN && isLastGroup ? children[parents.length] : null;\r\n        var meta = parent_1.meta;\r\n        if (isSummary && parent_1.meta === 'first last') {\r\n            meta = 'first';\r\n        }\r\n        if (meta) {\r\n            child.dataset.meta = meta;\r\n        }\r\n        else {\r\n            delete child.dataset.meta;\r\n        }\r\n        child.classList.toggle(cssClass('agg-expand'), isFirst);\r\n        child.classList.toggle(cssClass('agg-collapse'), isCollapsed);\r\n        child.title = isFirst ? (isCollapsed ? 'Expand Group' : 'Collapse Group') : '';\r\n        if (!isFirst) {\r\n            delete child.onclick;\r\n        }\r\n        else {\r\n            child.onclick = function (evt) {\r\n                preventDefault(evt);\r\n                var nextState;\r\n                switch (strategy) {\r\n                    case 'group+top+item':\r\n                        nextState = state === EAggregationState.COLLAPSE ? EAggregationState.EXPAND_TOP_N : EAggregationState.COLLAPSE;\r\n                        break;\r\n                    case 'group':\r\n                    case 'item':\r\n                    case 'group+item':\r\n                    case 'group+item+top':\r\n                    default:\r\n                        nextState = state === EAggregationState.COLLAPSE ? EAggregationState.EXPAND : EAggregationState.COLLAPSE;\r\n                        break;\r\n                }\r\n                col.setAggregated(parent_1.group, nextState);\r\n            };\r\n        }\r\n        if (!childTopN) {\r\n            return \"continue\";\r\n        }\r\n        childTopN.dataset.level = String(i); // count upwards\r\n        childTopN.classList.toggle(cssClass('agg-compress'), isShowAll);\r\n        childTopN.title = isShowAll ? \"Show Top \" + provider.getShowTopN() + \" Only\" : 'Show All';\r\n        childTopN.onclick = function (evt) {\r\n            preventDefault(evt);\r\n            col.setAggregated(parent_1.group, state === EAggregationState.EXPAND ? EAggregationState.EXPAND_TOP_N : EAggregationState.EXPAND);\r\n        };\r\n    };\r\n    for (var i = 0; i < parents.length; ++i) {\r\n        _loop_1(i);\r\n    }\r\n}\r\nfunction isDummyGroup(group) {\r\n    return group.parent == null && group.name === defaultGroup.name;\r\n}\r\nvar AggregateGroupRenderer = /** @class */ (function () {\r\n    function AggregateGroupRenderer() {\r\n        this.title = 'Default';\r\n    }\r\n    AggregateGroupRenderer.prototype.canRender = function (col) {\r\n        return col instanceof AggregateGroupColumn;\r\n    };\r\n    AggregateGroupRenderer.prototype.create = function (col, context) {\r\n        return {\r\n            template: \"<div></div>\",\r\n            update: function (node, _row, i, group) {\r\n                if (isDummyGroup(group)) {\r\n                    clear(node);\r\n                    return;\r\n                }\r\n                renderGroups(node, group, i, col, context.provider);\r\n            },\r\n            render: function (ctx, _row, i, group) {\r\n                if (isDummyGroup(group)) {\r\n                    return;\r\n                }\r\n                var parents = groupParents(group, toItemMeta(i, group, context.provider.getTopNAggregated(col.findMyRanker(), group)));\r\n                ctx.fillStyle = AGGREGATE.color;\r\n                for (var i_1 = 0; i_1 < parents.length; ++i_1) {\r\n                    ctx.fillRect(AGGREGATE.levelWidth * i_1 + AGGREGATE.levelOffset, 0, AGGREGATE.strokeWidth, CANVAS_HEIGHT);\r\n                }\r\n                return parents.some(function (d) { return d.meta != null; });\r\n            }\r\n        };\r\n    };\r\n    AggregateGroupRenderer.prototype.createGroup = function (col, context) {\r\n        return {\r\n            template: \"<div><div class=\\\"\" + cssClass('agg-level') + \"\\\"></div></div>\",\r\n            update: function (node, group) {\r\n                renderGroups(node, group, -1, col, context.provider);\r\n            }\r\n        };\r\n    };\r\n    AggregateGroupRenderer.prototype.createSummary = function (col, context) {\r\n        return {\r\n            template: \"<div></div>\",\r\n            update: function (node) {\r\n                var ranking = col.findMyRanker();\r\n                var groups = ranking.getGroups();\r\n                if (groups.length === 1 && groups[0].name === defaultGroup.name) {\r\n                    clear(node);\r\n                    return;\r\n                }\r\n                var gparents = groups.map(function (group) { return groupParents(group, 'first last'); });\r\n                var max = gparents.reduce(function (a, b) { return Math.max(a, b.length); }, Number.NEGATIVE_INFINITY);\r\n                var children = matchNodes(node, max, 'agg-expand');\r\n                var _loop_2 = function (i) {\r\n                    var child = children[i];\r\n                    var subGroups = gparents.map(function (d) { return d[i] ? d[i].group : null; }).filter(function (d) { return d != null; });\r\n                    var isCollapsed = subGroups.every(function (d) { return context.provider.getAggregationState(ranking, d) === EAggregationState.COLLAPSE; });\r\n                    child.classList.toggle(cssClass('agg-collapse'), isCollapsed);\r\n                    child.title = isCollapsed ? 'Expand All Groups' : 'Collapse All Groups';\r\n                    child.onclick = function (evt) {\r\n                        preventDefault(evt);\r\n                        context.provider.aggregateAllOf(ranking, isCollapsed ? EAggregationState.EXPAND : EAggregationState.COLLAPSE, subGroups);\r\n                    };\r\n                };\r\n                for (var i = 0; i < max; ++i) {\r\n                    _loop_2(i);\r\n                }\r\n            }\r\n        };\r\n    };\r\n    return AggregateGroupRenderer;\r\n}());\r\nexport default AggregateGroupRenderer;\r\n//# sourceMappingURL=AggregateGroupRenderer.js.map","import { cssClass } from '../styles';\r\n/** @internal */\r\nexport var filterMissingText = 'Filter rows containing missing values';\r\n/** @internal */\r\nexport function filterMissingMarkup(bakMissing) {\r\n    return \"<label class=\\\"\" + cssClass('checkbox') + \"\\\">\\n    <input type=\\\"checkbox\\\" \" + (bakMissing ? 'checked=\"checked\"' : '') + \">\\n    <span class=\\\"\" + cssClass('filter-missing') + \"\\\">\" + filterMissingText + \"</span>\\n  </label>\";\r\n}\r\n/** @internal */\r\nexport function filterMissingNumberMarkup(bakMissing, count) {\r\n    return \"<label class=\\\"\" + cssClass('checkbox') + \"\\\">\\n    <input type=\\\"checkbox\\\" \" + (bakMissing ? 'checked=\"checked\"' : '') + \" \" + (count === 0 ? 'disabled' : '') + \">\\n    <span class=\\\"\" + cssClass('filter-missing') + \" \" + (count === 0 ? cssClass('disabled') : '') + \"\\\">Filter \" + count + \" missing value rows</span>\\n  </label>\";\r\n}\r\n/** @internal */\r\nexport function findFilterMissing(node) {\r\n    return node.getElementsByClassName(cssClass('filter-missing'))[0].previousElementSibling;\r\n}\r\n/** @internal */\r\nexport function updateFilterMissingNumberMarkup(element, count) {\r\n    var checked = element.getElementsByTagName('input')[0];\r\n    checked.disabled = count === 0;\r\n    element.lastElementChild.classList.toggle(cssClass('disabled'), count === 0);\r\n    element.lastElementChild.textContent = \"Filter \" + count + \" missing value rows\";\r\n}\r\n//# sourceMappingURL=missing.js.map","import { isMissingValue } from '../model';\r\nimport { CANVAS_HEIGHT, DASH, cssClass } from '../styles';\r\nexport function renderMissingValue(ctx, width, height, x, y) {\r\n    if (x === void 0) { x = 0; }\r\n    if (y === void 0) { y = 0; }\r\n    var dashX = Math.max(0, x + (width - DASH.width) / 2); // center horizontally\r\n    var dashY = Math.max(0, y + (height - DASH.height) / 2); // center vertically\r\n    ctx.fillStyle = DASH.color;\r\n    ctx.fillRect(dashX, dashY, Math.min(width, DASH.width), Math.min(height, DASH.height));\r\n}\r\nexport function renderMissingDOM(node, col, d) {\r\n    var missing = isMissingValue(col.getValue(d));\r\n    node.classList.toggle(cssClass('missing'), missing);\r\n    return missing;\r\n}\r\nexport function renderMissingCanvas(ctx, col, d, width, x, y) {\r\n    if (x === void 0) { x = 0; }\r\n    if (y === void 0) { y = 0; }\r\n    var missing = isMissingValue(col.getValue(d));\r\n    if (missing) {\r\n        renderMissingValue(ctx, width, CANVAS_HEIGHT, x, y);\r\n    }\r\n    return missing;\r\n}\r\n//# sourceMappingURL=missing.js.map","import { StringColumn } from '../model';\r\nimport { filterMissingMarkup, findFilterMissing } from '../ui/missing';\r\nimport { renderMissingDOM } from './missing';\r\nimport { setText, exampleText } from './utils';\r\nimport { cssClass } from '../styles';\r\nimport { debounce } from '../internal';\r\n/**\r\n * renders a string with additional alignment behavior\r\n * one instance factory shared among strings\r\n */\r\nvar StringCellRenderer = /** @class */ (function () {\r\n    function StringCellRenderer() {\r\n        this.title = 'Default';\r\n    }\r\n    StringCellRenderer.prototype.canRender = function (col) {\r\n        return col instanceof StringColumn;\r\n    };\r\n    StringCellRenderer.prototype.create = function (col) {\r\n        var align = col.alignment || 'left';\r\n        return {\r\n            template: \"<div\" + (align !== 'left' ? \" class=\\\"\" + cssClass(align) + \"\\\"\" : '') + \"> </div>\",\r\n            update: function (n, d) {\r\n                renderMissingDOM(n, col, d);\r\n                if (col.escape) {\r\n                    setText(n, col.getLabel(d));\r\n                }\r\n                else {\r\n                    n.innerHTML = col.getLabel(d);\r\n                }\r\n                n.title = n.textContent;\r\n            }\r\n        };\r\n    };\r\n    StringCellRenderer.prototype.createGroup = function (col, context) {\r\n        return {\r\n            template: \"<div> </div>\",\r\n            update: function (n, group) {\r\n                return context.tasks.groupExampleRows(col, group, 'string', function (rows) { return exampleText(col, rows); }).then(function (text) {\r\n                    if (typeof text === 'symbol') {\r\n                        return;\r\n                    }\r\n                    n.classList.toggle(cssClass('missing'), !text);\r\n                    if (col.escape) {\r\n                        setText(n, text);\r\n                    }\r\n                    else {\r\n                        n.innerHTML = text;\r\n                        n.title = text;\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    };\r\n    StringCellRenderer.interactiveSummary = function (col, node) {\r\n        var form = node;\r\n        var filterMissing = findFilterMissing(node);\r\n        var input = node.querySelector('input[type=\"text\"]');\r\n        var isRegex = node.querySelector('input[type=\"checkbox\"]');\r\n        var update = function () {\r\n            var valid = input.value.trim();\r\n            if (valid.length <= 0) {\r\n                var filter = filterMissing.checked ? { filter: null, filterMissing: filterMissing.checked } : null;\r\n                col.setFilter(filter);\r\n                return;\r\n            }\r\n            col.setFilter({\r\n                filter: isRegex.checked ? new RegExp(input.value) : input.value,\r\n                filterMissing: filterMissing.checked\r\n            });\r\n        };\r\n        filterMissing.onchange = update;\r\n        input.onchange = update;\r\n        input.oninput = debounce(update, 100);\r\n        isRegex.onchange = update;\r\n        form.onsubmit = function (evt) {\r\n            evt.preventDefault();\r\n            evt.stopPropagation();\r\n            update();\r\n            return false;\r\n        };\r\n        return function (actCol) {\r\n            col = actCol;\r\n            var f = col.getFilter() || { filter: null, filterMissing: false };\r\n            var bak = f.filter;\r\n            filterMissing.checked = f.filterMissing;\r\n            input.value = bak instanceof RegExp ? bak.source : bak || '';\r\n            isRegex.checked = bak instanceof RegExp;\r\n        };\r\n    };\r\n    StringCellRenderer.prototype.createSummary = function (col, _context, interactive) {\r\n        if (!interactive) {\r\n            return {\r\n                template: \"<div></div>\",\r\n                update: function (node) {\r\n                    var filter = col.getFilter();\r\n                    node.textContent = toString(filter);\r\n                }\r\n            };\r\n        }\r\n        var f = col.getFilter() || { filter: null, filterMissing: false };\r\n        var bak = f.filter || '';\r\n        var update;\r\n        return {\r\n            template: \"<form><input type=\\\"text\\\" placeholder=\\\"Filter \" + col.desc.label + \"...\\\" autofocus value=\\\"\" + ((bak instanceof RegExp) ? bak.source : bak) + \"\\\">\\n          <label class=\\\"\" + cssClass('checkbox') + \"\\\">\\n            <input type=\\\"checkbox\\\" \" + ((bak instanceof RegExp) ? 'checked=\"checked\"' : '') + \">\\n            <span>Use regular expressions</span>\\n          </label>\\n          \" + filterMissingMarkup(f.filterMissing) + \"</form>\",\r\n            update: function (node) {\r\n                if (!update) {\r\n                    update = StringCellRenderer.interactiveSummary(col, node);\r\n                }\r\n                update(col);\r\n            }\r\n        };\r\n    };\r\n    return StringCellRenderer;\r\n}());\r\nexport default StringCellRenderer;\r\nfunction toString(filter) {\r\n    if (filter == null || !filter.filter) {\r\n        return '';\r\n    }\r\n    if (filter.filter instanceof RegExp) {\r\n        return filter.filter.source;\r\n    }\r\n    return filter.filter;\r\n}\r\n//# sourceMappingURL=StringCellRenderer.js.map","import * as tslib_1 from \"tslib\";\r\nimport { AnnotateColumn } from '../model';\r\nimport StringCellRenderer from './StringCellRenderer';\r\nimport { cssClass } from '../styles';\r\nvar AnnotationRenderer = /** @class */ (function (_super) {\r\n    tslib_1.__extends(AnnotationRenderer, _super);\r\n    function AnnotationRenderer() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.title = 'Default';\r\n        return _this;\r\n    }\r\n    AnnotationRenderer.prototype.canRender = function (col) {\r\n        return _super.prototype.canRender.call(this, col) && col instanceof AnnotateColumn;\r\n    };\r\n    AnnotationRenderer.prototype.create = function (col) {\r\n        return {\r\n            template: \"<div>\\n        <span></span>\\n        <input class=\\\"\" + cssClass('hover-only') + \" \" + cssClass('annotate-input') + \"\\\">\\n       </div>\",\r\n            update: function (n, d) {\r\n                var label = n.firstElementChild;\r\n                var input = n.lastElementChild;\r\n                input.onchange = function () {\r\n                    label.textContent = input.value;\r\n                    col.setValue(d, input.value);\r\n                };\r\n                input.onclick = function (event) {\r\n                    event.stopPropagation();\r\n                };\r\n                label.textContent = input.value = col.getLabel(d);\r\n            }\r\n        };\r\n    };\r\n    return AnnotationRenderer;\r\n}(StringCellRenderer));\r\nexport default AnnotationRenderer;\r\n//# sourceMappingURL=AnnotationRenderer.js.map","import { isMapAbleColumn, DEFAULT_COLOR } from '../model';\r\nexport function colorOf(col, row, imposer, valueHint) {\r\n    if (imposer && imposer.color) {\r\n        return imposer.color(row, valueHint);\r\n    }\r\n    if (!row) {\r\n        if (isMapAbleColumn(col)) {\r\n            return col.getColorMapping().apply(valueHint != null ? valueHint : 0);\r\n        }\r\n        return DEFAULT_COLOR;\r\n    }\r\n    return col.getColor(row);\r\n}\r\n//# sourceMappingURL=impose.js.map","import { round } from '../internal';\r\nimport { isNumbersColumn, isNumberColumn, DEFAULT_COLOR } from '../model';\r\nimport { setText, adaptDynamicColorToBgColor, noRenderer } from './utils';\r\nimport { CANVAS_HEIGHT, cssClass } from '../styles';\r\nimport { colorOf } from './impose';\r\nimport { ERenderMode } from './interfaces';\r\nimport { renderMissingCanvas, renderMissingDOM } from './missing';\r\nvar BarCellRenderer = /** @class */ (function () {\r\n    /**\r\n     * flag to always render the value\r\n     * @type {boolean}\r\n     */\r\n    function BarCellRenderer(renderValue) {\r\n        if (renderValue === void 0) { renderValue = false; }\r\n        this.renderValue = renderValue;\r\n        this.title = 'Bar';\r\n    }\r\n    BarCellRenderer.prototype.canRender = function (col, mode) {\r\n        return mode === ERenderMode.CELL && isNumberColumn(col) && !isNumbersColumn(col);\r\n    };\r\n    BarCellRenderer.prototype.create = function (col, context, imposer) {\r\n        var width = context.colWidth(col);\r\n        return {\r\n            template: \"<div title=\\\"\\\">\\n          <div class=\\\"\" + cssClass('bar-label') + \"\\\" style='background-color: \" + DEFAULT_COLOR + \"'>\\n            <span \" + (this.renderValue ? '' : \"class=\\\"\" + cssClass('hover-only') + \"\\\"\") + \"></span>\\n          </div>\\n        </div>\",\r\n            update: function (n, d) {\r\n                var value = col.getNumber(d);\r\n                var missing = renderMissingDOM(n, col, d);\r\n                var w = isNaN(value) ? 0 : round(value * 100, 2);\r\n                var title = col.getLabel(d);\r\n                n.title = title;\r\n                var bar = n.firstElementChild;\r\n                bar.style.width = missing ? '100%' : w + \"%\";\r\n                var color = colorOf(col, d, imposer, value);\r\n                bar.style.backgroundColor = missing ? null : color;\r\n                setText(bar.firstElementChild, title);\r\n                var item = bar.firstElementChild;\r\n                setText(item, title);\r\n                adaptDynamicColorToBgColor(item, color || DEFAULT_COLOR, title, w / 100);\r\n            },\r\n            render: function (ctx, d) {\r\n                if (renderMissingCanvas(ctx, col, d, width)) {\r\n                    return;\r\n                }\r\n                var value = col.getNumber(d);\r\n                ctx.fillStyle = colorOf(col, d, imposer, value) || DEFAULT_COLOR;\r\n                var w = width * value;\r\n                ctx.fillRect(0, 0, isNaN(w) ? 0 : w, CANVAS_HEIGHT);\r\n            }\r\n        };\r\n    };\r\n    BarCellRenderer.prototype.createGroup = function () {\r\n        return noRenderer;\r\n    };\r\n    BarCellRenderer.prototype.createSummary = function () {\r\n        return noRenderer;\r\n    };\r\n    return BarCellRenderer;\r\n}());\r\nexport default BarCellRenderer;\r\n//# sourceMappingURL=BarCellRenderer.js.map","import { renderMissingDOM } from './missing';\r\nimport { noRenderer, setText } from './utils';\r\n/**\r\n * default renderer instance rendering the value as a text\r\n */\r\nvar DefaultCellRenderer = /** @class */ (function () {\r\n    function DefaultCellRenderer() {\r\n        this.title = 'String';\r\n        this.groupTitle = 'None';\r\n        this.summaryTitle = 'None';\r\n    }\r\n    DefaultCellRenderer.prototype.canRender = function (_col, _mode) {\r\n        return true;\r\n    };\r\n    DefaultCellRenderer.prototype.create = function (col) {\r\n        return {\r\n            template: \"<div> </div>\",\r\n            update: function (n, d) {\r\n                renderMissingDOM(n, col, d);\r\n                var l = col.getLabel(d);\r\n                setText(n, l);\r\n                n.title = l;\r\n            }\r\n        };\r\n    };\r\n    DefaultCellRenderer.prototype.createGroup = function (_col) {\r\n        return noRenderer;\r\n    };\r\n    DefaultCellRenderer.prototype.createSummary = function () {\r\n        return noRenderer;\r\n    };\r\n    return DefaultCellRenderer;\r\n}());\r\nexport { DefaultCellRenderer };\r\n//# sourceMappingURL=DefaultCellRenderer.js.map","import * as tslib_1 from \"tslib\";\r\nimport { BooleanColumn } from '../model';\r\nimport { DefaultCellRenderer } from './DefaultCellRenderer';\r\nimport { ERenderMode } from './interfaces';\r\nimport { cssClass } from '../styles';\r\nvar BooleanCellRenderer = /** @class */ (function (_super) {\r\n    tslib_1.__extends(BooleanCellRenderer, _super);\r\n    function BooleanCellRenderer() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.title = 'Default';\r\n        return _this;\r\n    }\r\n    BooleanCellRenderer.prototype.canRender = function (col, mode) {\r\n        return col instanceof BooleanColumn && mode === ERenderMode.CELL;\r\n    };\r\n    BooleanCellRenderer.prototype.create = function (col) {\r\n        var r = _super.prototype.create.call(this, col);\r\n        r.template = \"<div class=\\\"\" + cssClass('center') + \"\\\"> </div>\";\r\n        return r;\r\n    };\r\n    return BooleanCellRenderer;\r\n}(DefaultCellRenderer));\r\nexport default BooleanCellRenderer;\r\n//# sourceMappingURL=BooleanCellRenderer.js.map","import { round } from '../internal';\r\nimport { NumberColumn, isBoxPlotColumn, isNumberColumn, isMapAbleColumn } from '../model';\r\nimport { BOX_PLOT, CANVAS_HEIGHT, DOT, cssClass } from '../styles';\r\nimport { colorOf } from './impose';\r\nimport { ERenderMode } from './interfaces';\r\nimport { renderMissingCanvas } from './missing';\r\nimport { tasksAll } from '../provider';\r\nvar BOXPLOT = \"<div title=\\\"\\\">\\n  <div class=\\\"\" + cssClass('boxplot-whisker') + \"\\\">\\n    <div class=\\\"\" + cssClass('boxplot-box') + \"\\\"></div>\\n    <div class=\\\"\" + cssClass('boxplot-median') + \"\\\"></div>\\n    <div class=\\\"\" + cssClass('boxplot-mean') + \"\\\"></div>\\n  </div>\\n</div>\";\r\nvar MAPPED_BOXPLOT = \"<div title=\\\"\\\">\\n  <div class=\\\"\" + cssClass('boxplot-whisker') + \"\\\">\\n    <div class=\\\"\" + cssClass('boxplot-box') + \"\\\"></div>\\n    <div class=\\\"\" + cssClass('boxplot-median') + \"\\\"></div>\\n    <div class=\\\"\" + cssClass('boxplot-mean') + \"\\\"></div>\\n  </div>\\n  <span class=\\\"\" + cssClass('mapping-hint') + \"\\\"></span><span class=\\\"\" + cssClass('mapping-hint') + \"\\\"></span>\\n</div>\";\r\n/** @internal */\r\nexport function computeLabel(col, v) {\r\n    if (v == null) {\r\n        return '';\r\n    }\r\n    var f = col.getNumberFormat();\r\n    var mean = v.mean != null ? \"mean = \" + f(v.mean) + \" (dashed line)\\n\" : '';\r\n    return \"min = \" + f(v.min) + \"\\nq1 = \" + f(v.q1) + \"\\nmedian = \" + f(v.median) + \"\\n\" + mean + \"q3 = \" + f(v.q3) + \"\\nmax = \" + f(v.max);\r\n}\r\nvar BoxplotCellRenderer = /** @class */ (function () {\r\n    function BoxplotCellRenderer() {\r\n        this.title = 'Box Plot';\r\n    }\r\n    BoxplotCellRenderer.prototype.canRender = function (col, mode) {\r\n        return (isBoxPlotColumn(col) && mode === ERenderMode.CELL || (isNumberColumn(col) && mode !== ERenderMode.CELL));\r\n    };\r\n    BoxplotCellRenderer.prototype.create = function (col, context, imposer) {\r\n        var sortMethod = col.getSortMethod();\r\n        var sortedByMe = col.isSortedByMe().asc !== undefined;\r\n        var width = context.colWidth(col);\r\n        return {\r\n            template: BOXPLOT,\r\n            update: function (n, d) {\r\n                var data = col.getBoxPlotData(d);\r\n                n.classList.toggle(cssClass('missing'), !data);\r\n                if (!data) {\r\n                    return;\r\n                }\r\n                var label = col.getRawBoxPlotData(d);\r\n                renderDOMBoxPlot(col, n, data, label, sortedByMe ? sortMethod : '', colorOf(col, d, imposer));\r\n            },\r\n            render: function (ctx, d) {\r\n                if (renderMissingCanvas(ctx, col, d, width)) {\r\n                    return;\r\n                }\r\n                // Rectangle\r\n                var data = col.getBoxPlotData(d);\r\n                if (!data) {\r\n                    return;\r\n                }\r\n                var scaled = {\r\n                    min: data.min * width,\r\n                    median: data.median * width,\r\n                    mean: data.mean != null ? data.mean * width : undefined,\r\n                    q1: data.q1 * width,\r\n                    q3: data.q3 * width,\r\n                    max: data.max * width,\r\n                    outlier: data.outlier ? data.outlier.map(function (d) { return d * width; }) : undefined,\r\n                    whiskerLow: data.whiskerLow != null ? data.whiskerLow * width : undefined,\r\n                    whiskerHigh: data.whiskerHigh != null ? data.whiskerHigh * width : undefined\r\n                };\r\n                renderBoxPlot(ctx, scaled, sortedByMe ? sortMethod : '', colorOf(col, d, imposer), CANVAS_HEIGHT, 0);\r\n            }\r\n        };\r\n    };\r\n    BoxplotCellRenderer.prototype.createGroup = function (col, context, imposer) {\r\n        var sort = (col instanceof NumberColumn && col.isGroupSortedByMe().asc !== undefined) ? col.getSortMethod() : '';\r\n        return {\r\n            template: BOXPLOT,\r\n            update: function (n, group) {\r\n                return tasksAll([context.tasks.groupBoxPlotStats(col, group, false), context.tasks.groupBoxPlotStats(col, group, true)]).then(function (data) {\r\n                    if (typeof data === 'symbol') {\r\n                        return;\r\n                    }\r\n                    // render\r\n                    var isMissing = data == null || data[0] == null || data[0].group.count === 0 || data[0].group.count === data[0].group.missing;\r\n                    n.classList.toggle(cssClass('missing'), isMissing);\r\n                    if (isMissing) {\r\n                        return;\r\n                    }\r\n                    renderDOMBoxPlot(col, n, data[0].group, data[1].group, sort, colorOf(col, null, imposer));\r\n                });\r\n            }\r\n        };\r\n    };\r\n    BoxplotCellRenderer.prototype.createSummary = function (col, context, _interactive, imposer) {\r\n        return {\r\n            template: isMapAbleColumn(col) ? MAPPED_BOXPLOT : BOXPLOT,\r\n            update: function (n) {\r\n                return tasksAll([context.tasks.summaryBoxPlotStats(col, false), context.tasks.summaryBoxPlotStats(col, true)]).then(function (data) {\r\n                    if (typeof data === 'symbol') {\r\n                        return;\r\n                    }\r\n                    var isMissing = data == null || data[0] == null || data[0].summary.count === 0 || data[0].summary.count === data[0].summary.missing;\r\n                    n.classList.toggle(cssClass('missing'), isMissing);\r\n                    if (isMissing) {\r\n                        return;\r\n                    }\r\n                    var mappedSummary = data[0].summary;\r\n                    var rawSummary = data[1].summary;\r\n                    var sort = (col instanceof NumberColumn && col.isGroupSortedByMe().asc !== undefined) ? col.getSortMethod() : '';\r\n                    if (isMapAbleColumn(col)) {\r\n                        var range_1 = col.getRange();\r\n                        Array.from(n.getElementsByTagName('span')).forEach(function (d, i) { return d.textContent = range_1[i]; });\r\n                    }\r\n                    renderDOMBoxPlot(col, n, mappedSummary, rawSummary, sort, colorOf(col, null, imposer), isMapAbleColumn(col));\r\n                });\r\n            }\r\n        };\r\n    };\r\n    return BoxplotCellRenderer;\r\n}());\r\nexport default BoxplotCellRenderer;\r\nfunction renderDOMBoxPlot(col, n, data, label, sort, color, hasRange) {\r\n    if (hasRange === void 0) { hasRange = false; }\r\n    n.title = computeLabel(col, label);\r\n    var whiskers = n.firstElementChild;\r\n    var box = whiskers.firstElementChild;\r\n    var median = box.nextElementSibling;\r\n    var mean = whiskers.lastElementChild;\r\n    var leftWhisker = data.whiskerLow != null ? data.whiskerLow : Math.max(data.q1 - 1.5 * (data.q3 - data.q1), data.min);\r\n    var rightWhisker = data.whiskerHigh != null ? data.whiskerHigh : Math.min(data.q3 + 1.5 * (data.q3 - data.q1), data.max);\r\n    whiskers.style.left = round(leftWhisker * 100, 2) + \"%\";\r\n    var range = rightWhisker - leftWhisker;\r\n    whiskers.style.width = round(range * 100, 2) + \"%\";\r\n    //relative within the whiskers\r\n    box.style.left = round((data.q1 - leftWhisker) / range * 100, 2) + \"%\";\r\n    box.style.width = round((data.q3 - data.q1) / range * 100, 2) + \"%\";\r\n    box.style.backgroundColor = color;\r\n    //relative within the whiskers\r\n    median.style.left = round((data.median - leftWhisker) / range * 100, 2) + \"%\";\r\n    if (data.mean != null) {\r\n        mean.style.left = round((data.mean - leftWhisker) / range * 100, 2) + \"%\";\r\n        mean.style.display = null;\r\n    }\r\n    else {\r\n        mean.style.display = 'none';\r\n    }\r\n    // match lengths\r\n    var outliers = Array.from(n.children).slice(1, hasRange ? -2 : undefined);\r\n    var numOutliers = data.outlier ? data.outlier.length : 0;\r\n    outliers.splice(numOutliers, outliers.length - numOutliers).forEach(function (v) { return v.remove(); });\r\n    whiskers.dataset.sort = sort;\r\n    if (!data.outlier || numOutliers === 0) {\r\n        return;\r\n    }\r\n    for (var i = outliers.length; i < numOutliers; ++i) {\r\n        var p = n.ownerDocument.createElement('div');\r\n        p.classList.add(cssClass('boxplot-outlier'));\r\n        outliers.unshift(p);\r\n        whiskers.insertAdjacentElement('afterend', p);\r\n    }\r\n    data.outlier.forEach(function (v, i) {\r\n        delete outliers[i].dataset.sort;\r\n        outliers[i].style.left = round(v * 100, 2) + \"%\";\r\n    });\r\n    if (sort === 'min' && data.outlier[0] <= leftWhisker) {\r\n        // first outliers is the min\r\n        whiskers.dataset.sort = '';\r\n        outliers[0].dataset.sort = 'min';\r\n        if (outliers.length > 1) {\r\n            // append at the end of the DOM to be on top\r\n            outliers[outliers.length - 1].insertAdjacentElement('afterend', outliers[0]);\r\n        }\r\n    }\r\n    else if (sort === 'max' && data.outlier[outliers.length - 1] >= rightWhisker) {\r\n        // last outlier is the max\r\n        whiskers.dataset.sort = '';\r\n        outliers[outliers.length - 1].dataset.sort = 'max';\r\n    }\r\n}\r\nfunction renderBoxPlot(ctx, box, sort, color, height, topPadding) {\r\n    var left = box.whiskerLow != null ? box.whiskerLow : Math.max((box.q1 - 1.5 * (box.q3 - box.q1)), box.min);\r\n    var right = box.whiskerHigh != null ? box.whiskerHigh : Math.min((box.q3 + 1.5 * (box.q3 - box.q1)), box.max);\r\n    ctx.fillStyle = color || BOX_PLOT.box;\r\n    ctx.strokeStyle = BOX_PLOT.stroke;\r\n    ctx.beginPath();\r\n    ctx.rect(box.q1, 0, box.q3 - box.q1, height);\r\n    ctx.fill();\r\n    ctx.stroke();\r\n    //Line\r\n    var bottomPos = height - topPadding;\r\n    var middlePos = height / 2;\r\n    ctx.beginPath();\r\n    ctx.moveTo(left, middlePos);\r\n    ctx.lineTo(box.q1, middlePos);\r\n    ctx.moveTo(left, topPadding);\r\n    ctx.lineTo(left, bottomPos);\r\n    ctx.moveTo(box.median, 0);\r\n    ctx.lineTo(box.median, height);\r\n    ctx.moveTo(box.q3, middlePos);\r\n    ctx.lineTo(right, middlePos);\r\n    ctx.moveTo(right, topPadding);\r\n    ctx.lineTo(right, bottomPos);\r\n    ctx.stroke();\r\n    ctx.fill();\r\n    if (sort !== '') {\r\n        ctx.strokeStyle = BOX_PLOT.sort;\r\n        ctx.beginPath();\r\n        ctx.moveTo(box[sort], topPadding);\r\n        ctx.lineTo(box[sort], height - topPadding);\r\n        ctx.stroke();\r\n        ctx.fill();\r\n    }\r\n    if (!box.outlier) {\r\n        return;\r\n    }\r\n    ctx.fillStyle = BOX_PLOT.outlier;\r\n    box.outlier.forEach(function (v) {\r\n        // currently dots with 3px\r\n        ctx.fillRect(Math.max(v - DOT.size / 2, 0), middlePos - DOT.size / 2, DOT.size, DOT.size);\r\n    });\r\n}\r\n//# sourceMappingURL=BoxplotCellRenderer.js.map","import { hsl } from 'd3-color';\r\nimport { isNumbersColumn, isNumberColumn, isMapAbleColumn, DEFAULT_COLOR, SolidColorFunction } from '../model';\r\nimport { CANVAS_HEIGHT, cssClass } from '../styles';\r\nimport { colorOf } from './impose';\r\nimport { ERenderMode } from './interfaces';\r\nimport { renderMissingCanvas, renderMissingDOM } from './missing';\r\nimport { noRenderer, setText } from './utils';\r\nexport function toHeatMapColor(v, row, col, imposer) {\r\n    if (v == null || isNaN(v)) {\r\n        v = 1; // max = brightest\r\n    }\r\n    if (imposer || !isMapAbleColumn(col)) {\r\n        //hsl space encoding, encode in lightness\r\n        var color = hsl(colorOf(col, row, imposer, v) || DEFAULT_COLOR);\r\n        color.l = 1 - v; // largest value = darkest color\r\n        return color.toString();\r\n    }\r\n    var map = col.getColorMapping();\r\n    var valueColor = map.apply(v);\r\n    if (map instanceof SolidColorFunction) {\r\n        //hsl space encoding, encode in lightness\r\n        var color = hsl(valueColor);\r\n        color.l = 1 - v; // largest value = darkest color\r\n        return color.toString();\r\n    }\r\n    // some custom logic that maps to another value\r\n    return valueColor;\r\n}\r\nvar BrightnessCellRenderer = /** @class */ (function () {\r\n    function BrightnessCellRenderer() {\r\n        this.title = 'Brightness';\r\n    }\r\n    BrightnessCellRenderer.prototype.canRender = function (col, mode) {\r\n        return isNumberColumn(col) && mode === ERenderMode.CELL && !isNumbersColumn(col);\r\n    };\r\n    BrightnessCellRenderer.prototype.create = function (col, context, imposer) {\r\n        var width = context.colWidth(col);\r\n        return {\r\n            template: \"<div title=\\\"\\\">\\n        <div class=\\\"\" + cssClass('cat-color') + \"\\\" style=\\\"background-color: \" + DEFAULT_COLOR + \"\\\"></div><div class=\\\"\" + cssClass('cat-label') + \"\\\"> </div>\\n      </div>\",\r\n            update: function (n, d) {\r\n                var missing = renderMissingDOM(n, col, d);\r\n                n.title = col.getLabel(d);\r\n                n.firstElementChild.style.backgroundColor = missing ? null : toHeatMapColor(col.getNumber(d), d, col, imposer);\r\n                setText(n.lastElementChild, n.title);\r\n            },\r\n            render: function (ctx, d) {\r\n                if (renderMissingCanvas(ctx, col, d, width)) {\r\n                    return;\r\n                }\r\n                ctx.fillStyle = toHeatMapColor(col.getNumber(d), d, col, imposer);\r\n                ctx.fillRect(0, 0, width, CANVAS_HEIGHT);\r\n            }\r\n        };\r\n    };\r\n    BrightnessCellRenderer.prototype.createGroup = function () {\r\n        return noRenderer;\r\n    };\r\n    BrightnessCellRenderer.prototype.createSummary = function () {\r\n        return noRenderer;\r\n    };\r\n    return BrightnessCellRenderer;\r\n}());\r\nexport default BrightnessCellRenderer;\r\n//# sourceMappingURL=BrightnessCellRenderer.js.map","import { DENSE_HISTOGRAM } from '../constants';\r\nimport { round } from '../internal';\r\nimport { OrdinalColumn, isCategoricalColumn, isCategoricalLikeColumn, CategoricalColumn, SetColumn } from '../model';\r\nimport { CANVAS_HEIGHT, cssClass, FILTERED_OPACITY } from '../styles';\r\nimport { filterMissingNumberMarkup, updateFilterMissingNumberMarkup } from '../ui/missing';\r\nimport { ERenderMode } from './interfaces';\r\nimport { renderMissingCanvas, renderMissingDOM } from './missing';\r\nimport { setText, wideEnough, forEach } from './utils';\r\nimport { color } from 'd3-color';\r\nvar CategoricalCellRenderer = /** @class */ (function () {\r\n    function CategoricalCellRenderer() {\r\n        this.title = 'Color';\r\n        this.groupTitle = 'Histogram';\r\n    }\r\n    CategoricalCellRenderer.prototype.canRender = function (col, mode) {\r\n        return isCategoricalLikeColumn(col) && (mode !== ERenderMode.CELL || isCategoricalColumn(col));\r\n    };\r\n    CategoricalCellRenderer.prototype.create = function (col, context) {\r\n        var width = context.colWidth(col);\r\n        return {\r\n            template: \"<div>\\n        <div class=\\\"\" + cssClass('cat-color') + \"\\\"></div><div class=\\\"\" + cssClass('cat-label') + \"\\\"></div>\\n      </div>\",\r\n            update: function (n, d) {\r\n                renderMissingDOM(n, col, d);\r\n                var v = col.getCategory(d);\r\n                n.firstElementChild.style.backgroundColor = v ? col.getColor(d) : null;\r\n                setText(n.lastElementChild, col.getLabel(d));\r\n            },\r\n            render: function (ctx, d) {\r\n                if (renderMissingCanvas(ctx, col, d, width)) {\r\n                    return;\r\n                }\r\n                var v = col.getCategory(d);\r\n                ctx.fillStyle = v ? col.getColor(d) : '';\r\n                ctx.fillRect(0, 0, width, CANVAS_HEIGHT);\r\n            }\r\n        };\r\n    };\r\n    CategoricalCellRenderer.prototype.createGroup = function (col, context) {\r\n        var _a = hist(col, false), template = _a.template, update = _a.update;\r\n        return {\r\n            template: template + \"</div>\",\r\n            update: function (n, group) {\r\n                return context.tasks.groupCategoricalStats(col, group).then(function (r) {\r\n                    if (typeof r === 'symbol') {\r\n                        return;\r\n                    }\r\n                    var isMissing = !r || r.group == null || r.group.count === 0 || r.group.count === r.group.missing;\r\n                    n.classList.toggle(cssClass('missing'), isMissing);\r\n                    if (isMissing) {\r\n                        return;\r\n                    }\r\n                    update(n, r.group);\r\n                });\r\n            }\r\n        };\r\n    };\r\n    CategoricalCellRenderer.prototype.createSummary = function (col, context, interactive) {\r\n        return (col instanceof CategoricalColumn || col instanceof OrdinalColumn || col instanceof SetColumn) ? interactiveSummary(col, context, interactive) : staticSummary(col, context, interactive);\r\n    };\r\n    return CategoricalCellRenderer;\r\n}());\r\nexport default CategoricalCellRenderer;\r\nfunction staticSummary(col, context, interactive) {\r\n    var _a = hist(col, interactive), template = _a.template, update = _a.update;\r\n    return {\r\n        template: template + \"</div>\",\r\n        update: function (n) {\r\n            return context.tasks.summaryCategoricalStats(col).then(function (r) {\r\n                if (typeof r === 'symbol') {\r\n                    return;\r\n                }\r\n                var isMissing = !r || r.summary == null || r.summary.count === 0 || r.summary.count === r.summary.missing;\r\n                n.classList.toggle(cssClass('missing'), isMissing);\r\n                if (isMissing) {\r\n                    return;\r\n                }\r\n                update(n, r.summary);\r\n            });\r\n        }\r\n    };\r\n}\r\nfunction interactiveSummary(col, context, interactive) {\r\n    var _a = hist(col, interactive || wideEnough(col)), template = _a.template, update = _a.update;\r\n    var filterUpdate;\r\n    return {\r\n        template: \"\" + template + (interactive ? filterMissingNumberMarkup(false, 0) : '') + \"</div>\",\r\n        update: function (n) {\r\n            n.classList.toggle(cssClass('histogram-i'), interactive);\r\n            if (!filterUpdate) {\r\n                filterUpdate = interactiveHist(col, n);\r\n            }\r\n            return context.tasks.summaryCategoricalStats(col).then(function (r) {\r\n                if (typeof r === 'symbol') {\r\n                    return;\r\n                }\r\n                var summary = r.summary, data = r.data;\r\n                filterUpdate((interactive && data) ? data.missing : (summary ? summary.missing : 0), col);\r\n                var isMissing = !r || r.summary == null || r.summary.count === 0 || r.summary.count === r.summary.missing;\r\n                n.classList.toggle(cssClass('missing'), isMissing);\r\n                if (isMissing) {\r\n                    return;\r\n                }\r\n                update(n, summary, interactive ? data : undefined);\r\n            });\r\n        }\r\n    };\r\n}\r\nfunction hist(col, showLabels) {\r\n    var mapping = col.getColorMapping();\r\n    var bins = col.categories.map(function (c) { return \"<div class=\\\"\" + cssClass('histogram-bin') + \"\\\" title=\\\"\" + c.label + \": 0\\\" data-cat=\\\"\" + c.name + \"\\\" \" + (showLabels ? \"data-title=\\\"\" + c.label + \"\\\"\" : '') + \"><div style=\\\"height: 0; background-color: \" + mapping.apply(c) + \"\\\"></div></div>\"; }).join('');\r\n    var template = \"<div class=\\\"\" + cssClass('histogram') + \" \" + (col.categories.length > DENSE_HISTOGRAM ? cssClass('dense') : '') + \"\\\">\" + bins; // no closing div to be able to append things\r\n    return {\r\n        template: template,\r\n        update: function (n, hist, gHist) {\r\n            var mapping = col.getColorMapping();\r\n            var selected = col.categories.map(function (d) {\r\n                var c = color(mapping.apply(d));\r\n                c.opacity = FILTERED_OPACITY;\r\n                return c.toString();\r\n            });\r\n            var maxBin = gHist ? gHist.maxBin : hist.maxBin;\r\n            forEach(n, '[data-cat]', function (d, i) {\r\n                var cat = col.categories[i];\r\n                var count = hist.hist[i].count;\r\n                var inner = d.firstElementChild;\r\n                if (gHist) {\r\n                    var gCount = gHist.hist[i].count;\r\n                    d.title = cat.label + \": \" + count + \" of \" + gCount;\r\n                    inner.style.height = round(gCount * 100 / maxBin, 2) + \"%\";\r\n                    var relY = 100 - round(count * 100 / gCount, 2);\r\n                    inner.style.background = relY === 0 ? mapping.apply(cat) : (relY === 100 ? selected[i] : \"linear-gradient(\" + selected[i] + \" \" + relY + \"%, \" + mapping.apply(cat) + \" \" + relY + \"%, \" + mapping.apply(cat) + \" 100%)\");\r\n                }\r\n                else {\r\n                    d.title = col.categories[i].label + \": \" + count;\r\n                    var inner_1 = d.firstElementChild;\r\n                    inner_1.style.height = Math.round(count * 100 / maxBin) + \"%\";\r\n                    inner_1.style.background = mapping.apply(cat);\r\n                }\r\n            });\r\n        }\r\n    };\r\n}\r\nfunction setCategoricalFilter(col, filter, filterMissing) {\r\n    if (col instanceof SetColumn) {\r\n        var f = col.getFilter();\r\n        var mode = f ? f.mode : undefined;\r\n        col.setFilter({\r\n            filter: filter, filterMissing: filterMissing, mode: mode\r\n        });\r\n    }\r\n    else {\r\n        col.setFilter({\r\n            filter: filter, filterMissing: filterMissing\r\n        });\r\n    }\r\n}\r\n/** @internal */\r\nexport function interactiveHist(col, node) {\r\n    var bins = Array.from(node.querySelectorAll('[data-cat]'));\r\n    var markFilter = function (bin, cat, value) {\r\n        // update filter highlight eagerly for better user feedback\r\n        var inner = bin.firstElementChild;\r\n        var base = col.getColorMapping().apply(cat);\r\n        if (value) {\r\n            inner.style.background = base;\r\n            return;\r\n        }\r\n        var c = color(base);\r\n        c.opacity = FILTERED_OPACITY;\r\n        inner.style.background = c.toString();\r\n    };\r\n    bins.forEach(function (bin, i) {\r\n        var cat = col.categories[i];\r\n        bin.onclick = function (evt) {\r\n            evt.preventDefault();\r\n            evt.stopPropagation();\r\n            // toggle filter\r\n            var old = col.getFilter();\r\n            if (old == null || !Array.isArray(old.filter)) {\r\n                // deselect\r\n                markFilter(bin, cat, false);\r\n                var included = col.categories.slice();\r\n                included.splice(i, 1);\r\n                setCategoricalFilter(col, included.map(function (d) { return d.name; }), old ? old.filterMissing : false);\r\n                return;\r\n            }\r\n            var filter = old.filter.slice();\r\n            var contained = filter.indexOf(cat.name);\r\n            if (contained >= 0) {\r\n                // remove\r\n                filter.splice(contained, 1);\r\n                markFilter(bin, cat, false);\r\n            }\r\n            else {\r\n                // readd\r\n                filter.push(cat.name);\r\n                markFilter(bin, cat, true);\r\n            }\r\n            if (!old.filterMissing && filter.length === col.categories.length) {\r\n                // dummy filter\r\n                col.setFilter(null);\r\n                return;\r\n            }\r\n            setCategoricalFilter(col, filter, old.filterMissing);\r\n        };\r\n    });\r\n    var filterMissing = node.getElementsByTagName('input')[0];\r\n    if (filterMissing) {\r\n        filterMissing.onchange = function () {\r\n            // toggle filter\r\n            var v = filterMissing.checked;\r\n            var old = col.getFilter();\r\n            if (old == null) {\r\n                if (v) {\r\n                    setCategoricalFilter(col, col.categories.map(function (d) { return d.name; }), v);\r\n                }\r\n                else {\r\n                    col.setFilter(null);\r\n                }\r\n            }\r\n            else if (!v && Array.isArray(old.filter) && old.filter.length === col.categories.length) {\r\n                // dummy\r\n                col.setFilter(null);\r\n            }\r\n            else {\r\n                setCategoricalFilter(col, old.filter, v);\r\n            }\r\n        };\r\n    }\r\n    return function (missing, actCol) {\r\n        col = actCol;\r\n        var f = col.getFilter();\r\n        if (filterMissing) {\r\n            filterMissing.checked = f != null && f.filterMissing;\r\n            updateFilterMissingNumberMarkup(filterMissing.parentElement, missing);\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=CategoricalCellRenderer.js.map","import { isCategoricalsColumn } from '../model';\r\nimport { toMostFrequentCategoricals } from '../model/internalCategorical';\r\nimport { CANVAS_HEIGHT, cssClass } from '../styles';\r\nimport { renderMissingDOM, renderMissingValue } from './missing';\r\nimport { noop, wideEnough } from './utils';\r\nimport { GUESSED_ROW_HEIGHT } from '../constants';\r\nvar CategoricalHeatmapCellRenderer = /** @class */ (function () {\r\n    function CategoricalHeatmapCellRenderer() {\r\n        this.title = 'Heatmap';\r\n    }\r\n    CategoricalHeatmapCellRenderer.prototype.canRender = function (col) {\r\n        return isCategoricalsColumn(col) && Boolean(col.dataLength);\r\n    };\r\n    CategoricalHeatmapCellRenderer.prototype.createContext = function (col, context) {\r\n        var width = context.colWidth(col);\r\n        var cellDimension = width / col.dataLength;\r\n        var labels = col.labels;\r\n        var render = function (ctx, data, height) {\r\n            data.forEach(function (d, j) {\r\n                var x = j * cellDimension;\r\n                if (d == null) {\r\n                    renderMissingValue(ctx, cellDimension, height, x, 0);\r\n                    return;\r\n                }\r\n                ctx.fillStyle = d.color;\r\n                ctx.fillRect(x, 0, cellDimension, height);\r\n            });\r\n        };\r\n        return {\r\n            template: \"<canvas height=\\\"\" + GUESSED_ROW_HEIGHT + \"\\\" title=\\\"\\\"></canvas>\",\r\n            render: render,\r\n            width: width,\r\n            mover: function (n, values) { return function (evt) {\r\n                var percent = evt.offsetX / width;\r\n                var index = Math.max(0, Math.min(col.dataLength - 1, Math.floor(percent * (col.dataLength - 1) + 0.5)));\r\n                n.title = labels[index] + \": \" + values[index];\r\n            }; }\r\n        };\r\n    };\r\n    CategoricalHeatmapCellRenderer.prototype.create = function (col, context) {\r\n        var _a = this.createContext(col, context), template = _a.template, render = _a.render, mover = _a.mover, width = _a.width;\r\n        return {\r\n            template: template,\r\n            update: function (n, d) {\r\n                var ctx = n.getContext('2d');\r\n                ctx.canvas.width = width;\r\n                ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n                if (renderMissingDOM(n, col, d)) {\r\n                    return;\r\n                }\r\n                n.onmousemove = mover(n, col.getLabels(d));\r\n                n.onmouseleave = function () { return n.title = ''; };\r\n                render(ctx, col.getCategories(d), GUESSED_ROW_HEIGHT);\r\n            },\r\n            render: function (ctx, d) {\r\n                render(ctx, col.getCategories(d), CANVAS_HEIGHT);\r\n            }\r\n        };\r\n    };\r\n    CategoricalHeatmapCellRenderer.prototype.createGroup = function (col, context) {\r\n        var _this = this;\r\n        var _a = this.createContext(col, context), template = _a.template, render = _a.render, mover = _a.mover, width = _a.width;\r\n        return {\r\n            template: template,\r\n            update: function (n, group) {\r\n                return context.tasks.groupRows(col, group, _this.title, function (rows) { return toMostFrequentCategoricals(rows, col); }).then(function (data) {\r\n                    if (typeof data === 'symbol') {\r\n                        return;\r\n                    }\r\n                    var ctx = n.getContext('2d');\r\n                    ctx.canvas.width = width;\r\n                    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n                    var isMissing = !data || data.length === 0 || data.every(function (d) { return d == null; });\r\n                    n.classList.toggle(cssClass('missing'), isMissing);\r\n                    if (isMissing) {\r\n                        return;\r\n                    }\r\n                    n.onmousemove = mover(n, data.map(function (d) { return d ? d.label : 'missing'; }));\r\n                    n.onmouseleave = function () { return n.title = ''; };\r\n                    render(ctx, data, GUESSED_ROW_HEIGHT);\r\n                });\r\n            }\r\n        };\r\n    };\r\n    CategoricalHeatmapCellRenderer.prototype.createSummary = function (col) {\r\n        var labels = col.labels.slice();\r\n        while (labels.length > 0 && !wideEnough(col, labels.length)) {\r\n            labels = labels.filter(function (_, i) { return i % 2 === 0; }); // even\r\n        }\r\n        var templateRows = \"<div class=\\\"\" + cssClass('heatmap') + \"\\\">\";\r\n        for (var _i = 0, labels_1 = labels; _i < labels_1.length; _i++) {\r\n            var label = labels_1[_i];\r\n            templateRows += \"<div class=\\\"\" + cssClass('heatmap-cell') + \"\\\"  title=\\\"\" + label + \"\\\" data-title=\\\"\" + label + \"\\\"></div>\";\r\n        }\r\n        templateRows += '</div>';\r\n        return {\r\n            template: templateRows,\r\n            update: noop\r\n        };\r\n    };\r\n    return CategoricalHeatmapCellRenderer;\r\n}());\r\nexport default CategoricalHeatmapCellRenderer;\r\n//# sourceMappingURL=CategoricalHeatmapCellRenderer.js.map","import { round } from '../internal';\r\nimport { CategoricalColumn, OrdinalColumn, isCategoricalColumn, DEFAULT_COLOR } from '../model';\r\nimport { filterMissingNumberMarkup } from '../ui/missing';\r\nimport { interactiveHist } from './CategoricalCellRenderer';\r\nimport { ERenderMode } from './interfaces';\r\nimport { noRenderer, adaptTextColorToBgColor } from './utils';\r\nimport { cssClass, FILTERED_OPACITY } from '../styles';\r\nimport { color } from 'd3-color';\r\nvar CategoricalStackedDistributionlCellRenderer = /** @class */ (function () {\r\n    function CategoricalStackedDistributionlCellRenderer() {\r\n        this.title = 'Distribution Bar';\r\n    }\r\n    CategoricalStackedDistributionlCellRenderer.prototype.canRender = function (col, mode) {\r\n        return isCategoricalColumn(col) && mode !== ERenderMode.CELL;\r\n    };\r\n    CategoricalStackedDistributionlCellRenderer.prototype.create = function () {\r\n        return noRenderer;\r\n    };\r\n    CategoricalStackedDistributionlCellRenderer.prototype.createGroup = function (col, context) {\r\n        var _a = stackedBar(col), template = _a.template, update = _a.update;\r\n        return {\r\n            template: template + \"</div>\",\r\n            update: function (n, group) {\r\n                return context.tasks.groupCategoricalStats(col, group).then(function (r) {\r\n                    if (typeof r === 'symbol') {\r\n                        return;\r\n                    }\r\n                    var isMissing = !r || r.group == null || r.group.count === 0 || r.group.count === r.group.missing;\r\n                    n.classList.toggle(cssClass('missing'), isMissing);\r\n                    if (isMissing) {\r\n                        return;\r\n                    }\r\n                    update(n, r.group);\r\n                });\r\n            }\r\n        };\r\n    };\r\n    CategoricalStackedDistributionlCellRenderer.prototype.createSummary = function (col, context, interactive) {\r\n        return (col instanceof CategoricalColumn || col instanceof OrdinalColumn) ? interactiveSummary(col, context, interactive) : staticSummary(col, context);\r\n    };\r\n    return CategoricalStackedDistributionlCellRenderer;\r\n}());\r\nexport default CategoricalStackedDistributionlCellRenderer;\r\nfunction staticSummary(col, context) {\r\n    var _a = stackedBar(col), template = _a.template, update = _a.update;\r\n    return {\r\n        template: template + \"</div>\",\r\n        update: function (n) {\r\n            return context.tasks.summaryCategoricalStats(col).then(function (r) {\r\n                if (typeof r === 'symbol') {\r\n                    return;\r\n                }\r\n                var isMissing = !r || r.summary == null || r.summary.count === 0 || r.summary.count === r.summary.missing;\r\n                n.classList.toggle(cssClass('missing'), isMissing);\r\n                if (isMissing) {\r\n                    return;\r\n                }\r\n                update(n, r.summary, r.data);\r\n            });\r\n        }\r\n    };\r\n}\r\nfunction interactiveSummary(col, context, interactive) {\r\n    var _a = stackedBar(col), template = _a.template, update = _a.update;\r\n    var filterUpdate;\r\n    return {\r\n        template: \"\" + template + (interactive ? filterMissingNumberMarkup(false, 0) : '') + \"</div>\",\r\n        update: function (n) {\r\n            if (!filterUpdate) {\r\n                filterUpdate = interactiveHist(col, n);\r\n            }\r\n            return context.tasks.summaryCategoricalStats(col).then(function (r) {\r\n                if (typeof r === 'symbol') {\r\n                    return;\r\n                }\r\n                var summary = r.summary, data = r.data;\r\n                var missing = interactive && data ? data.missing : (summary ? summary.missing : 0);\r\n                filterUpdate(missing, col);\r\n                var isMissing = !r || r.summary == null || r.summary.count === 0 || r.summary.count === r.summary.missing;\r\n                n.classList.toggle(cssClass('missing'), isMissing);\r\n                if (isMissing) {\r\n                    return;\r\n                }\r\n                update(n, summary, data);\r\n            });\r\n        }\r\n    };\r\n}\r\nfunction selectedCol(value) {\r\n    var c = color(value);\r\n    c.opacity = FILTERED_OPACITY;\r\n    return c.toString();\r\n}\r\nfunction stackedBar(col) {\r\n    var mapping = col.getColorMapping();\r\n    var cats = col.categories.map(function (c) { return ({\r\n        label: c.label,\r\n        name: c.name,\r\n        color: mapping.apply(c),\r\n        selected: selectedCol(mapping.apply(c))\r\n    }); });\r\n    cats.push({ label: 'Missing Values', name: 'missing', color: DEFAULT_COLOR, selected: 'transparent' });\r\n    var bins = cats.map(function (c) { return \"<div class=\\\"\" + cssClass('distribution-bar') + \"\\\" style=\\\"background-color: \" + c.color + \"; color: \" + adaptTextColorToBgColor(c.color) + \"\\\" title=\\\"\" + c.label + \": 0\\\" data-cat=\\\"\" + c.name + \"\\\"><span>\" + c.label + \"</span></div>\"; }).join('');\r\n    return {\r\n        template: \"<div>\" + bins,\r\n        update: function (n, hist, gHist) {\r\n            var bins = hist.hist.slice();\r\n            bins.push({ count: hist.missing });\r\n            var children = Array.from(n.children);\r\n            if (!gHist) {\r\n                var total_1 = bins.reduce(function (acc, _a) {\r\n                    var count = _a.count;\r\n                    return acc + count;\r\n                }, 0);\r\n                for (var i = 0; i < cats.length; ++i) {\r\n                    var d = children[i];\r\n                    var count = bins[i].count;\r\n                    var label = cats[i].label;\r\n                    d.style.flexGrow = \"\" + round(total_1 === 0 ? 0 : count, 2);\r\n                    d.title = label + \": \" + count;\r\n                }\r\n                return;\r\n            }\r\n            var gBins = gHist.hist.slice();\r\n            gBins.push({ count: gHist.missing });\r\n            var total = gBins.reduce(function (acc, _a) {\r\n                var count = _a.count;\r\n                return acc + count;\r\n            }, 9);\r\n            for (var i = 0; i < cats.length; ++i) {\r\n                var d = children[i];\r\n                var count = bins[i].count;\r\n                var label = cats[i].label;\r\n                var gCount = gBins[i].count;\r\n                d.style.flexGrow = \"\" + round(total === 0 ? 0 : gCount, 2);\r\n                d.title = label + \": \" + count + \" of \" + gCount;\r\n                var relY = 100 - round(count * 100 / gCount, 2);\r\n                d.style.background = relY === 0 ? cats[i].color : (relY === 100 ? cats[i].selected : \"linear-gradient(\" + cats[i].selected + \" \" + relY + \"%, \" + cats[i].color + \" \" + relY + \"%, \" + cats[i].color + \" 100%)\");\r\n            }\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=CategoricalStackedDistributionlCellRenderer.js.map","import { isNumbersColumn, isNumberColumn } from '../model';\r\nimport { colorOf } from './impose';\r\nimport { ERenderMode } from './interfaces';\r\nimport { renderMissingDOM } from './missing';\r\nimport { noRenderer, setText } from './utils';\r\nimport { cssClass } from '../styles';\r\nvar CircleCellRenderer = /** @class */ (function () {\r\n    function CircleCellRenderer() {\r\n        this.title = 'Proportional Symbol';\r\n    }\r\n    CircleCellRenderer.prototype.canRender = function (col, mode) {\r\n        return isNumberColumn(col) && mode === ERenderMode.CELL && !isNumbersColumn(col);\r\n    };\r\n    CircleCellRenderer.prototype.create = function (col, _context, imposer) {\r\n        return {\r\n            template: \"<div style=\\\"background: radial-gradient(circle closest-side, red 100%, transparent 100%)\\\" title=\\\"\\\">\\n              <div class=\\\"\" + cssClass('hover-only') + \" \" + cssClass('bar-label') + \"\\\"></div>\\n          </div>\",\r\n            update: function (n, d) {\r\n                var v = col.getNumber(d);\r\n                var p = Math.round(v * 100);\r\n                var missing = renderMissingDOM(n, col, d);\r\n                n.style.background = missing ? null : \"radial-gradient(circle closest-side, \" + colorOf(col, d, imposer) + \" \" + p + \"%, transparent \" + p + \"%)\";\r\n                setText(n.firstElementChild, col.getLabel(d));\r\n            }\r\n        };\r\n    };\r\n    CircleCellRenderer.prototype.createGroup = function () {\r\n        return noRenderer;\r\n    };\r\n    CircleCellRenderer.prototype.createSummary = function () {\r\n        return noRenderer;\r\n    };\r\n    return CircleCellRenderer;\r\n}());\r\nexport default CircleCellRenderer;\r\n//# sourceMappingURL=CircleCellRenderer.js.map","import { GUESSES_GROUP_HEIGHT } from '../constants';\r\nimport { concatSeq, round } from '../internal';\r\nimport { DEFAULT_COLOR, isNumberColumn, isNumbersColumn } from '../model';\r\nimport { CANVAS_HEIGHT, DOT, cssClass } from '../styles';\r\nimport { colorOf } from './impose';\r\nimport { ERenderMode } from './interfaces';\r\nimport { renderMissingCanvas, renderMissingDOM } from './missing';\r\nimport { noRenderer } from './utils';\r\nvar DotCellRenderer = /** @class */ (function () {\r\n    function DotCellRenderer() {\r\n        this.title = 'Dot';\r\n        this.groupTitle = 'Dots';\r\n    }\r\n    DotCellRenderer.prototype.canRender = function (col, mode) {\r\n        return isNumberColumn(col) && mode !== ERenderMode.SUMMARY;\r\n    };\r\n    DotCellRenderer.getCanvasRenderer = function (col, context) {\r\n        var width = context.colWidth(col);\r\n        var pi2 = Math.PI * 2;\r\n        var radius = DOT.size / 2;\r\n        var render = function (ctx, vs, width) {\r\n            ctx.save();\r\n            ctx.globalAlpha = DOT.opacity;\r\n            for (var _i = 0, vs_1 = vs; _i < vs_1.length; _i++) {\r\n                var v = vs_1[_i];\r\n                ctx.fillStyle = v.color || DOT.color;\r\n                var x = Math.min(width - radius, Math.max(radius, v.value * width));\r\n                var y = round(Math.random() * (GUESSES_GROUP_HEIGHT - DOT.size) + radius, 2);\r\n                ctx.beginPath();\r\n                ctx.moveTo(x + radius, y);\r\n                ctx.arc(x, y, radius, 0, pi2, true);\r\n                ctx.fill();\r\n            }\r\n            ctx.restore();\r\n        };\r\n        return {\r\n            template: \"<canvas height=\\\"\" + GUESSES_GROUP_HEIGHT + \"\\\"></canvas>\",\r\n            render: render,\r\n            width: width\r\n        };\r\n    };\r\n    DotCellRenderer.getDOMRenderer = function (col) {\r\n        var dots = isNumbersColumn(col) ? col.dataLength : 1;\r\n        var tmp = '';\r\n        for (var i = 0; i < dots; ++i) {\r\n            tmp += \"<div style='background-color: \" + DEFAULT_COLOR + \"' title=''></div>\";\r\n        }\r\n        var update = function (n, data) {\r\n            //adapt the number of children\r\n            var l = data.length;\r\n            if (n.children.length !== l) {\r\n                n.innerHTML = data.reduce(function (tmp, r) {\r\n                    return tmp + \"<div style='background-color: \" + r.color + \"' title='\" + r.label + \"'></div>\";\r\n                }, '');\r\n            }\r\n            var children = n.children;\r\n            data.forEach(function (v, i) {\r\n                var d = children[i];\r\n                d.title = v.label;\r\n                d.style.display = isNaN(v.value) ? 'none' : null;\r\n                d.style.left = round(v.value * 100, 2) + \"%\";\r\n                // jitter\r\n                d.style.top = l > 1 ? round(Math.random() * 80 + 10, 2) + \"%\" : null;\r\n                d.style.backgroundColor = v.color;\r\n            });\r\n        };\r\n        var render = function (ctx, vs, colors, width) {\r\n            ctx.save();\r\n            ctx.globalAlpha = DOT.opacity;\r\n            vs.forEach(function (v, i) {\r\n                ctx.fillStyle = colors[i] || DOT.color;\r\n                ctx.fillRect(Math.max(0, v * width - DOT.size / 2), 0, DOT.size, CANVAS_HEIGHT);\r\n            });\r\n            ctx.restore();\r\n        };\r\n        return { template: \"<div>\" + tmp + \"</div>\", update: update, render: render };\r\n    };\r\n    DotCellRenderer.prototype.create = function (col, context, imposer) {\r\n        var _a = DotCellRenderer.getDOMRenderer(col), template = _a.template, render = _a.render, update = _a.update;\r\n        var width = context.colWidth(col);\r\n        var formatter = col.getNumberFormat();\r\n        return {\r\n            template: template,\r\n            update: function (n, d) {\r\n                if (renderMissingDOM(n, col, d)) {\r\n                    return;\r\n                }\r\n                var color = colorOf(col, d, imposer);\r\n                if (!isNumbersColumn(col)) {\r\n                    var v = col.getNumber(d);\r\n                    return update(n, [{ value: v, label: col.getLabel(d), color: color }]);\r\n                }\r\n                var data = col.getNumbers(d).filter(function (vi) { return !isNaN(vi); }).map(function (value) { return ({ value: value, label: formatter(value), color: color }); });\r\n                return update(n, data);\r\n            },\r\n            render: function (ctx, d) {\r\n                if (renderMissingCanvas(ctx, col, d, width)) {\r\n                    return;\r\n                }\r\n                var color = colorOf(col, d, imposer);\r\n                if (!isNumbersColumn(col)) {\r\n                    var v = col.getNumber(d);\r\n                    return render(ctx, [v], [color], width);\r\n                }\r\n                var vs = col.getNumbers(d).filter(function (vi) { return !isNaN(vi); });\r\n                return render(ctx, vs, vs.map(function (_) { return color; }), width);\r\n            }\r\n        };\r\n    };\r\n    DotCellRenderer.prototype.createGroup = function (col, context, imposer) {\r\n        var _a = DotCellRenderer.getCanvasRenderer(col, context), template = _a.template, render = _a.render, width = _a.width;\r\n        return {\r\n            template: template,\r\n            update: function (n, group) {\r\n                return context.tasks.groupRows(col, group, 'dot', function (rows) {\r\n                    //value, color, label,\r\n                    if (!isNumbersColumn(col)) {\r\n                        return Array.from(rows.map(function (r) { return ({ value: col.getNumber(r), color: colorOf(col, r, imposer) }); }));\r\n                    }\r\n                    // concatenate all columns\r\n                    var vs = rows.map(function (r) {\r\n                        var color = colorOf(col, r, imposer);\r\n                        return col.getNumbers(r)\r\n                            .filter(function (vi) { return !isNaN(vi); })\r\n                            .map(function (value) { return ({ value: value, color: color }); });\r\n                    });\r\n                    return Array.from(concatSeq(vs));\r\n                }).then(function (data) {\r\n                    if (typeof data === 'symbol') {\r\n                        return;\r\n                    }\r\n                    var isMissing = !data || data.length === 0 || data.every(function (v) { return Number.isNaN(v.value); });\r\n                    n.classList.toggle(cssClass('missing'), isMissing);\r\n                    if (isMissing) {\r\n                        return;\r\n                    }\r\n                    var ctx = n.getContext('2d');\r\n                    ctx.canvas.width = width;\r\n                    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n                    render(ctx, data, width);\r\n                });\r\n            }\r\n        };\r\n    };\r\n    DotCellRenderer.prototype.createSummary = function () {\r\n        return noRenderer;\r\n    };\r\n    return DotCellRenderer;\r\n}());\r\nexport default DotCellRenderer;\r\n//# sourceMappingURL=DotCellRenderer.js.map","import { GroupColumn, defaultGroup } from '../model';\r\nimport { noRenderer } from './utils';\r\nfunction isDummyGroup(group) {\r\n    return group.parent == null && group.name === defaultGroup.name;\r\n}\r\nvar GroupCellRenderer = /** @class */ (function () {\r\n    function GroupCellRenderer() {\r\n        this.title = 'Default';\r\n    }\r\n    GroupCellRenderer.prototype.canRender = function (col) {\r\n        return col instanceof GroupColumn;\r\n    };\r\n    GroupCellRenderer.prototype.create = function () {\r\n        return {\r\n            template: \"<div><div></div></div>\",\r\n            update: function (node, _row, i, group) {\r\n                node.firstElementChild.textContent = isDummyGroup(group) || i > 0 ? '' : group.name + \" (\" + group.order.length + \")\";\r\n            },\r\n            render: function (_ctx, _row, i) {\r\n                return i === 0;\r\n            }\r\n        };\r\n    };\r\n    GroupCellRenderer.prototype.createGroup = function () {\r\n        return {\r\n            template: \"<div><div></div></div>\",\r\n            update: function (node, group) {\r\n                node.firstElementChild.textContent = isDummyGroup(group) ? '' : group.name + \" (\" + group.order.length + \")\";\r\n            }\r\n        };\r\n    };\r\n    GroupCellRenderer.prototype.createSummary = function () {\r\n        return noRenderer;\r\n    };\r\n    return GroupCellRenderer;\r\n}());\r\nexport default GroupCellRenderer;\r\n//# sourceMappingURL=GroupCellRenderer.js.map","import { renderMissingCanvas, renderMissingDOM } from './missing';\r\nimport { boxplotBuilder, getSortLabel } from '../internal';\r\nvar ANumbersCellRenderer = /** @class */ (function () {\r\n    function ANumbersCellRenderer() {\r\n    }\r\n    ANumbersCellRenderer.choose = function (col, rows) {\r\n        var row = null;\r\n        var data = rows.map(function (r, i) {\r\n            if (i === 0) {\r\n                row = r;\r\n            }\r\n            return { n: col.getNumbers(r), raw: col.getRawNumbers(r) };\r\n        });\r\n        var cols = col.dataLength;\r\n        var normalized = [];\r\n        var raw = [];\r\n        var _loop_1 = function (i) {\r\n            var vs = data.map(function (d) { return ({ n: d.n[i], raw: d.raw[i] }); }).filter(function (d) { return !isNaN(d.n); });\r\n            if (vs.length === 0) {\r\n                normalized.push(NaN);\r\n                raw.push(NaN);\r\n            }\r\n            else {\r\n                var bbn_1 = boxplotBuilder();\r\n                var bbr_1 = boxplotBuilder();\r\n                var s = col.getSortMethod();\r\n                vs.forEach(function (d) {\r\n                    bbn_1.push(d.n);\r\n                    bbr_1.push(d.raw);\r\n                });\r\n                normalized.push(bbn_1.build()[s]);\r\n                raw.push(bbr_1.build()[s]);\r\n            }\r\n        };\r\n        // mean column)\r\n        for (var i = 0; i < cols; ++i) {\r\n            _loop_1(i);\r\n        }\r\n        return { normalized: normalized, raw: raw, row: row };\r\n    };\r\n    ANumbersCellRenderer.prototype.create = function (col, context, imposer) {\r\n        var width = context.colWidth(col);\r\n        var _a = this.createContext(col, context, imposer), templateRow = _a.templateRow, render = _a.render, update = _a.update, clazz = _a.clazz;\r\n        return {\r\n            template: \"<div class=\\\"\" + clazz + \"\\\">\" + templateRow + \"</div>\",\r\n            update: function (n, d) {\r\n                if (renderMissingDOM(n, col, d)) {\r\n                    return;\r\n                }\r\n                update(n, col.getNumbers(d), col.getRawNumbers(d), d);\r\n            },\r\n            render: function (ctx, d) {\r\n                if (renderMissingCanvas(ctx, col, d, width)) {\r\n                    return;\r\n                }\r\n                render(ctx, col.getNumbers(d), d);\r\n            },\r\n        };\r\n    };\r\n    ANumbersCellRenderer.prototype.createGroup = function (col, context, imposer) {\r\n        var _this = this;\r\n        var _a = this.createContext(col, context, imposer), templateRow = _a.templateRow, update = _a.update, clazz = _a.clazz;\r\n        return {\r\n            template: \"<div class=\\\"\" + clazz + \"\\\">\" + templateRow + \"</div>\",\r\n            update: function (n, group) {\r\n                // render a heatmap\r\n                return context.tasks.groupRows(col, group, _this.title, function (rows) { return ANumbersCellRenderer.choose(col, rows); }).then(function (data) {\r\n                    if (typeof data !== 'symbol') {\r\n                        update(n, data.normalized, data.raw, data.row, getSortLabel(col.getSortMethod()) + \" \");\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    };\r\n    return ANumbersCellRenderer;\r\n}());\r\nexport { ANumbersCellRenderer };\r\n/** @internal */\r\nexport function matchRows(n, length, template) {\r\n    // first match the number of rows\r\n    var children = Array.from(n.children);\r\n    if (children.length > length) {\r\n        children.slice(length).forEach(function (c) { return c.remove(); });\r\n    }\r\n    else if (length > children.length) {\r\n        n.insertAdjacentHTML('beforeend', template.repeat(length - children.length));\r\n    }\r\n}\r\n//# sourceMappingURL=ANumbersCellRenderer.js.map","import { isNumbersColumn } from '../model';\r\nimport { CANVAS_HEIGHT, cssClass } from '../styles';\r\nimport { ANumbersCellRenderer } from './ANumbersCellRenderer';\r\nimport { toHeatMapColor } from './BrightnessCellRenderer';\r\nimport { renderMissingValue, renderMissingDOM } from './missing';\r\nimport { noop, wideEnough } from './utils';\r\nimport { GUESSED_ROW_HEIGHT } from '../constants';\r\nimport { getSortLabel } from '../internal';\r\nvar HeatmapCellRenderer = /** @class */ (function () {\r\n    function HeatmapCellRenderer() {\r\n        this.title = 'Heatmap';\r\n    }\r\n    HeatmapCellRenderer.prototype.canRender = function (col) {\r\n        return isNumbersColumn(col) && Boolean(col.dataLength);\r\n    };\r\n    HeatmapCellRenderer.prototype.createContext = function (col, context, imposer) {\r\n        var width = context.colWidth(col);\r\n        var cellDimension = width / col.dataLength;\r\n        var labels = col.labels;\r\n        var render = function (ctx, data, item, height) {\r\n            data.forEach(function (d, j) {\r\n                var x = j * cellDimension;\r\n                if (isNaN(d)) {\r\n                    renderMissingValue(ctx, cellDimension, height, x, 0);\r\n                    return;\r\n                }\r\n                ctx.fillStyle = toHeatMapColor(d, item, col, imposer);\r\n                ctx.fillRect(x, 0, cellDimension, height);\r\n            });\r\n        };\r\n        return {\r\n            template: \"<canvas height=\\\"\" + GUESSED_ROW_HEIGHT + \"\\\" title=\\\"\\\"></canvas>\",\r\n            render: render,\r\n            width: width,\r\n            mover: function (n, values, prefix) { return function (evt) {\r\n                var percent = evt.offsetX / width;\r\n                var index = Math.max(0, Math.min(col.dataLength - 1, Math.floor(percent * (col.dataLength - 1) + 0.5)));\r\n                n.title = \"\" + (prefix || '') + labels[index] + \": \" + values[index];\r\n            }; }\r\n        };\r\n    };\r\n    HeatmapCellRenderer.prototype.create = function (col, context, _hist, imposer) {\r\n        var _a = this.createContext(col, context, imposer), template = _a.template, render = _a.render, mover = _a.mover, width = _a.width;\r\n        return {\r\n            template: template,\r\n            update: function (n, d) {\r\n                var ctx = n.getContext('2d');\r\n                ctx.canvas.width = width;\r\n                ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n                if (renderMissingDOM(n, col, d)) {\r\n                    return;\r\n                }\r\n                n.onmousemove = mover(n, col.getLabels(d));\r\n                n.onmouseleave = function () { return n.title = ''; };\r\n                render(ctx, col.getNumbers(d), d, GUESSED_ROW_HEIGHT);\r\n            },\r\n            render: function (ctx, d) {\r\n                render(ctx, col.getNumbers(d), d, CANVAS_HEIGHT);\r\n            }\r\n        };\r\n    };\r\n    HeatmapCellRenderer.prototype.createGroup = function (col, context, imposer) {\r\n        var _this = this;\r\n        var _a = this.createContext(col, context, imposer), template = _a.template, render = _a.render, mover = _a.mover, width = _a.width;\r\n        var formatter = col.getNumberFormat();\r\n        return {\r\n            template: template,\r\n            update: function (n, group) {\r\n                return context.tasks.groupRows(col, group, _this.title, function (rows) { return ANumbersCellRenderer.choose(col, rows); }).then(function (data) {\r\n                    if (typeof data === 'symbol') {\r\n                        return;\r\n                    }\r\n                    var ctx = n.getContext('2d');\r\n                    ctx.canvas.width = width;\r\n                    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n                    var isMissing = !data || data.normalized.length === 0 || data.normalized.every(function (v) { return Number.isNaN(v); });\r\n                    n.classList.toggle(cssClass('missing'), isMissing);\r\n                    if (isMissing) {\r\n                        return;\r\n                    }\r\n                    n.onmousemove = mover(n, data.raw.map(formatter), getSortLabel(col.getSortMethod()) + \" \");\r\n                    n.onmouseleave = function () { return n.title = ''; };\r\n                    render(ctx, data.normalized, data.row, GUESSED_ROW_HEIGHT);\r\n                });\r\n            }\r\n        };\r\n    };\r\n    HeatmapCellRenderer.prototype.createSummary = function (col) {\r\n        var labels = col.labels.slice();\r\n        while (labels.length > 0 && !wideEnough(col, labels.length)) {\r\n            labels = labels.filter(function (_, i) { return i % 2 === 0; }); // even\r\n        }\r\n        var templateRows = \"<div class=\\\"\" + cssClass('heatmap') + \"\\\">\";\r\n        for (var _i = 0, labels_1 = labels; _i < labels_1.length; _i++) {\r\n            var label = labels_1[_i];\r\n            templateRows += \"<div class=\\\"\" + cssClass('heatmap-cell') + \"\\\"  title=\\\"\" + label + \"\\\" data-title=\\\"\" + label + \"\\\"></div>\";\r\n        }\r\n        templateRows += '</div>';\r\n        return {\r\n            template: templateRows,\r\n            update: noop\r\n        };\r\n    };\r\n    return HeatmapCellRenderer;\r\n}());\r\nexport default HeatmapCellRenderer;\r\n//# sourceMappingURL=HeatmapCellRenderer.js.map","/**!\n * @fileOverview Kickass library to create and place poppers near their reference elements.\n * @version 1.16.1\n * @license\n * Copyright (c) 2016 Federico Zivolo and contributors\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && typeof navigator !== 'undefined';\n\nvar timeoutDuration = function () {\n  var longerTimeoutBrowsers = ['Edge', 'Trident', 'Firefox'];\n  for (var i = 0; i < longerTimeoutBrowsers.length; i += 1) {\n    if (isBrowser && navigator.userAgent.indexOf(longerTimeoutBrowsers[i]) >= 0) {\n      return 1;\n    }\n  }\n  return 0;\n}();\n\nfunction microtaskDebounce(fn) {\n  var called = false;\n  return function () {\n    if (called) {\n      return;\n    }\n    called = true;\n    window.Promise.resolve().then(function () {\n      called = false;\n      fn();\n    });\n  };\n}\n\nfunction taskDebounce(fn) {\n  var scheduled = false;\n  return function () {\n    if (!scheduled) {\n      scheduled = true;\n      setTimeout(function () {\n        scheduled = false;\n        fn();\n      }, timeoutDuration);\n    }\n  };\n}\n\nvar supportsMicroTasks = isBrowser && window.Promise;\n\n/**\n* Create a debounced version of a method, that's asynchronously deferred\n* but called in the minimum time possible.\n*\n* @method\n* @memberof Popper.Utils\n* @argument {Function} fn\n* @returns {Function}\n*/\nvar debounce = supportsMicroTasks ? microtaskDebounce : taskDebounce;\n\n/**\n * Check if the given variable is a function\n * @method\n * @memberof Popper.Utils\n * @argument {Any} functionToCheck - variable to check\n * @returns {Boolean} answer to: is a function?\n */\nfunction isFunction(functionToCheck) {\n  var getType = {};\n  return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n}\n\n/**\n * Get CSS computed property of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Eement} element\n * @argument {String} property\n */\nfunction getStyleComputedProperty(element, property) {\n  if (element.nodeType !== 1) {\n    return [];\n  }\n  // NOTE: 1 DOM access here\n  var window = element.ownerDocument.defaultView;\n  var css = window.getComputedStyle(element, null);\n  return property ? css[property] : css;\n}\n\n/**\n * Returns the parentNode or the host of the element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} parent\n */\nfunction getParentNode(element) {\n  if (element.nodeName === 'HTML') {\n    return element;\n  }\n  return element.parentNode || element.host;\n}\n\n/**\n * Returns the scrolling parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} scroll parent\n */\nfunction getScrollParent(element) {\n  // Return body, `getScroll` will take care to get the correct `scrollTop` from it\n  if (!element) {\n    return document.body;\n  }\n\n  switch (element.nodeName) {\n    case 'HTML':\n    case 'BODY':\n      return element.ownerDocument.body;\n    case '#document':\n      return element.body;\n  }\n\n  // Firefox want us to check `-x` and `-y` variations as well\n\n  var _getStyleComputedProp = getStyleComputedProperty(element),\n      overflow = _getStyleComputedProp.overflow,\n      overflowX = _getStyleComputedProp.overflowX,\n      overflowY = _getStyleComputedProp.overflowY;\n\n  if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n    return element;\n  }\n\n  return getScrollParent(getParentNode(element));\n}\n\n/**\n * Returns the reference node of the reference object, or the reference object itself.\n * @method\n * @memberof Popper.Utils\n * @param {Element|Object} reference - the reference element (the popper will be relative to this)\n * @returns {Element} parent\n */\nfunction getReferenceNode(reference) {\n  return reference && reference.referenceNode ? reference.referenceNode : reference;\n}\n\nvar isIE11 = isBrowser && !!(window.MSInputMethodContext && document.documentMode);\nvar isIE10 = isBrowser && /MSIE 10/.test(navigator.userAgent);\n\n/**\n * Determines if the browser is Internet Explorer\n * @method\n * @memberof Popper.Utils\n * @param {Number} version to check\n * @returns {Boolean} isIE\n */\nfunction isIE(version) {\n  if (version === 11) {\n    return isIE11;\n  }\n  if (version === 10) {\n    return isIE10;\n  }\n  return isIE11 || isIE10;\n}\n\n/**\n * Returns the offset parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} offset parent\n */\nfunction getOffsetParent(element) {\n  if (!element) {\n    return document.documentElement;\n  }\n\n  var noOffsetParent = isIE(10) ? document.body : null;\n\n  // NOTE: 1 DOM access here\n  var offsetParent = element.offsetParent || null;\n  // Skip hidden elements which don't have an offsetParent\n  while (offsetParent === noOffsetParent && element.nextElementSibling) {\n    offsetParent = (element = element.nextElementSibling).offsetParent;\n  }\n\n  var nodeName = offsetParent && offsetParent.nodeName;\n\n  if (!nodeName || nodeName === 'BODY' || nodeName === 'HTML') {\n    return element ? element.ownerDocument.documentElement : document.documentElement;\n  }\n\n  // .offsetParent will return the closest TH, TD or TABLE in case\n  // no offsetParent is present, I hate this job...\n  if (['TH', 'TD', 'TABLE'].indexOf(offsetParent.nodeName) !== -1 && getStyleComputedProperty(offsetParent, 'position') === 'static') {\n    return getOffsetParent(offsetParent);\n  }\n\n  return offsetParent;\n}\n\nfunction isOffsetContainer(element) {\n  var nodeName = element.nodeName;\n\n  if (nodeName === 'BODY') {\n    return false;\n  }\n  return nodeName === 'HTML' || getOffsetParent(element.firstElementChild) === element;\n}\n\n/**\n * Finds the root node (document, shadowDOM root) of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} node\n * @returns {Element} root node\n */\nfunction getRoot(node) {\n  if (node.parentNode !== null) {\n    return getRoot(node.parentNode);\n  }\n\n  return node;\n}\n\n/**\n * Finds the offset parent common to the two provided nodes\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element1\n * @argument {Element} element2\n * @returns {Element} common offset parent\n */\nfunction findCommonOffsetParent(element1, element2) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element1 || !element1.nodeType || !element2 || !element2.nodeType) {\n    return document.documentElement;\n  }\n\n  // Here we make sure to give as \"start\" the element that comes first in the DOM\n  var order = element1.compareDocumentPosition(element2) & Node.DOCUMENT_POSITION_FOLLOWING;\n  var start = order ? element1 : element2;\n  var end = order ? element2 : element1;\n\n  // Get common ancestor container\n  var range = document.createRange();\n  range.setStart(start, 0);\n  range.setEnd(end, 0);\n  var commonAncestorContainer = range.commonAncestorContainer;\n\n  // Both nodes are inside #document\n\n  if (element1 !== commonAncestorContainer && element2 !== commonAncestorContainer || start.contains(end)) {\n    if (isOffsetContainer(commonAncestorContainer)) {\n      return commonAncestorContainer;\n    }\n\n    return getOffsetParent(commonAncestorContainer);\n  }\n\n  // one of the nodes is inside shadowDOM, find which one\n  var element1root = getRoot(element1);\n  if (element1root.host) {\n    return findCommonOffsetParent(element1root.host, element2);\n  } else {\n    return findCommonOffsetParent(element1, getRoot(element2).host);\n  }\n}\n\n/**\n * Gets the scroll value of the given element in the given side (top and left)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {String} side `top` or `left`\n * @returns {number} amount of scrolled pixels\n */\nfunction getScroll(element) {\n  var side = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'top';\n\n  var upperSide = side === 'top' ? 'scrollTop' : 'scrollLeft';\n  var nodeName = element.nodeName;\n\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    var html = element.ownerDocument.documentElement;\n    var scrollingElement = element.ownerDocument.scrollingElement || html;\n    return scrollingElement[upperSide];\n  }\n\n  return element[upperSide];\n}\n\n/*\n * Sum or subtract the element scroll values (left and top) from a given rect object\n * @method\n * @memberof Popper.Utils\n * @param {Object} rect - Rect object you want to change\n * @param {HTMLElement} element - The element from the function reads the scroll values\n * @param {Boolean} subtract - set to true if you want to subtract the scroll values\n * @return {Object} rect - The modifier rect object\n */\nfunction includeScroll(rect, element) {\n  var subtract = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var scrollTop = getScroll(element, 'top');\n  var scrollLeft = getScroll(element, 'left');\n  var modifier = subtract ? -1 : 1;\n  rect.top += scrollTop * modifier;\n  rect.bottom += scrollTop * modifier;\n  rect.left += scrollLeft * modifier;\n  rect.right += scrollLeft * modifier;\n  return rect;\n}\n\n/*\n * Helper to detect borders of a given element\n * @method\n * @memberof Popper.Utils\n * @param {CSSStyleDeclaration} styles\n * Result of `getStyleComputedProperty` on the given element\n * @param {String} axis - `x` or `y`\n * @return {number} borders - The borders size of the given axis\n */\n\nfunction getBordersSize(styles, axis) {\n  var sideA = axis === 'x' ? 'Left' : 'Top';\n  var sideB = sideA === 'Left' ? 'Right' : 'Bottom';\n\n  return parseFloat(styles['border' + sideA + 'Width']) + parseFloat(styles['border' + sideB + 'Width']);\n}\n\nfunction getSize(axis, body, html, computedStyle) {\n  return Math.max(body['offset' + axis], body['scroll' + axis], html['client' + axis], html['offset' + axis], html['scroll' + axis], isIE(10) ? parseInt(html['offset' + axis]) + parseInt(computedStyle['margin' + (axis === 'Height' ? 'Top' : 'Left')]) + parseInt(computedStyle['margin' + (axis === 'Height' ? 'Bottom' : 'Right')]) : 0);\n}\n\nfunction getWindowSizes(document) {\n  var body = document.body;\n  var html = document.documentElement;\n  var computedStyle = isIE(10) && getComputedStyle(html);\n\n  return {\n    height: getSize('Height', body, html, computedStyle),\n    width: getSize('Width', body, html, computedStyle)\n  };\n}\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\nvar defineProperty = function (obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n/**\n * Given element offsets, generate an output similar to getBoundingClientRect\n * @method\n * @memberof Popper.Utils\n * @argument {Object} offsets\n * @returns {Object} ClientRect like output\n */\nfunction getClientRect(offsets) {\n  return _extends({}, offsets, {\n    right: offsets.left + offsets.width,\n    bottom: offsets.top + offsets.height\n  });\n}\n\n/**\n * Get bounding client rect of given element\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} element\n * @return {Object} client rect\n */\nfunction getBoundingClientRect(element) {\n  var rect = {};\n\n  // IE10 10 FIX: Please, don't ask, the element isn't\n  // considered in DOM in some circumstances...\n  // This isn't reproducible in IE10 compatibility mode of IE11\n  try {\n    if (isIE(10)) {\n      rect = element.getBoundingClientRect();\n      var scrollTop = getScroll(element, 'top');\n      var scrollLeft = getScroll(element, 'left');\n      rect.top += scrollTop;\n      rect.left += scrollLeft;\n      rect.bottom += scrollTop;\n      rect.right += scrollLeft;\n    } else {\n      rect = element.getBoundingClientRect();\n    }\n  } catch (e) {}\n\n  var result = {\n    left: rect.left,\n    top: rect.top,\n    width: rect.right - rect.left,\n    height: rect.bottom - rect.top\n  };\n\n  // subtract scrollbar size from sizes\n  var sizes = element.nodeName === 'HTML' ? getWindowSizes(element.ownerDocument) : {};\n  var width = sizes.width || element.clientWidth || result.width;\n  var height = sizes.height || element.clientHeight || result.height;\n\n  var horizScrollbar = element.offsetWidth - width;\n  var vertScrollbar = element.offsetHeight - height;\n\n  // if an hypothetical scrollbar is detected, we must be sure it's not a `border`\n  // we make this check conditional for performance reasons\n  if (horizScrollbar || vertScrollbar) {\n    var styles = getStyleComputedProperty(element);\n    horizScrollbar -= getBordersSize(styles, 'x');\n    vertScrollbar -= getBordersSize(styles, 'y');\n\n    result.width -= horizScrollbar;\n    result.height -= vertScrollbar;\n  }\n\n  return getClientRect(result);\n}\n\nfunction getOffsetRectRelativeToArbitraryNode(children, parent) {\n  var fixedPosition = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var isIE10 = isIE(10);\n  var isHTML = parent.nodeName === 'HTML';\n  var childrenRect = getBoundingClientRect(children);\n  var parentRect = getBoundingClientRect(parent);\n  var scrollParent = getScrollParent(children);\n\n  var styles = getStyleComputedProperty(parent);\n  var borderTopWidth = parseFloat(styles.borderTopWidth);\n  var borderLeftWidth = parseFloat(styles.borderLeftWidth);\n\n  // In cases where the parent is fixed, we must ignore negative scroll in offset calc\n  if (fixedPosition && isHTML) {\n    parentRect.top = Math.max(parentRect.top, 0);\n    parentRect.left = Math.max(parentRect.left, 0);\n  }\n  var offsets = getClientRect({\n    top: childrenRect.top - parentRect.top - borderTopWidth,\n    left: childrenRect.left - parentRect.left - borderLeftWidth,\n    width: childrenRect.width,\n    height: childrenRect.height\n  });\n  offsets.marginTop = 0;\n  offsets.marginLeft = 0;\n\n  // Subtract margins of documentElement in case it's being used as parent\n  // we do this only on HTML because it's the only element that behaves\n  // differently when margins are applied to it. The margins are included in\n  // the box of the documentElement, in the other cases not.\n  if (!isIE10 && isHTML) {\n    var marginTop = parseFloat(styles.marginTop);\n    var marginLeft = parseFloat(styles.marginLeft);\n\n    offsets.top -= borderTopWidth - marginTop;\n    offsets.bottom -= borderTopWidth - marginTop;\n    offsets.left -= borderLeftWidth - marginLeft;\n    offsets.right -= borderLeftWidth - marginLeft;\n\n    // Attach marginTop and marginLeft because in some circumstances we may need them\n    offsets.marginTop = marginTop;\n    offsets.marginLeft = marginLeft;\n  }\n\n  if (isIE10 && !fixedPosition ? parent.contains(scrollParent) : parent === scrollParent && scrollParent.nodeName !== 'BODY') {\n    offsets = includeScroll(offsets, parent);\n  }\n\n  return offsets;\n}\n\nfunction getViewportOffsetRectRelativeToArtbitraryNode(element) {\n  var excludeScroll = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var html = element.ownerDocument.documentElement;\n  var relativeOffset = getOffsetRectRelativeToArbitraryNode(element, html);\n  var width = Math.max(html.clientWidth, window.innerWidth || 0);\n  var height = Math.max(html.clientHeight, window.innerHeight || 0);\n\n  var scrollTop = !excludeScroll ? getScroll(html) : 0;\n  var scrollLeft = !excludeScroll ? getScroll(html, 'left') : 0;\n\n  var offset = {\n    top: scrollTop - relativeOffset.top + relativeOffset.marginTop,\n    left: scrollLeft - relativeOffset.left + relativeOffset.marginLeft,\n    width: width,\n    height: height\n  };\n\n  return getClientRect(offset);\n}\n\n/**\n * Check if the given element is fixed or is inside a fixed parent\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {Element} customContainer\n * @returns {Boolean} answer to \"isFixed?\"\n */\nfunction isFixed(element) {\n  var nodeName = element.nodeName;\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    return false;\n  }\n  if (getStyleComputedProperty(element, 'position') === 'fixed') {\n    return true;\n  }\n  var parentNode = getParentNode(element);\n  if (!parentNode) {\n    return false;\n  }\n  return isFixed(parentNode);\n}\n\n/**\n * Finds the first parent of an element that has a transformed property defined\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} first transformed parent or documentElement\n */\n\nfunction getFixedPositionOffsetParent(element) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element || !element.parentElement || isIE()) {\n    return document.documentElement;\n  }\n  var el = element.parentElement;\n  while (el && getStyleComputedProperty(el, 'transform') === 'none') {\n    el = el.parentElement;\n  }\n  return el || document.documentElement;\n}\n\n/**\n * Computed the boundaries limits and return them\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} popper\n * @param {HTMLElement} reference\n * @param {number} padding\n * @param {HTMLElement} boundariesElement - Element used to define the boundaries\n * @param {Boolean} fixedPosition - Is in fixed position mode\n * @returns {Object} Coordinates of the boundaries\n */\nfunction getBoundaries(popper, reference, padding, boundariesElement) {\n  var fixedPosition = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n  // NOTE: 1 DOM access here\n\n  var boundaries = { top: 0, left: 0 };\n  var offsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, getReferenceNode(reference));\n\n  // Handle viewport case\n  if (boundariesElement === 'viewport') {\n    boundaries = getViewportOffsetRectRelativeToArtbitraryNode(offsetParent, fixedPosition);\n  } else {\n    // Handle other cases based on DOM element used as boundaries\n    var boundariesNode = void 0;\n    if (boundariesElement === 'scrollParent') {\n      boundariesNode = getScrollParent(getParentNode(reference));\n      if (boundariesNode.nodeName === 'BODY') {\n        boundariesNode = popper.ownerDocument.documentElement;\n      }\n    } else if (boundariesElement === 'window') {\n      boundariesNode = popper.ownerDocument.documentElement;\n    } else {\n      boundariesNode = boundariesElement;\n    }\n\n    var offsets = getOffsetRectRelativeToArbitraryNode(boundariesNode, offsetParent, fixedPosition);\n\n    // In case of HTML, we need a different computation\n    if (boundariesNode.nodeName === 'HTML' && !isFixed(offsetParent)) {\n      var _getWindowSizes = getWindowSizes(popper.ownerDocument),\n          height = _getWindowSizes.height,\n          width = _getWindowSizes.width;\n\n      boundaries.top += offsets.top - offsets.marginTop;\n      boundaries.bottom = height + offsets.top;\n      boundaries.left += offsets.left - offsets.marginLeft;\n      boundaries.right = width + offsets.left;\n    } else {\n      // for all the other DOM elements, this one is good\n      boundaries = offsets;\n    }\n  }\n\n  // Add paddings\n  padding = padding || 0;\n  var isPaddingNumber = typeof padding === 'number';\n  boundaries.left += isPaddingNumber ? padding : padding.left || 0;\n  boundaries.top += isPaddingNumber ? padding : padding.top || 0;\n  boundaries.right -= isPaddingNumber ? padding : padding.right || 0;\n  boundaries.bottom -= isPaddingNumber ? padding : padding.bottom || 0;\n\n  return boundaries;\n}\n\nfunction getArea(_ref) {\n  var width = _ref.width,\n      height = _ref.height;\n\n  return width * height;\n}\n\n/**\n * Utility used to transform the `auto` placement to the placement with more\n * available space.\n * @method\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction computeAutoPlacement(placement, refRect, popper, reference, boundariesElement) {\n  var padding = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n\n  if (placement.indexOf('auto') === -1) {\n    return placement;\n  }\n\n  var boundaries = getBoundaries(popper, reference, padding, boundariesElement);\n\n  var rects = {\n    top: {\n      width: boundaries.width,\n      height: refRect.top - boundaries.top\n    },\n    right: {\n      width: boundaries.right - refRect.right,\n      height: boundaries.height\n    },\n    bottom: {\n      width: boundaries.width,\n      height: boundaries.bottom - refRect.bottom\n    },\n    left: {\n      width: refRect.left - boundaries.left,\n      height: boundaries.height\n    }\n  };\n\n  var sortedAreas = Object.keys(rects).map(function (key) {\n    return _extends({\n      key: key\n    }, rects[key], {\n      area: getArea(rects[key])\n    });\n  }).sort(function (a, b) {\n    return b.area - a.area;\n  });\n\n  var filteredAreas = sortedAreas.filter(function (_ref2) {\n    var width = _ref2.width,\n        height = _ref2.height;\n    return width >= popper.clientWidth && height >= popper.clientHeight;\n  });\n\n  var computedPlacement = filteredAreas.length > 0 ? filteredAreas[0].key : sortedAreas[0].key;\n\n  var variation = placement.split('-')[1];\n\n  return computedPlacement + (variation ? '-' + variation : '');\n}\n\n/**\n * Get offsets to the reference element\n * @method\n * @memberof Popper.Utils\n * @param {Object} state\n * @param {Element} popper - the popper element\n * @param {Element} reference - the reference element (the popper will be relative to this)\n * @param {Element} fixedPosition - is in fixed position mode\n * @returns {Object} An object containing the offsets which will be applied to the popper\n */\nfunction getReferenceOffsets(state, popper, reference) {\n  var fixedPosition = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n  var commonOffsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, getReferenceNode(reference));\n  return getOffsetRectRelativeToArbitraryNode(reference, commonOffsetParent, fixedPosition);\n}\n\n/**\n * Get the outer sizes of the given element (offset size + margins)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Object} object containing width and height properties\n */\nfunction getOuterSizes(element) {\n  var window = element.ownerDocument.defaultView;\n  var styles = window.getComputedStyle(element);\n  var x = parseFloat(styles.marginTop || 0) + parseFloat(styles.marginBottom || 0);\n  var y = parseFloat(styles.marginLeft || 0) + parseFloat(styles.marginRight || 0);\n  var result = {\n    width: element.offsetWidth + y,\n    height: element.offsetHeight + x\n  };\n  return result;\n}\n\n/**\n * Get the opposite placement of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement\n * @returns {String} flipped placement\n */\nfunction getOppositePlacement(placement) {\n  var hash = { left: 'right', right: 'left', bottom: 'top', top: 'bottom' };\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}\n\n/**\n * Get offsets to the popper\n * @method\n * @memberof Popper.Utils\n * @param {Object} position - CSS position the Popper will get applied\n * @param {HTMLElement} popper - the popper element\n * @param {Object} referenceOffsets - the reference offsets (the popper will be relative to this)\n * @param {String} placement - one of the valid placement options\n * @returns {Object} popperOffsets - An object containing the offsets which will be applied to the popper\n */\nfunction getPopperOffsets(popper, referenceOffsets, placement) {\n  placement = placement.split('-')[0];\n\n  // Get popper node sizes\n  var popperRect = getOuterSizes(popper);\n\n  // Add position, width and height to our offsets object\n  var popperOffsets = {\n    width: popperRect.width,\n    height: popperRect.height\n  };\n\n  // depending by the popper placement we have to compute its offsets slightly differently\n  var isHoriz = ['right', 'left'].indexOf(placement) !== -1;\n  var mainSide = isHoriz ? 'top' : 'left';\n  var secondarySide = isHoriz ? 'left' : 'top';\n  var measurement = isHoriz ? 'height' : 'width';\n  var secondaryMeasurement = !isHoriz ? 'height' : 'width';\n\n  popperOffsets[mainSide] = referenceOffsets[mainSide] + referenceOffsets[measurement] / 2 - popperRect[measurement] / 2;\n  if (placement === secondarySide) {\n    popperOffsets[secondarySide] = referenceOffsets[secondarySide] - popperRect[secondaryMeasurement];\n  } else {\n    popperOffsets[secondarySide] = referenceOffsets[getOppositePlacement(secondarySide)];\n  }\n\n  return popperOffsets;\n}\n\n/**\n * Mimics the `find` method of Array\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nfunction find(arr, check) {\n  // use native find if supported\n  if (Array.prototype.find) {\n    return arr.find(check);\n  }\n\n  // use `filter` to obtain the same behavior of `find`\n  return arr.filter(check)[0];\n}\n\n/**\n * Return the index of the matching object\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nfunction findIndex(arr, prop, value) {\n  // use native findIndex if supported\n  if (Array.prototype.findIndex) {\n    return arr.findIndex(function (cur) {\n      return cur[prop] === value;\n    });\n  }\n\n  // use `find` + `indexOf` if `findIndex` isn't supported\n  var match = find(arr, function (obj) {\n    return obj[prop] === value;\n  });\n  return arr.indexOf(match);\n}\n\n/**\n * Loop trough the list of modifiers and run them in order,\n * each of them will then edit the data object.\n * @method\n * @memberof Popper.Utils\n * @param {dataObject} data\n * @param {Array} modifiers\n * @param {String} ends - Optional modifier name used as stopper\n * @returns {dataObject}\n */\nfunction runModifiers(modifiers, data, ends) {\n  var modifiersToRun = ends === undefined ? modifiers : modifiers.slice(0, findIndex(modifiers, 'name', ends));\n\n  modifiersToRun.forEach(function (modifier) {\n    if (modifier['function']) {\n      // eslint-disable-line dot-notation\n      console.warn('`modifier.function` is deprecated, use `modifier.fn`!');\n    }\n    var fn = modifier['function'] || modifier.fn; // eslint-disable-line dot-notation\n    if (modifier.enabled && isFunction(fn)) {\n      // Add properties to offsets to make them a complete clientRect object\n      // we do this before each modifier to make sure the previous one doesn't\n      // mess with these values\n      data.offsets.popper = getClientRect(data.offsets.popper);\n      data.offsets.reference = getClientRect(data.offsets.reference);\n\n      data = fn(data, modifier);\n    }\n  });\n\n  return data;\n}\n\n/**\n * Updates the position of the popper, computing the new offsets and applying\n * the new style.<br />\n * Prefer `scheduleUpdate` over `update` because of performance reasons.\n * @method\n * @memberof Popper\n */\nfunction update() {\n  // if popper is destroyed, don't perform any further update\n  if (this.state.isDestroyed) {\n    return;\n  }\n\n  var data = {\n    instance: this,\n    styles: {},\n    arrowStyles: {},\n    attributes: {},\n    flipped: false,\n    offsets: {}\n  };\n\n  // compute reference element offsets\n  data.offsets.reference = getReferenceOffsets(this.state, this.popper, this.reference, this.options.positionFixed);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  data.placement = computeAutoPlacement(this.options.placement, data.offsets.reference, this.popper, this.reference, this.options.modifiers.flip.boundariesElement, this.options.modifiers.flip.padding);\n\n  // store the computed placement inside `originalPlacement`\n  data.originalPlacement = data.placement;\n\n  data.positionFixed = this.options.positionFixed;\n\n  // compute the popper offsets\n  data.offsets.popper = getPopperOffsets(this.popper, data.offsets.reference, data.placement);\n\n  data.offsets.popper.position = this.options.positionFixed ? 'fixed' : 'absolute';\n\n  // run the modifiers\n  data = runModifiers(this.modifiers, data);\n\n  // the first `update` will call `onCreate` callback\n  // the other ones will call `onUpdate` callback\n  if (!this.state.isCreated) {\n    this.state.isCreated = true;\n    this.options.onCreate(data);\n  } else {\n    this.options.onUpdate(data);\n  }\n}\n\n/**\n * Helper used to know if the given modifier is enabled.\n * @method\n * @memberof Popper.Utils\n * @returns {Boolean}\n */\nfunction isModifierEnabled(modifiers, modifierName) {\n  return modifiers.some(function (_ref) {\n    var name = _ref.name,\n        enabled = _ref.enabled;\n    return enabled && name === modifierName;\n  });\n}\n\n/**\n * Get the prefixed supported property name\n * @method\n * @memberof Popper.Utils\n * @argument {String} property (camelCase)\n * @returns {String} prefixed property (camelCase or PascalCase, depending on the vendor prefix)\n */\nfunction getSupportedPropertyName(property) {\n  var prefixes = [false, 'ms', 'Webkit', 'Moz', 'O'];\n  var upperProp = property.charAt(0).toUpperCase() + property.slice(1);\n\n  for (var i = 0; i < prefixes.length; i++) {\n    var prefix = prefixes[i];\n    var toCheck = prefix ? '' + prefix + upperProp : property;\n    if (typeof document.body.style[toCheck] !== 'undefined') {\n      return toCheck;\n    }\n  }\n  return null;\n}\n\n/**\n * Destroys the popper.\n * @method\n * @memberof Popper\n */\nfunction destroy() {\n  this.state.isDestroyed = true;\n\n  // touch DOM only if `applyStyle` modifier is enabled\n  if (isModifierEnabled(this.modifiers, 'applyStyle')) {\n    this.popper.removeAttribute('x-placement');\n    this.popper.style.position = '';\n    this.popper.style.top = '';\n    this.popper.style.left = '';\n    this.popper.style.right = '';\n    this.popper.style.bottom = '';\n    this.popper.style.willChange = '';\n    this.popper.style[getSupportedPropertyName('transform')] = '';\n  }\n\n  this.disableEventListeners();\n\n  // remove the popper if user explicitly asked for the deletion on destroy\n  // do not use `remove` because IE11 doesn't support it\n  if (this.options.removeOnDestroy) {\n    this.popper.parentNode.removeChild(this.popper);\n  }\n  return this;\n}\n\n/**\n * Get the window associated with the element\n * @argument {Element} element\n * @returns {Window}\n */\nfunction getWindow(element) {\n  var ownerDocument = element.ownerDocument;\n  return ownerDocument ? ownerDocument.defaultView : window;\n}\n\nfunction attachToScrollParents(scrollParent, event, callback, scrollParents) {\n  var isBody = scrollParent.nodeName === 'BODY';\n  var target = isBody ? scrollParent.ownerDocument.defaultView : scrollParent;\n  target.addEventListener(event, callback, { passive: true });\n\n  if (!isBody) {\n    attachToScrollParents(getScrollParent(target.parentNode), event, callback, scrollParents);\n  }\n  scrollParents.push(target);\n}\n\n/**\n * Setup needed event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nfunction setupEventListeners(reference, options, state, updateBound) {\n  // Resize event listener on window\n  state.updateBound = updateBound;\n  getWindow(reference).addEventListener('resize', state.updateBound, { passive: true });\n\n  // Scroll event listener on scroll parents\n  var scrollElement = getScrollParent(reference);\n  attachToScrollParents(scrollElement, 'scroll', state.updateBound, state.scrollParents);\n  state.scrollElement = scrollElement;\n  state.eventsEnabled = true;\n\n  return state;\n}\n\n/**\n * It will add resize/scroll events and start recalculating\n * position of the popper element when they are triggered.\n * @method\n * @memberof Popper\n */\nfunction enableEventListeners() {\n  if (!this.state.eventsEnabled) {\n    this.state = setupEventListeners(this.reference, this.options, this.state, this.scheduleUpdate);\n  }\n}\n\n/**\n * Remove event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nfunction removeEventListeners(reference, state) {\n  // Remove resize event listener on window\n  getWindow(reference).removeEventListener('resize', state.updateBound);\n\n  // Remove scroll event listener on scroll parents\n  state.scrollParents.forEach(function (target) {\n    target.removeEventListener('scroll', state.updateBound);\n  });\n\n  // Reset state\n  state.updateBound = null;\n  state.scrollParents = [];\n  state.scrollElement = null;\n  state.eventsEnabled = false;\n  return state;\n}\n\n/**\n * It will remove resize/scroll events and won't recalculate popper position\n * when they are triggered. It also won't trigger `onUpdate` callback anymore,\n * unless you call `update` method manually.\n * @method\n * @memberof Popper\n */\nfunction disableEventListeners() {\n  if (this.state.eventsEnabled) {\n    cancelAnimationFrame(this.scheduleUpdate);\n    this.state = removeEventListeners(this.reference, this.state);\n  }\n}\n\n/**\n * Tells if a given input is a number\n * @method\n * @memberof Popper.Utils\n * @param {*} input to check\n * @return {Boolean}\n */\nfunction isNumeric(n) {\n  return n !== '' && !isNaN(parseFloat(n)) && isFinite(n);\n}\n\n/**\n * Set the style to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the style to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nfunction setStyles(element, styles) {\n  Object.keys(styles).forEach(function (prop) {\n    var unit = '';\n    // add unit if the value is numeric and is one of the following\n    if (['width', 'height', 'top', 'right', 'bottom', 'left'].indexOf(prop) !== -1 && isNumeric(styles[prop])) {\n      unit = 'px';\n    }\n    element.style[prop] = styles[prop] + unit;\n  });\n}\n\n/**\n * Set the attributes to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the attributes to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nfunction setAttributes(element, attributes) {\n  Object.keys(attributes).forEach(function (prop) {\n    var value = attributes[prop];\n    if (value !== false) {\n      element.setAttribute(prop, attributes[prop]);\n    } else {\n      element.removeAttribute(prop);\n    }\n  });\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} data.styles - List of style properties - values to apply to popper element\n * @argument {Object} data.attributes - List of attribute properties - values to apply to popper element\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The same data object\n */\nfunction applyStyle(data) {\n  // any property present in `data.styles` will be applied to the popper,\n  // in this way we can make the 3rd party modifiers add custom styles to it\n  // Be aware, modifiers could override the properties defined in the previous\n  // lines of this modifier!\n  setStyles(data.instance.popper, data.styles);\n\n  // any property present in `data.attributes` will be applied to the popper,\n  // they will be set as HTML attributes of the element\n  setAttributes(data.instance.popper, data.attributes);\n\n  // if arrowElement is defined and arrowStyles has some properties\n  if (data.arrowElement && Object.keys(data.arrowStyles).length) {\n    setStyles(data.arrowElement, data.arrowStyles);\n  }\n\n  return data;\n}\n\n/**\n * Set the x-placement attribute before everything else because it could be used\n * to add margins to the popper margins needs to be calculated to get the\n * correct popper offsets.\n * @method\n * @memberof Popper.modifiers\n * @param {HTMLElement} reference - The reference element used to position the popper\n * @param {HTMLElement} popper - The HTML element used as popper\n * @param {Object} options - Popper.js options\n */\nfunction applyStyleOnLoad(reference, popper, options, modifierOptions, state) {\n  // compute reference element offsets\n  var referenceOffsets = getReferenceOffsets(state, popper, reference, options.positionFixed);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  var placement = computeAutoPlacement(options.placement, referenceOffsets, popper, reference, options.modifiers.flip.boundariesElement, options.modifiers.flip.padding);\n\n  popper.setAttribute('x-placement', placement);\n\n  // Apply `position` to popper before anything else because\n  // without the position applied we can't guarantee correct computations\n  setStyles(popper, { position: options.positionFixed ? 'fixed' : 'absolute' });\n\n  return options;\n}\n\n/**\n * @function\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Boolean} shouldRound - If the offsets should be rounded at all\n * @returns {Object} The popper's position offsets rounded\n *\n * The tale of pixel-perfect positioning. It's still not 100% perfect, but as\n * good as it can be within reason.\n * Discussion here: https://github.com/FezVrasta/popper.js/pull/715\n *\n * Low DPI screens cause a popper to be blurry if not using full pixels (Safari\n * as well on High DPI screens).\n *\n * Firefox prefers no rounding for positioning and does not have blurriness on\n * high DPI screens.\n *\n * Only horizontal placement and left/right values need to be considered.\n */\nfunction getRoundedOffsets(data, shouldRound) {\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n  var round = Math.round,\n      floor = Math.floor;\n\n  var noRound = function noRound(v) {\n    return v;\n  };\n\n  var referenceWidth = round(reference.width);\n  var popperWidth = round(popper.width);\n\n  var isVertical = ['left', 'right'].indexOf(data.placement) !== -1;\n  var isVariation = data.placement.indexOf('-') !== -1;\n  var sameWidthParity = referenceWidth % 2 === popperWidth % 2;\n  var bothOddWidth = referenceWidth % 2 === 1 && popperWidth % 2 === 1;\n\n  var horizontalToInteger = !shouldRound ? noRound : isVertical || isVariation || sameWidthParity ? round : floor;\n  var verticalToInteger = !shouldRound ? noRound : round;\n\n  return {\n    left: horizontalToInteger(bothOddWidth && !isVariation && shouldRound ? popper.left - 1 : popper.left),\n    top: verticalToInteger(popper.top),\n    bottom: verticalToInteger(popper.bottom),\n    right: horizontalToInteger(popper.right)\n  };\n}\n\nvar isFirefox = isBrowser && /Firefox/i.test(navigator.userAgent);\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction computeStyle(data, options) {\n  var x = options.x,\n      y = options.y;\n  var popper = data.offsets.popper;\n\n  // Remove this legacy support in Popper.js v2\n\n  var legacyGpuAccelerationOption = find(data.instance.modifiers, function (modifier) {\n    return modifier.name === 'applyStyle';\n  }).gpuAcceleration;\n  if (legacyGpuAccelerationOption !== undefined) {\n    console.warn('WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!');\n  }\n  var gpuAcceleration = legacyGpuAccelerationOption !== undefined ? legacyGpuAccelerationOption : options.gpuAcceleration;\n\n  var offsetParent = getOffsetParent(data.instance.popper);\n  var offsetParentRect = getBoundingClientRect(offsetParent);\n\n  // Styles\n  var styles = {\n    position: popper.position\n  };\n\n  var offsets = getRoundedOffsets(data, window.devicePixelRatio < 2 || !isFirefox);\n\n  var sideA = x === 'bottom' ? 'top' : 'bottom';\n  var sideB = y === 'right' ? 'left' : 'right';\n\n  // if gpuAcceleration is set to `true` and transform is supported,\n  //  we use `translate3d` to apply the position to the popper we\n  // automatically use the supported prefixed version if needed\n  var prefixedProperty = getSupportedPropertyName('transform');\n\n  // now, let's make a step back and look at this code closely (wtf?)\n  // If the content of the popper grows once it's been positioned, it\n  // may happen that the popper gets misplaced because of the new content\n  // overflowing its reference element\n  // To avoid this problem, we provide two options (x and y), which allow\n  // the consumer to define the offset origin.\n  // If we position a popper on top of a reference element, we can set\n  // `x` to `top` to make the popper grow towards its top instead of\n  // its bottom.\n  var left = void 0,\n      top = void 0;\n  if (sideA === 'bottom') {\n    // when offsetParent is <html> the positioning is relative to the bottom of the screen (excluding the scrollbar)\n    // and not the bottom of the html element\n    if (offsetParent.nodeName === 'HTML') {\n      top = -offsetParent.clientHeight + offsets.bottom;\n    } else {\n      top = -offsetParentRect.height + offsets.bottom;\n    }\n  } else {\n    top = offsets.top;\n  }\n  if (sideB === 'right') {\n    if (offsetParent.nodeName === 'HTML') {\n      left = -offsetParent.clientWidth + offsets.right;\n    } else {\n      left = -offsetParentRect.width + offsets.right;\n    }\n  } else {\n    left = offsets.left;\n  }\n  if (gpuAcceleration && prefixedProperty) {\n    styles[prefixedProperty] = 'translate3d(' + left + 'px, ' + top + 'px, 0)';\n    styles[sideA] = 0;\n    styles[sideB] = 0;\n    styles.willChange = 'transform';\n  } else {\n    // othwerise, we use the standard `top`, `left`, `bottom` and `right` properties\n    var invertTop = sideA === 'bottom' ? -1 : 1;\n    var invertLeft = sideB === 'right' ? -1 : 1;\n    styles[sideA] = top * invertTop;\n    styles[sideB] = left * invertLeft;\n    styles.willChange = sideA + ', ' + sideB;\n  }\n\n  // Attributes\n  var attributes = {\n    'x-placement': data.placement\n  };\n\n  // Update `data` attributes, styles and arrowStyles\n  data.attributes = _extends({}, attributes, data.attributes);\n  data.styles = _extends({}, styles, data.styles);\n  data.arrowStyles = _extends({}, data.offsets.arrow, data.arrowStyles);\n\n  return data;\n}\n\n/**\n * Helper used to know if the given modifier depends from another one.<br />\n * It checks if the needed modifier is listed and enabled.\n * @method\n * @memberof Popper.Utils\n * @param {Array} modifiers - list of modifiers\n * @param {String} requestingName - name of requesting modifier\n * @param {String} requestedName - name of requested modifier\n * @returns {Boolean}\n */\nfunction isModifierRequired(modifiers, requestingName, requestedName) {\n  var requesting = find(modifiers, function (_ref) {\n    var name = _ref.name;\n    return name === requestingName;\n  });\n\n  var isRequired = !!requesting && modifiers.some(function (modifier) {\n    return modifier.name === requestedName && modifier.enabled && modifier.order < requesting.order;\n  });\n\n  if (!isRequired) {\n    var _requesting = '`' + requestingName + '`';\n    var requested = '`' + requestedName + '`';\n    console.warn(requested + ' modifier is required by ' + _requesting + ' modifier in order to work, be sure to include it before ' + _requesting + '!');\n  }\n  return isRequired;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction arrow(data, options) {\n  var _data$offsets$arrow;\n\n  // arrow depends on keepTogether in order to work\n  if (!isModifierRequired(data.instance.modifiers, 'arrow', 'keepTogether')) {\n    return data;\n  }\n\n  var arrowElement = options.element;\n\n  // if arrowElement is a string, suppose it's a CSS selector\n  if (typeof arrowElement === 'string') {\n    arrowElement = data.instance.popper.querySelector(arrowElement);\n\n    // if arrowElement is not found, don't run the modifier\n    if (!arrowElement) {\n      return data;\n    }\n  } else {\n    // if the arrowElement isn't a query selector we must check that the\n    // provided DOM node is child of its popper node\n    if (!data.instance.popper.contains(arrowElement)) {\n      console.warn('WARNING: `arrow.element` must be child of its popper element!');\n      return data;\n    }\n  }\n\n  var placement = data.placement.split('-')[0];\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var isVertical = ['left', 'right'].indexOf(placement) !== -1;\n\n  var len = isVertical ? 'height' : 'width';\n  var sideCapitalized = isVertical ? 'Top' : 'Left';\n  var side = sideCapitalized.toLowerCase();\n  var altSide = isVertical ? 'left' : 'top';\n  var opSide = isVertical ? 'bottom' : 'right';\n  var arrowElementSize = getOuterSizes(arrowElement)[len];\n\n  //\n  // extends keepTogether behavior making sure the popper and its\n  // reference have enough pixels in conjunction\n  //\n\n  // top/left side\n  if (reference[opSide] - arrowElementSize < popper[side]) {\n    data.offsets.popper[side] -= popper[side] - (reference[opSide] - arrowElementSize);\n  }\n  // bottom/right side\n  if (reference[side] + arrowElementSize > popper[opSide]) {\n    data.offsets.popper[side] += reference[side] + arrowElementSize - popper[opSide];\n  }\n  data.offsets.popper = getClientRect(data.offsets.popper);\n\n  // compute center of the popper\n  var center = reference[side] + reference[len] / 2 - arrowElementSize / 2;\n\n  // Compute the sideValue using the updated popper offsets\n  // take popper margin in account because we don't have this info available\n  var css = getStyleComputedProperty(data.instance.popper);\n  var popperMarginSide = parseFloat(css['margin' + sideCapitalized]);\n  var popperBorderSide = parseFloat(css['border' + sideCapitalized + 'Width']);\n  var sideValue = center - data.offsets.popper[side] - popperMarginSide - popperBorderSide;\n\n  // prevent arrowElement from being placed not contiguously to its popper\n  sideValue = Math.max(Math.min(popper[len] - arrowElementSize, sideValue), 0);\n\n  data.arrowElement = arrowElement;\n  data.offsets.arrow = (_data$offsets$arrow = {}, defineProperty(_data$offsets$arrow, side, Math.round(sideValue)), defineProperty(_data$offsets$arrow, altSide, ''), _data$offsets$arrow);\n\n  return data;\n}\n\n/**\n * Get the opposite placement variation of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement variation\n * @returns {String} flipped placement variation\n */\nfunction getOppositeVariation(variation) {\n  if (variation === 'end') {\n    return 'start';\n  } else if (variation === 'start') {\n    return 'end';\n  }\n  return variation;\n}\n\n/**\n * List of accepted placements to use as values of the `placement` option.<br />\n * Valid placements are:\n * - `auto`\n * - `top`\n * - `right`\n * - `bottom`\n * - `left`\n *\n * Each placement can have a variation from this list:\n * - `-start`\n * - `-end`\n *\n * Variations are interpreted easily if you think of them as the left to right\n * written languages. Horizontally (`top` and `bottom`), `start` is left and `end`\n * is right.<br />\n * Vertically (`left` and `right`), `start` is top and `end` is bottom.\n *\n * Some valid examples are:\n * - `top-end` (on top of reference, right aligned)\n * - `right-start` (on right of reference, top aligned)\n * - `bottom` (on bottom, centered)\n * - `auto-end` (on the side with more space available, alignment depends by placement)\n *\n * @static\n * @type {Array}\n * @enum {String}\n * @readonly\n * @method placements\n * @memberof Popper\n */\nvar placements = ['auto-start', 'auto', 'auto-end', 'top-start', 'top', 'top-end', 'right-start', 'right', 'right-end', 'bottom-end', 'bottom', 'bottom-start', 'left-end', 'left', 'left-start'];\n\n// Get rid of `auto` `auto-start` and `auto-end`\nvar validPlacements = placements.slice(3);\n\n/**\n * Given an initial placement, returns all the subsequent placements\n * clockwise (or counter-clockwise).\n *\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement - A valid placement (it accepts variations)\n * @argument {Boolean} counter - Set to true to walk the placements counterclockwise\n * @returns {Array} placements including their variations\n */\nfunction clockwise(placement) {\n  var counter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var index = validPlacements.indexOf(placement);\n  var arr = validPlacements.slice(index + 1).concat(validPlacements.slice(0, index));\n  return counter ? arr.reverse() : arr;\n}\n\nvar BEHAVIORS = {\n  FLIP: 'flip',\n  CLOCKWISE: 'clockwise',\n  COUNTERCLOCKWISE: 'counterclockwise'\n};\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction flip(data, options) {\n  // if `inner` modifier is enabled, we can't use the `flip` modifier\n  if (isModifierEnabled(data.instance.modifiers, 'inner')) {\n    return data;\n  }\n\n  if (data.flipped && data.placement === data.originalPlacement) {\n    // seems like flip is trying to loop, probably there's not enough space on any of the flippable sides\n    return data;\n  }\n\n  var boundaries = getBoundaries(data.instance.popper, data.instance.reference, options.padding, options.boundariesElement, data.positionFixed);\n\n  var placement = data.placement.split('-')[0];\n  var placementOpposite = getOppositePlacement(placement);\n  var variation = data.placement.split('-')[1] || '';\n\n  var flipOrder = [];\n\n  switch (options.behavior) {\n    case BEHAVIORS.FLIP:\n      flipOrder = [placement, placementOpposite];\n      break;\n    case BEHAVIORS.CLOCKWISE:\n      flipOrder = clockwise(placement);\n      break;\n    case BEHAVIORS.COUNTERCLOCKWISE:\n      flipOrder = clockwise(placement, true);\n      break;\n    default:\n      flipOrder = options.behavior;\n  }\n\n  flipOrder.forEach(function (step, index) {\n    if (placement !== step || flipOrder.length === index + 1) {\n      return data;\n    }\n\n    placement = data.placement.split('-')[0];\n    placementOpposite = getOppositePlacement(placement);\n\n    var popperOffsets = data.offsets.popper;\n    var refOffsets = data.offsets.reference;\n\n    // using floor because the reference offsets may contain decimals we are not going to consider here\n    var floor = Math.floor;\n    var overlapsRef = placement === 'left' && floor(popperOffsets.right) > floor(refOffsets.left) || placement === 'right' && floor(popperOffsets.left) < floor(refOffsets.right) || placement === 'top' && floor(popperOffsets.bottom) > floor(refOffsets.top) || placement === 'bottom' && floor(popperOffsets.top) < floor(refOffsets.bottom);\n\n    var overflowsLeft = floor(popperOffsets.left) < floor(boundaries.left);\n    var overflowsRight = floor(popperOffsets.right) > floor(boundaries.right);\n    var overflowsTop = floor(popperOffsets.top) < floor(boundaries.top);\n    var overflowsBottom = floor(popperOffsets.bottom) > floor(boundaries.bottom);\n\n    var overflowsBoundaries = placement === 'left' && overflowsLeft || placement === 'right' && overflowsRight || placement === 'top' && overflowsTop || placement === 'bottom' && overflowsBottom;\n\n    // flip the variation if required\n    var isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n\n    // flips variation if reference element overflows boundaries\n    var flippedVariationByRef = !!options.flipVariations && (isVertical && variation === 'start' && overflowsLeft || isVertical && variation === 'end' && overflowsRight || !isVertical && variation === 'start' && overflowsTop || !isVertical && variation === 'end' && overflowsBottom);\n\n    // flips variation if popper content overflows boundaries\n    var flippedVariationByContent = !!options.flipVariationsByContent && (isVertical && variation === 'start' && overflowsRight || isVertical && variation === 'end' && overflowsLeft || !isVertical && variation === 'start' && overflowsBottom || !isVertical && variation === 'end' && overflowsTop);\n\n    var flippedVariation = flippedVariationByRef || flippedVariationByContent;\n\n    if (overlapsRef || overflowsBoundaries || flippedVariation) {\n      // this boolean to detect any flip loop\n      data.flipped = true;\n\n      if (overlapsRef || overflowsBoundaries) {\n        placement = flipOrder[index + 1];\n      }\n\n      if (flippedVariation) {\n        variation = getOppositeVariation(variation);\n      }\n\n      data.placement = placement + (variation ? '-' + variation : '');\n\n      // this object contains `position`, we want to preserve it along with\n      // any additional property we may add in the future\n      data.offsets.popper = _extends({}, data.offsets.popper, getPopperOffsets(data.instance.popper, data.offsets.reference, data.placement));\n\n      data = runModifiers(data.instance.modifiers, data, 'flip');\n    }\n  });\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction keepTogether(data) {\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var placement = data.placement.split('-')[0];\n  var floor = Math.floor;\n  var isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n  var side = isVertical ? 'right' : 'bottom';\n  var opSide = isVertical ? 'left' : 'top';\n  var measurement = isVertical ? 'width' : 'height';\n\n  if (popper[side] < floor(reference[opSide])) {\n    data.offsets.popper[opSide] = floor(reference[opSide]) - popper[measurement];\n  }\n  if (popper[opSide] > floor(reference[side])) {\n    data.offsets.popper[opSide] = floor(reference[side]);\n  }\n\n  return data;\n}\n\n/**\n * Converts a string containing value + unit into a px value number\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} str - Value + unit string\n * @argument {String} measurement - `height` or `width`\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @returns {Number|String}\n * Value in pixels, or original string if no values were extracted\n */\nfunction toValue(str, measurement, popperOffsets, referenceOffsets) {\n  // separate value from unit\n  var split = str.match(/((?:\\-|\\+)?\\d*\\.?\\d*)(.*)/);\n  var value = +split[1];\n  var unit = split[2];\n\n  // If it's not a number it's an operator, I guess\n  if (!value) {\n    return str;\n  }\n\n  if (unit.indexOf('%') === 0) {\n    var element = void 0;\n    switch (unit) {\n      case '%p':\n        element = popperOffsets;\n        break;\n      case '%':\n      case '%r':\n      default:\n        element = referenceOffsets;\n    }\n\n    var rect = getClientRect(element);\n    return rect[measurement] / 100 * value;\n  } else if (unit === 'vh' || unit === 'vw') {\n    // if is a vh or vw, we calculate the size based on the viewport\n    var size = void 0;\n    if (unit === 'vh') {\n      size = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n    } else {\n      size = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n    }\n    return size / 100 * value;\n  } else {\n    // if is an explicit pixel unit, we get rid of the unit and keep the value\n    // if is an implicit unit, it's px, and we return just the value\n    return value;\n  }\n}\n\n/**\n * Parse an `offset` string to extrapolate `x` and `y` numeric offsets.\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} offset\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @argument {String} basePlacement\n * @returns {Array} a two cells array with x and y offsets in numbers\n */\nfunction parseOffset(offset, popperOffsets, referenceOffsets, basePlacement) {\n  var offsets = [0, 0];\n\n  // Use height if placement is left or right and index is 0 otherwise use width\n  // in this way the first offset will use an axis and the second one\n  // will use the other one\n  var useHeight = ['right', 'left'].indexOf(basePlacement) !== -1;\n\n  // Split the offset string to obtain a list of values and operands\n  // The regex addresses values with the plus or minus sign in front (+10, -20, etc)\n  var fragments = offset.split(/(\\+|\\-)/).map(function (frag) {\n    return frag.trim();\n  });\n\n  // Detect if the offset string contains a pair of values or a single one\n  // they could be separated by comma or space\n  var divider = fragments.indexOf(find(fragments, function (frag) {\n    return frag.search(/,|\\s/) !== -1;\n  }));\n\n  if (fragments[divider] && fragments[divider].indexOf(',') === -1) {\n    console.warn('Offsets separated by white space(s) are deprecated, use a comma (,) instead.');\n  }\n\n  // If divider is found, we divide the list of values and operands to divide\n  // them by ofset X and Y.\n  var splitRegex = /\\s*,\\s*|\\s+/;\n  var ops = divider !== -1 ? [fragments.slice(0, divider).concat([fragments[divider].split(splitRegex)[0]]), [fragments[divider].split(splitRegex)[1]].concat(fragments.slice(divider + 1))] : [fragments];\n\n  // Convert the values with units to absolute pixels to allow our computations\n  ops = ops.map(function (op, index) {\n    // Most of the units rely on the orientation of the popper\n    var measurement = (index === 1 ? !useHeight : useHeight) ? 'height' : 'width';\n    var mergeWithPrevious = false;\n    return op\n    // This aggregates any `+` or `-` sign that aren't considered operators\n    // e.g.: 10 + +5 => [10, +, +5]\n    .reduce(function (a, b) {\n      if (a[a.length - 1] === '' && ['+', '-'].indexOf(b) !== -1) {\n        a[a.length - 1] = b;\n        mergeWithPrevious = true;\n        return a;\n      } else if (mergeWithPrevious) {\n        a[a.length - 1] += b;\n        mergeWithPrevious = false;\n        return a;\n      } else {\n        return a.concat(b);\n      }\n    }, [])\n    // Here we convert the string values into number values (in px)\n    .map(function (str) {\n      return toValue(str, measurement, popperOffsets, referenceOffsets);\n    });\n  });\n\n  // Loop trough the offsets arrays and execute the operations\n  ops.forEach(function (op, index) {\n    op.forEach(function (frag, index2) {\n      if (isNumeric(frag)) {\n        offsets[index] += frag * (op[index2 - 1] === '-' ? -1 : 1);\n      }\n    });\n  });\n  return offsets;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @argument {Number|String} options.offset=0\n * The offset value as described in the modifier description\n * @returns {Object} The data object, properly modified\n */\nfunction offset(data, _ref) {\n  var offset = _ref.offset;\n  var placement = data.placement,\n      _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var basePlacement = placement.split('-')[0];\n\n  var offsets = void 0;\n  if (isNumeric(+offset)) {\n    offsets = [+offset, 0];\n  } else {\n    offsets = parseOffset(offset, popper, reference, basePlacement);\n  }\n\n  if (basePlacement === 'left') {\n    popper.top += offsets[0];\n    popper.left -= offsets[1];\n  } else if (basePlacement === 'right') {\n    popper.top += offsets[0];\n    popper.left += offsets[1];\n  } else if (basePlacement === 'top') {\n    popper.left += offsets[0];\n    popper.top -= offsets[1];\n  } else if (basePlacement === 'bottom') {\n    popper.left += offsets[0];\n    popper.top += offsets[1];\n  }\n\n  data.popper = popper;\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction preventOverflow(data, options) {\n  var boundariesElement = options.boundariesElement || getOffsetParent(data.instance.popper);\n\n  // If offsetParent is the reference element, we really want to\n  // go one step up and use the next offsetParent as reference to\n  // avoid to make this modifier completely useless and look like broken\n  if (data.instance.reference === boundariesElement) {\n    boundariesElement = getOffsetParent(boundariesElement);\n  }\n\n  // NOTE: DOM access here\n  // resets the popper's position so that the document size can be calculated excluding\n  // the size of the popper element itself\n  var transformProp = getSupportedPropertyName('transform');\n  var popperStyles = data.instance.popper.style; // assignment to help minification\n  var top = popperStyles.top,\n      left = popperStyles.left,\n      transform = popperStyles[transformProp];\n\n  popperStyles.top = '';\n  popperStyles.left = '';\n  popperStyles[transformProp] = '';\n\n  var boundaries = getBoundaries(data.instance.popper, data.instance.reference, options.padding, boundariesElement, data.positionFixed);\n\n  // NOTE: DOM access here\n  // restores the original style properties after the offsets have been computed\n  popperStyles.top = top;\n  popperStyles.left = left;\n  popperStyles[transformProp] = transform;\n\n  options.boundaries = boundaries;\n\n  var order = options.priority;\n  var popper = data.offsets.popper;\n\n  var check = {\n    primary: function primary(placement) {\n      var value = popper[placement];\n      if (popper[placement] < boundaries[placement] && !options.escapeWithReference) {\n        value = Math.max(popper[placement], boundaries[placement]);\n      }\n      return defineProperty({}, placement, value);\n    },\n    secondary: function secondary(placement) {\n      var mainSide = placement === 'right' ? 'left' : 'top';\n      var value = popper[mainSide];\n      if (popper[placement] > boundaries[placement] && !options.escapeWithReference) {\n        value = Math.min(popper[mainSide], boundaries[placement] - (placement === 'right' ? popper.width : popper.height));\n      }\n      return defineProperty({}, mainSide, value);\n    }\n  };\n\n  order.forEach(function (placement) {\n    var side = ['left', 'top'].indexOf(placement) !== -1 ? 'primary' : 'secondary';\n    popper = _extends({}, popper, check[side](placement));\n  });\n\n  data.offsets.popper = popper;\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction shift(data) {\n  var placement = data.placement;\n  var basePlacement = placement.split('-')[0];\n  var shiftvariation = placement.split('-')[1];\n\n  // if shift shiftvariation is specified, run the modifier\n  if (shiftvariation) {\n    var _data$offsets = data.offsets,\n        reference = _data$offsets.reference,\n        popper = _data$offsets.popper;\n\n    var isVertical = ['bottom', 'top'].indexOf(basePlacement) !== -1;\n    var side = isVertical ? 'left' : 'top';\n    var measurement = isVertical ? 'width' : 'height';\n\n    var shiftOffsets = {\n      start: defineProperty({}, side, reference[side]),\n      end: defineProperty({}, side, reference[side] + reference[measurement] - popper[measurement])\n    };\n\n    data.offsets.popper = _extends({}, popper, shiftOffsets[shiftvariation]);\n  }\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction hide(data) {\n  if (!isModifierRequired(data.instance.modifiers, 'hide', 'preventOverflow')) {\n    return data;\n  }\n\n  var refRect = data.offsets.reference;\n  var bound = find(data.instance.modifiers, function (modifier) {\n    return modifier.name === 'preventOverflow';\n  }).boundaries;\n\n  if (refRect.bottom < bound.top || refRect.left > bound.right || refRect.top > bound.bottom || refRect.right < bound.left) {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === true) {\n      return data;\n    }\n\n    data.hide = true;\n    data.attributes['x-out-of-boundaries'] = '';\n  } else {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === false) {\n      return data;\n    }\n\n    data.hide = false;\n    data.attributes['x-out-of-boundaries'] = false;\n  }\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction inner(data) {\n  var placement = data.placement;\n  var basePlacement = placement.split('-')[0];\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var isHoriz = ['left', 'right'].indexOf(basePlacement) !== -1;\n\n  var subtractLength = ['top', 'left'].indexOf(basePlacement) === -1;\n\n  popper[isHoriz ? 'left' : 'top'] = reference[basePlacement] - (subtractLength ? popper[isHoriz ? 'width' : 'height'] : 0);\n\n  data.placement = getOppositePlacement(placement);\n  data.offsets.popper = getClientRect(popper);\n\n  return data;\n}\n\n/**\n * Modifier function, each modifier can have a function of this type assigned\n * to its `fn` property.<br />\n * These functions will be called on each update, this means that you must\n * make sure they are performant enough to avoid performance bottlenecks.\n *\n * @function ModifierFn\n * @argument {dataObject} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {dataObject} The data object, properly modified\n */\n\n/**\n * Modifiers are plugins used to alter the behavior of your poppers.<br />\n * Popper.js uses a set of 9 modifiers to provide all the basic functionalities\n * needed by the library.\n *\n * Usually you don't want to override the `order`, `fn` and `onLoad` props.\n * All the other properties are configurations that could be tweaked.\n * @namespace modifiers\n */\nvar modifiers = {\n  /**\n   * Modifier used to shift the popper on the start or end of its reference\n   * element.<br />\n   * It will read the variation of the `placement` property.<br />\n   * It can be one either `-end` or `-start`.\n   * @memberof modifiers\n   * @inner\n   */\n  shift: {\n    /** @prop {number} order=100 - Index used to define the order of execution */\n    order: 100,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: shift\n  },\n\n  /**\n   * The `offset` modifier can shift your popper on both its axis.\n   *\n   * It accepts the following units:\n   * - `px` or unit-less, interpreted as pixels\n   * - `%` or `%r`, percentage relative to the length of the reference element\n   * - `%p`, percentage relative to the length of the popper element\n   * - `vw`, CSS viewport width unit\n   * - `vh`, CSS viewport height unit\n   *\n   * For length is intended the main axis relative to the placement of the popper.<br />\n   * This means that if the placement is `top` or `bottom`, the length will be the\n   * `width`. In case of `left` or `right`, it will be the `height`.\n   *\n   * You can provide a single value (as `Number` or `String`), or a pair of values\n   * as `String` divided by a comma or one (or more) white spaces.<br />\n   * The latter is a deprecated method because it leads to confusion and will be\n   * removed in v2.<br />\n   * Additionally, it accepts additions and subtractions between different units.\n   * Note that multiplications and divisions aren't supported.\n   *\n   * Valid examples are:\n   * ```\n   * 10\n   * '10%'\n   * '10, 10'\n   * '10%, 10'\n   * '10 + 10%'\n   * '10 - 5vh + 3%'\n   * '-10px + 5vh, 5px - 6%'\n   * ```\n   * > **NB**: If you desire to apply offsets to your poppers in a way that may make them overlap\n   * > with their reference element, unfortunately, you will have to disable the `flip` modifier.\n   * > You can read more on this at this [issue](https://github.com/FezVrasta/popper.js/issues/373).\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  offset: {\n    /** @prop {number} order=200 - Index used to define the order of execution */\n    order: 200,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: offset,\n    /** @prop {Number|String} offset=0\n     * The offset value as described in the modifier description\n     */\n    offset: 0\n  },\n\n  /**\n   * Modifier used to prevent the popper from being positioned outside the boundary.\n   *\n   * A scenario exists where the reference itself is not within the boundaries.<br />\n   * We can say it has \"escaped the boundaries\"  or just \"escaped\".<br />\n   * In this case we need to decide whether the popper should either:\n   *\n   * - detach from the reference and remain \"trapped\" in the boundaries, or\n   * - if it should ignore the boundary and \"escape with its reference\"\n   *\n   * When `escapeWithReference` is set to`true` and reference is completely\n   * outside its boundaries, the popper will overflow (or completely leave)\n   * the boundaries in order to remain attached to the edge of the reference.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  preventOverflow: {\n    /** @prop {number} order=300 - Index used to define the order of execution */\n    order: 300,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: preventOverflow,\n    /**\n     * @prop {Array} [priority=['left','right','top','bottom']]\n     * Popper will try to prevent overflow following these priorities by default,\n     * then, it could overflow on the left and on top of the `boundariesElement`\n     */\n    priority: ['left', 'right', 'top', 'bottom'],\n    /**\n     * @prop {number} padding=5\n     * Amount of pixel used to define a minimum distance between the boundaries\n     * and the popper. This makes sure the popper always has a little padding\n     * between the edges of its container\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='scrollParent'\n     * Boundaries used by the modifier. Can be `scrollParent`, `window`,\n     * `viewport` or any DOM element.\n     */\n    boundariesElement: 'scrollParent'\n  },\n\n  /**\n   * Modifier used to make sure the reference and its popper stay near each other\n   * without leaving any gap between the two. Especially useful when the arrow is\n   * enabled and you want to ensure that it points to its reference element.\n   * It cares only about the first axis. You can still have poppers with margin\n   * between the popper and its reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  keepTogether: {\n    /** @prop {number} order=400 - Index used to define the order of execution */\n    order: 400,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: keepTogether\n  },\n\n  /**\n   * This modifier is used to move the `arrowElement` of the popper to make\n   * sure it is positioned between the reference element and its popper element.\n   * It will read the outer size of the `arrowElement` node to detect how many\n   * pixels of conjunction are needed.\n   *\n   * It has no effect if no `arrowElement` is provided.\n   * @memberof modifiers\n   * @inner\n   */\n  arrow: {\n    /** @prop {number} order=500 - Index used to define the order of execution */\n    order: 500,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: arrow,\n    /** @prop {String|HTMLElement} element='[x-arrow]' - Selector or node used as arrow */\n    element: '[x-arrow]'\n  },\n\n  /**\n   * Modifier used to flip the popper's placement when it starts to overlap its\n   * reference element.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   *\n   * **NOTE:** this modifier will interrupt the current update cycle and will\n   * restart it if it detects the need to flip the placement.\n   * @memberof modifiers\n   * @inner\n   */\n  flip: {\n    /** @prop {number} order=600 - Index used to define the order of execution */\n    order: 600,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: flip,\n    /**\n     * @prop {String|Array} behavior='flip'\n     * The behavior used to change the popper's placement. It can be one of\n     * `flip`, `clockwise`, `counterclockwise` or an array with a list of valid\n     * placements (with optional variations)\n     */\n    behavior: 'flip',\n    /**\n     * @prop {number} padding=5\n     * The popper will flip if it hits the edges of the `boundariesElement`\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='viewport'\n     * The element which will define the boundaries of the popper position.\n     * The popper will never be placed outside of the defined boundaries\n     * (except if `keepTogether` is enabled)\n     */\n    boundariesElement: 'viewport',\n    /**\n     * @prop {Boolean} flipVariations=false\n     * The popper will switch placement variation between `-start` and `-end` when\n     * the reference element overlaps its boundaries.\n     *\n     * The original placement should have a set variation.\n     */\n    flipVariations: false,\n    /**\n     * @prop {Boolean} flipVariationsByContent=false\n     * The popper will switch placement variation between `-start` and `-end` when\n     * the popper element overlaps its reference boundaries.\n     *\n     * The original placement should have a set variation.\n     */\n    flipVariationsByContent: false\n  },\n\n  /**\n   * Modifier used to make the popper flow toward the inner of the reference element.\n   * By default, when this modifier is disabled, the popper will be placed outside\n   * the reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  inner: {\n    /** @prop {number} order=700 - Index used to define the order of execution */\n    order: 700,\n    /** @prop {Boolean} enabled=false - Whether the modifier is enabled or not */\n    enabled: false,\n    /** @prop {ModifierFn} */\n    fn: inner\n  },\n\n  /**\n   * Modifier used to hide the popper when its reference element is outside of the\n   * popper boundaries. It will set a `x-out-of-boundaries` attribute which can\n   * be used to hide with a CSS selector the popper when its reference is\n   * out of boundaries.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   * @memberof modifiers\n   * @inner\n   */\n  hide: {\n    /** @prop {number} order=800 - Index used to define the order of execution */\n    order: 800,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: hide\n  },\n\n  /**\n   * Computes the style that will be applied to the popper element to gets\n   * properly positioned.\n   *\n   * Note that this modifier will not touch the DOM, it just prepares the styles\n   * so that `applyStyle` modifier can apply it. This separation is useful\n   * in case you need to replace `applyStyle` with a custom implementation.\n   *\n   * This modifier has `850` as `order` value to maintain backward compatibility\n   * with previous versions of Popper.js. Expect the modifiers ordering method\n   * to change in future major versions of the library.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  computeStyle: {\n    /** @prop {number} order=850 - Index used to define the order of execution */\n    order: 850,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: computeStyle,\n    /**\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: true,\n    /**\n     * @prop {string} [x='bottom']\n     * Where to anchor the X axis (`bottom` or `top`). AKA X offset origin.\n     * Change this if your popper should grow in a direction different from `bottom`\n     */\n    x: 'bottom',\n    /**\n     * @prop {string} [x='left']\n     * Where to anchor the Y axis (`left` or `right`). AKA Y offset origin.\n     * Change this if your popper should grow in a direction different from `right`\n     */\n    y: 'right'\n  },\n\n  /**\n   * Applies the computed styles to the popper element.\n   *\n   * All the DOM manipulations are limited to this modifier. This is useful in case\n   * you want to integrate Popper.js inside a framework or view library and you\n   * want to delegate all the DOM manipulations to it.\n   *\n   * Note that if you disable this modifier, you must make sure the popper element\n   * has its position set to `absolute` before Popper.js can do its work!\n   *\n   * Just disable this modifier and define your own to achieve the desired effect.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  applyStyle: {\n    /** @prop {number} order=900 - Index used to define the order of execution */\n    order: 900,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: applyStyle,\n    /** @prop {Function} */\n    onLoad: applyStyleOnLoad,\n    /**\n     * @deprecated since version 1.10.0, the property moved to `computeStyle` modifier\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: undefined\n  }\n};\n\n/**\n * The `dataObject` is an object containing all the information used by Popper.js.\n * This object is passed to modifiers and to the `onCreate` and `onUpdate` callbacks.\n * @name dataObject\n * @property {Object} data.instance The Popper.js instance\n * @property {String} data.placement Placement applied to popper\n * @property {String} data.originalPlacement Placement originally defined on init\n * @property {Boolean} data.flipped True if popper has been flipped by flip modifier\n * @property {Boolean} data.hide True if the reference element is out of boundaries, useful to know when to hide the popper\n * @property {HTMLElement} data.arrowElement Node used as arrow by arrow modifier\n * @property {Object} data.styles Any CSS property defined here will be applied to the popper. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.arrowStyles Any CSS property defined here will be applied to the popper arrow. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.boundaries Offsets of the popper boundaries\n * @property {Object} data.offsets The measurements of popper, reference and arrow elements\n * @property {Object} data.offsets.popper `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.reference `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.arrow] `top` and `left` offsets, only one of them will be different from 0\n */\n\n/**\n * Default options provided to Popper.js constructor.<br />\n * These can be overridden using the `options` argument of Popper.js.<br />\n * To override an option, simply pass an object with the same\n * structure of the `options` object, as the 3rd argument. For example:\n * ```\n * new Popper(ref, pop, {\n *   modifiers: {\n *     preventOverflow: { enabled: false }\n *   }\n * })\n * ```\n * @type {Object}\n * @static\n * @memberof Popper\n */\nvar Defaults = {\n  /**\n   * Popper's placement.\n   * @prop {Popper.placements} placement='bottom'\n   */\n  placement: 'bottom',\n\n  /**\n   * Set this to true if you want popper to position it self in 'fixed' mode\n   * @prop {Boolean} positionFixed=false\n   */\n  positionFixed: false,\n\n  /**\n   * Whether events (resize, scroll) are initially enabled.\n   * @prop {Boolean} eventsEnabled=true\n   */\n  eventsEnabled: true,\n\n  /**\n   * Set to true if you want to automatically remove the popper when\n   * you call the `destroy` method.\n   * @prop {Boolean} removeOnDestroy=false\n   */\n  removeOnDestroy: false,\n\n  /**\n   * Callback called when the popper is created.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onCreate}\n   */\n  onCreate: function onCreate() {},\n\n  /**\n   * Callback called when the popper is updated. This callback is not called\n   * on the initialization/creation of the popper, but only on subsequent\n   * updates.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onUpdate}\n   */\n  onUpdate: function onUpdate() {},\n\n  /**\n   * List of modifiers used to modify the offsets before they are applied to the popper.\n   * They provide most of the functionalities of Popper.js.\n   * @prop {modifiers}\n   */\n  modifiers: modifiers\n};\n\n/**\n * @callback onCreate\n * @param {dataObject} data\n */\n\n/**\n * @callback onUpdate\n * @param {dataObject} data\n */\n\n// Utils\n// Methods\nvar Popper = function () {\n  /**\n   * Creates a new Popper.js instance.\n   * @class Popper\n   * @param {Element|referenceObject} reference - The reference element used to position the popper\n   * @param {Element} popper - The HTML / XML element used as the popper\n   * @param {Object} options - Your custom options to override the ones defined in [Defaults](#defaults)\n   * @return {Object} instance - The generated Popper.js instance\n   */\n  function Popper(reference, popper) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    classCallCheck(this, Popper);\n\n    this.scheduleUpdate = function () {\n      return requestAnimationFrame(_this.update);\n    };\n\n    // make update() debounced, so that it only runs at most once-per-tick\n    this.update = debounce(this.update.bind(this));\n\n    // with {} we create a new object with the options inside it\n    this.options = _extends({}, Popper.Defaults, options);\n\n    // init state\n    this.state = {\n      isDestroyed: false,\n      isCreated: false,\n      scrollParents: []\n    };\n\n    // get reference and popper elements (allow jQuery wrappers)\n    this.reference = reference && reference.jquery ? reference[0] : reference;\n    this.popper = popper && popper.jquery ? popper[0] : popper;\n\n    // Deep merge modifiers options\n    this.options.modifiers = {};\n    Object.keys(_extends({}, Popper.Defaults.modifiers, options.modifiers)).forEach(function (name) {\n      _this.options.modifiers[name] = _extends({}, Popper.Defaults.modifiers[name] || {}, options.modifiers ? options.modifiers[name] : {});\n    });\n\n    // Refactoring modifiers' list (Object => Array)\n    this.modifiers = Object.keys(this.options.modifiers).map(function (name) {\n      return _extends({\n        name: name\n      }, _this.options.modifiers[name]);\n    })\n    // sort the modifiers by order\n    .sort(function (a, b) {\n      return a.order - b.order;\n    });\n\n    // modifiers have the ability to execute arbitrary code when Popper.js get inited\n    // such code is executed in the same order of its modifier\n    // they could add new properties to their options configuration\n    // BE AWARE: don't add options to `options.modifiers.name` but to `modifierOptions`!\n    this.modifiers.forEach(function (modifierOptions) {\n      if (modifierOptions.enabled && isFunction(modifierOptions.onLoad)) {\n        modifierOptions.onLoad(_this.reference, _this.popper, _this.options, modifierOptions, _this.state);\n      }\n    });\n\n    // fire the first update to position the popper in the right place\n    this.update();\n\n    var eventsEnabled = this.options.eventsEnabled;\n    if (eventsEnabled) {\n      // setup event listeners, they will take care of update the position in specific situations\n      this.enableEventListeners();\n    }\n\n    this.state.eventsEnabled = eventsEnabled;\n  }\n\n  // We can't use class properties because they don't get listed in the\n  // class prototype and break stuff like Sinon stubs\n\n\n  createClass(Popper, [{\n    key: 'update',\n    value: function update$$1() {\n      return update.call(this);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy$$1() {\n      return destroy.call(this);\n    }\n  }, {\n    key: 'enableEventListeners',\n    value: function enableEventListeners$$1() {\n      return enableEventListeners.call(this);\n    }\n  }, {\n    key: 'disableEventListeners',\n    value: function disableEventListeners$$1() {\n      return disableEventListeners.call(this);\n    }\n\n    /**\n     * Schedules an update. It will run on the next UI update available.\n     * @method scheduleUpdate\n     * @memberof Popper\n     */\n\n\n    /**\n     * Collection of utilities useful when writing custom modifiers.\n     * Starting from version 1.7, this method is available only if you\n     * include `popper-utils.js` before `popper.js`.\n     *\n     * **DEPRECATION**: This way to access PopperUtils is deprecated\n     * and will be removed in v2! Use the PopperUtils module directly instead.\n     * Due to the high instability of the methods contained in Utils, we can't\n     * guarantee them to follow semver. Use them at your own risk!\n     * @static\n     * @private\n     * @type {Object}\n     * @deprecated since version 1.8\n     * @member Utils\n     * @memberof Popper\n     */\n\n  }]);\n  return Popper;\n}();\n\n/**\n * The `referenceObject` is an object that provides an interface compatible with Popper.js\n * and lets you use it as replacement of a real DOM node.<br />\n * You can use this method to position a popper relatively to a set of coordinates\n * in case you don't have a DOM node to use as reference.\n *\n * ```\n * new Popper(referenceObject, popperNode);\n * ```\n *\n * NB: This feature isn't supported in Internet Explorer 10.\n * @name referenceObject\n * @property {Function} data.getBoundingClientRect\n * A function that returns a set of coordinates compatible with the native `getBoundingClientRect` method.\n * @property {number} data.clientWidth\n * An ES6 getter that will return the width of the virtual reference element.\n * @property {number} data.clientHeight\n * An ES6 getter that will return the height of the virtual reference element.\n */\n\n\nPopper.Utils = (typeof window !== 'undefined' ? window : global).PopperUtils;\nPopper.placements = placements;\nPopper.Defaults = Defaults;\n\nexport default Popper;\n//# sourceMappingURL=popper.js.map\n","var TYPE_OBJECT = '[object Object]';\r\n/**\r\n * deep merge the source object into the target object and return the target object.\r\n * will concatenate arrays instead of replacing them.\r\n * @internal\r\n */\r\nexport default function merge(target, source) {\r\n    var result = target;\r\n    if (!source) {\r\n        return result;\r\n    }\r\n    var bKeys = Object.keys(source);\r\n    if (bKeys.length === 0) {\r\n        return result;\r\n    }\r\n    for (var _i = 0, bKeys_1 = bKeys; _i < bKeys_1.length; _i++) {\r\n        var key = bKeys_1[_i];\r\n        var value = source[key];\r\n        //merge just POJOs\r\n        if (Object.prototype.toString.call(value) === TYPE_OBJECT && (Object.getPrototypeOf(value) === Object.prototype)) { //pojo\r\n            if (result[key] == null) {\r\n                result[key] = {};\r\n            }\r\n            result[key] = merge(result[key], value);\r\n        }\r\n        else if (Array.isArray(value)) {\r\n            if (result[key] == null) {\r\n                result[key] = [];\r\n            }\r\n            result[key] = result[key].concat(value);\r\n        }\r\n        else {\r\n            result[key] = value;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n//# sourceMappingURL=merge.js.map","import Popper from 'popper.js';\r\nimport { merge } from '../../internal';\r\nimport { cssClass } from '../../styles';\r\nexport function dialogContext(ctx, level, attachment) {\r\n    return {\r\n        attachment: attachment.currentTarget != null ? attachment.currentTarget : attachment,\r\n        level: level,\r\n        manager: ctx.dialogManager,\r\n        idPrefix: ctx.idPrefix\r\n    };\r\n}\r\nvar ADialog = /** @class */ (function () {\r\n    function ADialog(dialog, options) {\r\n        if (options === void 0) { options = {}; }\r\n        this.dialog = dialog;\r\n        this.options = {\r\n            title: '',\r\n            livePreview: false,\r\n            popup: false,\r\n            placement: 'bottom-start',\r\n            toggleDialog: true,\r\n            cancelSubDialogs: false,\r\n            autoClose: false,\r\n            modifiers: {}\r\n        };\r\n        this.popper = null;\r\n        Object.assign(this.options, options);\r\n        this.node = dialog.attachment.ownerDocument.createElement('form');\r\n        this.node.classList.add(cssClass('dialog'));\r\n    }\r\n    Object.defineProperty(ADialog.prototype, \"autoClose\", {\r\n        get: function () {\r\n            return this.options.autoClose;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ADialog.prototype, \"attachment\", {\r\n        get: function () {\r\n            return this.dialog.attachment;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ADialog.prototype, \"level\", {\r\n        get: function () {\r\n            return this.dialog.level;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ADialog.prototype.showLivePreviews = function () {\r\n        return this.options.livePreview === true || (typeof this.options.livePreview === 'string' && this.dialog.manager.livePreviews[this.options.livePreview] === true);\r\n    };\r\n    ADialog.prototype.enableLivePreviews = function (selector) {\r\n        var _this = this;\r\n        if (!this.showLivePreviews()) {\r\n            return;\r\n        }\r\n        var submitter = function () {\r\n            _this.submit();\r\n        };\r\n        if (typeof selector === 'string') {\r\n            this.forEach(selector, function (n) {\r\n                n.addEventListener('change', submitter, { passive: true });\r\n            });\r\n        }\r\n        else {\r\n            selector.forEach(function (n) {\r\n                n.addEventListener('change', submitter, { passive: true });\r\n            });\r\n        }\r\n    };\r\n    ADialog.prototype.equals = function (that) {\r\n        return this.dialog.level === that.dialog.level && this.dialog.attachment === that.dialog.attachment;\r\n    };\r\n    ADialog.prototype.appendDialogButtons = function () {\r\n        this.node.insertAdjacentHTML('beforeend', \"<div class=\\\"\" + cssClass('dialog-buttons') + \"\\\">\\n      <button class=\\\"\" + cssClass('dialog-button') + \"\\\" type=\\\"submit\\\" title=\\\"Apply\\\"></button>\\n      <button class=\\\"\" + cssClass('dialog-button') + \"\\\" type=\\\"button\\\" title=\\\"Cancel\\\"></button>\\n      <button class=\\\"\" + cssClass('dialog-button') + \"\\\" type=\\\"reset\\\" title=\\\"Reset to default values\\\"></button>\\n    </div>\");\r\n    };\r\n    ADialog.prototype.open = function () {\r\n        var _this = this;\r\n        if (this.options.toggleDialog && this.dialog.manager.removeLike(this)) {\r\n            return;\r\n        }\r\n        if (this.build(this.node) === false) {\r\n            return;\r\n        }\r\n        var parent = this.attachment.closest(\".\" + cssClass());\r\n        if (this.options.title) {\r\n            this.node.insertAdjacentHTML('afterbegin', \"<strong>\" + this.options.title + \"</strong>\");\r\n        }\r\n        if (!this.options.popup) {\r\n            this.appendDialogButtons();\r\n        }\r\n        parent.appendChild(this.node);\r\n        this.popper = new Popper(this.attachment, this.node, merge({\r\n            modifiers: {\r\n                preventOverflow: {\r\n                    boundariesElement: parent\r\n                }\r\n            }\r\n        }, this.options));\r\n        var auto = this.find('input[autofocus]');\r\n        if (auto) {\r\n            // delay such that it works\r\n            self.setTimeout(function () { return auto.focus(); });\r\n        }\r\n        var reset = this.find('button[type=reset]');\r\n        if (reset) {\r\n            reset.onclick = function (evt) {\r\n                evt.stopPropagation();\r\n                evt.preventDefault();\r\n                _this.reset();\r\n                if (_this.showLivePreviews()) {\r\n                    _this.submit();\r\n                }\r\n            };\r\n        }\r\n        this.node.onsubmit = function (evt) {\r\n            evt.stopPropagation();\r\n            evt.preventDefault();\r\n            return _this.triggerSubmit();\r\n        };\r\n        var cancel = this.find('button[title=Cancel]');\r\n        if (cancel) {\r\n            cancel.onclick = function (evt) {\r\n                evt.stopPropagation();\r\n                evt.preventDefault();\r\n                _this.cancel();\r\n                _this.destroy('cancel');\r\n            };\r\n        }\r\n        if (this.options.cancelSubDialogs) {\r\n            this.node.addEventListener('click', function () {\r\n                _this.dialog.manager.removeAboveLevel(_this.dialog.level + 1);\r\n            });\r\n        }\r\n        this.dialog.manager.push(this);\r\n    };\r\n    ADialog.prototype.triggerSubmit = function () {\r\n        if (!this.node.checkValidity()) {\r\n            return false;\r\n        }\r\n        if (this.submit() !== false) {\r\n            this.destroy('confirm');\r\n        }\r\n        return false;\r\n    };\r\n    ADialog.prototype.find = function (selector) {\r\n        return this.node.querySelector(selector);\r\n    };\r\n    ADialog.prototype.findInput = function (selector) {\r\n        return this.find(selector);\r\n    };\r\n    ADialog.prototype.forEach = function (selector, callback) {\r\n        return Array.from(this.node.querySelectorAll(selector)).map(callback);\r\n    };\r\n    ADialog.prototype.cleanUp = function (action) {\r\n        if (action === 'confirm') {\r\n            this.submit(); // TODO what if submit wasn't successful?\r\n        }\r\n        else if (action === 'cancel') {\r\n            this.cancel();\r\n        }\r\n        if (action !== 'handled') {\r\n            this.dialog.manager.triggerDialogClosed(this, action);\r\n        }\r\n        if (this.popper) {\r\n            this.popper.destroy();\r\n        }\r\n        this.node.remove();\r\n    };\r\n    ADialog.prototype.destroy = function (action) {\r\n        if (action === void 0) { action = 'cancel'; }\r\n        this.dialog.manager.triggerDialogClosed(this, action);\r\n        this.dialog.manager.remove(this, true);\r\n    };\r\n    return ADialog;\r\n}());\r\nexport default ADialog;\r\n//# sourceMappingURL=ADialog.js.map","import * as tslib_1 from \"tslib\";\r\nimport ADialog from './ADialog';\r\nvar APopup = /** @class */ (function (_super) {\r\n    tslib_1.__extends(APopup, _super);\r\n    function APopup(dialog, options) {\r\n        if (options === void 0) { options = {}; }\r\n        return _super.call(this, dialog, Object.assign({\r\n            popup: true\r\n        }, options)) || this;\r\n    }\r\n    APopup.prototype.submit = function () {\r\n        return true;\r\n    };\r\n    APopup.prototype.reset = function () {\r\n        // dummy\r\n    };\r\n    APopup.prototype.cancel = function () {\r\n        // dummy\r\n    };\r\n    return APopup;\r\n}(ADialog));\r\nexport default APopup;\r\n//# sourceMappingURL=APopup.js.map","import * as tslib_1 from \"tslib\";\r\nimport APopup from './APopup';\r\n/** @internal */\r\nvar InputNumberDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(InputNumberDialog, _super);\r\n    function InputNumberDialog(dialog, callback, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this, dialog) || this;\r\n        _this.callback = callback;\r\n        _this.ioptions = {\r\n            min: NaN,\r\n            max: NaN,\r\n            step: 'any',\r\n            value: NaN,\r\n            label: null\r\n        };\r\n        Object.assign(_this.ioptions, options);\r\n        return _this;\r\n    }\r\n    InputNumberDialog.prototype.build = function (node) {\r\n        var o = this.ioptions;\r\n        node.insertAdjacentHTML('beforeend', \"\\n     <input type=\\\"number\\\" value=\\\"\" + (isNaN(o.value) ? '' : String(o.value)) + \"\\\" required autofocus placeholder=\\\"\" + (o.label ? o.label : 'enter number') + \"\\\" \" + (isNaN(o.min) ? '' : \" min=\\\"\" + o.min + \"\\\"\") + \" \" + (isNaN(o.max) ? '' : \" max=\\\"\" + o.max + \"\\\"\") + \" step=\\\"\" + o.step + \"\\\">\\n    \");\r\n        this.enableLivePreviews('input');\r\n    };\r\n    InputNumberDialog.prototype.submit = function () {\r\n        this.callback(this.findInput('input[type=number]').valueAsNumber);\r\n        return true;\r\n    };\r\n    return InputNumberDialog;\r\n}(APopup));\r\nexport default InputNumberDialog;\r\n//# sourceMappingURL=InputNumberDialog.js.map","import { cssClass } from '../styles';\r\n/**\r\n * allow to change the width of a column using dragging the handle\r\n * @internal\r\n */\r\nexport function dragHandle(handle, options) {\r\n    if (options === void 0) { options = {}; }\r\n    var o = Object.assign({\r\n        container: handle.parentElement,\r\n        filter: function () { return true; },\r\n        onStart: function () { return undefined; },\r\n        onDrag: function () { return undefined; },\r\n        onEnd: function () { return undefined; },\r\n        minDelta: 2\r\n    }, options);\r\n    var ueberElement = null;\r\n    // converts the given x coordinate to be relative to the given element\r\n    var toContainerRelative = function (x, elem) {\r\n        var rect = elem.getBoundingClientRect();\r\n        return x - rect.left - elem.clientLeft;\r\n    };\r\n    var start = 0;\r\n    var last = 0;\r\n    var handleShift = 0;\r\n    var mouseMove = function (evt) {\r\n        if (!o.filter(evt)) {\r\n            return;\r\n        }\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n        var end = toContainerRelative(evt.clientX, o.container) - handleShift;\r\n        if (Math.abs(last - end) < o.minDelta) {\r\n            //ignore\r\n            return;\r\n        }\r\n        last = end;\r\n        o.onDrag(handle, end, last - end, evt);\r\n    };\r\n    var mouseUp = function (evt) {\r\n        if (!o.filter(evt)) {\r\n            return;\r\n        }\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n        var end = toContainerRelative(evt.clientX, o.container) - handleShift;\r\n        ueberElement.removeEventListener('mousemove', mouseMove);\r\n        ueberElement.removeEventListener('mouseup', mouseUp);\r\n        ueberElement.removeEventListener('mouseleave', mouseUp);\r\n        ueberElement.classList.remove(cssClass('dragging'));\r\n        if (Math.abs(start - end) < 2) {\r\n            //ignore\r\n            return;\r\n        }\r\n        o.onEnd(handle, end, start - end, evt);\r\n    };\r\n    handle.onmousedown = function (evt) {\r\n        if (!o.filter(evt)) {\r\n            return;\r\n        }\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n        handleShift = toContainerRelative(evt.clientX, handle);\r\n        start = last = toContainerRelative(evt.clientX, o.container) - handleShift;\r\n        // register other event listeners\r\n        ueberElement = handle.closest('body') || handle.closest(\".\" + cssClass()); // take the whole body or root lineup\r\n        ueberElement.addEventListener('mousemove', mouseMove);\r\n        ueberElement.addEventListener('mouseup', mouseUp);\r\n        ueberElement.addEventListener('mouseleave', mouseUp);\r\n        ueberElement.classList.add(cssClass('dragging'));\r\n        o.onStart(handle, start, 0, evt);\r\n    };\r\n}\r\n//# sourceMappingURL=drag.js.map","import { DENSE_HISTOGRAM } from '../constants';\r\nimport { round, dragHandle } from '../internal';\r\nimport { cssClass, FILTERED_OPACITY } from '../styles';\r\nimport { color } from 'd3-color';\r\nimport { filterMissingNumberMarkup, updateFilterMissingNumberMarkup } from '../ui/missing';\r\nfunction filteredColor(input) {\r\n    var c = color(input);\r\n    c.opacity = FILTERED_OPACITY;\r\n    return c.toString();\r\n}\r\nexport function histogramTemplate(guessedBins) {\r\n    var bins = '';\r\n    for (var i = 0; i < guessedBins; ++i) {\r\n        bins += \"<div class=\\\"\" + cssClass('histogram-bin') + \"\\\" title=\\\"Bin \" + i + \": 0\\\" data-x=\\\"\\\"><div style=\\\"height: 0\\\" ></div></div>\";\r\n    }\r\n    // no closing div to be able to append things\r\n    return \"<div class=\\\"\" + cssClass('histogram') + \" \" + (guessedBins > DENSE_HISTOGRAM ? cssClass('dense') : '') + \"\\\">\" + bins;\r\n}\r\nfunction matchBins(n, bins) {\r\n    //adapt the number of children\r\n    var nodes = Array.from(n.querySelectorAll('[data-x]'));\r\n    if (nodes.length > bins) {\r\n        nodes.splice(bins, nodes.length - bins).forEach(function (d) { return d.remove(); });\r\n    }\r\n    else if (nodes.length < bins) {\r\n        for (var i = nodes.length; i < bins; ++i) {\r\n            n.insertAdjacentHTML('afterbegin', \"<div class=\\\"\" + cssClass('histogram-bin') + \"\\\" title=\\\"Bin \" + i + \": 0\\\" data-x=\\\"\\\"><div style=\\\"height: 0\\\" ></div></div>\");\r\n        }\r\n        nodes = Array.from(n.querySelectorAll('[data-x]'));\r\n    }\r\n    n.classList.toggle(cssClass('dense'), bins > DENSE_HISTOGRAM);\r\n    return nodes;\r\n}\r\n/** @internal */\r\nexport function histogramUpdate(n, stats, unfiltered, formatter, colorOf) {\r\n    var hist = stats.hist;\r\n    var nodes = matchBins(n, hist.length);\r\n    nodes.forEach(function (d, i) {\r\n        var bin = hist[i];\r\n        var inner = d.firstElementChild;\r\n        if (!bin) {\r\n            inner.style.height = '0%';\r\n            return;\r\n        }\r\n        var x0 = bin.x0, x1 = bin.x1, count = bin.count;\r\n        var color = colorOf(bin);\r\n        d.dataset.x = formatter(x0);\r\n        if (unfiltered) {\r\n            var gCount = (unfiltered.hist[i] || { count: count }).count;\r\n            d.title = formatter(x0) + \" - \" + formatter(x1) + \" (\" + count + \" of \" + gCount + \")\";\r\n            inner.style.height = round(gCount * 100 / unfiltered.maxBin, 2) + \"%\";\r\n            var relY = 100 - round(count * 100 / gCount, 2);\r\n            inner.style.background = relY === 0 ? color : (relY === 100 ? filteredColor(color) : \"linear-gradient(\" + filteredColor(color) + \" \" + relY + \"%, \" + color + \" \" + relY + \"%, \" + color + \" 100%)\");\r\n        }\r\n        else {\r\n            d.title = formatter(x0) + \" - \" + formatter(x1) + \" (\" + count + \")\";\r\n            inner.style.height = round(count * 100 / stats.maxBin, 2) + \"%\";\r\n            inner.style.backgroundColor = color;\r\n        }\r\n    });\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function mappingHintTemplate(range) {\r\n    return \"<span class=\\\"\" + cssClass('mapping-hint') + \"\\\" title=\\\"\" + range[0] + \"\\\">\" + range[0] + \"</span><span class=\\\"\" + cssClass('mapping-hint') + \"\\\" title=\\\"\" + range[1] + \"\\\">\" + range[1] + \"</span>\";\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function mappingHintUpdate(n, range) {\r\n    Array.from(n.getElementsByTagName('span')).forEach(function (d, i) { return d.textContent = range[i]; });\r\n}\r\nexport function filteredHistTemplate(c, f) {\r\n    return \"\\n    <div class=\\\"\" + cssClass('histogram-min-hint') + \"\\\" style=\\\"width: \" + c.percent(f.filterMin) + \"%\\\"></div>\\n    <div class=\\\"\" + cssClass('histogram-max-hint') + \"\\\" style=\\\"width: \" + (100 - c.percent(f.filterMax)) + \"%\\\"></div>\\n    <div class=\\\"\" + cssClass('histogram-min') + \"\\\" data-value=\\\"\" + c.format(f.filterMin) + \"\\\" data-raw=\\\"\" + c.formatRaw(f.filterMin) + \"\\\" style=\\\"left: \" + c.percent(f.filterMin) + \"%\\\" title=\\\"min filter, drag or double click to change\\\"></div>\\n    <div class=\\\"\" + cssClass('histogram-max') + \"\\\" data-value=\\\"\" + c.format(f.filterMax) + \"\\\" data-raw=\\\"\" + c.formatRaw(f.filterMax) + \"\\\" style=\\\"right: \" + (100 - c.percent(f.filterMax)) + \"%\\\" title=\\\"max filter, drag or double click to change\\\"></div>\\n    \" + filterMissingNumberMarkup(f.filterMissing, 0) + \"\\n  \";\r\n}\r\nexport function initFilter(node, context) {\r\n    var min = node.getElementsByClassName(cssClass('histogram-min'))[0];\r\n    var max = node.getElementsByClassName(cssClass('histogram-max'))[0];\r\n    var minHint = node.getElementsByClassName(cssClass('histogram-min-hint'))[0];\r\n    var maxHint = node.getElementsByClassName(cssClass('histogram-max-hint'))[0];\r\n    var filterMissing = node.getElementsByTagName('input')[0];\r\n    var setFilter = function () {\r\n        var minValue = context.parseRaw(min.dataset.raw);\r\n        var maxValue = context.parseRaw(max.dataset.raw);\r\n        context.setFilter(filterMissing.checked, minValue, maxValue);\r\n    };\r\n    var minImpl = function (evt) {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        var value = context.parseRaw(min.dataset.raw);\r\n        context.edit(value, min, 'min').then(function (newValue) {\r\n            minHint.style.width = context.percent(newValue) + \"%\";\r\n            min.dataset.value = context.format(newValue);\r\n            min.dataset.raw = context.formatRaw(newValue);\r\n            min.style.left = context.percent(newValue) + \"%\";\r\n            min.classList.toggle(cssClass('swap-hint'), context.percent(newValue) > 15);\r\n            setFilter();\r\n        });\r\n    };\r\n    min.onclick = function (evt) {\r\n        if (!evt.shiftKey && !evt.ctrlKey) {\r\n            return;\r\n        }\r\n        minImpl(evt);\r\n    };\r\n    min.ondblclick = minImpl;\r\n    var maxImpl = function (evt) {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        var value = context.parseRaw(max.dataset.raw);\r\n        context.edit(value, max, 'max').then(function (newValue) {\r\n            maxHint.style.width = 100 - context.percent(newValue) + \"%\";\r\n            max.dataset.value = context.format(newValue);\r\n            max.dataset.raw = context.formatRaw(newValue);\r\n            max.style.right = 100 - context.percent(newValue) + \"%\";\r\n            max.classList.toggle(cssClass('swap-hint'), context.percent(newValue) < 85);\r\n            setFilter();\r\n        });\r\n    };\r\n    max.onclick = function (evt) {\r\n        if (!evt.shiftKey && !evt.ctrlKey) {\r\n            return;\r\n        }\r\n        maxImpl(evt);\r\n    };\r\n    max.ondblclick = maxImpl;\r\n    filterMissing.onchange = function () { return setFilter(); };\r\n    var options = {\r\n        minDelta: 0,\r\n        filter: function (evt) { return evt.button === 0 && !evt.shiftKey && !evt.ctrlKey; },\r\n        onStart: function (handle) { return handle.classList.add(cssClass('hist-dragging')); },\r\n        onDrag: function (handle, x) {\r\n            var total = node.clientWidth;\r\n            var px = Math.max(0, Math.min(x, total));\r\n            var percent = Math.round(100 * px / total);\r\n            handle.dataset.value = context.format(context.unpercent(percent));\r\n            handle.dataset.raw = context.formatRaw(context.unpercent(percent));\r\n            if (handle.classList.contains(cssClass('histogram-min'))) {\r\n                handle.style.left = percent + \"%\";\r\n                handle.classList.toggle(cssClass('swap-hint'), percent > 15);\r\n                minHint.style.width = percent + \"%\";\r\n                return;\r\n            }\r\n            handle.style.right = 100 - percent + \"%\";\r\n            handle.classList.toggle(cssClass('swap-hint'), percent < 85);\r\n            maxHint.style.width = 100 - percent + \"%\";\r\n        },\r\n        onEnd: function (handle) {\r\n            handle.classList.remove(cssClass('hist-dragging'));\r\n            setFilter();\r\n        }\r\n    };\r\n    dragHandle(min, options);\r\n    dragHandle(max, options);\r\n    return function (missing, f) {\r\n        minHint.style.width = context.percent(f.filterMin) + \"%\";\r\n        maxHint.style.width = 100 - context.percent(f.filterMax) + \"%\";\r\n        min.dataset.value = context.format(f.filterMin);\r\n        max.dataset.value = context.format(f.filterMax);\r\n        min.dataset.raw = context.formatRaw(f.filterMin);\r\n        max.dataset.raw = context.formatRaw(f.filterMax);\r\n        min.style.left = context.percent(f.filterMin) + \"%\";\r\n        max.style.right = 100 - context.percent(f.filterMax) + \"%\";\r\n        min.classList.toggle(cssClass('swap-hint'), context.percent(f.filterMin) > 15);\r\n        max.classList.toggle(cssClass('swap-hint'), context.percent(f.filterMax) < 85);\r\n        filterMissing.checked = f.filterMissing;\r\n        updateFilterMissingNumberMarkup(filterMissing.parentElement, missing);\r\n    };\r\n}\r\n//# sourceMappingURL=histogram.js.map","import { normalizedStatsBuilder, getNumberOfBins } from '../internal';\r\nimport { isNumberColumn, isNumbersColumn, isMapAbleColumn, Ranking } from '../model';\r\nimport InputNumberDialog from '../ui/dialogs/InputNumberDialog';\r\nimport { colorOf } from './impose';\r\nimport { ERenderMode } from './interfaces';\r\nimport { renderMissingDOM } from './missing';\r\nimport { cssClass, engineCssClass } from '../styles';\r\nimport { histogramUpdate, histogramTemplate, mappingHintTemplate, mappingHintUpdate, filteredHistTemplate, initFilter } from './histogram';\r\nimport { noNumberFilter } from '../model/internalNumber';\r\nvar HistogramCellRenderer = /** @class */ (function () {\r\n    function HistogramCellRenderer() {\r\n        this.title = 'Histogram';\r\n    }\r\n    HistogramCellRenderer.prototype.canRender = function (col, mode) {\r\n        return (isNumberColumn(col) && mode !== ERenderMode.CELL) || (isNumbersColumn(col) && mode === ERenderMode.CELL);\r\n    };\r\n    HistogramCellRenderer.prototype.create = function (col, _context, imposer) {\r\n        var _a = getHistDOMRenderer(col, imposer), template = _a.template, render = _a.render, guessedBins = _a.guessedBins;\r\n        return {\r\n            template: template + \"</div>\",\r\n            update: function (n, row) {\r\n                if (renderMissingDOM(n, col, row)) {\r\n                    return;\r\n                }\r\n                var b = normalizedStatsBuilder(guessedBins);\r\n                for (var _i = 0, _a = col.getNumbers(row); _i < _a.length; _i++) {\r\n                    var n_1 = _a[_i];\r\n                    b.push(n_1);\r\n                }\r\n                var hist = b.build();\r\n                render(n, hist);\r\n            }\r\n        };\r\n    };\r\n    HistogramCellRenderer.prototype.createGroup = function (col, context, imposer) {\r\n        var _a = getHistDOMRenderer(col, imposer), template = _a.template, render = _a.render;\r\n        return {\r\n            template: template + \"</div>\",\r\n            update: function (n, group) {\r\n                return context.tasks.groupNumberStats(col, group).then(function (r) {\r\n                    if (typeof r === 'symbol') {\r\n                        return;\r\n                    }\r\n                    var isMissing = !r || r.group == null || r.group.count === 0 || r.group.count === r.group.missing;\r\n                    n.classList.toggle(cssClass('missing'), isMissing);\r\n                    if (isMissing) {\r\n                        return;\r\n                    }\r\n                    var summary = r.summary, group = r.group;\r\n                    render(n, group, summary);\r\n                });\r\n            }\r\n        };\r\n    };\r\n    HistogramCellRenderer.prototype.createSummary = function (col, context, interactive, imposer) {\r\n        var r = getHistDOMRenderer(col, imposer);\r\n        var staticHist = !interactive || !isMapAbleColumn(col);\r\n        return staticHist ? staticSummary(col, context, r.template, r.render) : interactiveSummary(col, context, r.template, r.render);\r\n    };\r\n    return HistogramCellRenderer;\r\n}());\r\nexport default HistogramCellRenderer;\r\nfunction staticSummary(col, context, template, render) {\r\n    if (isMapAbleColumn(col)) {\r\n        template += mappingHintTemplate(col.getRange());\r\n    }\r\n    return {\r\n        template: template + \"</div>\",\r\n        update: function (node) {\r\n            if (isMapAbleColumn(col)) {\r\n                mappingHintUpdate(node, col.getRange());\r\n            }\r\n            return context.tasks.summaryNumberStats(col).then(function (r) {\r\n                if (typeof r === 'symbol') {\r\n                    return;\r\n                }\r\n                var isMissing = !r || r.summary == null || r.summary.count === 0 || r.summary.count === r.summary.missing;\r\n                node.classList.toggle(cssClass('missing'), isMissing);\r\n                if (isMissing) {\r\n                    return;\r\n                }\r\n                render(node, r.summary);\r\n            });\r\n        }\r\n    };\r\n}\r\nfunction interactiveSummary(col, context, template, render) {\r\n    var fContext = createFilterContext(col, context);\r\n    template += filteredHistTemplate(fContext, createFilterInfo(col));\r\n    var updateFilter;\r\n    return {\r\n        template: template + \"</div>\",\r\n        update: function (node) {\r\n            if (!updateFilter) {\r\n                updateFilter = initFilter(node, fContext);\r\n            }\r\n            return context.tasks.summaryNumberStats(col).then(function (r) {\r\n                if (typeof r === 'symbol') {\r\n                    return;\r\n                }\r\n                var summary = r.summary, data = r.data;\r\n                updateFilter(data ? data.missing : (summary ? summary.missing : 0), createFilterInfo(col));\r\n                node.classList.add(cssClass('histogram-i'));\r\n                node.classList.toggle(cssClass('missing'), !summary);\r\n                if (!summary) {\r\n                    return;\r\n                }\r\n                render(node, summary, data);\r\n            });\r\n        }\r\n    };\r\n}\r\n/** @internal */\r\nexport function createNumberFilter(col, parent, context, livePreviews) {\r\n    var renderer = getHistDOMRenderer(col);\r\n    var fContext = createFilterContext(col, context);\r\n    parent.innerHTML = \"\" + renderer.template + filteredHistTemplate(fContext, createFilterInfo(col)) + \"</div>\";\r\n    var summaryNode = parent.firstElementChild;\r\n    summaryNode.classList.add(cssClass('summary'), cssClass('renderer'));\r\n    summaryNode.dataset.renderer = 'histogram';\r\n    summaryNode.dataset.interactive = '';\r\n    summaryNode.classList.add(cssClass('histogram-i'));\r\n    var applyFilter = fContext.setFilter;\r\n    var currentFilter = createFilterInfo(col);\r\n    fContext.setFilter = function (filterMissing, min, max) {\r\n        currentFilter = { filterMissing: filterMissing, filterMin: min, filterMax: max };\r\n        if (livePreviews) {\r\n            applyFilter(filterMissing, min, max);\r\n        }\r\n    };\r\n    var updateFilter = initFilter(summaryNode, fContext);\r\n    var rerender = function () {\r\n        var ready = context.tasks.summaryNumberStats(col).then(function (r) {\r\n            if (typeof r === 'symbol') {\r\n                return;\r\n            }\r\n            var summary = r.summary, data = r.data;\r\n            updateFilter(data ? data.missing : (summary ? summary.missing : 0), currentFilter);\r\n            summaryNode.classList.toggle(cssClass('missing'), !summary);\r\n            if (!summary) {\r\n                return;\r\n            }\r\n            renderer.render(summaryNode, summary, data);\r\n        });\r\n        if (!ready) {\r\n            return;\r\n        }\r\n        summaryNode.classList.add(engineCssClass('loading'));\r\n        ready.then(function () {\r\n            summaryNode.classList.remove(engineCssClass('loading'));\r\n        });\r\n    };\r\n    var ranking = col.findMyRanker();\r\n    if (ranking) {\r\n        ranking.on(Ranking.EVENT_ORDER_CHANGED + \".numberFilter\", function () { return rerender(); });\r\n    }\r\n    rerender();\r\n    return {\r\n        cleanUp: function () {\r\n            if (ranking) {\r\n                ranking.on(Ranking.EVENT_ORDER_CHANGED + \".numberFilter\", null);\r\n            }\r\n        },\r\n        reset: function () {\r\n            currentFilter = createFilterInfo(col, noNumberFilter());\r\n            rerender();\r\n        },\r\n        submit: function () {\r\n            applyFilter(currentFilter.filterMissing, currentFilter.filterMin, currentFilter.filterMax);\r\n        }\r\n    };\r\n}\r\n/** @internal */\r\nexport function getHistDOMRenderer(col, imposer) {\r\n    var ranking = col.findMyRanker();\r\n    var guessedBins = ranking ? getNumberOfBins(ranking.getOrderLength()) : 10;\r\n    var formatter = col.getNumberFormat();\r\n    var render = function (n, stats, unfiltered) {\r\n        return histogramUpdate(n, stats, unfiltered || null, formatter, function (bin) { return colorOf(col, null, imposer, (bin.x1 + bin.x0) / 2); });\r\n    };\r\n    return {\r\n        template: histogramTemplate(guessedBins),\r\n        render: render,\r\n        guessedBins: guessedBins\r\n    };\r\n}\r\nfunction createFilterInfo(col, filter) {\r\n    if (filter === void 0) { filter = col.getFilter(); }\r\n    var domain = col.getMapping().domain;\r\n    var filterMin = isFinite(filter.min) ? filter.min : domain[0];\r\n    var filterMax = isFinite(filter.max) ? filter.max : domain[1];\r\n    return {\r\n        filterMissing: filter.filterMissing,\r\n        filterMin: filterMin,\r\n        filterMax: filterMax\r\n    };\r\n}\r\nfunction createFilterContext(col, context) {\r\n    var domain = col.getMapping().domain;\r\n    var format = col.getNumberFormat();\r\n    var clamp = function (v) { return Math.max(0, Math.min(100, v)); };\r\n    var percent = function (v) { return clamp(Math.round(100 * (v - domain[0]) / (domain[1] - domain[0]))); };\r\n    var unpercent = function (v) { return ((v / 100) * (domain[1] - domain[0]) + domain[0]); };\r\n    return {\r\n        percent: percent,\r\n        unpercent: unpercent,\r\n        domain: domain,\r\n        format: format,\r\n        formatRaw: String,\r\n        parseRaw: Number.parseFloat,\r\n        setFilter: function (filterMissing, minValue, maxValue) { return col.setFilter({\r\n            filterMissing: filterMissing,\r\n            min: minValue === domain[0] ? Number.NEGATIVE_INFINITY : minValue,\r\n            max: maxValue === domain[1] ? Number.POSITIVE_INFINITY : maxValue\r\n        }); },\r\n        edit: function (value, attachment) {\r\n            return new Promise(function (resolve) {\r\n                var dialogCtx = {\r\n                    attachment: attachment,\r\n                    manager: context.dialogManager,\r\n                    level: context.dialogManager.maxLevel + 1,\r\n                    idPrefix: context.idPrefix\r\n                };\r\n                var dialog = new InputNumberDialog(dialogCtx, resolve, {\r\n                    value: value, min: domain[0], max: domain[1]\r\n                });\r\n                dialog.open();\r\n            });\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=HistogramCellRenderer.js.map","import { LinkColumn } from '../model';\r\nimport { ERenderMode } from './interfaces';\r\nimport { renderMissingDOM } from './missing';\r\nimport { noRenderer } from './utils';\r\nimport { abortAble } from 'lineupengine';\r\nfunction loadImage(src) {\r\n    return new Promise(function (resolve) {\r\n        var image = new Image();\r\n        image.onload = function () { return resolve(image); };\r\n        image.src = src;\r\n    });\r\n}\r\nvar ImageCellRenderer = /** @class */ (function () {\r\n    function ImageCellRenderer() {\r\n        this.title = 'Image';\r\n    }\r\n    ImageCellRenderer.prototype.canRender = function (col, mode) {\r\n        return col instanceof LinkColumn && mode === ERenderMode.CELL;\r\n    };\r\n    ImageCellRenderer.prototype.create = function (col) {\r\n        return {\r\n            template: \"<div></div>\",\r\n            update: function (n, d) {\r\n                var missing = renderMissingDOM(n, col, d);\r\n                n.style.backgroundImage = null;\r\n                if (missing) {\r\n                    n.title = '';\r\n                    return;\r\n                }\r\n                var v = col.getLink(d);\r\n                n.title = v ? v.alt : '';\r\n                if (!v) {\r\n                    return;\r\n                }\r\n                return abortAble(loadImage(v.href)).then(function (image) {\r\n                    if (typeof image === 'symbol') {\r\n                        return;\r\n                    }\r\n                    n.style.backgroundImage = missing || !v ? null : \"url('\" + image.src + \"')\";\r\n                });\r\n            }\r\n        };\r\n    };\r\n    ImageCellRenderer.prototype.createGroup = function () {\r\n        return noRenderer;\r\n    };\r\n    ImageCellRenderer.prototype.createSummary = function () {\r\n        return noRenderer;\r\n    };\r\n    return ImageCellRenderer;\r\n}());\r\nexport default ImageCellRenderer;\r\n//# sourceMappingURL=ImageCellRenderer.js.map","import { noRenderer } from './utils';\r\n/**\r\n * helper class that renders a group renderer as a selected (e.g. median) single item\r\n */\r\nvar AAggregatedGroupRenderer = /** @class */ (function () {\r\n    function AAggregatedGroupRenderer() {\r\n    }\r\n    AAggregatedGroupRenderer.prototype.createGroup = function (col, context, imposer) {\r\n        var _this = this;\r\n        var single = this.create(col, context, imposer);\r\n        return {\r\n            template: single.template,\r\n            update: function (node, group) {\r\n                return context.tasks.groupRows(col, group, 'aggregated', function (rows) { return _this.aggregatedIndex(rows, col); }).then(function (data) {\r\n                    if (typeof data !== 'symbol') {\r\n                        single.update(node, data.row, data.index, group);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    };\r\n    AAggregatedGroupRenderer.prototype.createSummary = function () {\r\n        return noRenderer;\r\n    };\r\n    return AAggregatedGroupRenderer;\r\n}());\r\nexport { AAggregatedGroupRenderer };\r\nexport default AAggregatedGroupRenderer;\r\n//# sourceMappingURL=AAggregatedGroupRenderer.js.map","import * as tslib_1 from \"tslib\";\r\nimport { round } from '../internal';\r\nimport { isNumberColumn, isMultiLevelColumn } from '../model';\r\nimport { medianIndex } from '../model/internalNumber';\r\nimport { COLUMN_PADDING } from '../styles';\r\nimport { AAggregatedGroupRenderer } from './AAggregatedGroupRenderer';\r\nimport { ERenderMode } from './interfaces';\r\nimport { renderMissingCanvas, renderMissingDOM } from './missing';\r\nimport { matchColumns, multiLevelGridCSSClass } from './utils';\r\nimport { cssClass } from '../styles';\r\nimport { abortAbleAll } from 'lineupengine';\r\n/**\r\n * @internal\r\n * @param parent Parent column\r\n * @param context Render context\r\n * @param stacked Are the columns stacked?\r\n * @param mode Render mode\r\n * @param imposer Imposer object\r\n */\r\nexport function createData(parent, context, stacked, mode, imposer) {\r\n    var padding = COLUMN_PADDING;\r\n    var offset = 0;\r\n    var cols = parent.children.map(function (column) {\r\n        var shift = offset;\r\n        var width = column.getWidth();\r\n        offset += width;\r\n        offset += (!stacked ? padding : 0);\r\n        var renderer = mode === ERenderMode.CELL ? context.renderer(column, imposer) : null;\r\n        var groupRenderer = mode === ERenderMode.GROUP ? context.groupRenderer(column, imposer) : null;\r\n        var summaryRenderer = mode === ERenderMode.GROUP ? context.summaryRenderer(column, false, imposer) : null;\r\n        var template = '';\r\n        var rendererId = '';\r\n        switch (mode) {\r\n            case ERenderMode.CELL:\r\n                template = renderer.template;\r\n                rendererId = column.getRenderer();\r\n                break;\r\n            case ERenderMode.GROUP:\r\n                template = groupRenderer.template;\r\n                rendererId = column.getGroupRenderer();\r\n                break;\r\n            case ERenderMode.SUMMARY:\r\n                template = summaryRenderer.template;\r\n                rendererId = column.getSummaryRenderer();\r\n                break;\r\n        }\r\n        // inject data attributes\r\n        template = template.replace(/^<([^ >]+)([ >])/, \"<$1 data-column-id=\\\"\" + column.id + \"\\\" data-renderer=\\\"\" + rendererId + \"\\\"$2\");\r\n        // inject classes\r\n        if (/^<([^>]+) class=\"([ >]*)/.test(template)) {\r\n            // has class attribute\r\n            template = template.replace(/^<([^>]+) class=\"([ >]*)/, \"<$1 class=\\\"\" + cssClass(\"renderer-\" + rendererId) + \" $2\");\r\n        }\r\n        else {\r\n            // inject as the others\r\n            template = template.replace(/^<([^ >]+)([ >])/, \"<$1 class=\\\"\" + cssClass(\"renderer-\" + rendererId) + \"\\\"$2\");\r\n        }\r\n        return {\r\n            column: column,\r\n            shift: shift,\r\n            width: width,\r\n            template: template,\r\n            rendererId: rendererId,\r\n            renderer: renderer,\r\n            groupRenderer: groupRenderer,\r\n            summaryRenderer: summaryRenderer\r\n        };\r\n    });\r\n    return { cols: cols, stacked: stacked, padding: padding };\r\n}\r\nvar MultiLevelCellRenderer = /** @class */ (function (_super) {\r\n    tslib_1.__extends(MultiLevelCellRenderer, _super);\r\n    function MultiLevelCellRenderer(stacked) {\r\n        if (stacked === void 0) { stacked = true; }\r\n        var _this = _super.call(this) || this;\r\n        _this.stacked = stacked;\r\n        _this.title = _this.stacked ? 'Stacked Bar' : 'Nested';\r\n        return _this;\r\n    }\r\n    MultiLevelCellRenderer.prototype.canRender = function (col, mode) {\r\n        return isMultiLevelColumn(col) && mode !== ERenderMode.SUMMARY;\r\n    };\r\n    MultiLevelCellRenderer.prototype.create = function (col, context, imposer) {\r\n        var _this = this;\r\n        var _a = createData(col, context, this.stacked, ERenderMode.CELL, imposer), cols = _a.cols, stacked = _a.stacked;\r\n        var width = context.colWidth(col);\r\n        return {\r\n            template: \"<div class='\" + multiLevelGridCSSClass(context.idPrefix, col) + \" \" + (!stacked ? cssClass('grid-space') : '') + \"'>\" + cols.map(function (d) { return d.template; }).join('') + \"</div>\",\r\n            update: function (n, d, i, group) {\r\n                if (renderMissingDOM(n, col, d)) {\r\n                    return null;\r\n                }\r\n                matchColumns(n, cols, context);\r\n                var toWait = [];\r\n                var children = Array.from(n.children);\r\n                var total = col.getWidth();\r\n                var missingWeight = 0;\r\n                cols.forEach(function (col, ci) {\r\n                    var weight = col.column.getWidth() / total;\r\n                    var cnode = children[ci];\r\n                    cnode.classList.add(cssClass(_this.stacked ? 'stack-sub' : 'nested-sub'), cssClass('detail'));\r\n                    cnode.dataset.group = 'd';\r\n                    cnode.style.transform = stacked ? \"translate(-\" + round((missingWeight / weight) * 100, 4) + \"%,0)\" : null;\r\n                    cnode.style.gridColumnStart = (ci + 1).toString();\r\n                    var r = col.renderer.update(cnode, d, i, group);\r\n                    if (stacked) {\r\n                        missingWeight += (1 - col.column.getNumber(d)) * weight;\r\n                        if (ci < cols.length - 1) {\r\n                            var span = cnode.querySelector('span');\r\n                            if (span) {\r\n                                span.style.overflow = 'hidden';\r\n                            }\r\n                        }\r\n                    }\r\n                    if (r) {\r\n                        toWait.push(r);\r\n                    }\r\n                });\r\n                if (toWait.length > 0) {\r\n                    return abortAbleAll(toWait);\r\n                }\r\n                return null;\r\n            },\r\n            render: function (ctx, d, i, group) {\r\n                if (renderMissingCanvas(ctx, col, d, width)) {\r\n                    return null;\r\n                }\r\n                var toWait = [];\r\n                var stackShift = 0;\r\n                for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\r\n                    var col_1 = cols_1[_i];\r\n                    var cr = col_1.renderer;\r\n                    if (cr.render) {\r\n                        var shift = col_1.shift - stackShift;\r\n                        ctx.translate(shift, 0);\r\n                        var r = cr.render(ctx, d, i, group);\r\n                        if (typeof r !== 'boolean' && r) {\r\n                            toWait.push({ shift: shift, r: r });\r\n                        }\r\n                        ctx.translate(-shift, 0);\r\n                    }\r\n                    if (stacked) {\r\n                        stackShift += col_1.width * (1 - col_1.column.getNumber(d));\r\n                    }\r\n                }\r\n                if (toWait.length === 0) {\r\n                    return null;\r\n                }\r\n                return abortAbleAll(toWait.map(function (d) { return d.r; })).then(function (callbacks) {\r\n                    return function (ctx) {\r\n                        if (typeof callbacks === 'symbol') {\r\n                            return;\r\n                        }\r\n                        for (var i_1 = 0; i_1 < callbacks.length; ++i_1) {\r\n                            var callback = callbacks[i_1];\r\n                            if (typeof callback !== 'function') {\r\n                                continue;\r\n                            }\r\n                            var shift = toWait[i_1].shift;\r\n                            ctx.translate(shift, 0);\r\n                            callback(ctx);\r\n                            ctx.translate(-shift, 0);\r\n                        }\r\n                    };\r\n                });\r\n            }\r\n        };\r\n    };\r\n    MultiLevelCellRenderer.prototype.createGroup = function (col, context, imposer) {\r\n        var _this = this;\r\n        if (this.stacked && isNumberColumn(col)) {\r\n            return _super.prototype.createGroup.call(this, col, context, imposer);\r\n        }\r\n        var cols = createData(col, context, false, ERenderMode.GROUP, imposer).cols;\r\n        return {\r\n            template: \"<div class='\" + multiLevelGridCSSClass(context.idPrefix, col) + \" \" + cssClass('grid-space') + \"'>\" + cols.map(function (d) { return d.template; }).join('') + \"</div>\",\r\n            update: function (n, group) {\r\n                matchColumns(n, cols, context);\r\n                var toWait = [];\r\n                var children = Array.from(n.children);\r\n                cols.forEach(function (col, ci) {\r\n                    var cnode = children[ci];\r\n                    cnode.classList.add(cssClass(_this.stacked ? 'stack-sub' : 'nested-sub'), cssClass('group'));\r\n                    cnode.dataset.group = 'g';\r\n                    cnode.style.gridColumnStart = (ci + 1).toString();\r\n                    var r = col.groupRenderer.update(cnode, group);\r\n                    if (r) {\r\n                        toWait.push(r);\r\n                    }\r\n                });\r\n                if (toWait.length > 0) {\r\n                    return abortAbleAll(toWait);\r\n                }\r\n                return null;\r\n            }\r\n        };\r\n    };\r\n    MultiLevelCellRenderer.prototype.aggregatedIndex = function (rows, col) {\r\n        console.assert(isNumberColumn(col));\r\n        return medianIndex(rows, col);\r\n    };\r\n    return MultiLevelCellRenderer;\r\n}(AAggregatedGroupRenderer));\r\nexport default MultiLevelCellRenderer;\r\n//# sourceMappingURL=MultiLevelCellRenderer.js.map","import { CompositeNumberColumn } from '../model';\r\nimport { CANVAS_HEIGHT, cssClass } from '../styles';\r\nimport { getHistDOMRenderer } from './HistogramCellRenderer';\r\nimport { ERenderMode } from './interfaces';\r\nimport { renderMissingCanvas, renderMissingDOM } from './missing';\r\nimport { createData } from './MultiLevelCellRenderer';\r\nimport { colorOf, matchColumns, forEachChild } from './utils';\r\nimport { tasksAll } from '../provider';\r\nvar InterleavingCellRenderer = /** @class */ (function () {\r\n    function InterleavingCellRenderer() {\r\n        this.title = 'Interleaved';\r\n    }\r\n    InterleavingCellRenderer.prototype.canRender = function (col) {\r\n        return col instanceof CompositeNumberColumn;\r\n    };\r\n    InterleavingCellRenderer.prototype.create = function (col, context) {\r\n        var cols = createData(col, context, false, ERenderMode.CELL).cols;\r\n        var width = context.colWidth(col);\r\n        return {\r\n            template: \"<div>\" + cols.map(function (r) { return r.template; }).join('') + \"</div>\",\r\n            update: function (n, d, i, group) {\r\n                var missing = renderMissingDOM(n, col, d);\r\n                if (missing) {\r\n                    return;\r\n                }\r\n                matchColumns(n, cols, context);\r\n                forEachChild(n, function (ni, j) {\r\n                    cols[j].renderer.update(ni, d, i, group);\r\n                });\r\n            },\r\n            render: function (ctx, d, _i, group) {\r\n                if (renderMissingCanvas(ctx, col, d, width)) {\r\n                    return;\r\n                }\r\n                ctx.save();\r\n                ctx.scale(1, 1 / cols.length); // scale since internal use the height, too\r\n                cols.forEach(function (r, i) {\r\n                    var rr = r.renderer;\r\n                    if (rr.render) {\r\n                        rr.render(ctx, d, i, group);\r\n                    }\r\n                    ctx.translate(0, CANVAS_HEIGHT);\r\n                });\r\n                ctx.restore();\r\n            }\r\n        };\r\n    };\r\n    InterleavingCellRenderer.prototype.createGroup = function (col, context) {\r\n        var cols = createData(col, context, false, ERenderMode.GROUP).cols;\r\n        return {\r\n            template: \"<div>\" + cols.map(function (r) { return r.template; }).join('') + \"</div>\",\r\n            update: function (n, group) {\r\n                matchColumns(n, cols, context);\r\n                forEachChild(n, function (ni, j) {\r\n                    cols[j].groupRenderer.update(ni, group);\r\n                });\r\n            }\r\n        };\r\n    };\r\n    InterleavingCellRenderer.prototype.createSummary = function (col, context, _interactive) {\r\n        var cols = col.children;\r\n        var acc = 0;\r\n        var _a = getHistDOMRenderer(col, {\r\n            color: function () { return colorOf(cols[(acc++) % cols.length]); }\r\n        }), template = _a.template, render = _a.render;\r\n        return {\r\n            template: template,\r\n            update: function (n) {\r\n                var tasks = cols.map(function (col) { return context.tasks.summaryNumberStats(col); });\r\n                return tasksAll(tasks).then(function (vs) {\r\n                    if (typeof vs === 'symbol') {\r\n                        return;\r\n                    }\r\n                    var summaries = vs.map(function (d) { return d.summary; });\r\n                    if (!summaries.some(Boolean)) {\r\n                        n.classList.add(cssClass('missing'));\r\n                        return;\r\n                    }\r\n                    n.classList.remove(cssClass('missing'));\r\n                    var grouped = groupedHist(summaries);\r\n                    render(n, grouped);\r\n                });\r\n            }\r\n        };\r\n    };\r\n    return InterleavingCellRenderer;\r\n}());\r\nexport default InterleavingCellRenderer;\r\nvar dummyBin = {\r\n    count: 0,\r\n    x0: 0,\r\n    x1: 0\r\n};\r\nfunction groupedHist(stats) {\r\n    var sample = stats.find(Boolean);\r\n    if (!sample) {\r\n        return null;\r\n    }\r\n    var bins = sample.hist.length;\r\n    // assert all have the same bin size\r\n    var hist = [];\r\n    var maxBin = 0;\r\n    var _loop_1 = function (i) {\r\n        stats.forEach(function (s) {\r\n            var bin = s ? s.hist[i] : null;\r\n            if (!bin) {\r\n                hist.push(dummyBin);\r\n                return;\r\n            }\r\n            if (bin.count > maxBin) {\r\n                maxBin = bin.count;\r\n            }\r\n            hist.push(bin);\r\n        });\r\n    };\r\n    for (var i = 0; i < bins; ++i) {\r\n        _loop_1(i);\r\n    }\r\n    return {\r\n        maxBin: maxBin,\r\n        hist: hist\r\n    };\r\n}\r\n//# sourceMappingURL=InterleavingCellRenderer.js.map","import { LinkColumn } from '../model';\r\nimport { ERenderMode } from './interfaces';\r\nimport { renderMissingDOM } from './missing';\r\nimport { noRenderer, setText } from './utils';\r\nimport { cssClass } from '../styles';\r\nvar LinkCellRenderer = /** @class */ (function () {\r\n    function LinkCellRenderer() {\r\n        this.title = 'Link';\r\n    }\r\n    LinkCellRenderer.prototype.canRender = function (col, mode) {\r\n        return col instanceof LinkColumn && mode !== ERenderMode.SUMMARY;\r\n    };\r\n    LinkCellRenderer.prototype.create = function (col) {\r\n        var align = col.alignment || 'left';\r\n        return {\r\n            template: \"<a\" + (align !== 'left' ? \" class=\\\"\" + cssClass(align) + \"\\\"\" : '') + \" target=\\\"_blank\\\" rel=\\\"noopener\\\" href=\\\"\\\"></a>\",\r\n            update: function (n, d) {\r\n                renderMissingDOM(n, col, d);\r\n                var v = col.getLink(d);\r\n                n.href = v ? v.href : '';\r\n                if (col.escape) {\r\n                    setText(n, v ? v.alt : '');\r\n                }\r\n                else {\r\n                    n.innerHTML = v ? v.alt : '';\r\n                }\r\n            }\r\n        };\r\n    };\r\n    LinkCellRenderer.exampleText = function (col, rows) {\r\n        var numExampleRows = 5;\r\n        var examples = [];\r\n        rows.every(function (row) {\r\n            var v = col.getLink(row);\r\n            if (!v) {\r\n                return true;\r\n            }\r\n            examples.push(\"<a target=\\\"_blank\\\" rel=\\\"noopener\\\"  href=\\\"\" + v.href + \"\\\">\" + v.alt + \"</a>\");\r\n            return examples.length < numExampleRows;\r\n        });\r\n        if (examples.length === 0) {\r\n            return '';\r\n        }\r\n        return \"\" + examples.join(', ') + (examples.length < rows.length ? ', &hellip;' : '');\r\n    };\r\n    LinkCellRenderer.prototype.createGroup = function (col, context) {\r\n        return {\r\n            template: \"<div> </div>\",\r\n            update: function (n, group) {\r\n                return context.tasks.groupExampleRows(col, group, 'link', function (rows) { return LinkCellRenderer.exampleText(col, rows); }).then(function (text) {\r\n                    if (typeof text === 'symbol') {\r\n                        return;\r\n                    }\r\n                    n.classList.toggle(cssClass('missing'), !text);\r\n                    n.innerHTML = text;\r\n                });\r\n            }\r\n        };\r\n    };\r\n    LinkCellRenderer.prototype.createSummary = function () {\r\n        return noRenderer;\r\n    };\r\n    return LinkCellRenderer;\r\n}());\r\nexport default LinkCellRenderer;\r\n//# sourceMappingURL=LinkCellRenderer.js.map","import { isArrayColumn, isMapColumn, isMissingValue } from '../model';\r\nimport { renderMissingDOM } from './missing';\r\nimport { forEach, noop } from './utils';\r\nimport { cssClass } from '../styles';\r\nvar TableCellRenderer = /** @class */ (function () {\r\n    function TableCellRenderer() {\r\n        this.title = 'Table';\r\n    }\r\n    TableCellRenderer.prototype.canRender = function (col) {\r\n        return isMapColumn(col);\r\n    };\r\n    TableCellRenderer.prototype.create = function (col) {\r\n        if (isArrayColumn(col) && col.dataLength) {\r\n            // fixed length optimized rendering\r\n            return this.createFixed(col);\r\n        }\r\n        return {\r\n            template: \"<div class=\\\"\" + cssClass('rtable') + \"\\\"></div>\",\r\n            update: function (node, d) {\r\n                if (renderMissingDOM(node, col, d)) {\r\n                    return;\r\n                }\r\n                node.innerHTML = col.getMapLabel(d).map(function (_a) {\r\n                    var key = _a.key, value = _a.value;\r\n                    return \"<div class=\\\"\" + cssClass('table-cell') + \"\\\">\" + key + \"</div><div class=\\\"\" + cssClass('table-cell') + \"\\\">\" + value + \"</div>\";\r\n                }).join('');\r\n            }\r\n        };\r\n    };\r\n    TableCellRenderer.template = function (col) {\r\n        var labels = col.labels;\r\n        return \"<div>\" + labels.map(function (l) { return \"<div class=\\\"\" + cssClass('table-cell') + \"\\\">\" + l + \"</div><div  class=\\\"\" + cssClass('table-cell') + \"\\\" data-v></div>\"; }).join('\\n') + \"</div>\";\r\n    };\r\n    TableCellRenderer.prototype.createFixed = function (col) {\r\n        return {\r\n            template: TableCellRenderer.template(col),\r\n            update: function (node, d) {\r\n                if (renderMissingDOM(node, col, d)) {\r\n                    return;\r\n                }\r\n                var value = col.getLabels(d);\r\n                forEach(node, '[data-v]', function (n, i) {\r\n                    n.innerHTML = value[i];\r\n                });\r\n            }\r\n        };\r\n    };\r\n    TableCellRenderer.example = function (arr) {\r\n        var numExampleRows = 5;\r\n        return \"\" + arr.slice(0, numExampleRows).map(function (d) { return d.value; }).join(', ') + (numExampleRows < arr.length ? ', &hellip;' : '');\r\n    };\r\n    TableCellRenderer.prototype.createGroup = function (col, context) {\r\n        if (isArrayColumn(col) && col.dataLength) {\r\n            // fixed length optimized rendering\r\n            return this.createFixedGroup(col, context);\r\n        }\r\n        return {\r\n            template: \"<div class=\\\"\" + cssClass('rtable') + \"\\\"></div>\",\r\n            update: function (node, group) {\r\n                return context.tasks.groupRows(col, group, 'table', function (rows) { return groupByKey(rows.map(function (d) { return col.getMapLabel(d); })); }).then(function (entries) {\r\n                    if (typeof entries === 'symbol') {\r\n                        return;\r\n                    }\r\n                    node.innerHTML = entries.map(function (_a) {\r\n                        var key = _a.key, values = _a.values;\r\n                        return \"<div class=\\\"\" + cssClass('table-cell') + \"\\\">\" + key + \"</div><div class=\\\"\" + cssClass('table-cell') + \"\\\">\" + TableCellRenderer.example(values) + \"</div>\";\r\n                    }).join('');\r\n                });\r\n            }\r\n        };\r\n    };\r\n    TableCellRenderer.prototype.createFixedGroup = function (col, context) {\r\n        return {\r\n            template: TableCellRenderer.template(col),\r\n            update: function (node, group) {\r\n                return context.tasks.groupExampleRows(col, group, 'table', function (rows) {\r\n                    var values = col.labels.map(function () { return []; });\r\n                    rows.forEach(function (row) {\r\n                        var labels = col.getLabels(row);\r\n                        for (var i = 0; i < Math.min(values.length, labels.length); ++i) {\r\n                            if (!isMissingValue(labels[i])) {\r\n                                values[i].push(labels[i]);\r\n                            }\r\n                        }\r\n                    });\r\n                    return values;\r\n                }).then(function (values) {\r\n                    if (typeof values === 'symbol') {\r\n                        return;\r\n                    }\r\n                    forEach(node, '[data-v]', function (n, i) {\r\n                        n.innerHTML = values[i].join(', ') + \"&hellip;\";\r\n                    });\r\n                });\r\n            }\r\n        };\r\n    };\r\n    TableCellRenderer.prototype.createSummary = function () {\r\n        return {\r\n            template: \"<div class=\\\"\" + cssClass('rtable') + \"\\\"><div>Key</div><div>Value</div></div>\",\r\n            update: noop\r\n        };\r\n    };\r\n    return TableCellRenderer;\r\n}());\r\nexport default TableCellRenderer;\r\n/** @internal */\r\nexport function groupByKey(arr) {\r\n    var m = new Map();\r\n    arr.forEach(function (a) { return a.forEach(function (d) {\r\n        if (!m.has(d.key)) {\r\n            m.set(d.key, [d]);\r\n        }\r\n        else {\r\n            m.get(d.key).push(d);\r\n        }\r\n    }); });\r\n    return Array.from(m).sort(function (a, b) { return a[0].localeCompare(b[0]); }).map(function (_a) {\r\n        var key = _a[0], values = _a[1];\r\n        return ({ key: key, values: values });\r\n    });\r\n}\r\n//# sourceMappingURL=TableCellRenderer.js.map","import { LinkMapColumn } from '../model';\r\nimport { ERenderMode } from './interfaces';\r\nimport { renderMissingDOM } from './missing';\r\nimport { groupByKey } from './TableCellRenderer';\r\nimport { noRenderer, noop } from './utils';\r\nimport { cssClass } from '../styles';\r\nvar LinkMapCellRenderer = /** @class */ (function () {\r\n    function LinkMapCellRenderer() {\r\n        this.title = 'Table with Links';\r\n    }\r\n    LinkMapCellRenderer.prototype.canRender = function (col, mode) {\r\n        return col instanceof LinkMapColumn && mode !== ERenderMode.SUMMARY;\r\n    };\r\n    LinkMapCellRenderer.prototype.create = function (col) {\r\n        var align = col.alignment || 'left';\r\n        return {\r\n            template: \"<div class=\\\"\" + cssClass('rtable') + \"\\\"></div>\",\r\n            update: function (node, d) {\r\n                if (renderMissingDOM(node, col, d)) {\r\n                    return;\r\n                }\r\n                node.innerHTML = col.getLinkMap(d).map(function (_a) {\r\n                    var key = _a.key, value = _a.value;\r\n                    return \"\\n          <div class=\\\"\" + cssClass('table-cell') + \"\\\">\" + key + \"</div>\\n          <div class=\\\"\" + cssClass('table-cell') + \" \" + (align !== 'left' ? cssClass(align) : '') + \"\\\">\\n            <a href=\\\"\" + value.href + \"\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">\" + value.alt + \"</a>\\n          </div>\";\r\n                }).join('');\r\n            },\r\n            render: noop\r\n        };\r\n    };\r\n    LinkMapCellRenderer.example = function (arr) {\r\n        var numExampleRows = 5;\r\n        var examples = [];\r\n        for (var _i = 0, arr_1 = arr; _i < arr_1.length; _i++) {\r\n            var row = arr_1[_i];\r\n            if (!row || !row.value.href) {\r\n                continue;\r\n            }\r\n            examples.push(\"<a target=\\\"_blank\\\" rel=\\\"noopener\\\" href=\\\"\" + row.value.href + \"\\\">\" + row.value.alt + \"</a>\");\r\n            if (examples.length >= numExampleRows) {\r\n                break;\r\n            }\r\n        }\r\n        if (examples.length === 0) {\r\n            return '';\r\n        }\r\n        return \"\" + examples.join(', ') + (examples.length < arr.length) + \" ? ', &hellip;': ''}\";\r\n    };\r\n    LinkMapCellRenderer.prototype.createGroup = function (col, context) {\r\n        var align = col.alignment || 'left';\r\n        return {\r\n            template: \"<div class=\\\"\" + cssClass('rtable') + \"\\\"></div>\",\r\n            update: function (node, group) {\r\n                return context.tasks.groupRows(col, group, 'linkmap', function (rows) { return groupByKey(rows.map(function (d) { return col.getLinkMap(d); })); }).then(function (entries) {\r\n                    if (typeof entries === 'symbol') {\r\n                        return;\r\n                    }\r\n                    node.innerHTML = entries.map(function (_a) {\r\n                        var key = _a.key, values = _a.values;\r\n                        var data = LinkMapCellRenderer.example(values);\r\n                        if (!data) {\r\n                            return \"<div>\" + key + \"</div><div class=\\\"\" + cssClass('missing') + \"\\\"></div>\";\r\n                        }\r\n                        return \"<div>\" + key + \"</div><div\" + (align !== 'left' ? \" class=\\\"\" + cssClass(align) + \"\\\"\" : '') + \">\" + data + \"</div>\";\r\n                    }).join('');\r\n                });\r\n            }\r\n        };\r\n    };\r\n    LinkMapCellRenderer.prototype.createSummary = function () {\r\n        return noRenderer;\r\n    };\r\n    return LinkMapCellRenderer;\r\n}());\r\nexport default LinkMapCellRenderer;\r\n//# sourceMappingURL=LinkMapCellRenderer.js.map","import { noop } from './utils';\r\nvar LoadingCellRenderer = /** @class */ (function () {\r\n    function LoadingCellRenderer() {\r\n        this.title = 'Loading';\r\n    }\r\n    LoadingCellRenderer.prototype.canRender = function () {\r\n        return false; // just direct selection\r\n    };\r\n    LoadingCellRenderer.prototype.create = function () {\r\n        return {\r\n            template: \"<div>Loading &hellip;</div>\",\r\n            update: noop\r\n        };\r\n    };\r\n    LoadingCellRenderer.prototype.createGroup = function () {\r\n        return this.create();\r\n    };\r\n    LoadingCellRenderer.prototype.createSummary = function () {\r\n        return this.create();\r\n    };\r\n    return LoadingCellRenderer;\r\n}());\r\nexport default LoadingCellRenderer;\r\n//# sourceMappingURL=LoadingCellRenderer.js.map","import { round } from '../internal';\r\nimport { isMapAbleColumn, isMapColumn, isNumberColumn } from '../model';\r\nimport { colorOf } from './impose';\r\nimport { ERenderMode } from './interfaces';\r\nimport { renderMissingDOM } from './missing';\r\nimport { noRenderer } from './utils';\r\nimport { cssClass } from '../styles';\r\nvar MapBarCellRenderer = /** @class */ (function () {\r\n    function MapBarCellRenderer() {\r\n        this.title = 'Bar Table';\r\n    }\r\n    MapBarCellRenderer.prototype.canRender = function (col, mode) {\r\n        return isMapColumn(col) && isNumberColumn(col) && (mode === ERenderMode.CELL || (mode === ERenderMode.SUMMARY && isMapAbleColumn(col)));\r\n    };\r\n    MapBarCellRenderer.prototype.create = function (col, _context, imposer) {\r\n        var formatter = col.getNumberFormat();\r\n        return {\r\n            template: \"<div class=\\\"\" + cssClass('rtable') + \"\\\"></div>\",\r\n            update: function (node, d) {\r\n                if (renderMissingDOM(node, col, d)) {\r\n                    return;\r\n                }\r\n                node.innerHTML = col.getMap(d).map(function (_a) {\r\n                    var key = _a.key, value = _a.value;\r\n                    if (isNaN(value)) {\r\n                        return \"<div class=\\\"\" + cssClass('table-cell') + \"\\\">\" + key + \"</div><div class=\\\"\" + cssClass('table-cell') + \" \" + cssClass('missing') + \"\\\"></div>\";\r\n                    }\r\n                    var w = round(value * 100, 2);\r\n                    return \"<div class=\\\"\" + cssClass('table-cell') + \"\\\">\" + key + \"</div>\\n            <div class=\\\"\" + cssClass('table-cell') + \"\\\" title=\\\"\" + formatter(value) + \"\\\">\\n              <div style=\\\"width: \" + w + \"%; background-color: \" + colorOf(col, d, imposer) + \"\\\">\\n                <span class=\\\"\" + cssClass('hover-only') + \"\\\">\" + value + \"</span>\\n              </div>\\n            </div>\";\r\n                }).join('');\r\n            }\r\n        };\r\n    };\r\n    MapBarCellRenderer.prototype.createGroup = function () {\r\n        return noRenderer;\r\n    };\r\n    MapBarCellRenderer.prototype.createSummary = function (col) {\r\n        return {\r\n            template: \"<div class=\\\"\" + cssClass('rtable') + \"\\\"><div>Key</div><div><span></span><span></span>Value</div></div>\",\r\n            update: function (node) {\r\n                var range = col.getRange();\r\n                var value = node.lastElementChild;\r\n                value.firstElementChild.textContent = range[0];\r\n                value.children[1].textContent = range[1];\r\n            }\r\n        };\r\n    };\r\n    return MapBarCellRenderer;\r\n}());\r\nexport default MapBarCellRenderer;\r\n//# sourceMappingURL=MapBarCellRenderer.js.map","import { RankColumn } from '../model';\r\nimport { renderMissingDOM } from './missing';\r\nimport { noRenderer, setText } from './utils';\r\nimport { cssClass } from '../styles';\r\nvar RankCellRenderer = /** @class */ (function () {\r\n    function RankCellRenderer() {\r\n        this.title = 'Default';\r\n    }\r\n    RankCellRenderer.prototype.canRender = function (col) {\r\n        return col instanceof RankColumn;\r\n    };\r\n    RankCellRenderer.prototype.create = function (col) {\r\n        return {\r\n            template: \"<div class=\\\"\" + cssClass('right') + \"\\\"> </div>\",\r\n            update: function (n, d) {\r\n                renderMissingDOM(n, col, d);\r\n                setText(n, col.getLabel(d));\r\n            }\r\n        };\r\n    };\r\n    RankCellRenderer.prototype.createGroup = function (col) {\r\n        var ranking = col.findMyRanker();\r\n        return {\r\n            template: \"<div><div></div><div></div></div>\",\r\n            update: function (n, group) {\r\n                var fromTSpan = n.firstElementChild;\r\n                var toTSpan = n.lastElementChild;\r\n                if (group.order.length === 0) {\r\n                    fromTSpan.textContent = '';\r\n                    toTSpan.textContent = '';\r\n                    return;\r\n                }\r\n                fromTSpan.textContent = ranking.getRank(group.order[0]).toString();\r\n                toTSpan.textContent = ranking.getRank(group.order[group.order.length - 1]).toString();\r\n            }\r\n        };\r\n    };\r\n    RankCellRenderer.prototype.createSummary = function () {\r\n        return noRenderer;\r\n    };\r\n    return RankCellRenderer;\r\n}());\r\nexport default RankCellRenderer;\r\n//# sourceMappingURL=RankCellRenderer.js.map","import { SelectionColumn } from '../model';\r\nimport { cssClass } from '../styles';\r\nimport { everyIndices } from '../model/internal';\r\nimport { rangeSelection } from '../provider/utils';\r\nvar SelectionRenderer = /** @class */ (function () {\r\n    function SelectionRenderer() {\r\n        this.title = 'Default';\r\n    }\r\n    SelectionRenderer.prototype.canRender = function (col) {\r\n        return col instanceof SelectionColumn;\r\n    };\r\n    SelectionRenderer.prototype.create = function (col, ctx) {\r\n        return {\r\n            template: \"<div></div>\",\r\n            update: function (n, d, i) {\r\n                n.onclick = function (event) {\r\n                    event.preventDefault();\r\n                    event.stopPropagation();\r\n                    if (event.shiftKey) {\r\n                        var ranking = col.findMyRanker().id;\r\n                        if (rangeSelection(ctx.provider, ranking, d.i, i, event.ctrlKey)) {\r\n                            return;\r\n                        }\r\n                    }\r\n                    col.toggleValue(d);\r\n                };\r\n            }\r\n        };\r\n    };\r\n    SelectionRenderer.prototype.createGroup = function (col, context) {\r\n        return {\r\n            template: \"<div></div>\",\r\n            update: function (n, group) {\r\n                var selected = 0;\r\n                var unselected = 0;\r\n                var total = group.order.length;\r\n                everyIndices(group.order, function (i) {\r\n                    var s = context.provider.isSelected(i);\r\n                    if (s) {\r\n                        selected++;\r\n                    }\r\n                    else {\r\n                        unselected++;\r\n                    }\r\n                    if (selected * 2 > total || unselected * 2 > total) {\r\n                        // more than half already, can abort already decided\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                });\r\n                n.classList.toggle(cssClass('group-selected'), selected * 2 > total);\r\n                n.onclick = function (event) {\r\n                    event.preventDefault();\r\n                    event.stopPropagation();\r\n                    var value = n.classList.toggle(cssClass('group-selected'));\r\n                    col.setValues(group.order, value);\r\n                };\r\n            }\r\n        };\r\n    };\r\n    SelectionRenderer.prototype.createSummary = function (col, context) {\r\n        var unchecked = cssClass('icon-unchecked');\r\n        var checked = cssClass('icon-checked');\r\n        return {\r\n            template: \"<div title=\\\"(Un)Select All\\\" class=\\\"\" + unchecked + \"\\\"></div>\",\r\n            update: function (node) {\r\n                node.onclick = function (evt) {\r\n                    evt.stopPropagation();\r\n                    var isunchecked = node.classList.contains(unchecked);\r\n                    if (isunchecked) {\r\n                        context.provider.selectAllOf(col.findMyRanker());\r\n                        node.classList.remove(unchecked);\r\n                        node.classList.add(checked);\r\n                    }\r\n                    else {\r\n                        context.provider.setSelection([]);\r\n                        node.classList.remove(checked);\r\n                        node.classList.add(unchecked);\r\n                    }\r\n                };\r\n            }\r\n        };\r\n    };\r\n    return SelectionRenderer;\r\n}());\r\nexport default SelectionRenderer;\r\n//# sourceMappingURL=SelectionRenderer.js.map","import { isSetColumn } from '../model';\r\nimport { CANVAS_HEIGHT, cssClass } from '../styles';\r\nimport { renderMissingCanvas, renderMissingDOM } from './missing';\r\nimport { forEachChild, noop, wideEnoughCat } from './utils';\r\nimport { round } from '../internal';\r\nvar SetCellRenderer = /** @class */ (function () {\r\n    function SetCellRenderer() {\r\n        this.title = 'Matrix';\r\n    }\r\n    SetCellRenderer.prototype.canRender = function (col) {\r\n        return isSetColumn(col);\r\n    };\r\n    SetCellRenderer.createDOMContext = function (col) {\r\n        var categories = col.categories;\r\n        var mapping = col.getColorMapping();\r\n        var templateRows = '';\r\n        for (var _i = 0, categories_1 = categories; _i < categories_1.length; _i++) {\r\n            var cat = categories_1[_i];\r\n            templateRows += \"<div class=\\\"\" + cssClass('heatmap-cell') + \"\\\" title=\\\"\" + cat.label + \"\\\" style=\\\"background-color: \" + mapping.apply(cat) + \"\\\"></div>\";\r\n        }\r\n        return {\r\n            templateRow: templateRows,\r\n            render: function (n, value) {\r\n                forEachChild(n, function (d, i) {\r\n                    var v = value[i];\r\n                    d.style.opacity = typeof v === 'boolean' ? (v ? '1' : '0') : round(v, 2).toString();\r\n                });\r\n            }\r\n        };\r\n    };\r\n    SetCellRenderer.prototype.create = function (col, context) {\r\n        var _a = SetCellRenderer.createDOMContext(col), templateRow = _a.templateRow, render = _a.render;\r\n        var width = context.colWidth(col);\r\n        var cellDimension = width / col.dataLength;\r\n        var cats = col.categories;\r\n        var mapping = col.getColorMapping();\r\n        return {\r\n            template: \"<div class=\\\"\" + cssClass('heatmap') + \"\\\">\" + templateRow + \"</div>\",\r\n            update: function (n, d) {\r\n                if (renderMissingDOM(n, col, d)) {\r\n                    return;\r\n                }\r\n                render(n, col.getValues(d));\r\n            },\r\n            render: function (ctx, d) {\r\n                if (renderMissingCanvas(ctx, col, d, width)) {\r\n                    return;\r\n                }\r\n                // Circle\r\n                var data = col.getValues(d);\r\n                ctx.save();\r\n                cats.forEach(function (d, j) {\r\n                    if (!data[j]) {\r\n                        return;\r\n                    }\r\n                    var posx = (j * cellDimension);\r\n                    ctx.fillStyle = mapping.apply(d);\r\n                    ctx.fillRect(posx, 0, cellDimension, CANVAS_HEIGHT);\r\n                });\r\n                ctx.restore();\r\n            }\r\n        };\r\n    };\r\n    SetCellRenderer.prototype.createGroup = function (col, context) {\r\n        var _a = SetCellRenderer.createDOMContext(col), templateRow = _a.templateRow, render = _a.render;\r\n        return {\r\n            template: \"<div class=\\\"\" + cssClass('heatmap') + \"\\\">\" + templateRow + \"</div>\",\r\n            update: function (n, group) {\r\n                return context.tasks.groupCategoricalStats(col, group).then(function (r) {\r\n                    if (typeof r === 'symbol') {\r\n                        return;\r\n                    }\r\n                    var isMissing = !r || !r.group || r.group.count === 0 || r.group.count === r.group.missing;\r\n                    n.classList.toggle(cssClass('missing'), isMissing);\r\n                    if (isMissing) {\r\n                        return;\r\n                    }\r\n                    render(n, r.group.hist.map(function (d) { return d.count / r.group.maxBin; }));\r\n                });\r\n            }\r\n        };\r\n    };\r\n    SetCellRenderer.prototype.createSummary = function (col) {\r\n        var categories = col.categories;\r\n        var mapping = col.getColorMapping();\r\n        var templateRows = \"<div class=\\\"\" + cssClass('heatmap') + \"\\\">\";\r\n        var labels = wideEnoughCat(col);\r\n        for (var _i = 0, categories_2 = categories; _i < categories_2.length; _i++) {\r\n            var cat = categories_2[_i];\r\n            templateRows += \"<div class=\\\"\" + cssClass('heatmap-cell') + \"\\\" title=\\\"\" + cat.label + \"\\\"\" + (labels ? \" data-title=\\\"\" + cat.label + \"\\\"\" : '') + \" style=\\\"background-color: \" + mapping.apply(cat) + \"\\\"></div>\";\r\n        }\r\n        templateRows += '</div>';\r\n        return {\r\n            template: templateRows,\r\n            update: noop\r\n        };\r\n    };\r\n    return SetCellRenderer;\r\n}());\r\nexport default SetCellRenderer;\r\n//# sourceMappingURL=SetCellRenderer.js.map","import { NumbersColumn, isNumbersColumn, isMissingValue } from '../model';\r\nimport { matchRows } from './ANumbersCellRenderer';\r\nimport { ERenderMode } from './interfaces';\r\nimport { renderMissingDOM } from './missing';\r\nimport { forEachChild, noRenderer } from './utils';\r\nimport { cssClass } from '../styles';\r\n/** @internal */\r\nexport function line(data) {\r\n    if (data.length === 0) {\r\n        return '';\r\n    }\r\n    var p = '';\r\n    var moveNext = true;\r\n    data.forEach(function (d, i) {\r\n        if (isNaN(d)) {\r\n            moveNext = true;\r\n        }\r\n        else if (moveNext) {\r\n            p += \"M\" + i + \",\" + (1 - d) + \" \";\r\n            moveNext = false;\r\n        }\r\n        else {\r\n            p += \"L\" + i + \",\" + (1 - d) + \" \";\r\n        }\r\n    });\r\n    return p;\r\n}\r\nvar SparklineCellRenderer = /** @class */ (function () {\r\n    function SparklineCellRenderer() {\r\n        this.title = 'Sparkline';\r\n    }\r\n    SparklineCellRenderer.prototype.canRender = function (col, mode) {\r\n        return isNumbersColumn(col) && mode !== ERenderMode.SUMMARY;\r\n    };\r\n    SparklineCellRenderer.prototype.create = function (col) {\r\n        var dataLength = col.dataLength;\r\n        var yPos = 1 - col.getMapping().apply(NumbersColumn.CENTER);\r\n        return {\r\n            template: \"<svg viewBox=\\\"0 0 \" + (dataLength - 1) + \" 1\\\" preserveAspectRatio=\\\"none meet\\\"><line x1=\\\"0\\\" x2=\\\"\" + (dataLength - 1) + \"\\\" y1=\\\"\" + yPos + \"\\\" y2=\\\"\" + yPos + \"\\\"></line><path></path></svg>\",\r\n            update: function (n, d) {\r\n                if (renderMissingDOM(n, col, d)) {\r\n                    return;\r\n                }\r\n                var data = col.getNumbers(d);\r\n                n.lastElementChild.setAttribute('d', line(data));\r\n            }\r\n        };\r\n    };\r\n    SparklineCellRenderer.prototype.createGroup = function (col, context) {\r\n        var dataLength = col.dataLength;\r\n        var yPos = 1 - col.getMapping().apply(NumbersColumn.CENTER);\r\n        return {\r\n            template: \"<svg viewBox=\\\"0 0 \" + dataLength + \" 1\\\" preserveAspectRatio=\\\"none meet\\\"><line x1=\\\"0\\\" x2=\\\"\" + (dataLength - 1) + \"\\\" y1=\\\"\" + yPos + \"\\\" y2=\\\"\" + yPos + \"\\\"></line><path></path></svg>\",\r\n            update: function (n, group) {\r\n                //overlapping ones\r\n                matchRows(n, group.order.length, \"<path></path>\");\r\n                return context.tasks.groupRows(col, group, 'numbers', function (r) { return Array.from(r.map(function (d) { return col.getNumbers(d); })); }).then(function (vs) {\r\n                    if (typeof vs === 'symbol') {\r\n                        return;\r\n                    }\r\n                    var isMissing = vs.length === 0 || vs.every(function (v) { return v.every(isMissingValue); });\r\n                    n.classList.toggle(cssClass('missing'), isMissing);\r\n                    if (isMissing) {\r\n                        return;\r\n                    }\r\n                    forEachChild(n, (function (row, i) {\r\n                        row.setAttribute('d', line(vs[i]));\r\n                    }));\r\n                });\r\n            }\r\n        };\r\n    };\r\n    SparklineCellRenderer.prototype.createSummary = function () {\r\n        return noRenderer;\r\n    };\r\n    return SparklineCellRenderer;\r\n}());\r\nexport default SparklineCellRenderer;\r\n//# sourceMappingURL=SparklineCellRenderer.js.map","import { isSetColumn } from '../model';\r\nimport { CANVAS_HEIGHT, cssClass, UPSET } from '../styles';\r\nimport { renderMissingCanvas, renderMissingDOM } from './missing';\r\nvar UpSetCellRenderer = /** @class */ (function () {\r\n    function UpSetCellRenderer() {\r\n        this.title = 'UpSet';\r\n    }\r\n    UpSetCellRenderer.prototype.canRender = function (col) {\r\n        return isSetColumn(col);\r\n    };\r\n    UpSetCellRenderer.calculateSetPath = function (setData, cellDimension) {\r\n        var catindexes = [];\r\n        setData.forEach(function (d, i) { return (d) ? catindexes.push(i) : -1; });\r\n        var left = (catindexes[0] * cellDimension) + (cellDimension / 2);\r\n        var right = (catindexes[catindexes.length - 1] * cellDimension) + (cellDimension / 2);\r\n        return { left: left, right: right };\r\n    };\r\n    UpSetCellRenderer.createDOMContext = function (col) {\r\n        var categories = col.categories;\r\n        var templateRows = '';\r\n        for (var _i = 0, categories_1 = categories; _i < categories_1.length; _i++) {\r\n            var cat = categories_1[_i];\r\n            templateRows += \"<div class=\\\"\" + cssClass('upset-dot') + \"\\\" title=\\\"\" + cat.label + \"\\\"></div>\";\r\n        }\r\n        return {\r\n            template: \"<div><div class=\\\"\" + cssClass('upset-line') + \"\\\"></div>\" + templateRows + \"</div>\",\r\n            render: function (n, value) {\r\n                Array.from(n.children).slice(1).forEach(function (d, i) {\r\n                    var v = value[i];\r\n                    d.classList.toggle(cssClass('enabled'), v);\r\n                });\r\n                var line = n.firstElementChild;\r\n                var left = value.findIndex(function (d) { return d; });\r\n                var right = (value.length - 1) - value.reverse().findIndex(function (d) { return d; });\r\n                if (left < 0 || left === right) {\r\n                    line.style.display = 'none';\r\n                    return;\r\n                }\r\n                line.style.display = null;\r\n                line.style.left = Math.round(100 * (left + 0.5) / value.length) + \"%\";\r\n                line.style.width = Math.round(100 * (right - left) / value.length) + \"%\";\r\n            }\r\n        };\r\n    };\r\n    UpSetCellRenderer.prototype.create = function (col, context) {\r\n        var _a = UpSetCellRenderer.createDOMContext(col), template = _a.template, render = _a.render;\r\n        var width = context.colWidth(col);\r\n        var cellDimension = width / col.categories.length;\r\n        return {\r\n            template: template,\r\n            update: function (n, d) {\r\n                if (renderMissingDOM(n, col, d)) {\r\n                    return;\r\n                }\r\n                render(n, col.getValues(d));\r\n            },\r\n            render: function (ctx, d) {\r\n                if (renderMissingCanvas(ctx, col, d, width)) {\r\n                    return;\r\n                }\r\n                // Circle\r\n                var data = col.getValues(d);\r\n                var hasTrueValues = data.some(function (d) { return d; }); //some values are true?\r\n                ctx.save();\r\n                ctx.fillStyle = UPSET.color;\r\n                ctx.strokeStyle = UPSET.color;\r\n                if (hasTrueValues) {\r\n                    var _a = UpSetCellRenderer.calculateSetPath(data, cellDimension), left = _a.left, right = _a.right;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(left, CANVAS_HEIGHT / 2);\r\n                    ctx.lineTo(right, CANVAS_HEIGHT / 2);\r\n                    ctx.stroke();\r\n                }\r\n                data.forEach(function (d, j) {\r\n                    var posx = (j * cellDimension);\r\n                    ctx.beginPath();\r\n                    ctx.globalAlpha = d ? 1 : UPSET.inactive;\r\n                    ctx.fillRect(posx, 0, cellDimension, CANVAS_HEIGHT);\r\n                    ctx.fill();\r\n                });\r\n                ctx.restore();\r\n            }\r\n        };\r\n    };\r\n    UpSetCellRenderer.prototype.createGroup = function (col, context) {\r\n        var _a = UpSetCellRenderer.createDOMContext(col), template = _a.template, render = _a.render;\r\n        return {\r\n            template: template,\r\n            update: function (n, group) {\r\n                return context.tasks.groupCategoricalStats(col, group).then(function (r) {\r\n                    if (typeof r === 'symbol') {\r\n                        return;\r\n                    }\r\n                    render(n, r.group.hist.map(function (d) { return d.count > 0; }));\r\n                });\r\n            }\r\n        };\r\n    };\r\n    UpSetCellRenderer.prototype.createSummary = function (col, context) {\r\n        var _a = UpSetCellRenderer.createDOMContext(col), template = _a.template, render = _a.render;\r\n        return {\r\n            template: template,\r\n            update: function (n) {\r\n                return context.tasks.summaryCategoricalStats(col).then(function (r) {\r\n                    if (typeof r === 'symbol') {\r\n                        return;\r\n                    }\r\n                    render(n, r.summary.hist.map(function (d) { return d.count > 0; }));\r\n                });\r\n            }\r\n        };\r\n    };\r\n    return UpSetCellRenderer;\r\n}());\r\nexport default UpSetCellRenderer;\r\n//# sourceMappingURL=UpSetCellRenderer.js.map","import * as tslib_1 from \"tslib\";\r\nimport { NumbersColumn, isNumbersColumn } from '../model';\r\nimport { CANVAS_HEIGHT, cssClass } from '../styles';\r\nimport { ANumbersCellRenderer } from './ANumbersCellRenderer';\r\nimport { toHeatMapColor } from './BrightnessCellRenderer';\r\nimport { ERenderMode } from './interfaces';\r\nimport { forEachChild, noRenderer } from './utils';\r\nvar VerticalBarCellRenderer = /** @class */ (function (_super) {\r\n    tslib_1.__extends(VerticalBarCellRenderer, _super);\r\n    function VerticalBarCellRenderer() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.title = 'Bar Chart';\r\n        return _this;\r\n    }\r\n    VerticalBarCellRenderer.prototype.canRender = function (col, mode) {\r\n        return isNumbersColumn(col) && Boolean(col.dataLength) && mode === ERenderMode.CELL;\r\n    };\r\n    VerticalBarCellRenderer.compute = function (v, threshold, domain) {\r\n        if (v < threshold) {\r\n            //threshold to down\r\n            return { height: (threshold - v), bottom: (v - domain[0]) };\r\n        }\r\n        //from top to down\r\n        return { height: (v - threshold), bottom: (threshold - domain[0]) };\r\n    };\r\n    VerticalBarCellRenderer.prototype.createContext = function (col, context, imposer) {\r\n        var cellDimension = context.colWidth(col) / col.dataLength;\r\n        var threshold = col.getMapping().apply(NumbersColumn.CENTER);\r\n        var range = 1;\r\n        var templateRows = '';\r\n        for (var i = 0; i < col.dataLength; ++i) {\r\n            templateRows += \"<div class=\\\"\" + cssClass('heatmap-cell') + \"\\\" style=\\\"background-color: white\\\" title=\\\"\\\"></div>\";\r\n        }\r\n        var formatter = col.getNumberFormat();\r\n        return {\r\n            clazz: cssClass('heatmap'),\r\n            templateRow: templateRows,\r\n            update: function (row, data, raw, item, tooltipPrefix) {\r\n                var zero = toHeatMapColor(0, item, col, imposer);\r\n                var one = toHeatMapColor(1, item, col, imposer);\r\n                forEachChild(row, function (d, i) {\r\n                    var v = data[i];\r\n                    var _a = VerticalBarCellRenderer.compute(v, threshold, [0, 1]), bottom = _a.bottom, height = _a.height;\r\n                    d.title = \"\" + (tooltipPrefix || '') + formatter(raw[i]);\r\n                    d.style.backgroundColor = v < threshold ? zero : one;\r\n                    d.style.bottom = Math.round((100 * bottom) / range) + \"%\";\r\n                    d.style.height = Math.round((100 * height) / range) + \"%\";\r\n                });\r\n            },\r\n            render: function (ctx, data, item) {\r\n                var zero = toHeatMapColor(0, item, col, imposer);\r\n                var one = toHeatMapColor(1, item, col, imposer);\r\n                var scale = CANVAS_HEIGHT / range;\r\n                data.forEach(function (v, j) {\r\n                    ctx.fillStyle = v < threshold ? zero : one;\r\n                    var xpos = (j * cellDimension);\r\n                    var _a = VerticalBarCellRenderer.compute(v, threshold, [0, 1]), bottom = _a.bottom, height = _a.height;\r\n                    ctx.fillRect(xpos, (range - height - bottom) * scale, cellDimension, height * scale);\r\n                });\r\n            }\r\n        };\r\n    };\r\n    VerticalBarCellRenderer.prototype.createSummary = function () {\r\n        return noRenderer;\r\n    };\r\n    return VerticalBarCellRenderer;\r\n}(ANumbersCellRenderer));\r\nexport default VerticalBarCellRenderer;\r\n//# sourceMappingURL=VerticalBarCellRenderer.js.map","import { DateColumn } from '../model';\r\nimport { renderMissingDOM } from './missing';\r\nimport { noop, noRenderer, setText, exampleText } from './utils';\r\nimport { chooseAggregatedDate } from '../model/internalDate';\r\nimport { cssClass } from '../styles';\r\nvar DateCellRenderer = /** @class */ (function () {\r\n    function DateCellRenderer() {\r\n        this.title = 'Date';\r\n        this.groupTitle = 'Date';\r\n        this.summaryTitle = 'Date';\r\n    }\r\n    DateCellRenderer.prototype.canRender = function (col) {\r\n        return col instanceof DateColumn;\r\n    };\r\n    DateCellRenderer.prototype.create = function (col) {\r\n        return {\r\n            template: \"<div> </div>\",\r\n            update: function (n, d) {\r\n                renderMissingDOM(n, col, d);\r\n                setText(n, col.getLabel(d));\r\n            },\r\n            render: noop\r\n        };\r\n    };\r\n    DateCellRenderer.prototype.createGroup = function (col, context) {\r\n        return {\r\n            template: \"<div> </div>\",\r\n            update: function (n, group) {\r\n                var isGrouped = col.isGroupedBy() >= 0;\r\n                if (isGrouped) {\r\n                    return context.tasks.groupRows(col, group, 'date', function (rows) { return chooseAggregatedDate(rows, col.getDateGrouper(), col); }).then(function (chosen) {\r\n                        if (typeof chosen === 'symbol') {\r\n                            return;\r\n                        }\r\n                        n.classList.toggle(cssClass('missing'), !chosen);\r\n                        setText(n, chosen ? chosen.name : '');\r\n                    });\r\n                }\r\n                return context.tasks.groupExampleRows(col, group, 'date', function (sample) { return exampleText(col, sample); }).then(function (text) {\r\n                    if (typeof text === 'symbol') {\r\n                        return;\r\n                    }\r\n                    n.classList.toggle(cssClass('missing'), !text);\r\n                    setText(n, text);\r\n                });\r\n            }\r\n        };\r\n    };\r\n    DateCellRenderer.prototype.createSummary = function () {\r\n        return noRenderer;\r\n    };\r\n    return DateCellRenderer;\r\n}());\r\nexport default DateCellRenderer;\r\n//# sourceMappingURL=DateCellRenderer.js.map","import * as tslib_1 from \"tslib\";\r\nimport { timeFormat } from 'd3-time-format';\r\nimport APopup from './APopup';\r\n/** @internal */\r\nvar InputDateDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(InputDateDialog, _super);\r\n    function InputDateDialog(dialog, callback, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this, dialog) || this;\r\n        _this.callback = callback;\r\n        _this.ioptions = {\r\n            value: null,\r\n            label: null\r\n        };\r\n        Object.assign(_this.ioptions, options);\r\n        return _this;\r\n    }\r\n    InputDateDialog.prototype.build = function (node) {\r\n        var _this = this;\r\n        var o = this.ioptions;\r\n        var f = timeFormat('%Y-%m-%d');\r\n        node.insertAdjacentHTML('beforeend', \"\\n     <input type=\\\"date\\\" value=\\\"\" + (o.value ? f(o.value) : '') + \"\\\" required autofocus placeholder=\\\"\" + (o.label ? o.label : 'enter date') + \"\\\">\\n    \");\r\n        this.findInput('input[type=date]').addEventListener('keypress', function (evt) {\r\n            if (evt.key === 'Enter') {\r\n                _this.triggerSubmit();\r\n            }\r\n        });\r\n        this.enableLivePreviews('input');\r\n    };\r\n    InputDateDialog.prototype.submit = function () {\r\n        this.callback(this.findInput('input[type=date]').valueAsDate);\r\n        return true;\r\n    };\r\n    return InputDateDialog;\r\n}(APopup));\r\nexport default InputDateDialog;\r\n//# sourceMappingURL=InputDateDialog.js.map","import { dateStatsBuilder } from '../internal';\r\nimport { isDateColumn, isDatesColumn, Ranking } from '../model';\r\nimport { cssClass, engineCssClass } from '../styles';\r\nimport { ERenderMode } from './interfaces';\r\nimport { renderMissingDOM } from './missing';\r\nimport { colorOf } from './utils';\r\nimport { histogramUpdate, histogramTemplate, mappingHintTemplate, mappingHintUpdate, filteredHistTemplate, initFilter } from './histogram';\r\nimport InputDateDialog from '../ui/dialogs/InputDateDialog';\r\nimport { shiftFilterDateDay, noDateFilter } from '../model/internalDate';\r\nvar DateHistogramCellRenderer = /** @class */ (function () {\r\n    function DateHistogramCellRenderer() {\r\n        this.title = 'Histogram';\r\n    }\r\n    DateHistogramCellRenderer.prototype.canRender = function (col, mode) {\r\n        return (isDateColumn(col) && mode !== ERenderMode.CELL) || (isDatesColumn(col) && mode === ERenderMode.CELL);\r\n    };\r\n    DateHistogramCellRenderer.prototype.create = function (col, _context) {\r\n        var _a = getHistDOMRenderer(col), template = _a.template, render = _a.render;\r\n        return {\r\n            template: template + \"</div>\",\r\n            update: function (n, row) {\r\n                if (renderMissingDOM(n, col, row)) {\r\n                    return;\r\n                }\r\n                var b = dateStatsBuilder();\r\n                for (var _i = 0, _a = col.getDates(row); _i < _a.length; _i++) {\r\n                    var n_1 = _a[_i];\r\n                    b.push(n_1);\r\n                }\r\n                var hist = b.build();\r\n                render(n, hist);\r\n            }\r\n        };\r\n    };\r\n    DateHistogramCellRenderer.prototype.createGroup = function (col, context) {\r\n        var _a = getHistDOMRenderer(col), template = _a.template, render = _a.render;\r\n        return {\r\n            template: template + \"</div>\",\r\n            update: function (n, group) {\r\n                return context.tasks.groupDateStats(col, group).then(function (r) {\r\n                    if (typeof r === 'symbol') {\r\n                        return;\r\n                    }\r\n                    var isMissing = !r || r.group == null || r.group.count === 0 || r.group.count === r.group.missing;\r\n                    n.classList.toggle(cssClass('missing'), isMissing);\r\n                    if (isMissing) {\r\n                        return;\r\n                    }\r\n                    render(n, r.group);\r\n                });\r\n            }\r\n        };\r\n    };\r\n    DateHistogramCellRenderer.prototype.createSummary = function (col, context, interactive) {\r\n        var r = getHistDOMRenderer(col);\r\n        return interactive ? interactiveSummary(col, context, r.template, r.render) : staticSummary(col, context, false, r.template, r.render);\r\n    };\r\n    return DateHistogramCellRenderer;\r\n}());\r\nexport default DateHistogramCellRenderer;\r\nfunction staticSummary(col, context, interactive, template, render) {\r\n    template += mappingHintTemplate(['', '']);\r\n    return {\r\n        template: template + \"</div>\",\r\n        update: function (node) {\r\n            return context.tasks.summaryDateStats(col).then(function (r) {\r\n                if (typeof r === 'symbol') {\r\n                    return;\r\n                }\r\n                var summary = r.summary, data = r.data;\r\n                node.classList.toggle(cssClass('missing'), !summary);\r\n                if (!summary) {\r\n                    return;\r\n                }\r\n                var formatter = col.getFormatter();\r\n                mappingHintUpdate(node, [formatter(summary.min), formatter(summary.max)]);\r\n                render(node, summary, interactive ? data : undefined);\r\n            });\r\n        }\r\n    };\r\n}\r\nfunction interactiveSummary(col, context, template, render) {\r\n    var filter = col.getFilter();\r\n    var dummyDomain = [isFinite(filter.min) ? filter.min : 0, isFinite(filter.max) ? filter.max : 100];\r\n    template += filteredHistTemplate(createFilterContext(col, context, dummyDomain), createFilterInfo(col, dummyDomain));\r\n    var fContext;\r\n    var updateFilter;\r\n    return {\r\n        template: template + \"</div>\",\r\n        update: function (node) {\r\n            return context.tasks.summaryDateStats(col).then(function (r) {\r\n                if (typeof r === 'symbol') {\r\n                    return;\r\n                }\r\n                var summary = r.summary, data = r.data;\r\n                if (!updateFilter) {\r\n                    var domain = [data.min ? data.min.getTime() : Date.now(), data.max ? data.max.getTime() : Date.now()];\r\n                    fContext = createFilterContext(col, context, domain);\r\n                    updateFilter = initFilter(node, fContext);\r\n                }\r\n                updateFilter(data ? data.missing : (summary ? summary.missing : 0), createFilterInfo(col, fContext.domain));\r\n                node.classList.add(cssClass('histogram-i'));\r\n                node.classList.toggle(cssClass('missing'), !summary);\r\n                if (!summary) {\r\n                    return;\r\n                }\r\n                render(node, summary, data);\r\n            });\r\n        }\r\n    };\r\n}\r\n/** @internal */\r\nexport function createDateFilter(col, parent, context, livePreviews) {\r\n    var renderer = getHistDOMRenderer(col);\r\n    var filter = col.getFilter();\r\n    var domain = [isFinite(filter.min) ? filter.min : 0, isFinite(filter.max) ? filter.max : 100];\r\n    var fContext = createFilterContext(col, context, domain);\r\n    var applyFilter = fContext.setFilter;\r\n    var currentFilter = createFilterInfo(col, domain);\r\n    fContext.setFilter = function (filterMissing, min, max) {\r\n        currentFilter = { filterMissing: filterMissing, filterMin: min, filterMax: max };\r\n        if (livePreviews) {\r\n            applyFilter(filterMissing, min, max);\r\n        }\r\n    };\r\n    parent.innerHTML = \"\" + renderer.template + filteredHistTemplate(fContext, createFilterInfo(col, domain)) + \"</div>\";\r\n    var summaryNode = parent.firstElementChild;\r\n    summaryNode.classList.add(cssClass('summary'), cssClass('renderer'));\r\n    summaryNode.dataset.renderer = 'histogram';\r\n    summaryNode.dataset.interactive = '';\r\n    summaryNode.classList.add(cssClass('histogram-i'));\r\n    var updateFilter = null;\r\n    var prepareRender = function (min, max) {\r\n        // reinit with proper domain\r\n        domain = [min ? min.getTime() : Date.now(), max ? max.getTime() : Date.now()];\r\n        fContext = createFilterContext(col, context, domain);\r\n        applyFilter = fContext.setFilter;\r\n        currentFilter = createFilterInfo(col, domain);\r\n        fContext.setFilter = function (filterMissing, min, max) {\r\n            currentFilter = { filterMissing: filterMissing, filterMin: min, filterMax: max };\r\n            if (livePreviews) {\r\n                applyFilter(filterMissing, min, max);\r\n            }\r\n        };\r\n        return initFilter(summaryNode, fContext);\r\n    };\r\n    var rerender = function () {\r\n        var ready = context.tasks.summaryDateStats(col).then(function (r) {\r\n            if (typeof r === 'symbol') {\r\n                return;\r\n            }\r\n            var summary = r.summary, data = r.data;\r\n            if (!updateFilter) {\r\n                updateFilter = prepareRender(data.min, data.max);\r\n            }\r\n            updateFilter(data ? data.missing : (summary ? summary.missing : 0), currentFilter);\r\n            summaryNode.classList.toggle(cssClass('missing'), !summary);\r\n            if (!summary) {\r\n                return;\r\n            }\r\n            renderer.render(summaryNode, summary, data);\r\n        });\r\n        if (!ready) {\r\n            return;\r\n        }\r\n        summaryNode.classList.add(engineCssClass('loading'));\r\n        ready.then(function () {\r\n            summaryNode.classList.remove(engineCssClass('loading'));\r\n        });\r\n    };\r\n    var ranking = col.findMyRanker();\r\n    if (ranking) {\r\n        ranking.on(Ranking.EVENT_ORDER_CHANGED + \".numberFilter\", function () { return rerender(); });\r\n    }\r\n    rerender();\r\n    return {\r\n        cleanUp: function () {\r\n            if (ranking) {\r\n                ranking.on(Ranking.EVENT_ORDER_CHANGED + \".numberFilter\", null);\r\n            }\r\n        },\r\n        reset: function () {\r\n            currentFilter = createFilterInfo(col, domain, noDateFilter());\r\n            rerender();\r\n        },\r\n        submit: function () {\r\n            applyFilter(currentFilter.filterMissing, currentFilter.filterMin, currentFilter.filterMax);\r\n        }\r\n    };\r\n}\r\nfunction getHistDOMRenderer(col) {\r\n    var guessedBins = 10;\r\n    var formatter = col.getFormatter();\r\n    var color = colorOf(col);\r\n    var render = function (n, stats, unfiltered) {\r\n        return histogramUpdate(n, stats, unfiltered || null, formatter, function () { return color; });\r\n    };\r\n    return {\r\n        template: histogramTemplate(guessedBins),\r\n        render: render,\r\n        guessedBins: guessedBins\r\n    };\r\n}\r\nfunction createFilterInfo(col, domain, filter) {\r\n    if (filter === void 0) { filter = col.getFilter(); }\r\n    var filterMin = isFinite(filter.min) ? filter.min : domain[0];\r\n    var filterMax = isFinite(filter.max) ? filter.max : domain[1];\r\n    return {\r\n        filterMissing: filter.filterMissing,\r\n        filterMin: filterMin,\r\n        filterMax: filterMax\r\n    };\r\n}\r\nfunction createFilterContext(col, context, domain) {\r\n    var clamp = function (v) { return Math.max(0, Math.min(100, v)); };\r\n    var percent = function (v) { return clamp(Math.round(100 * (v - domain[0]) / (domain[1] - domain[0]))); };\r\n    var unpercent = function (v) { return ((v / 100) * (domain[1] - domain[0]) + domain[0]); };\r\n    return {\r\n        percent: percent,\r\n        unpercent: unpercent,\r\n        domain: domain,\r\n        format: function (v) { return isNaN(v) ? '' : col.getFormatter()(new Date(v)); },\r\n        formatRaw: String,\r\n        parseRaw: function (v) { return Number.parseInt(v, 10); },\r\n        setFilter: function (filterMissing, minValue, maxValue) { return col.setFilter({\r\n            filterMissing: filterMissing,\r\n            min: Math.abs(minValue - domain[0]) < 0.001 ? Number.NEGATIVE_INFINITY : shiftFilterDateDay(minValue, 'min'),\r\n            max: Math.abs(maxValue - domain[1]) < 0.001 ? Number.POSITIVE_INFINITY : shiftFilterDateDay(maxValue, 'max')\r\n        }); },\r\n        edit: function (value, attachment, type) {\r\n            return new Promise(function (resolve) {\r\n                var dialogCtx = {\r\n                    attachment: attachment,\r\n                    manager: context.dialogManager,\r\n                    level: context.dialogManager.maxLevel + 1,\r\n                    idPrefix: context.idPrefix\r\n                };\r\n                var dialog = new InputDateDialog(dialogCtx, function (d) { return resolve(d == null ? NaN : shiftFilterDateDay(d.getTime(), type)); }, { value: isNaN(value) ? null : new Date(value) });\r\n                dialog.open();\r\n            });\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=DateHistogramCellRenderer.js.map","import ActionRenderer from './ActionRenderer';\r\nimport AggregateGroupRenderer from './AggregateGroupRenderer';\r\nimport AnnotationRenderer from './AnnotationRenderer';\r\nimport BarCellRenderer from './BarCellRenderer';\r\nimport BooleanCellRenderer from './BooleanCellRenderer';\r\nimport BoxplotCellRenderer from './BoxplotCellRenderer';\r\nimport BrightnessCellRenderer from './BrightnessCellRenderer';\r\nimport CategoricalCellRenderer from './CategoricalCellRenderer';\r\nimport CategoricalHeatmapCellRenderer from './CategoricalHeatmapCellRenderer';\r\nimport CategoricalStackedDistributionlCellRenderer from './CategoricalStackedDistributionlCellRenderer';\r\nimport CircleCellRenderer from './CircleCellRenderer';\r\nimport { DefaultCellRenderer } from './DefaultCellRenderer';\r\nimport DotCellRenderer from './DotCellRenderer';\r\nimport GroupCellRenderer from './GroupCellRenderer';\r\nimport HeatmapCellRenderer from './HeatmapCellRenderer';\r\nimport HistogramCellRenderer from './HistogramCellRenderer';\r\nimport ImageCellRenderer from './ImageCellRenderer';\r\nimport { ERenderMode } from './interfaces';\r\nimport InterleavingCellRenderer from './InterleavingCellRenderer';\r\nimport LinkCellRenderer from './LinkCellRenderer';\r\nimport LinkMapCellRenderer from './LinkMapCellRenderer';\r\nimport LoadingCellRenderer from './LoadingCellRenderer';\r\nimport MapBarCellRenderer from './MapBarCellRenderer';\r\nimport MultiLevelCellRenderer from './MultiLevelCellRenderer';\r\nimport RankCellRenderer from './RankCellRenderer';\r\nimport SelectionRenderer from './SelectionRenderer';\r\nimport SetCellRenderer from './SetCellRenderer';\r\nimport SparklineCellRenderer from './SparklineCellRenderer';\r\nimport StringCellRenderer from './StringCellRenderer';\r\nimport TableCellRenderer from './TableCellRenderer';\r\nimport UpSetCellRenderer from './UpSetCellRenderer';\r\nimport VerticalBarCellRenderer from './VerticalBarCellRenderer';\r\nimport DateCellRenderer from './DateCellRenderer';\r\nimport DateHistogramCellRenderer from './DateHistogramCellRenderer';\r\nvar defaultCellRenderer = new DefaultCellRenderer();\r\n/**\r\n * default render factories\r\n */\r\nexport var renderers = {\r\n    actions: new ActionRenderer(),\r\n    aggregate: new AggregateGroupRenderer(),\r\n    annotate: new AnnotationRenderer(),\r\n    boolean: new BooleanCellRenderer(),\r\n    boxplot: new BoxplotCellRenderer(),\r\n    brightness: new BrightnessCellRenderer(),\r\n    catdistributionbar: new CategoricalStackedDistributionlCellRenderer(),\r\n    categorical: new CategoricalCellRenderer(),\r\n    circle: new CircleCellRenderer(),\r\n    date: new DateCellRenderer(),\r\n    default: defaultCellRenderer,\r\n    dot: new DotCellRenderer(),\r\n    group: new GroupCellRenderer(),\r\n    heatmap: new HeatmapCellRenderer(),\r\n    catheatmap: new CategoricalHeatmapCellRenderer(),\r\n    histogram: new HistogramCellRenderer(),\r\n    datehistogram: new DateHistogramCellRenderer(),\r\n    image: new ImageCellRenderer(),\r\n    interleaving: new InterleavingCellRenderer(),\r\n    link: new LinkCellRenderer(),\r\n    linkMap: new LinkMapCellRenderer(),\r\n    loading: new LoadingCellRenderer(),\r\n    nested: new MultiLevelCellRenderer(false),\r\n    number: new BarCellRenderer(),\r\n    mapbars: new MapBarCellRenderer(),\r\n    rank: new RankCellRenderer(),\r\n    selection: new SelectionRenderer(),\r\n    set: new SetCellRenderer(),\r\n    sparkline: new SparklineCellRenderer(),\r\n    stack: new MultiLevelCellRenderer(),\r\n    string: new StringCellRenderer(),\r\n    table: new TableCellRenderer(),\r\n    upset: new UpSetCellRenderer(),\r\n    verticalbar: new VerticalBarCellRenderer()\r\n};\r\nexport function chooseRenderer(col, renderers) {\r\n    var r = renderers[col.getRenderer()];\r\n    return r && typeof r.create === 'function' ? r : defaultCellRenderer;\r\n}\r\nexport function chooseGroupRenderer(col, renderers) {\r\n    var r = renderers[col.getGroupRenderer()];\r\n    return r && typeof r.createGroup === 'function' ? r : defaultCellRenderer;\r\n}\r\nexport function chooseSummaryRenderer(col, renderers) {\r\n    var r = renderers[col.getSummaryRenderer()];\r\n    return r && typeof r.createSummary === 'function' ? r : defaultCellRenderer;\r\n}\r\n/**\r\n * determined the list of possible renderers for a given colum\r\n * @param col the column to resolve the renderers\r\n * @param renderers map of possible renderers\r\n * @param canRender optional custom canRender function\r\n */\r\nexport function getPossibleRenderer(col, renderers, canRender) {\r\n    var all = Object.keys(renderers).filter(Boolean).map(function (type) { return ({ type: type, factory: renderers[type] }); });\r\n    var item = all.filter(function (_a) {\r\n        var type = _a.type, factory = _a.factory;\r\n        return typeof factory.create === 'function' && factory.canRender(col, ERenderMode.CELL) && (!canRender || canRender(type, factory, col, ERenderMode.CELL));\r\n    });\r\n    var group = all.filter(function (_a) {\r\n        var type = _a.type, factory = _a.factory;\r\n        return typeof factory.createGroup === 'function' && factory.canRender(col, ERenderMode.GROUP) && (!canRender || canRender(type, factory, col, ERenderMode.GROUP));\r\n    });\r\n    var summary = all.filter(function (_a) {\r\n        var type = _a.type, factory = _a.factory;\r\n        return typeof factory.createSummary === 'function' && factory.canRender(col, ERenderMode.SUMMARY) && (!canRender || canRender(type, factory, col, ERenderMode.SUMMARY));\r\n    });\r\n    return {\r\n        item: item.map(function (_a) {\r\n            var type = _a.type, factory = _a.factory;\r\n            return ({ type: type, label: factory.title });\r\n        }),\r\n        group: group.map(function (_a) {\r\n            var type = _a.type, factory = _a.factory;\r\n            return ({ type: type, label: factory.groupTitle || factory.title });\r\n        }),\r\n        summary: summary.map(function (_a) {\r\n            var type = _a.type, factory = _a.factory;\r\n            return ({ type: type, label: factory.summaryTitle || factory.groupTitle || factory.title });\r\n        })\r\n    };\r\n}\r\n//# sourceMappingURL=renderers.js.map","import * as tslib_1 from \"tslib\";\r\nimport ADialog from './ADialog';\r\nimport { cssClass } from '../../styles';\r\n/** @internal */\r\nvar BooleanFilterDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(BooleanFilterDialog, _super);\r\n    function BooleanFilterDialog(column, dialog) {\r\n        var _this = _super.call(this, dialog, {\r\n            livePreview: 'filter'\r\n        }) || this;\r\n        _this.column = column;\r\n        _this.before = _this.column.getFilter();\r\n        return _this;\r\n    }\r\n    BooleanFilterDialog.prototype.build = function (node) {\r\n        node.insertAdjacentHTML('beforeend', \"\\n     <label class=\\\"\" + cssClass('checkbox') + \"\\\"><input type=\\\"radio\\\" name=\\\"boolean_check\\\" value=\\\"null\\\" \" + (this.before == null ? 'checked=\"checked\"' : '') + \"><span>No Filter</span></label>\\n     <label class=\\\"\" + cssClass('checkbox') + \"\\\"><input type=\\\"radio\\\" name=\\\"boolean_check\\\" value=\\\"true\\\" \" + (this.before === true ? 'checked=\"checked\"' : '') + \"><span>True</span></label>\\n     <label class=\\\"\" + cssClass('checkbox') + \"\\\"><input type=\\\"radio\\\" name=\\\"boolean_check\\\" value=\\\"false\\\" \" + (this.before === false ? 'checked=\"checked\"' : '') + \"><span>False</span></label>\\n    \");\r\n        this.enableLivePreviews('input[type=radio]');\r\n    };\r\n    BooleanFilterDialog.prototype.updateFilter = function (filter) {\r\n        this.column.setFilter(filter);\r\n    };\r\n    BooleanFilterDialog.prototype.reset = function () {\r\n        var v = 'null';\r\n        this.forEach('input[type=\"radio\"]', function (d) { return d.checked = d.value === v; });\r\n    };\r\n    BooleanFilterDialog.prototype.cancel = function () {\r\n        this.updateFilter(this.before);\r\n    };\r\n    BooleanFilterDialog.prototype.submit = function () {\r\n        var isTrue = this.findInput('input[type=\"radio\"][value=\"true\"]').checked;\r\n        var isFalse = this.findInput('input[type=\"radio\"][value=\"false\"]').checked;\r\n        this.updateFilter(isTrue ? true : (isFalse ? false : null));\r\n        return true;\r\n    };\r\n    return BooleanFilterDialog;\r\n}(ADialog));\r\nexport default BooleanFilterDialog;\r\n//# sourceMappingURL=BooleanFilterDialog.js.map","import colors from \"../colors.js\";\n\nexport default colors(\"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999\");\n","import colors from \"../colors.js\";\n\nexport default colors(\"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3\");\n","import * as tslib_1 from \"tslib\";\r\nimport ADialog from './ADialog';\r\nimport { uniqueId } from './utils';\r\nimport { cssClass } from '../../styles';\r\nimport { color } from 'd3-color';\r\nimport { schemeCategory10, schemeAccent, schemeDark2, schemePastel1, schemePastel2, schemeSet1, schemeSet2, schemeSet3 } from 'd3-scale-chromatic';\r\nimport { DEFAULT_CATEGORICAL_COLOR_FUNCTION, ReplacmentColorMappingFunction } from '../../model/CategoricalColorMappingFunction';\r\nvar sets = { schemeCategory10: schemeCategory10, schemeAccent: schemeAccent, schemeDark2: schemeDark2, schemePastel1: schemePastel1, schemePastel2: schemePastel2, schemeSet1: schemeSet1, schemeSet2: schemeSet2, schemeSet3: schemeSet3 };\r\n/** @internal */\r\nvar CategoricalColorMappingDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(CategoricalColorMappingDialog, _super);\r\n    function CategoricalColorMappingDialog(column, dialog) {\r\n        var _this = _super.call(this, dialog, {\r\n            livePreview: 'colorMapping'\r\n        }) || this;\r\n        _this.column = column;\r\n        _this.before = column.getColorMapping().clone();\r\n        return _this;\r\n    }\r\n    CategoricalColorMappingDialog.prototype.build = function (node) {\r\n        var _this = this;\r\n        var id = uniqueId(this.dialog.idPrefix);\r\n        var mapping = this.column.getColorMapping();\r\n        node.insertAdjacentHTML('beforeend', \"<div class=\\\"\" + cssClass('dialog-table') + \"\\\">\\n      <div class=\\\"\" + cssClass('dialog-color-table-entry') + \"\\\">\\n        <select id=\\\"\" + id + \"Chooser\\\">\\n          <option value=\\\"\\\">Apply Color Scheme...</option>\\n          <option value=\\\"schemeCategory10\\\">D3 Category 10 (\" + schemeCategory10.length + \")</option>\\n          <option value=\\\"schemeSet1\\\">Set 1 (\" + schemeSet1.length + \")</option>\\n          <option value=\\\"schemeSet2\\\">Set 2 (\" + schemeSet2.length + \")</option>\\n          <option value=\\\"schemeSet3\\\">Set 3 (\" + schemeSet3.length + \")</option>\\n          <option value=\\\"schemeAccent\\\">Accent (\" + schemeAccent.length + \")</option>\\n          <option value=\\\"schemeDark2\\\">Dark2 (\" + schemeDark2.length + \")</option>\\n          <option value=\\\"schemePastel1\\\">Pastel 1 (\" + schemePastel1.length + \")</option>\\n          <option value=\\\"schemePastel2\\\">Pastel 2 (\" + schemePastel2.length + \")</option>\\n        </select>\\n      </div>\\n      \" + this.column.categories.map(function (d) { return \"\\n        <label class=\\\"\" + cssClass('checkbox') + \" \" + cssClass('dialog-color-table-entry') + \"\\\">\\n          <input data-cat=\\\"\" + d.name + \"\\\" type=\\\"color\\\" value=\\\"\" + color(mapping.apply(d)).hex() + \"\\\">\\n          <span>\" + d.label + \"</span>\\n        </label>\"; }).join('') + \"\\n    </div>\");\r\n        this.findInput('select').onchange = function (evt) {\r\n            var scheme = sets[evt.currentTarget.value];\r\n            if (!scheme) {\r\n                return;\r\n            }\r\n            _this.forEach('[data-cat]', function (n, i) {\r\n                n.value = scheme[i % scheme.length];\r\n            });\r\n            if (_this.showLivePreviews()) {\r\n                _this.submit();\r\n            }\r\n        };\r\n        this.enableLivePreviews('input[type=color]');\r\n    };\r\n    CategoricalColorMappingDialog.prototype.reset = function () {\r\n        var cats = this.column.categories;\r\n        this.forEach('[data-cat]', function (n, i) {\r\n            n.value = color(cats[i].color).hex();\r\n        });\r\n    };\r\n    CategoricalColorMappingDialog.prototype.submit = function () {\r\n        var cats = this.column.categories;\r\n        var map = new Map();\r\n        this.forEach('input[data-cat]', function (n, i) {\r\n            var cat = cats[i];\r\n            if (color(cat.color).hex() !== n.value) {\r\n                map.set(cat, n.value);\r\n            }\r\n        });\r\n        if (map.size === 0) {\r\n            this.column.setColorMapping(DEFAULT_CATEGORICAL_COLOR_FUNCTION);\r\n        }\r\n        else {\r\n            this.column.setColorMapping(new ReplacmentColorMappingFunction(map));\r\n        }\r\n        return true;\r\n    };\r\n    CategoricalColorMappingDialog.prototype.cancel = function () {\r\n        this.column.setColorMapping(this.before);\r\n    };\r\n    return CategoricalColorMappingDialog;\r\n}(ADialog));\r\nexport default CategoricalColorMappingDialog;\r\n//# sourceMappingURL=CategoricalColorMappingDialog.js.map","import * as tslib_1 from \"tslib\";\r\nimport { SetColumn } from '../../model';\r\nimport { filterMissingMarkup, findFilterMissing } from '../missing';\r\nimport ADialog from './ADialog';\r\nimport { forEach } from './utils';\r\nimport { cssClass } from '../../styles';\r\nimport { isCategoryIncluded } from '../../model/internalCategorical';\r\n/** @internal */\r\nvar CategoricalFilterDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(CategoricalFilterDialog, _super);\r\n    function CategoricalFilterDialog(column, dialog) {\r\n        var _this = _super.call(this, dialog, {\r\n            livePreview: 'filter'\r\n        }) || this;\r\n        _this.column = column;\r\n        _this.before = _this.column.getFilter() || { filter: '', filterMissing: false };\r\n        return _this;\r\n    }\r\n    CategoricalFilterDialog.prototype.build = function (node) {\r\n        var _this = this;\r\n        node.insertAdjacentHTML('beforeend', \"<div class=\\\"\" + cssClass('dialog-table') + \"\\\">\\n        <label class=\\\"\" + cssClass('checkbox') + \" \" + cssClass('dialog-filter-table-entry') + \"\\\">\\n          <input type=\\\"checkbox\\\" checked>\\n          <span>\\n            <span class=\\\"\" + cssClass('dialog-filter-table-color') + \"\\\"></span>\\n            <div>Un/Select All</div>\\n          </span>\\n        </label>\\n        \" + this.column.categories.map(function (c) { return \"<label class=\\\"\" + cssClass('checkbox') + \" \" + cssClass('dialog-filter-table-entry') + \"\\\">\\n          <input data-cat=\\\"\" + c.name + \"\\\" type=\\\"checkbox\\\"\" + (isCategoryIncluded(_this.before, c) ? 'checked' : '') + \">\\n          <span>\\n            <span class=\\\"\" + cssClass('dialog-filter-table-color') + \"\\\" style=\\\"background-color: \" + c.color + \"\\\"></span>\\n            <div>\" + c.label + \"</div>\\n          </span>\\n        </label>\"; }).join('') + \"\\n    </div>\");\r\n        // selectAll\r\n        var selectAll = this.findInput('input:not([data-cat])');\r\n        selectAll.onchange = function () {\r\n            forEach(node, 'input[data-cat]', function (n) { return n.checked = selectAll.checked; });\r\n        };\r\n        if (this.column instanceof SetColumn) {\r\n            var some = this.before.mode !== 'every';\r\n            node.insertAdjacentHTML('beforeend', \"<strong>Show rows where</strong>\");\r\n            node.insertAdjacentHTML('beforeend', \"<label class=\\\"\" + cssClass('checkbox') + \"\\\">\\n        <input type=\\\"radio\\\" \" + (!some ? 'checked=\"checked\"' : '') + \" name=\\\"mode\\\" value=\\\"every\\\">\\n        <span>all are selected</span>\\n      </label>\");\r\n            node.insertAdjacentHTML('beforeend', \"<label class=\\\"\" + cssClass('checkbox') + \"\\\" style=\\\"padding-bottom: 0.6em\\\">\\n        <input type=\\\"radio\\\" \" + (some ? 'checked=\"checked\"' : '') + \" name=\\\"mode\\\" value=\\\"some\\\">\\n        <span>some are selected</span>\\n      </label>\");\r\n        }\r\n        node.insertAdjacentHTML('beforeend', filterMissingMarkup(this.before.filterMissing));\r\n        this.enableLivePreviews('input[type=checkbox],input[type=radio]');\r\n    };\r\n    CategoricalFilterDialog.prototype.updateFilter = function (filter, filterMissing, someMode) {\r\n        if (someMode === void 0) { someMode = false; }\r\n        var noFilter = filter == null && filterMissing === false;\r\n        var f = { filter: filter, filterMissing: filterMissing };\r\n        if (this.column instanceof SetColumn) {\r\n            f.mode = someMode ? 'some' : 'every';\r\n        }\r\n        this.column.setFilter(noFilter ? null : f);\r\n    };\r\n    CategoricalFilterDialog.prototype.reset = function () {\r\n        this.forEach('input[data-cat]', function (n) { return n.checked = true; });\r\n        findFilterMissing(this.node).checked = false;\r\n        var mode = this.findInput('input[value=every]');\r\n        if (mode) {\r\n            mode.checked = true;\r\n        }\r\n    };\r\n    CategoricalFilterDialog.prototype.cancel = function () {\r\n        this.updateFilter(this.before.filter === '' ? null : this.before.filter, this.before.filterMissing, this.before.mode === 'some');\r\n    };\r\n    CategoricalFilterDialog.prototype.submit = function () {\r\n        var f = this.forEach('input[data-cat]', function (n) { return n.checked ? n.dataset.cat : ''; }).filter(Boolean);\r\n        if (f.length === this.column.categories.length) { // all checked = no filter\r\n            f = null;\r\n        }\r\n        var filterMissing = findFilterMissing(this.node).checked;\r\n        var mode = this.findInput('input[value=some]');\r\n        this.updateFilter(f, filterMissing, mode != null && mode.checked);\r\n        return true;\r\n    };\r\n    return CategoricalFilterDialog;\r\n}(ADialog));\r\nexport default CategoricalFilterDialog;\r\n//# sourceMappingURL=CategoricalFilterDialog.js.map","import * as tslib_1 from \"tslib\";\r\nimport { round } from '../../internal';\r\nimport { isCategoryIncluded } from '../../model/internalCategorical';\r\nimport { filterMissingMarkup, findFilterMissing } from '../missing';\r\nimport ADialog from './ADialog';\r\nimport { forEach } from './utils';\r\nimport { cssClass } from '../../styles';\r\n/** @internal */\r\nvar CategoricalMappingFilterDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(CategoricalMappingFilterDialog, _super);\r\n    function CategoricalMappingFilterDialog(column, dialog) {\r\n        var _this = _super.call(this, dialog, {\r\n            livePreview: 'filter'\r\n        }) || this;\r\n        _this.column = column;\r\n        _this.before = _this.column.getFilter() || { filter: _this.column.categories.map(function (d) { return d.name; }), filterMissing: false };\r\n        return _this;\r\n    }\r\n    CategoricalMappingFilterDialog.prototype.build = function (node) {\r\n        var _this = this;\r\n        var joint = this.column.categories.map(function (d) { return Object.assign({\r\n            range: round(d.value * 100, 2)\r\n        }); });\r\n        joint.sort(function (a, b) { return a.label.localeCompare(b.label); });\r\n        node.insertAdjacentHTML('beforeend', \"<div class=\\\"\" + cssClass('dialog-table') + \"\\\">\\n        <label class=\\\"\" + cssClass('checkbox') + \" \" + cssClass('dialog-filter-table-entry') + \"\\\">\\n          <input type=\\\"checkbox\\\" checked>\\n          <span>\\n            <div>Un/Select All</div>\\n          </span>\\n        </label>\\n        \" + joint.map(function (_a) {\r\n            var name = _a.name, color = _a.color, label = _a.label, range = _a.range;\r\n            return \"\\n          <label class=\\\"\" + cssClass('checkbox') + \" \" + cssClass('dialog-filter-table-entry') + \"\\\">\\n            <input data-cat=\\\"\" + name + \"\\\" type=\\\"checkbox\\\"\" + (isCategoryIncluded(_this.before, name) ? 'checked' : '') + \">\\n            <span>\\n              <input type=\\\"number\\\" value=\\\"\" + range + \"\\\" min=\\\"0\\\" max=\\\"100\\\" size=\\\"5\\\">\\n              <div class=\\\"\" + cssClass('dialog-filter-color-bar') + \"\\\">\\n                <span style=\\\"background-color: \" + color + \"; width: \" + range + \"%\\\"></span>\\n              </div>\\n              <div>\" + label + \"</div>\\n            </span>\\n          </label>\";\r\n        }).join('') + \"\\n    </div>\");\r\n        // selectAll\r\n        var selectAll = this.findInput('input[type=checkbox]:not([data-cat])');\r\n        selectAll.onchange = function () {\r\n            forEach(node, '[data-cat]', function (n) { return n.checked = selectAll.checked; });\r\n        };\r\n        this.forEach('input[type=number]', function (d) {\r\n            d.oninput = function () {\r\n                d.nextElementSibling.firstElementChild.style.width = d.value + \"%\";\r\n            };\r\n        });\r\n        node.insertAdjacentHTML('beforeend', filterMissingMarkup(this.before.filterMissing));\r\n        this.enableLivePreviews('input[type=checkbox], input[type=number]');\r\n    };\r\n    CategoricalMappingFilterDialog.prototype.updateFilter = function (filter, filterMissing) {\r\n        var noFilter = filter == null && filterMissing === false;\r\n        this.column.setFilter(noFilter ? null : { filter: filter, filterMissing: filterMissing });\r\n    };\r\n    CategoricalMappingFilterDialog.prototype.cancel = function () {\r\n        this.updateFilter(this.before.filter, this.before.filterMissing);\r\n    };\r\n    CategoricalMappingFilterDialog.prototype.reset = function () {\r\n        this.forEach('[data-cat]', function (n) {\r\n            n.checked = false;\r\n            n.nextElementSibling.value = '50';\r\n        });\r\n    };\r\n    CategoricalMappingFilterDialog.prototype.submit = function () {\r\n        var items = this.forEach('input[data-cat]', function (n) { return ({\r\n            checked: n.checked,\r\n            cat: n.dataset.cat,\r\n            range: n.nextElementSibling.valueAsNumber\r\n        }); });\r\n        var f = items.filter(function (d) { return d.checked; }).map(function (d) { return d.cat; });\r\n        if (f.length === this.column.categories.length) { // all checked = no filter\r\n            f = null;\r\n        }\r\n        var filterMissing = findFilterMissing(this.node).checked;\r\n        this.updateFilter(f, filterMissing);\r\n        this.column.setMapping(items.map(function (d) { return d.range / 100; }));\r\n        return true;\r\n    };\r\n    return CategoricalMappingFilterDialog;\r\n}(ADialog));\r\nexport default CategoricalMappingFilterDialog;\r\n//# sourceMappingURL=CategoricalMappingFilterDialog.js.map","import * as tslib_1 from \"tslib\";\r\nimport ADialog from './ADialog';\r\nimport { cssClass } from '../../styles';\r\n/** @internal */\r\nvar ChangeRendererDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ChangeRendererDialog, _super);\r\n    function ChangeRendererDialog(column, dialog, ctx) {\r\n        var _this = _super.call(this, dialog, {\r\n            livePreview: 'vis'\r\n        }) || this;\r\n        _this.column = column;\r\n        _this.ctx = ctx;\r\n        _this.before = {\r\n            renderer: column.getRenderer(),\r\n            group: column.getGroupRenderer(),\r\n            summary: column.getSummaryRenderer()\r\n        };\r\n        return _this;\r\n    }\r\n    ChangeRendererDialog.prototype.build = function (node) {\r\n        var current = this.column.getRenderer();\r\n        var currentGroup = this.column.getGroupRenderer();\r\n        var currentSummary = this.column.getSummaryRenderer();\r\n        var _a = this.ctx.getPossibleRenderer(this.column), item = _a.item, group = _a.group, summary = _a.summary;\r\n        console.assert(item.length > 1 || group.length > 1 || summary.length > 1); // otherwise no need to show this\r\n        var byName = function (a, b) { return a.label.localeCompare(b.label); };\r\n        node.insertAdjacentHTML('beforeend', \"\\n      <strong>Item Visualization</strong>\\n      \" + item.sort(byName).map(function (d) { return \" <label class=\\\"\" + cssClass('checkbox') + \"\\\"><input type=\\\"radio\\\" name=\\\"renderer\\\" value=\\\"\" + d.type + \"\\\" \" + ((current === d.type) ? 'checked' : '') + \"><span>\" + d.label + \"</span></label>\"; }).join('') + \"\\n      <strong>Group Visualization</strong>\\n      \" + group.sort(byName).map(function (d) { return \" <label class=\\\"\" + cssClass('checkbox') + \"\\\"><input type=\\\"radio\\\" name=\\\"group\\\" value=\\\"\" + d.type + \"\\\" \" + ((currentGroup === d.type) ? 'checked' : '') + \"><span>\" + d.label + \"</span></label>\"; }).join('') + \"\\n      <strong>Summary Visualization</strong>\\n      \" + summary.sort(byName).map(function (d) { return \" <label class=\\\"\" + cssClass('checkbox') + \"\\\"><input type=\\\"radio\\\" name=\\\"summary\\\" value=\\\"\" + d.type + \"\\\" \" + ((currentSummary === d.type) ? 'checked' : '') + \"><span>\" + d.label + \"</span></label>\"; }).join('') + \"\\n    \");\r\n        this.enableLivePreviews('input[type=radio]');\r\n    };\r\n    ChangeRendererDialog.prototype.cancel = function () {\r\n        this.column.setRenderer(this.before.renderer);\r\n        this.column.setGroupRenderer(this.before.group);\r\n        this.column.setSummaryRenderer(this.before.summary);\r\n    };\r\n    ChangeRendererDialog.prototype.reset = function () {\r\n        var desc = this.column.desc;\r\n        var r = this.findInput(\"input[name=renderer][value=\\\"\" + (desc.renderer || desc.type) + \"\\\"]\");\r\n        if (r) {\r\n            r.checked = true;\r\n        }\r\n        var g = this.findInput(\"input[name=group][value=\\\"\" + (desc.groupRenderer || desc.type) + \"\\\"]\");\r\n        if (g) {\r\n            g.checked = true;\r\n        }\r\n        var s = this.findInput(\"input[name=summary][value=\\\"\" + (desc.summaryRenderer || desc.type) + \"\\\"]\");\r\n        if (s) {\r\n            s.checked = true;\r\n        }\r\n    };\r\n    ChangeRendererDialog.prototype.submit = function () {\r\n        var renderer = this.findInput('input[name=renderer]:checked').value;\r\n        var group = this.findInput('input[name=group]:checked').value;\r\n        var summary = this.findInput('input[name=summary]:checked').value;\r\n        this.column.setRenderer(renderer);\r\n        this.column.setGroupRenderer(group);\r\n        this.column.setSummaryRenderer(summary);\r\n        return true;\r\n    };\r\n    return ChangeRendererDialog;\r\n}(ADialog));\r\nexport default ChangeRendererDialog;\r\n//# sourceMappingURL=ChangeRendererDialog.js.map","import * as tslib_1 from \"tslib\";\r\nimport ADialog from './ADialog';\r\nimport { schemeCategory10, schemeSet1, schemeSet2, schemeSet3, schemeAccent, schemeDark2, schemePastel2, schemePastel1 } from 'd3-scale-chromatic';\r\nimport { round } from '../../internal';\r\nimport { uniqueId } from '../../renderer/utils';\r\nimport { QuantizedColorFunction, CustomColorMappingFunction, SolidColorFunction, SequentialColorFunction, DivergentColorFunction } from '../../model/ColorMappingFunction';\r\nimport { DEFAULT_COLOR } from '../../model';\r\nimport { cssClass } from '../../styles';\r\nvar ColorMappingDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ColorMappingDialog, _super);\r\n    function ColorMappingDialog(column, dialog, ctx) {\r\n        var _this = _super.call(this, dialog, {\r\n            livePreview: 'colorMapping'\r\n        }) || this;\r\n        _this.column = column;\r\n        _this.ctx = ctx;\r\n        _this.id = uniqueId('col');\r\n        _this.before = _this.column.getColorMapping();\r\n        return _this;\r\n    }\r\n    ColorMappingDialog.prototype.createTemplate = function (id, wrapped) {\r\n        var current = wrapped instanceof QuantizedColorFunction ? wrapped.base : wrapped;\r\n        var entries = current instanceof CustomColorMappingFunction ? current.entries : [];\r\n        var h = '';\r\n        h += \"<datalist id=\\\"\" + id + \"L\\\">\" + schemeCategory10.map(function (d) { return \"<option>\" + d + \"\\\"</option>\"; }).join('') + \"</datalist>\";\r\n        h += \"<datalist id=\\\"\" + id + \"LW\\\"><option>#FFFFFF\\\"</option>\" + schemeCategory10.slice(0, -1).map(function (d) { return \"<option>\" + d + \"</option>\"; }).join('') + \"</datalist>\";\r\n        h += \"<strong data-toggle=\\\"\" + (current instanceof SolidColorFunction ? 'open' : '') + \"\\\">Solid Color</strong>\";\r\n        h += \"<div>\";\r\n        {\r\n            var refColor_1 = current instanceof SolidColorFunction ? current.color : '';\r\n            var has_1 = refColor_1 === DEFAULT_COLOR;\r\n            var colorsets = [schemeCategory10, schemeAccent, schemeDark2, schemePastel1, schemePastel2, schemeSet1, schemeSet2, schemeSet3];\r\n            var renderColor_1 = function (d) { return \"<label class=\\\"\" + cssClass('checkbox-color') + \"\\\">\\n        <input name=\\\"color\\\" type=\\\"radio\\\" value=\\\"\" + d + \"\\\" \" + (d === refColor_1 ? 'checked=\"checked\"' : '') + \">\\n        <span style=\\\"background: \" + d + \"\\\"></span>\\n      </label>\"; };\r\n            colorsets.forEach(function (colors, i) {\r\n                has_1 = has_1 || colors.includes(refColor_1);\r\n                h += \"<div class=\\\"\" + cssClass('color-line') + \"\\\">\\n          \" + colors.map(renderColor_1).join('') + \"\\n          \" + (i === 0 ? renderColor_1(DEFAULT_COLOR) : '') + \"\\n        </div>\";\r\n            });\r\n            h += \"<label class=\\\"\" + cssClass('checkbox') + \" \" + cssClass('color-gradient') + \"\\\"><input name=\\\"color\\\" type=\\\"radio\\\" value=\\\"custom:solid\\\" \" + (refColor_1 && !has_1 ? 'checked=\"checked\"' : '') + \">\\n        <span class=\\\"\" + cssClass('color-custom') + \"\\\"><input type=\\\"color\\\" name=\\\"solid\\\" list=\\\"\" + id + \"L\\\" value=\\\"\" + (current instanceof SolidColorFunction ? current.color : DEFAULT_COLOR) + \"\\\" \" + (refColor_1 && !has_1 ? '' : 'disabled') + \"></span>\\n      </label>\";\r\n        }\r\n        h += '</div>';\r\n        h += \"<strong data-toggle=\\\"\" + (current instanceof SequentialColorFunction || (current instanceof CustomColorMappingFunction && entries.length === 2) ? 'open' : '') + \"\\\">Sequential Color</strong>\";\r\n        h += '<div>';\r\n        h += \"<div><label class=\\\"\" + cssClass('checkbox') + \"\\\">\\n      <input name=\\\"kindS\\\" type=\\\"radio\\\" id=\\\"\" + id + \"KC_S\\\" value=\\\"continuous\\\" \" + (!(wrapped instanceof QuantizedColorFunction) ? 'checked' : '') + \">\\n      <span>Continuous</span>\\n    </label>\\n    <label class=\\\"\" + cssClass('checkbox') + \"\\\">\\n      <input name=\\\"kindS\\\" type=\\\"radio\\\" id=\\\"\" + id + \"KQ_S\\\" value=\\\"quantized\\\" \" + (wrapped instanceof QuantizedColorFunction ? 'checked' : '') + \">\\n      <span>Discrete&nbsp;<input type=\\\"number\\\" id=\\\"\" + id + \"KQS_S\\\" min=\\\"2\\\" step=\\\"1\\\" style=\\\"width: 3em\\\" value=\\\"\" + (wrapped instanceof QuantizedColorFunction ? wrapped.steps + \"\\\"\" : '5\" disabled') + \">&nbsp; steps</span>\\n    </label></div>\";\r\n        {\r\n            var name_1 = current instanceof SequentialColorFunction ? current.name : '';\r\n            for (var _i = 0, _a = Object.keys(SequentialColorFunction.FUNCTIONS); _i < _a.length; _i++) {\r\n                var colors = _a[_i];\r\n                h += \"<label class=\\\"\" + cssClass('checkbox') + \" \" + cssClass('color-gradient') + \"\\\"><input name=\\\"color\\\" type=\\\"radio\\\" value=\\\"\" + colors + \"\\\" \" + (colors === name_1 ? 'checked=\"checked\"' : '') + \">\\n        <span data-c=\\\"\" + colors + \"\\\" style=\\\"background: \" + gradient(SequentialColorFunction.FUNCTIONS[colors], 9) + \"\\\"></span>\\n      </label>\";\r\n            }\r\n            var isCustom = entries.length === 2;\r\n            h += \"<label class=\\\"\" + cssClass('checkbox') + \" \" + cssClass('color-gradient') + \"\\\">\\n        <input name=\\\"color\\\" type=\\\"radio\\\" value=\\\"custom:sequential\\\" \" + (isCustom ? 'checked' : '') + \">\\n        <span class=\\\"\" + cssClass('color-custom') + \"\\\">\\n          <input type=\\\"color\\\" name=\\\"interpolate0\\\" list=\\\"\" + id + \"LW\\\" \" + (!isCustom ? 'disabled' : \"value=\\\"\" + entries[0].color + \"\\\"\") + \">\\n          <input type=\\\"color\\\" name=\\\"interpolate1\\\" list=\\\"\" + id + \"LW\\\" \" + (!isCustom ? 'disabled' : \"value=\\\"\" + entries[entries.length - 1].color + \"\\\"\") + \">\\n        </span>\\n      </label>\";\r\n        }\r\n        h += '</div>';\r\n        h += \"<strong data-toggle=\\\"\" + (current instanceof DivergentColorFunction || (current instanceof CustomColorMappingFunction && entries.length === 3) ? 'open' : '') + \"\\\">Diverging Color</strong>\";\r\n        h += '<div>';\r\n        h += \"<div><label class=\\\"\" + cssClass('checkbox') + \"\\\">\\n      <input name=\\\"kindD\\\" type=\\\"radio\\\" id=\\\"\" + id + \"KC_D\\\" value=\\\"continuous\\\" \" + (!(wrapped instanceof QuantizedColorFunction) ? 'checked' : '') + \">\\n      <span>Continuous</span>\\n    </label>\\n    <label class=\\\"\" + cssClass('checkbox') + \"\\\">\\n      <input name=\\\"kindD\\\" type=\\\"radio\\\" id=\\\"\" + id + \"KQ_D\\\" value=\\\"quantized\\\" \" + (wrapped instanceof QuantizedColorFunction ? 'checked' : '') + \">\\n      <span>Discrete&nbsp;<input type=\\\"number\\\" id=\\\"\" + id + \"KQS_D\\\" min=\\\"2\\\" step=\\\"1\\\" style=\\\"width: 3em\\\" value=\\\"\" + (wrapped instanceof QuantizedColorFunction ? wrapped.steps + \"\\\"\" : '5\" disabled') + \">&nbsp; steps</span>\\n    </label></div>\";\r\n        {\r\n            var name_2 = current instanceof DivergentColorFunction ? current.name : '';\r\n            for (var _b = 0, _c = Object.keys(DivergentColorFunction.FUNCTIONS); _b < _c.length; _b++) {\r\n                var colors = _c[_b];\r\n                h += \"<label class=\\\"\" + cssClass('checkbox') + \" \" + cssClass('color-gradient') + \"\\\"><input name=\\\"color\\\" type=\\\"radio\\\" value=\\\"\" + colors + \"\\\" \" + (colors === name_2 ? 'checked=\"checked\"' : '') + \">\\n        <span data-c=\\\"\" + colors + \"\\\" style=\\\"background: \" + gradient(DivergentColorFunction.FUNCTIONS[colors], 11) + \"\\\"></span>\\n      </label>\";\r\n            }\r\n            var isCustom = entries.length === 3;\r\n            h += \"<label class=\\\"\" + cssClass('checkbox') + \" \" + cssClass('color-gradient') + \"\\\">\\n        <input name=\\\"color\\\" type=\\\"radio\\\" value=\\\"custom:divergent\\\" \" + (isCustom ? 'checked' : '') + \">\\n        <span class=\\\"\" + cssClass('color-custom') + \"\\\">\\n          <input type=\\\"color\\\" name=\\\"divergingm1\\\" list=\\\"\" + id + \"L\\\" \" + (!isCustom ? 'disabled' : \"value=\\\"\" + entries[0].color + \"\\\"\") + \">\\n          <input type=\\\"color\\\" name=\\\"diverging0\\\" list=\\\"\" + id + \"LW\\\" \" + (!isCustom ? 'disabled' : \"value=\\\"\" + entries[1].color + \"\\\"\") + \">\\n          <input type=\\\"color\\\" name=\\\"diverging1\\\" list=\\\"\" + id + \"L\\\" \" + (!isCustom ? 'disabled' : \"value=\\\"\" + entries[2].color + \"\\\"\") + \">\\n        </span>\\n      </label>\";\r\n        }\r\n        h += '</div>';\r\n        return h;\r\n    };\r\n    ColorMappingDialog.prototype.applyColor = function () {\r\n        var selected = this.findInput(\"input[name=color]:checked\");\r\n        if (!selected) {\r\n            return;\r\n        }\r\n        var quantized = this.findInput(\"#\" + this.id + \"KQ_S\");\r\n        var steps = this.findInput(\"#\" + this.id + \"KQS_S\");\r\n        var base = toColor(selected, this.node);\r\n        if (quantized.checked && !(base instanceof SolidColorFunction)) {\r\n            this.column.setColorMapping(new QuantizedColorFunction(base, Number.parseInt(steps.value, 10)));\r\n        }\r\n        else {\r\n            this.column.setColorMapping(base);\r\n        }\r\n    };\r\n    ColorMappingDialog.prototype.build = function (node) {\r\n        var content = node.ownerDocument.createElement('div');\r\n        content.classList.add(cssClass('dialog-color'));\r\n        node.appendChild(content);\r\n        this.render(content, this.column.getColorMapping());\r\n    };\r\n    ColorMappingDialog.prototype.render = function (node, value) {\r\n        var _this = this;\r\n        var id = this.id;\r\n        node.innerHTML = this.createTemplate(id, value);\r\n        var toggles = Array.from(node.querySelectorAll('strong[data-toggle]'));\r\n        var _loop_1 = function (toggle) {\r\n            toggle.onclick = function (evt) {\r\n                evt.preventDefault();\r\n                evt.stopPropagation();\r\n                for (var _i = 0, toggles_2 = toggles; _i < toggles_2.length; _i++) {\r\n                    var t2 = toggles_2[_i];\r\n                    t2.dataset.toggle = t2.dataset.toggle === 'open' || toggle !== t2 ? '' : 'open';\r\n                }\r\n            };\r\n        };\r\n        for (var _i = 0, toggles_1 = toggles; _i < toggles_1.length; _i++) {\r\n            var toggle = toggles_1[_i];\r\n            _loop_1(toggle);\r\n        }\r\n        var customs = [];\r\n        var updateColor = function (d) {\r\n            if (!d.checked) {\r\n                return;\r\n            }\r\n            var _loop_2 = function (custom) {\r\n                Array.from(custom.nextElementSibling.getElementsByTagName('input')).forEach(function (s) { return s.disabled = custom !== d; });\r\n            };\r\n            // disable customs\r\n            for (var _i = 0, customs_1 = customs; _i < customs_1.length; _i++) {\r\n                var custom = customs_1[_i];\r\n                _loop_2(custom);\r\n            }\r\n            if (_this.showLivePreviews()) {\r\n                _this.applyColor();\r\n            }\r\n        };\r\n        var updateSelectedColor = function () {\r\n            var selected = _this.findInput(\"input[name=color]:checked\");\r\n            if (selected) {\r\n                updateColor(selected);\r\n            }\r\n        };\r\n        this.forEach('input[name=color]', function (d) {\r\n            if (d.value.startsWith('custom:')) {\r\n                customs.push(d);\r\n            }\r\n            d.onchange = function () { return updateColor(d); };\r\n        });\r\n        // upon changing custom parameter trigger an update\r\n        this.forEach(\".\" + cssClass('color-custom') + \" input[type=color]\", function (d) {\r\n            d.onchange = function () {\r\n                var item = d.parentElement.previousElementSibling;\r\n                updateColor(item);\r\n            };\r\n        });\r\n        // sync and apply\r\n        var continuouos = this.findInput(\"#\" + id + \"KC_S\");\r\n        var quantized = this.findInput(\"#\" + id + \"KQ_S\");\r\n        var steps = this.findInput(\"#\" + id + \"KQS_S\");\r\n        var continuouos2 = this.findInput(\"#\" + id + \"KC_D\");\r\n        var quantized2 = this.findInput(\"#\" + id + \"KQ_D\");\r\n        var steps2 = this.findInput(\"#\" + id + \"KQS_D\");\r\n        continuouos.onchange = continuouos2.onchange = function (evt) {\r\n            continuouos.checked = continuouos2.checked = evt.currentTarget.checked;\r\n            steps.disabled = steps2.disabled = !quantized.checked;\r\n            if (continuouos.checked) {\r\n                _this.updateGradients(-1);\r\n                updateSelectedColor();\r\n            }\r\n        };\r\n        steps.onchange = steps2.onchange = function (evt) {\r\n            steps.value = steps2.value = evt.currentTarget.value;\r\n            _this.updateGradients(Number.parseInt(steps.value, 10));\r\n            updateSelectedColor();\r\n        };\r\n        quantized.onchange = quantized2.onchange = function (evt) {\r\n            quantized.checked = quantized2.checked = evt.currentTarget.checked;\r\n            steps.disabled = steps2.disabled = !quantized.checked;\r\n            if (quantized.checked) {\r\n                _this.updateGradients(Number.parseInt(steps.value, 10));\r\n                updateSelectedColor();\r\n            }\r\n        };\r\n    };\r\n    ColorMappingDialog.prototype.reset = function () {\r\n        var desc = this.column.desc;\r\n        var colorMapping = this.ctx.provider.getTypeFactory().colorMappingFunction(desc.colorMapping || desc.color);\r\n        this.render(this.node.querySelector(\".\" + cssClass('dialog-color')), colorMapping);\r\n    };\r\n    ColorMappingDialog.prototype.submit = function () {\r\n        this.applyColor();\r\n        return true;\r\n    };\r\n    ColorMappingDialog.prototype.cancel = function () {\r\n        this.column.setColorMapping(this.before);\r\n    };\r\n    ColorMappingDialog.prototype.updateGradients = function (steps) {\r\n        this.forEach(\"span[data-c]\", function (d) {\r\n            var key = d.dataset.c;\r\n            var s = SequentialColorFunction.FUNCTIONS[key];\r\n            if (s) {\r\n                d.style.background = steps < 0 ? gradient(s, 9) : steppedGradient(s, steps);\r\n                return;\r\n            }\r\n            var di = DivergentColorFunction.FUNCTIONS[key];\r\n            if (di) {\r\n                d.style.background = steps < 0 ? gradient(di, 11) : steppedGradient(di, steps);\r\n                return;\r\n            }\r\n        });\r\n    };\r\n    return ColorMappingDialog;\r\n}(ADialog));\r\nexport default ColorMappingDialog;\r\nfunction toColor(input, node) {\r\n    switch (input.value) {\r\n        case 'custom:solid':\r\n            return new SolidColorFunction(node.querySelector('input[name=solid]').value);\r\n        case 'custom:sequential':\r\n            var s0 = node.querySelector('input[name=interpolate0]').value;\r\n            var s1 = node.querySelector('input[name=interpolate1]').value;\r\n            return new CustomColorMappingFunction([{ color: s0, value: 0 }, { color: s1, value: 1 }]);\r\n        case 'custom:diverging':\r\n            var dm1 = node.querySelector('input[name=divergentm1]').value;\r\n            var d0 = node.querySelector('input[name=divergent0]').value;\r\n            var d1 = node.querySelector('input[name=divergent1]').value;\r\n            return new CustomColorMappingFunction([{ color: dm1, value: 0 }, { color: d0, value: 0.5 }, { color: d1, value: 1 }]);\r\n    }\r\n    if (input.value in SequentialColorFunction.FUNCTIONS) {\r\n        return new SequentialColorFunction(input.value);\r\n    }\r\n    if (input.value in DivergentColorFunction.FUNCTIONS) {\r\n        return new DivergentColorFunction(input.value);\r\n    }\r\n    return new SolidColorFunction(input.value);\r\n}\r\nfunction gradient(interpolate, steps) {\r\n    if (steps === void 0) { steps = 2; }\r\n    if (steps <= 1) {\r\n        return \"\" + interpolate(0);\r\n    }\r\n    var stepSize = 1 / (steps - 1);\r\n    var r = \"linear-gradient(to right\";\r\n    for (var i = 0; i < steps; ++i) {\r\n        r += \", \" + interpolate(i * stepSize) + \" \" + round((i * stepSize) * 100, 2) + \"%\";\r\n    }\r\n    r += ')';\r\n    return r;\r\n}\r\nfunction steppedGradient(color, count) {\r\n    if (count === void 0) { count = 2; }\r\n    if (count === 1) {\r\n        return \"\" + color(0);\r\n    }\r\n    var r = \"linear-gradient(to right\";\r\n    var stepSize = 1 / count;\r\n    var half = stepSize / 2;\r\n    for (var i = 0; i < count; ++i) {\r\n        // stepped\r\n        // first and last at border else center\r\n        var shift = i === 0 ? 0 : (i === (count - 1) ? stepSize : half);\r\n        var c = color(i * stepSize + shift);\r\n        r += \", \" + c + \" \" + round((i * stepSize) * 100, 2) + \"%, \" + c + \" \" + round(((i + 1) * stepSize) * 100, 2) + \"%\";\r\n    }\r\n    r += ')';\r\n    return r;\r\n}\r\n//# sourceMappingURL=ColorMappingDialog.js.map","import { cssClass } from '../styles';\r\n/** @internal */\r\nexport function hasDnDType(e) {\r\n    var typesToCheck = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        typesToCheck[_i - 1] = arguments[_i];\r\n    }\r\n    var available = e.dataTransfer.types;\r\n    /*\r\n     * In Chrome datatransfer.types is an Array,\r\n     * while in Firefox it is a DOMStringList\r\n     * that only implements a contains-method!\r\n     */\r\n    if (typeof available.indexOf === 'function') {\r\n        return typesToCheck.some(function (type) { return available.indexOf(type) >= 0; });\r\n    }\r\n    if (typeof available.includes === 'function') {\r\n        return typesToCheck.some(function (type) { return available.includes(type); });\r\n    }\r\n    if (typeof available.contains === 'function') {\r\n        return typesToCheck.some(function (type) { return available.contains(type); });\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * helper storage for dnd in edge since edge doesn't support custom mime-types\r\n * @type {Map<number, {[p: string]: string}>}\r\n */\r\nvar dndTransferStorage = new Map();\r\nfunction isEdgeDnD(e) {\r\n    return dndTransferStorage.size > 0 && hasDnDType(e, 'text/plain');\r\n}\r\n/**\r\n * checks whether it is a copy operation\r\n * @param e\r\n * @returns {boolean|RegExpMatchArray}\r\n * @internal\r\n */\r\nexport function copyDnD(e) {\r\n    var dT = e.dataTransfer;\r\n    return Boolean((e.ctrlKey && dT.effectAllowed.match(/copy/gi)) || (!dT.effectAllowed.match(/move/gi)));\r\n}\r\n/**\r\n * updates the drop effect accoriding to the current copyDnD state\r\n * @param e\r\n * @internal\r\n */\r\nexport function updateDropEffect(e) {\r\n    var dT = e.dataTransfer;\r\n    if (copyDnD(e)) {\r\n        dT.dropEffect = 'copy';\r\n    }\r\n    else {\r\n        dT.dropEffect = 'move';\r\n    }\r\n}\r\nvar idCounter = 0;\r\n/**\r\n * add drag support for the given element\r\n * @param {HTMLElement} node\r\n * @param {() => IDragStartResult} onDragStart callback to compute the payload an object of mime types\r\n * @param {boolean} stopPropagation whether to stop propagation in case of success\r\n * @internal\r\n */\r\nexport function dragAble(node, onDragStart, stopPropagation) {\r\n    if (stopPropagation === void 0) { stopPropagation = false; }\r\n    var id = ++idCounter;\r\n    node.classList.add(cssClass('dragable'));\r\n    node.draggable = true;\r\n    node.addEventListener('dragstart', function (e) {\r\n        node.classList.add(cssClass('dragging'));\r\n        var payload = onDragStart();\r\n        e.dataTransfer.effectAllowed = payload.effectAllowed;\r\n        if (stopPropagation) {\r\n            e.stopPropagation();\r\n        }\r\n        // copy all data transfer objects\r\n        var keys = Object.keys(payload.data);\r\n        var allSucceded = keys.every(function (k) {\r\n            try {\r\n                e.dataTransfer.setData(k, payload.data[k]);\r\n                return true;\r\n            }\r\n            catch (e) {\r\n                return false;\r\n            }\r\n        });\r\n        if (allSucceded) {\r\n            return;\r\n        }\r\n        //compatibility mode for edge\r\n        var text = payload.data['text/plain'] || '';\r\n        e.dataTransfer.setData('text/plain', \"\" + id + (text ? \": \" + text : ''));\r\n        dndTransferStorage.set(id, payload.data);\r\n    });\r\n    node.addEventListener('dragend', function (e) {\r\n        node.classList.remove(cssClass('dragging'));\r\n        if (stopPropagation) {\r\n            e.stopPropagation();\r\n        }\r\n        if (dndTransferStorage.size > 0) {\r\n            //clear the id\r\n            dndTransferStorage.delete(id);\r\n        }\r\n        // remove all\r\n        var over = node.ownerDocument.getElementsByClassName(cssClass('dragover'))[0];\r\n        if (over) {\r\n            over.classList.remove(cssClass('dragover'));\r\n        }\r\n    });\r\n}\r\n/**\r\n * add dropable support for the given node\r\n * @param {HTMLElement} node\r\n * @param {string[]} mimeTypes mimeTypes to look for\r\n * @param {(result: IDropResult, e: DragEvent) => boolean} onDrop callback when dropped, returns true if the drop was successful\r\n * @param {(e: DragEvent) => void} onDragOver optional drag over handler, e.g. for special effects\r\n * @param {boolean} stopPropagation flag if the event propagation should be stopped in case of success\r\n * @param {() => boolean} optional whether to enable dropping at all\r\n * @internal\r\n */\r\nexport function dropAble(node, mimeTypes, onDrop, onDragOver, stopPropagation, canDrop) {\r\n    if (onDragOver === void 0) { onDragOver = null; }\r\n    if (stopPropagation === void 0) { stopPropagation = false; }\r\n    if (canDrop === void 0) { canDrop = (function () { return true; }); }\r\n    node.addEventListener('dragenter', function (e) {\r\n        //var xy = mouse($node.node());\r\n        if (node.classList.contains(cssClass('dragging')) || !(hasDnDType.apply(void 0, [e].concat(mimeTypes)) || isEdgeDnD(e)) || !canDrop()) {\r\n            // not a valid mime type\r\n            node.classList.remove(cssClass('dragover'));\r\n            return;\r\n        }\r\n        node.classList.add(cssClass('dragover'));\r\n        if (stopPropagation) {\r\n            e.stopPropagation();\r\n        }\r\n        //sounds good\r\n        return false;\r\n    });\r\n    node.addEventListener('dragover', function (e) {\r\n        if (node.classList.contains(cssClass('dragging')) || !(hasDnDType.apply(void 0, [e].concat(mimeTypes)) || isEdgeDnD(e)) || !canDrop()) {\r\n            // not a valid mime type\r\n            return;\r\n        }\r\n        e.preventDefault();\r\n        updateDropEffect(e);\r\n        node.classList.add(cssClass('dragover'));\r\n        if (stopPropagation) {\r\n            e.stopPropagation();\r\n        }\r\n        if (onDragOver) {\r\n            onDragOver(e);\r\n        }\r\n        //sound good\r\n        return false;\r\n    });\r\n    node.addEventListener('dragleave', function (evt) {\r\n        // same fix as in phovea\r\n        evt.target.classList.remove(cssClass('dragover'));\r\n    });\r\n    node.addEventListener('drop', function (e) {\r\n        e.preventDefault();\r\n        if (stopPropagation) {\r\n            e.stopPropagation();\r\n        }\r\n        updateDropEffect(e);\r\n        var effect = e.dataTransfer.dropEffect;\r\n        node.classList.remove(cssClass('dragover'));\r\n        if (isEdgeDnD(e)) {\r\n            // retrieve from helper\r\n            var base = e.dataTransfer.getData('text/plain');\r\n            var id = parseInt(base.indexOf(':') >= 0 ? base.substring(0, base.indexOf(':')) : base, 10);\r\n            if (dndTransferStorage.has(id)) {\r\n                var data_1 = dndTransferStorage.get(id);\r\n                dndTransferStorage.delete(id);\r\n                return !onDrop({ effect: effect, data: data_1 }, e);\r\n            }\r\n            return;\r\n        }\r\n        if (!hasDnDType.apply(void 0, [e].concat(mimeTypes))) {\r\n            return;\r\n        }\r\n        // copy sub mime types\r\n        var data = {};\r\n        //selects the data contained in the data transfer\r\n        mimeTypes.forEach(function (mime) {\r\n            var value = e.dataTransfer.getData(mime);\r\n            if (value !== '') {\r\n                data[mime] = value;\r\n            }\r\n        });\r\n        return !onDrop({ effect: effect, data: data }, e);\r\n    });\r\n}\r\n//# sourceMappingURL=dnd.js.map","import * as tslib_1 from \"tslib\";\r\nimport { createToolbarMenuItems, updateIconState } from '../header';\r\nimport { cssClass } from '../../styles';\r\nimport APopup from './APopup';\r\n/** @internal */\r\nvar MoreColumnOptionsDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(MoreColumnOptionsDialog, _super);\r\n    function MoreColumnOptionsDialog(column, dialog, mode, ctx) {\r\n        var _this = _super.call(this, dialog, {\r\n            autoClose: true\r\n        }) || this;\r\n        _this.column = column;\r\n        _this.mode = mode;\r\n        _this.ctx = ctx;\r\n        return _this;\r\n    }\r\n    MoreColumnOptionsDialog.prototype.build = function (node) {\r\n        node.classList.add(cssClass('more-options'));\r\n        node.dataset.colId = this.column.id;\r\n        createToolbarMenuItems(node, this.dialog.level + 1, this.column, this.ctx, this.mode);\r\n        updateIconState(node, this.column);\r\n    };\r\n    return MoreColumnOptionsDialog;\r\n}(APopup));\r\nexport default MoreColumnOptionsDialog;\r\n//# sourceMappingURL=MoreColumnOptionsDialog.js.map","import { MIN_LABEL_WIDTH } from '../constants';\r\nimport { equalArrays, dragAble, dropAble, hasDnDType } from '../internal';\r\nimport { categoryOf, getSortType } from '../model';\r\nimport { createNestedDesc, createReduceDesc, createStackDesc, isArrayColumn, isBoxPlotColumn, isCategoricalColumn, isMapColumn, isNumberColumn, isNumbersColumn, ImpositionCompositeColumn, ImpositionCompositesColumn, createImpositionDesc, createImpositionsDesc, ImpositionBoxPlotColumn, createImpositionBoxPlotDesc, CompositeColumn, isMultiLevelColumn } from '../model';\r\nimport { aria, cssClass, engineCssClass, RESIZE_ANIMATION_DURATION, RESIZE_SPACE } from '../styles';\r\nimport MoreColumnOptionsDialog from './dialogs/MoreColumnOptionsDialog';\r\nimport { getToolbar } from './toolbar';\r\nimport { dialogContext } from './dialogs';\r\n/** @internal */\r\nexport function createHeader(col, ctx, options) {\r\n    if (options === void 0) { options = {}; }\r\n    options = Object.assign({\r\n        dragAble: true,\r\n        mergeDropAble: true,\r\n        rearrangeAble: true,\r\n        resizeable: true,\r\n        level: 0,\r\n        extraPrefix: ''\r\n    }, options);\r\n    var node = ctx.document.createElement('section');\r\n    var extra = options.extraPrefix ? function (name) { return cssClass(name) + \" \" + cssClass(options.extraPrefix + \"-\" + name); } : cssClass;\r\n    var summary = col.getMetaData().summary;\r\n    node.innerHTML = \"\\n    <div class=\\\"\" + extra('label') + \" \" + cssClass('typed-icon') + \"\\\">\" + (col.getWidth() < MIN_LABEL_WIDTH ? '&nbsp;' : col.label) + \"</div>\\n    <div class=\\\"\" + extra('sublabel') + \"\\\">\" + (col.getWidth() < MIN_LABEL_WIDTH || !summary ? '&nbsp;' : summary) + \"</div>\\n    <div class=\\\"\" + extra('toolbar') + \"\\\"></div>\\n    <div class=\\\"\" + extra('spacing') + \"\\\"></div>\\n    <div class=\\\"\" + extra('handle') + \" \" + cssClass('feature-advanced') + \" \" + cssClass('feature-ui') + \"\\\"></div>\\n  \";\r\n    // addTooltip(node, col);\r\n    createShortcutMenuItems(node.getElementsByClassName(cssClass('toolbar'))[0], options.level, col, ctx, 'header');\r\n    toggleToolbarIcons(node, col);\r\n    if (options.dragAble) {\r\n        dragAbleColumn(node, col, ctx);\r\n    }\r\n    if (options.mergeDropAble) {\r\n        mergeDropAble(node, col, ctx);\r\n    }\r\n    if (options.rearrangeAble) {\r\n        rearrangeDropAble(node.getElementsByClassName(cssClass('handle'))[0], col, ctx);\r\n    }\r\n    if (options.resizeable) {\r\n        dragWidth(col, node);\r\n    }\r\n    return node;\r\n}\r\n/** @internal */\r\nexport function updateHeader(node, col, minWidth) {\r\n    if (minWidth === void 0) { minWidth = MIN_LABEL_WIDTH; }\r\n    var label = node.getElementsByClassName(cssClass('label'))[0];\r\n    label.innerHTML = col.getWidth() < minWidth ? '&nbsp;' : col.label;\r\n    var summary = col.getMetaData().summary;\r\n    var sublabel = node.getElementsByClassName(cssClass('sublabel'))[0];\r\n    if (sublabel) {\r\n        sublabel.innerHTML = col.getWidth() < minWidth || !summary ? '&nbsp;' : summary;\r\n    }\r\n    var title = col.label;\r\n    if (summary) {\r\n        title = title + \"\\n\" + summary;\r\n    }\r\n    if (col.description) {\r\n        title = title + \"\\n\" + col.description;\r\n    }\r\n    node.title = title;\r\n    node.dataset.colId = col.id;\r\n    node.dataset.type = col.desc.type;\r\n    label.dataset.typeCat = categoryOf(col).name;\r\n    updateIconState(node, col);\r\n    updateMoreDialogIcons(node, col);\r\n}\r\nfunction updateMoreDialogIcons(node, col) {\r\n    var root = node.closest(\".\" + cssClass());\r\n    if (!root) {\r\n        return;\r\n    }\r\n    var dialog = root.querySelector(\".\" + cssClass('more-options') + \"[data-col-id=\\\"\" + col.id + \"\\\"]\");\r\n    if (!dialog) {\r\n        return;\r\n    }\r\n    updateIconState(dialog, col);\r\n}\r\n/** @internal */\r\nexport function updateIconState(node, col) {\r\n    var sort = node.getElementsByClassName(cssClass('action-sort'))[0];\r\n    if (sort) {\r\n        var _a = col.isSortedByMe(), asc = _a.asc, priority = _a.priority;\r\n        sort.dataset.sort = asc !== undefined ? asc : '';\r\n        sort.dataset.type = getSortType(col);\r\n        if (priority !== undefined) {\r\n            sort.dataset.priority = (priority + 1).toString();\r\n        }\r\n        else {\r\n            delete sort.dataset.priority;\r\n        }\r\n    }\r\n    var sortGroups = node.getElementsByClassName(cssClass('action-sort-groups'))[0];\r\n    if (sortGroups) {\r\n        var _b = col.isGroupSortedByMe(), asc = _b.asc, priority = _b.priority;\r\n        sortGroups.dataset.sort = asc !== undefined ? asc : '';\r\n        sortGroups.dataset.type = getSortType(col);\r\n        if (priority !== undefined) {\r\n            sortGroups.dataset.priority = (priority + 1).toString();\r\n        }\r\n        else {\r\n            delete sortGroups.dataset.priority;\r\n        }\r\n    }\r\n    var group = node.getElementsByClassName(cssClass('action-group'))[0];\r\n    if (group) {\r\n        var groupedBy = col.isGroupedBy();\r\n        group.dataset.group = groupedBy >= 0 ? 'true' : 'false';\r\n        if (groupedBy >= 0) {\r\n            group.dataset.priority = (groupedBy + 1).toString();\r\n        }\r\n        else {\r\n            delete group.dataset.priority;\r\n        }\r\n    }\r\n    var filter = node.getElementsByClassName(cssClass('action-filter'))[0];\r\n    if (!filter) {\r\n        return;\r\n    }\r\n    if (col.isFiltered()) {\r\n        filter.dataset.active = '';\r\n    }\r\n    else {\r\n        delete filter.dataset.active;\r\n    }\r\n}\r\n/** @internal */\r\nexport function actionCSSClass(title) {\r\n    if (title.endsWith('&hellip;')) {\r\n        title = title.slice(0, -'&hellip;'.length - 1);\r\n    }\r\n    if (title.endsWith('By')) {\r\n        title = title.slice(0, -3);\r\n    }\r\n    var clean = title.toLowerCase().replace(/[ +-]/mg, '-');\r\n    return cssClass('action') + \" \" + cssClass(\"action-\" + clean);\r\n}\r\nfunction addIconDOM(node, col, ctx, level, showLabel, mode) {\r\n    return function (action) {\r\n        var m = isActionMode(col, action, mode, 'shortcut') ? 'o' : isActionMode(col, action, mode, 'menu+shortcut') ? 's' : 'r';\r\n        node.insertAdjacentHTML('beforeend', \"<i data-a=\\\"\" + m + \"\\\" title=\\\"\" + action.title + \"\\\" class=\\\"\" + actionCSSClass(action.title.toString()) + \" \" + cssClass(\"feature-\" + (action.options.featureLevel || 'basic')) + \" \" + cssClass(\"feature-\" + (action.options.featureCategory || 'others')) + \"\\\"><span\" + (!showLabel ? \" class=\\\"\" + cssClass('aria') + \"\\\" aria-hidden=\\\"true\\\"\" : '') + \">\" + action.title + \"</span> </i>\");\r\n        var i = node.lastElementChild;\r\n        i.onclick = function (evt) {\r\n            evt.stopPropagation();\r\n            ctx.dialogManager.setHighlightColumn(col);\r\n            action.onClick(col, evt, ctx, level, !showLabel);\r\n        };\r\n        return i;\r\n    };\r\n}\r\nfunction isActionMode(col, d, mode, value) {\r\n    var s = d.options.mode === undefined ? 'menu' : d.options.mode;\r\n    if (s === value) {\r\n        return true;\r\n    }\r\n    if (typeof s === 'function') {\r\n        return s(col, mode) === value;\r\n    }\r\n    return false;\r\n}\r\n/** @internal */\r\nexport function createShortcutMenuItems(node, level, col, ctx, mode, willAutoHide) {\r\n    if (willAutoHide === void 0) { willAutoHide = true; }\r\n    var addIcon = addIconDOM(node, col, ctx, level, false, mode);\r\n    var toolbar = getToolbar(col, ctx);\r\n    var shortcuts = toolbar.filter(function (d) { return !isActionMode(col, d, mode, 'menu'); });\r\n    var hybrids = shortcuts.reduce(function (a, b) { return a + (isActionMode(col, b, mode, 'menu+shortcut') ? 1 : 0); }, 0);\r\n    shortcuts.forEach(addIcon);\r\n    var moreEntries = toolbar.length - shortcuts.length + hybrids;\r\n    if (shortcuts.length === toolbar.length || (moreEntries === hybrids && !willAutoHide)) {\r\n        // all visible or just hybrids that will always be visible\r\n        return;\r\n    }\r\n    // need a more entry\r\n    node.insertAdjacentHTML('beforeend', \"<i data-a=\\\"m\\\" data-m=\\\"\" + moreEntries + \"\\\" title=\\\"More &hellip;\\\" class=\\\"\" + actionCSSClass('More') + \"\\\">\" + aria('More &hellip;') + \"</i>\");\r\n    var i = node.lastElementChild;\r\n    i.onclick = function (evt) {\r\n        evt.stopPropagation();\r\n        ctx.dialogManager.setHighlightColumn(col);\r\n        var dialog = new MoreColumnOptionsDialog(col, dialogContext(ctx, level, evt), mode, ctx);\r\n        dialog.open();\r\n    };\r\n}\r\n/** @internal */\r\nexport function createToolbarMenuItems(node, level, col, ctx, mode) {\r\n    var addIcon = addIconDOM(node, col, ctx, level, true, mode);\r\n    getToolbar(col, ctx).filter(function (d) { return !isActionMode(col, d, mode, 'shortcut'); }).forEach(addIcon);\r\n}\r\n/** @internal */\r\nfunction toggleRotatedHeader(node, col, defaultVisibleClientWidth) {\r\n    // rotate header flag if needed\r\n    var label = node.getElementsByClassName(cssClass('label'))[0];\r\n    if (col.getWidth() < MIN_LABEL_WIDTH) {\r\n        label.classList.remove(\".\" + cssClass('rotated'));\r\n        return;\r\n    }\r\n    var width = label.clientWidth;\r\n    var rotated = width <= 0 ? (col.label.length * defaultVisibleClientWidth / 3 * 0.6 > col.getWidth()) : (label.scrollWidth * 0.6 > label.clientWidth);\r\n    label.classList.toggle(\".\" + cssClass('rotated'), rotated);\r\n}\r\n/** @internal */\r\nfunction toggleToolbarIcons(node, col, defaultVisibleClientWidth) {\r\n    if (defaultVisibleClientWidth === void 0) { defaultVisibleClientWidth = 22.5; }\r\n    toggleRotatedHeader(node, col, defaultVisibleClientWidth);\r\n    var toolbar = node.getElementsByClassName(cssClass('toolbar'))[0];\r\n    if (toolbar.childElementCount === 0) {\r\n        return;\r\n    }\r\n    var availableWidth = col.getWidth();\r\n    var actions = Array.from(toolbar.children).map(function (d) { return ({ node: d, width: d.clientWidth > 0 ? d.clientWidth : defaultVisibleClientWidth }); });\r\n    var shortCuts = actions.filter(function (d) { return d.node.dataset.a === 'o'; });\r\n    var hybrids = actions.filter(function (d) { return d.node.dataset.a === 's'; });\r\n    var moreIcon = actions.find(function (d) { return d.node.dataset.a === 'm'; });\r\n    var moreEntries = moreIcon ? parseInt(moreIcon.node.dataset.m, 10) : 0;\r\n    var needMore = moreEntries > hybrids.length;\r\n    var total = actions.reduce(function (a, b) { return a + b.width; }, 0);\r\n    for (var _i = 0, actions_1 = actions; _i < actions_1.length; _i++) {\r\n        var action = actions_1[_i];\r\n        // maybe hide not needed \"more\"\r\n        action.node.classList.remove(cssClass('hidden'));\r\n    }\r\n    // all visible\r\n    if (total < availableWidth) {\r\n        return;\r\n    }\r\n    if (moreIcon && !needMore && (total - moreIcon.width) < availableWidth) {\r\n        // available space is enougth we can skip the \"more\" and then it fits\r\n        moreIcon.node.classList.add(cssClass('hidden'));\r\n        return;\r\n    }\r\n    for (var _a = 0, _b = hybrids.reverse().concat(shortCuts.reverse()); _a < _b.length; _a++) { // back to forth and hybrids earlier than pure shortcuts\r\n        var action = _b[_a];\r\n        // hide and check if enough\r\n        action.node.classList.add(cssClass('hidden'));\r\n        total -= action.width;\r\n        if (total < availableWidth) {\r\n            return;\r\n        }\r\n    }\r\n}\r\n/**\r\n * allow to change the width of a column using dragging the handle\r\n * @internal\r\n */\r\nexport function dragWidth(col, node) {\r\n    var ueberElement;\r\n    var sizeHelper;\r\n    var currentFooterTransformation = '';\r\n    var handle = node.getElementsByClassName(cssClass('handle'))[0];\r\n    var start = 0;\r\n    var originalWidth = 0;\r\n    var mouseMove = function (evt) {\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n        var end = evt.clientX;\r\n        var delta = end - start;\r\n        if (Math.abs(start - end) < 2) {\r\n            //ignore\r\n            return;\r\n        }\r\n        start = end;\r\n        var width = Math.max(0, col.getWidth() + delta);\r\n        sizeHelper.classList.toggle(cssClass('resize-animated'), width < originalWidth);\r\n        // no idea why shifted by the size compared to the other footer element\r\n        sizeHelper.style.transform = currentFooterTransformation + \" translate(\" + (width - originalWidth - RESIZE_SPACE) + \"px, 0px)\";\r\n        node.style.width = width + \"px\";\r\n        col.setWidth(width);\r\n        toggleToolbarIcons(node, col);\r\n    };\r\n    var mouseUp = function (evt) {\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n        var end = evt.clientX;\r\n        node.classList.remove(cssClass('change-width'));\r\n        ueberElement.removeEventListener('mousemove', mouseMove);\r\n        ueberElement.removeEventListener('mouseup', mouseUp);\r\n        ueberElement.removeEventListener('mouseleave', mouseUp);\r\n        ueberElement.classList.remove(cssClass('resizing'));\r\n        node.style.width = null;\r\n        setTimeout(function () {\r\n            sizeHelper.classList.remove(cssClass('resizing'), cssClass('resize-animated'));\r\n        }, RESIZE_ANIMATION_DURATION * 1.2); // after animation ended\r\n        if (Math.abs(start - end) < 2) {\r\n            //ignore\r\n            return;\r\n        }\r\n        var delta = end - start;\r\n        var width = Math.max(0, col.getWidth() + delta);\r\n        col.setWidth(width);\r\n        toggleToolbarIcons(node, col);\r\n    };\r\n    handle.onmousedown = function (evt) {\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n        node.classList.add(cssClass('change-width'));\r\n        originalWidth = col.getWidth();\r\n        start = evt.clientX;\r\n        ueberElement = node.closest('body') || node.closest(\".\" + cssClass()); // take the whole body or root lineup\r\n        ueberElement.addEventListener('mousemove', mouseMove);\r\n        ueberElement.addEventListener('mouseup', mouseUp);\r\n        ueberElement.addEventListener('mouseleave', mouseUp);\r\n        ueberElement.classList.add(cssClass('resizing'));\r\n        sizeHelper = node.closest(\".\" + engineCssClass()).querySelector(\".\" + cssClass('resize-helper'));\r\n        currentFooterTransformation = sizeHelper.previousElementSibling.style.transform;\r\n        sizeHelper.style.transform = currentFooterTransformation + \" translate(\" + -RESIZE_SPACE + \"px, 0px)\";\r\n        sizeHelper.classList.add(cssClass('resizing'));\r\n    };\r\n    handle.onclick = function (evt) {\r\n        // avoid resorting\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n    };\r\n}\r\n/** @internal */\r\nexport var MIMETYPE_PREFIX = 'text/x-caleydo-lineup-column';\r\n/**\r\n * allow to drag the column away\r\n * @internal\r\n */\r\nexport function dragAbleColumn(node, column, ctx) {\r\n    dragAble(node, function () {\r\n        var _a;\r\n        var ref = JSON.stringify(ctx.provider.toDescRef(column.desc));\r\n        var data = (_a = {\r\n                'text/plain': column.label\r\n            },\r\n            _a[MIMETYPE_PREFIX + \"-ref\"] = column.id,\r\n            _a[MIMETYPE_PREFIX] = ref,\r\n            _a);\r\n        if (isNumberColumn(column)) {\r\n            data[MIMETYPE_PREFIX + \"-number\"] = ref;\r\n            data[MIMETYPE_PREFIX + \"-number-ref\"] = column.id;\r\n        }\r\n        if (isCategoricalColumn(column)) {\r\n            data[MIMETYPE_PREFIX + \"-categorical\"] = ref;\r\n            data[MIMETYPE_PREFIX + \"-categorical-ref\"] = column.id;\r\n        }\r\n        if (isBoxPlotColumn(column)) {\r\n            data[MIMETYPE_PREFIX + \"-boxplot\"] = ref;\r\n            data[MIMETYPE_PREFIX + \"-boxplot-ref\"] = column.id;\r\n        }\r\n        if (isMapColumn(column)) {\r\n            data[MIMETYPE_PREFIX + \"-map\"] = ref;\r\n            data[MIMETYPE_PREFIX + \"-map-ref\"] = column.id;\r\n        }\r\n        if (isArrayColumn(column)) {\r\n            data[MIMETYPE_PREFIX + \"-array\"] = ref;\r\n            data[MIMETYPE_PREFIX + \"-array-ref\"] = column.id;\r\n        }\r\n        if (isNumbersColumn(column)) {\r\n            data[MIMETYPE_PREFIX + \"-numbers\"] = ref;\r\n            data[MIMETYPE_PREFIX + \"-numbers-ref\"] = column.id;\r\n        }\r\n        return {\r\n            effectAllowed: 'copyMove',\r\n            data: data\r\n        };\r\n    }, true);\r\n}\r\n/**\r\n * dropper for allowing to rearrange (move, copy) columns\r\n * @internal\r\n */\r\nexport function rearrangeDropAble(node, column, ctx) {\r\n    dropAble(node, [MIMETYPE_PREFIX + \"-ref\", MIMETYPE_PREFIX], function (result) {\r\n        var col = null;\r\n        var data = result.data;\r\n        if (!(MIMETYPE_PREFIX + \"-ref\" in data)) {\r\n            var desc = JSON.parse(data[MIMETYPE_PREFIX]);\r\n            col = ctx.provider.create(ctx.provider.fromDescRef(desc));\r\n            return col != null && column.insertAfterMe(col) != null;\r\n        }\r\n        // find by reference\r\n        var id = data[MIMETYPE_PREFIX + \"-ref\"];\r\n        col = ctx.provider.find(id);\r\n        if (!col || (col === column && !result.effect.startsWith('copy'))) {\r\n            return false;\r\n        }\r\n        if (result.effect.startsWith('copy')) {\r\n            col = ctx.provider.clone(col);\r\n            return col != null && column.insertAfterMe(col) != null;\r\n        }\r\n        // detect whether it is an internal move operation or an real remove/insert operation\r\n        var toInsertParent = col.parent;\r\n        if (!toInsertParent) { // no parent will always be a move\r\n            return column.insertAfterMe(col) != null;\r\n        }\r\n        if (toInsertParent === column.parent) {\r\n            // move operation\r\n            return toInsertParent.moveAfter(col, column) != null;\r\n        }\r\n        col.removeMe();\r\n        return column.insertAfterMe(col) != null;\r\n    }, null, true);\r\n}\r\n/**\r\n * dropper for allowing to change the order by dropping it at a certain position\r\n * @internal\r\n */\r\nexport function resortDropAble(node, column, ctx, where, autoGroup) {\r\n    dropAble(node, [MIMETYPE_PREFIX + \"-ref\", MIMETYPE_PREFIX], function (result) {\r\n        var col = null;\r\n        var data = result.data;\r\n        if (MIMETYPE_PREFIX + \"-ref\" in data) {\r\n            var id = data[MIMETYPE_PREFIX + \"-ref\"];\r\n            col = ctx.provider.find(id);\r\n            if (!col || col === column) {\r\n                return false;\r\n            }\r\n        }\r\n        else {\r\n            var desc = JSON.parse(data[MIMETYPE_PREFIX]);\r\n            col = ctx.provider.create(ctx.provider.fromDescRef(desc));\r\n            if (col) {\r\n                column.findMyRanker().push(col);\r\n            }\r\n        }\r\n        var ranking = column.findMyRanker();\r\n        if (!col || col === column || !ranking) {\r\n            return false;\r\n        }\r\n        var criteria = ranking.getSortCriteria();\r\n        var groups = ranking.getGroupCriteria();\r\n        var removeFromSort = function (col) {\r\n            var existing = criteria.findIndex(function (d) { return d.col === col; });\r\n            if (existing >= 0) { // remove existing column but keep asc state\r\n                return criteria.splice(existing, 1)[0].asc;\r\n            }\r\n            return false;\r\n        };\r\n        // remove the one to add\r\n        var asc = removeFromSort(col);\r\n        var groupIndex = groups.indexOf(column);\r\n        var index = criteria.findIndex(function (d) { return d.col === column; });\r\n        if (autoGroup && groupIndex >= 0) {\r\n            // before the grouping, so either ungroup or regroup\r\n            removeFromSort(column);\r\n            if (isCategoricalColumn(col)) { // we can group by it\r\n                groups.splice(groupIndex + (where === 'after' ? 1 : 0), 0, col);\r\n            }\r\n            else {\r\n                // remove all before and shift to sorting + sorting\r\n                var removed = groups.splice(0, groups.length - groupIndex);\r\n                criteria.unshift.apply(criteria, removed.reverse().map(function (d) { return ({ asc: false, col: d }); })); // now a first sorting criteria\r\n                criteria.unshift({ asc: asc, col: col });\r\n            }\r\n        }\r\n        else if (index < 0) {\r\n            criteria.push({ asc: asc, col: col });\r\n        }\r\n        else if (index === 0 && autoGroup && isCategoricalColumn(col)) {\r\n            // make group criteria\r\n            groups.push(col);\r\n        }\r\n        else {\r\n            criteria.splice(index + (where === 'after' ? 1 : 0), 0, { asc: asc, col: col });\r\n        }\r\n        if (!equalArrays(groups, ranking.getGroupCriteria())) {\r\n            ranking.setGroupCriteria(groups);\r\n        }\r\n        ranking.setSortCriteria(criteria);\r\n        return true;\r\n    }, null, true);\r\n}\r\n/**\r\n * dropper for merging columns\r\n * @internal\r\n */\r\nexport function mergeDropAble(node, column, ctx) {\r\n    var resolveDrop = function (result) {\r\n        var data = result.data;\r\n        var copy = result.effect === 'copy';\r\n        var prefix = MIMETYPE_PREFIX;\r\n        var key = Object.keys(data).find(function (d) { return d.startsWith(prefix) && d.endsWith('-ref'); });\r\n        if (key) {\r\n            var id = data[key];\r\n            var col = ctx.provider.find(id);\r\n            if (copy) {\r\n                col = ctx.provider.clone(col);\r\n            }\r\n            else if (col === column) {\r\n                return null;\r\n            }\r\n            else {\r\n                col.removeMe();\r\n            }\r\n            return col;\r\n        }\r\n        var alternative = Object.keys(data).find(function (d) { return d.startsWith(prefix); });\r\n        if (!alternative) {\r\n            return null;\r\n        }\r\n        var desc = JSON.parse(alternative);\r\n        return ctx.provider.create(ctx.provider.fromDescRef(desc));\r\n    };\r\n    var pushChild = function (result) {\r\n        var col = resolveDrop(result);\r\n        return col != null && column.push(col) != null;\r\n    };\r\n    var mergeImpl = function (col, desc) {\r\n        if (col == null) {\r\n            return false;\r\n        }\r\n        var ranking = column.findMyRanker();\r\n        var index = ranking.indexOf(column);\r\n        var parent = ctx.provider.create(desc);\r\n        column.removeMe();\r\n        parent.push(column);\r\n        parent.push(col);\r\n        return ranking.insert(parent, index) != null;\r\n    };\r\n    var mergeWith = function (desc) { return function (result) {\r\n        var col = resolveDrop(result);\r\n        return mergeImpl(col, desc);\r\n    }; };\r\n    var all = [MIMETYPE_PREFIX + \"-ref\", MIMETYPE_PREFIX];\r\n    var numberish = [MIMETYPE_PREFIX + \"-number-ref\", MIMETYPE_PREFIX + \"-number\"];\r\n    var categorical = [MIMETYPE_PREFIX + \"-categorical-ref\", MIMETYPE_PREFIX + \"-categorical\"];\r\n    var boxplot = [MIMETYPE_PREFIX + \"-boxplot-ref\", MIMETYPE_PREFIX + \"-boxplot\"];\r\n    var numbers = [MIMETYPE_PREFIX + \"-numbers-ref\", MIMETYPE_PREFIX + \"-numbers\"];\r\n    node.dataset.draginfo = '+';\r\n    if (column instanceof ImpositionCompositeColumn) {\r\n        return dropAble(node, categorical.concat(numberish), pushChild, function (e) {\r\n            if (hasDnDType.apply(void 0, [e].concat(categorical))) {\r\n                node.dataset.draginfo = 'Color by';\r\n                return;\r\n            }\r\n            if (hasDnDType.apply(void 0, [e].concat(numberish))) {\r\n                node.dataset.draginfo = 'Wrap';\r\n            }\r\n        }, false, function () { return column.children.length < 2; });\r\n    }\r\n    if (column instanceof ImpositionBoxPlotColumn) {\r\n        return dropAble(node, categorical.concat(boxplot), pushChild, function (e) {\r\n            if (hasDnDType.apply(void 0, [e].concat(categorical))) {\r\n                node.dataset.draginfo = 'Color by';\r\n                return;\r\n            }\r\n            if (hasDnDType.apply(void 0, [e].concat(boxplot))) {\r\n                node.dataset.draginfo = 'Wrap';\r\n            }\r\n        }, false, function () { return column.children.length < 2; });\r\n    }\r\n    if (column instanceof ImpositionCompositesColumn) {\r\n        return dropAble(node, categorical.concat(numbers), pushChild, function (e) {\r\n            if (hasDnDType.apply(void 0, [e].concat(categorical))) {\r\n                node.dataset.draginfo = 'Color by';\r\n                return;\r\n            }\r\n            if (hasDnDType.apply(void 0, [e].concat(numbers))) {\r\n                node.dataset.draginfo = 'Wrap';\r\n            }\r\n        }, false, function () { return column.children.length < 2; });\r\n    }\r\n    if (isMultiLevelColumn(column)) {\r\n        // stack column or nested\r\n        return dropAble(node, column.canJustAddNumbers ? numberish : all, pushChild);\r\n    }\r\n    if (column instanceof CompositeColumn) {\r\n        return dropAble(node, column.canJustAddNumbers ? numberish : all, pushChild);\r\n    }\r\n    if (isNumbersColumn(column)) {\r\n        node.dataset.draginfo = 'Color by';\r\n        return dropAble(node, categorical, mergeWith(createImpositionsDesc()));\r\n    }\r\n    if (isBoxPlotColumn(column)) {\r\n        node.dataset.draginfo = 'Color by';\r\n        return dropAble(node, categorical, mergeWith(createImpositionBoxPlotDesc()));\r\n    }\r\n    if (isNumberColumn(column)) {\r\n        node.dataset.draginfo = 'Merge';\r\n        return dropAble(node, categorical.concat(numberish), function (result, evt) {\r\n            var col = resolveDrop(result);\r\n            if (col == null) {\r\n                return false;\r\n            }\r\n            if (isCategoricalColumn(col)) {\r\n                return mergeImpl(col, createImpositionDesc());\r\n            }\r\n            if (isNumberColumn(col)) {\r\n                return mergeImpl(col, evt.shiftKey ? createReduceDesc() : createStackDesc());\r\n            }\r\n            return false;\r\n        }, function (e) {\r\n            if (hasDnDType.apply(void 0, [e].concat(categorical))) {\r\n                node.dataset.draginfo = 'Color by';\r\n                return;\r\n            }\r\n            if (hasDnDType.apply(void 0, [e].concat(numberish))) {\r\n                node.dataset.draginfo = e.shiftKey ? 'Min/Max' : 'Sum';\r\n            }\r\n        });\r\n    }\r\n    node.dataset.draginfo = 'Group';\r\n    return dropAble(node, all, mergeWith(createNestedDesc()));\r\n}\r\n//# sourceMappingURL=header.js.map","import * as tslib_1 from \"tslib\";\r\nimport { debounce, clear, suffix } from '../../internal';\r\nimport { CompositeColumn } from '../../model';\r\nimport { createHeader, updateHeader } from '../header';\r\nimport { cssClass, engineCssClass } from '../../styles';\r\nimport APopup from './APopup';\r\n/** @internal */\r\nvar CompositeChildrenDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(CompositeChildrenDialog, _super);\r\n    function CompositeChildrenDialog(column, dialog, ctx) {\r\n        var _this = _super.call(this, dialog) || this;\r\n        _this.column = column;\r\n        _this.ctx = ctx;\r\n        _this.id = \".dialog\" + Math.random().toString(36).slice(-8).substr(0, 3);\r\n        return _this;\r\n    }\r\n    CompositeChildrenDialog.prototype.cleanUp = function (action) {\r\n        _super.prototype.cleanUp.call(this, action);\r\n        this.column.on(suffix(this.id, CompositeColumn.EVENT_ADD_COLUMN, CompositeColumn.EVENT_REMOVE_COLUMN), null);\r\n    };\r\n    CompositeChildrenDialog.prototype.build = function (node) {\r\n        var _this = this;\r\n        node.classList.add(cssClass('dialog-sub-nested'));\r\n        var createChildren = function () {\r\n            _this.column.children.forEach(function (c) {\r\n                var n = createHeader(c, _this.ctx, {\r\n                    mergeDropAble: false,\r\n                    resizeable: false,\r\n                    level: _this.dialog.level + 1,\r\n                    extraPrefix: 'sub'\r\n                });\r\n                n.className = cssClass('header');\r\n                updateHeader(n, c);\r\n                var summary = _this.ctx.summaryRenderer(c, false);\r\n                var summaryNode = _this.ctx.asElement(summary.template);\r\n                summaryNode.dataset.renderer = c.getSummaryRenderer();\r\n                summaryNode.classList.add(cssClass('summary'), cssClass('renderer'), cssClass('th-summary'));\r\n                var r = summary.update(summaryNode);\r\n                if (r) {\r\n                    summaryNode.classList.add(engineCssClass('loading'));\r\n                    r.then(function () {\r\n                        summaryNode.classList.remove(engineCssClass('loading'));\r\n                    });\r\n                }\r\n                n.appendChild(summaryNode);\r\n                node.appendChild(n);\r\n            });\r\n        };\r\n        createChildren();\r\n        this.column.on(suffix(this.id, CompositeColumn.EVENT_ADD_COLUMN, CompositeColumn.EVENT_REMOVE_COLUMN), debounce(function () {\r\n            if (!node.parentElement) {\r\n                // already closed\r\n                _this.destroy();\r\n                return;\r\n            }\r\n            clear(node);\r\n            createChildren();\r\n        }));\r\n    };\r\n    return CompositeChildrenDialog;\r\n}(APopup));\r\nexport default CompositeChildrenDialog;\r\n//# sourceMappingURL=CompositeChildrenDialog.js.map","import * as tslib_1 from \"tslib\";\r\nimport { resolveInnerNodes } from '../../model';\r\nimport ADialog from './ADialog';\r\n/** @internal */\r\nvar CutOffHierarchyDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(CutOffHierarchyDialog, _super);\r\n    function CutOffHierarchyDialog(column, dialog, idPrefix) {\r\n        var _this = _super.call(this, dialog, {\r\n            livePreview: 'cutOff'\r\n        }) || this;\r\n        _this.column = column;\r\n        _this.idPrefix = idPrefix;\r\n        _this.innerNodes = resolveInnerNodes(_this.column.hierarchy);\r\n        _this.innerNodePaths = _this.innerNodes.map(function (n) { return n.path; });\r\n        _this.before = column.getCutOff();\r\n        return _this;\r\n    }\r\n    CutOffHierarchyDialog.prototype.build = function (node) {\r\n        node.insertAdjacentHTML('beforeend', \"\\n        <input type=\\\"text\\\" value=\\\"\" + this.before.node.label + \"\\\" required=\\\"required\\\" autofocus=\\\"autofocus\\\" list=\\\"ui\" + this.idPrefix + \"lineupHierarchyList\\\" placeholder=\\\"cut off node\\\">\\n        <input type=\\\"number\\\" value=\\\"\" + (isFinite(this.before.maxDepth) ? this.before.maxDepth : '') + \"\\\" placeholder=\\\"max depth (&infin;)\\\">\\n        <datalist id=\\\"ui\" + this.idPrefix + \"lineupHierarchyList\\\">\" + this.innerNodes.map(function (node) { return \"<option value=\\\"\" + node.path + \"\\\">\" + node.label + \"</option>\"; }) + \"</datalist>\");\r\n        //custom validation\r\n        var innerNodePaths = this.innerNodePaths;\r\n        this.findInput('input[type=\"text\"]').addEventListener('change', function () {\r\n            var value = this.value;\r\n            if (innerNodePaths.indexOf(value) < 0) {\r\n                this.setCustomValidity('invalid node');\r\n            }\r\n            else {\r\n                this.setCustomValidity('');\r\n            }\r\n        }, {\r\n            passive: true\r\n        });\r\n        this.enableLivePreviews('input[type=text],input[type=number]');\r\n    };\r\n    CutOffHierarchyDialog.prototype.reset = function () {\r\n        this.findInput('input[type=\"text\"]').value = this.column.hierarchy.path;\r\n        this.findInput('input[type=\"number\"]').value = '';\r\n    };\r\n    CutOffHierarchyDialog.prototype.cancel = function () {\r\n        this.column.setCutOff(this.before);\r\n    };\r\n    CutOffHierarchyDialog.prototype.submit = function () {\r\n        var newNode = this.findInput('input[type=\"text\"]').value;\r\n        var newNodeIndex = this.innerNodePaths.indexOf(newNode);\r\n        var node = this.innerNodes[newNodeIndex];\r\n        var maxDepthText = this.findInput('input[type=\"number\"]').value;\r\n        var maxDepth = maxDepthText === '' ? Infinity : parseInt(maxDepthText, 10);\r\n        this.column.setCutOff({ node: node, maxDepth: maxDepth });\r\n        return true;\r\n    };\r\n    return CutOffHierarchyDialog;\r\n}(ADialog));\r\nexport default CutOffHierarchyDialog;\r\n//# sourceMappingURL=CutOffHierarchyDialog.js.map","import * as tslib_1 from \"tslib\";\r\nimport { noDateFilter } from '../../model/internalDate';\r\nimport { createDateFilter } from '../../renderer/DateHistogramCellRenderer';\r\nimport { cssClass } from '../../styles';\r\nimport ADialog from './ADialog';\r\n/** @internal */\r\nvar DateFilterDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(DateFilterDialog, _super);\r\n    function DateFilterDialog(column, dialog, ctx) {\r\n        var _this = _super.call(this, dialog, {\r\n            livePreview: 'filter',\r\n            cancelSubDialogs: true,\r\n        }) || this;\r\n        _this.column = column;\r\n        _this.ctx = ctx;\r\n        _this.handler = null;\r\n        _this.before = _this.column.getFilter() || noDateFilter();\r\n        return _this;\r\n    }\r\n    DateFilterDialog.prototype.build = function (node) {\r\n        node.classList.add(cssClass('dialog-mapper'));\r\n        this.handler = createDateFilter(this.column, node, {\r\n            dialogManager: this.ctx.dialogManager,\r\n            idPrefix: this.ctx.idPrefix,\r\n            tasks: this.ctx.provider.getTaskExecutor(),\r\n        }, this.showLivePreviews());\r\n    };\r\n    DateFilterDialog.prototype.cleanUp = function (action) {\r\n        _super.prototype.cleanUp.call(this, action);\r\n        this.handler.cleanUp();\r\n    };\r\n    DateFilterDialog.prototype.reset = function () {\r\n        this.handler.reset();\r\n    };\r\n    DateFilterDialog.prototype.submit = function () {\r\n        this.handler.submit();\r\n        return true;\r\n    };\r\n    DateFilterDialog.prototype.cancel = function () {\r\n        this.column.setFilter(this.before);\r\n    };\r\n    return DateFilterDialog;\r\n}(ADialog));\r\nexport default DateFilterDialog;\r\n//# sourceMappingURL=DateFilterDialog.js.map","import * as tslib_1 from \"tslib\";\r\nimport ADialog from './ADialog';\r\n/** @internal */\r\nvar EditPatternDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(EditPatternDialog, _super);\r\n    function EditPatternDialog(column, dialog, idPrefix) {\r\n        var _this = _super.call(this, dialog) || this;\r\n        _this.column = column;\r\n        _this.idPrefix = idPrefix;\r\n        _this.before = _this.column.getPattern();\r\n        return _this;\r\n    }\r\n    EditPatternDialog.prototype.build = function (node) {\r\n        var templates = this.column.patternTemplates;\r\n        node.insertAdjacentHTML('beforeend', \"<strong>Edit Pattern (access via ${value}, ${item})</strong><input\\n        type=\\\"text\\\"\\n        size=\\\"30\\\"\\n        value=\\\"\" + this.before + \"\\\"\\n        required\\n        autofocus\\n        placeholder=\\\"pattern (access via ${value}, ${item})\\\"\\n        \" + (templates.length > 0 ? \"list=\\\"ui\" + this.idPrefix + \"lineupPatternList\\\"\" : '') + \"\\n      >\");\r\n        if (templates.length > 0) {\r\n            node.insertAdjacentHTML('beforeend', \"<datalist id=\\\"ui\" + this.idPrefix + \"lineupPatternList\\\">\" + templates.map(function (t) { return \"<option value=\\\"\" + t + \"\\\">\"; }) + \"</datalist>\");\r\n        }\r\n        this.enableLivePreviews('input');\r\n    };\r\n    EditPatternDialog.prototype.cancel = function () {\r\n        this.column.setPattern(this.before);\r\n    };\r\n    EditPatternDialog.prototype.reset = function () {\r\n        this.node.querySelector('input').value = '';\r\n    };\r\n    EditPatternDialog.prototype.submit = function () {\r\n        var newValue = this.node.querySelector('input').value;\r\n        this.column.setPattern(newValue);\r\n        return true;\r\n    };\r\n    return EditPatternDialog;\r\n}(ADialog));\r\nexport default EditPatternDialog;\r\n//# sourceMappingURL=EditPatternDialog.js.map","import * as tslib_1 from \"tslib\";\r\nimport ADialog from './ADialog';\r\nimport { uniqueId, forEach } from './utils';\r\nimport { getToolbarDialogAddons } from '../toolbar';\r\nimport { cssClass } from '../../styles';\r\n/** @internal */\r\nvar GroupDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(GroupDialog, _super);\r\n    function GroupDialog(column, dialog, ctx) {\r\n        var _this = _super.call(this, dialog, {\r\n            livePreview: 'group'\r\n        }) || this;\r\n        _this.column = column;\r\n        _this.ctx = ctx;\r\n        _this.handlers = [];\r\n        return _this;\r\n    }\r\n    GroupDialog.prototype.build = function (node) {\r\n        var addons = getToolbarDialogAddons(this.column, 'group', this.ctx);\r\n        for (var _i = 0, addons_1 = addons; _i < addons_1.length; _i++) {\r\n            var addon = addons_1[_i];\r\n            this.node.insertAdjacentHTML('beforeend', \"<strong>\" + addon.title + \"</strong>\");\r\n            this.handlers.push(addon.append(this.column, this.node, this.dialog, this.ctx));\r\n        }\r\n        this.handlers.push(sortOrder(node, this.column, this.dialog.idPrefix));\r\n        for (var _a = 0, _b = this.handlers; _a < _b.length; _a++) {\r\n            var handler = _b[_a];\r\n            this.enableLivePreviews(handler.elems);\r\n        }\r\n    };\r\n    GroupDialog.prototype.submit = function () {\r\n        for (var _i = 0, _a = this.handlers; _i < _a.length; _i++) {\r\n            var handler = _a[_i];\r\n            if (handler.submit() === false) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    GroupDialog.prototype.cancel = function () {\r\n        for (var _i = 0, _a = this.handlers; _i < _a.length; _i++) {\r\n            var handler = _a[_i];\r\n            handler.cancel();\r\n        }\r\n    };\r\n    GroupDialog.prototype.reset = function () {\r\n        for (var _i = 0, _a = this.handlers; _i < _a.length; _i++) {\r\n            var handler = _a[_i];\r\n            handler.reset();\r\n        }\r\n    };\r\n    return GroupDialog;\r\n}(ADialog));\r\nexport default GroupDialog;\r\nfunction sortOrder(node, column, idPrefix) {\r\n    var ranking = column.findMyRanker();\r\n    var current = ranking.getGroupCriteria();\r\n    var order = current.indexOf(column);\r\n    var enabled = order >= 0;\r\n    if (order < 0) {\r\n        order = current.length;\r\n    }\r\n    var id = uniqueId(idPrefix);\r\n    node.insertAdjacentHTML('afterbegin', \"\\n        <strong>Group By</strong>\\n        <label class=\\\"\" + cssClass('checkbox') + \"\\\"><input type=\\\"radio\\\" name=\\\"grouped\\\" value=\\\"true\\\" \" + (enabled ? 'checked' : '') + \" ><span>Enabled</span></label>\\n        <label class=\\\"\" + cssClass('checkbox') + \"\\\"><input type=\\\"radio\\\" name=\\\"grouped\\\" value=\\\"false\\\" \" + (!enabled ? 'checked' : '') + \" ><span>Disabled</span></label>\\n        <strong>Group Priority</strong>\\n        <input type=\\\"number\\\" id=\\\"\" + id + \"P\\\" step=\\\"1\\\" min=\\\"1\\\" max=\\\"\" + (current.length + 1) + \"\\\" value=\\\"\" + (order + 1) + \"\\\">\\n    \");\r\n    var updateDisabled = function (disable) {\r\n        forEach(node, 'input:not([name=grouped]), select, textarea', function (d) {\r\n            d.disabled = disable;\r\n        });\r\n    };\r\n    updateDisabled(!enabled);\r\n    forEach(node, 'input[name=grouped]', function (n) {\r\n        n.addEventListener('change', function () {\r\n            var enabled = n.value === 'true';\r\n            updateDisabled(!enabled);\r\n        }, {\r\n            passive: true\r\n        });\r\n    });\r\n    return {\r\n        elems: \"input[name=grouped], #\" + id + \"P\",\r\n        submit: function () {\r\n            var enabled = node.querySelector('input[name=grouped]:checked').value === 'true';\r\n            var order = Number.parseInt(node.querySelector(\"#\" + id + \"P\").value, 10) - 1;\r\n            ranking.groupBy(column, !enabled ? -1 : order);\r\n            return true;\r\n        },\r\n        reset: function () {\r\n            node.querySelector('input[name=grouped][value=false]').checked = true;\r\n            node.querySelector(\"#\" + id + \"P\").value = (current.length + (!enabled ? 1 : 0)).toString();\r\n            updateDisabled(true);\r\n        },\r\n        cancel: function () {\r\n            ranking.groupBy(column, current.indexOf(column));\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=GroupDialog.js.map","import * as tslib_1 from \"tslib\";\r\nimport { round, similar, dragHandle } from '../../internal';\r\nimport ADialog from './ADialog';\r\nimport { cssClass } from '../../styles';\r\nfunction clamp(v) {\r\n    return Math.max(Math.min(v, 100), 0);\r\n}\r\n/** @internal */\r\nvar MappingLineDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(MappingLineDialog, _super);\r\n    function MappingLineDialog(line, dialog, adapter) {\r\n        var _this = _super.call(this, dialog, {\r\n            livePreview: 'dataMapping'\r\n        }) || this;\r\n        _this.line = line;\r\n        _this.adapter = adapter;\r\n        _this.dialog.attachment.classList.add(cssClass('mapping-line-selected'));\r\n        _this.before = {\r\n            domain: _this.line.domain,\r\n            range: _this.line.range\r\n        };\r\n        return _this;\r\n    }\r\n    MappingLineDialog.prototype.build = function (node) {\r\n        var _this = this;\r\n        var domain = this.adapter.domain();\r\n        node.insertAdjacentHTML('beforeend', \"\\n        <button class=\\\"\" + cssClass('dialog-button') + \" lu-action-remove\\\" title=\\\"Remove\\\" type=\\\"button\\\" \" + (this.line.frozen ? 'style=\"display: none\"' : '') + \" ><span style=\\\"margin-left: 3px\\\">Remove Mapping Line</span></button>\\n        <strong>Input Domain Value (min ... max)</strong>\\n        <input type=\\\"number\\\" value=\\\"\" + this.adapter.formatter(this.adapter.unnormalizeRaw(this.line.domain)) + \"\\\" \" + (this.line.frozen ? 'readonly disabled' : '') + \" autofocus required min=\\\"\" + domain[0] + \"\\\" max=\\\"\" + domain[1] + \"\\\" step=\\\"any\\\">\\n        <strong>Output Normalized Value (0 ... 1)</strong>\\n        <input type=\\\"number\\\" value=\\\"\" + round(this.line.range / 100, 3) + \"\\\" required min=\\\"0\\\" max=\\\"1\\\" step=\\\"any\\\">\\n      \");\r\n        this.find('button').addEventListener('click', function () {\r\n            _this.destroy('confirm');\r\n            _this.line.destroy();\r\n        }, {\r\n            passive: true\r\n        });\r\n        this.enableLivePreviews('input');\r\n    };\r\n    MappingLineDialog.prototype.cleanUp = function (action) {\r\n        _super.prototype.cleanUp.call(this, action);\r\n        this.dialog.attachment.classList.remove(cssClass('mapping-line-selected'));\r\n    };\r\n    MappingLineDialog.prototype.cancel = function () {\r\n        this.line.update(this.before.domain, this.before.range, true);\r\n    };\r\n    MappingLineDialog.prototype.reset = function () {\r\n        this.findInput('input[type=number]').value = round(this.adapter.unnormalizeRaw(this.before.domain), 3).toString();\r\n        this.findInput('input[type=number]:last-of-type').value = round(this.before.range / 100, 3).toString();\r\n    };\r\n    MappingLineDialog.prototype.submit = function () {\r\n        if (!this.node.checkValidity()) {\r\n            return false;\r\n        }\r\n        var domain = this.adapter.normalizeRaw(this.findInput('input[type=number]').valueAsNumber);\r\n        var range = this.findInput('input[type=number]:last-of-type').valueAsNumber * 100;\r\n        this.line.update(domain, range, true);\r\n        return true;\r\n    };\r\n    return MappingLineDialog;\r\n}(ADialog));\r\nexport default MappingLineDialog;\r\n/** @internal */\r\nvar MappingLine = /** @class */ (function () {\r\n    function MappingLine(g, domain, range, adapter) {\r\n        var _this = this;\r\n        this.domain = domain;\r\n        this.range = range;\r\n        this.adapter = adapter;\r\n        var h = 52;\r\n        g.insertAdjacentHTML('beforeend', \"<g class=\\\"\" + cssClass('dialog-mapper-mapping') + \"\\\" transform=\\\"translate(\" + domain + \",0)\\\">\\n      <line x1=\\\"0\\\" x2=\\\"\" + (range - domain) + \"\\\" y2=\\\"\" + h + \"\\\"></line>\\n      <line x1=\\\"0\\\" x2=\\\"\" + (range - domain) + \"\\\" y2=\\\"\" + h + \"\\\"></line>\\n      <circle r=\\\"2\\\"></circle>\\n      <circle cx=\\\"\" + (range - domain) + \"\\\" cy=\\\"\" + h + \"\\\" r=\\\"2\\\"></circle>\\n      <text class=\\\"\" + cssClass('dialog-mapper-mapping-domain') + \" \" + (domain > 25 && domain < 75 ? cssClass('dialog-mapper-mapping-middle') : '') + (domain > 75 ? cssClass('dialog-mapper-mapping-right') : '') + \"\\\" dy=\\\"-3\\\">\\n        \" + this.adapter.formatter(this.adapter.unnormalizeRaw(domain)) + \"\\n      </text>\\n      <text class=\\\"\" + cssClass('dialog-mapper-mapping-range') + \" \" + (range > 25 && range < 75 ? cssClass('dialog-mapper-mapping-middle') : '') + (range > 50 ? cssClass('dialog-mapper-mapping-right') : '') + \"\\\" dy=\\\"3\\\" x=\\\"\" + (range - domain) + \"\\\" y=\\\"\" + h + \"\\\">\\n        \" + round(range / 100, 3) + \"\\n      </text>\\n      <title>Drag the anchor circle to change the mapping, double click to edit</title>\\n    </g>\");\r\n        this.node = g.lastElementChild;\r\n        // freeze 0 and 100 domain = raw domain ones\r\n        this.node.classList.toggle(cssClass('frozen'), similar(0, domain) || similar(domain, 100));\r\n        {\r\n            var beforeDomain_1;\r\n            var beforeRange_1;\r\n            var shiftDomain_1;\r\n            var shiftRange_1;\r\n            var normalize_1 = function (x) { return x * 100 / g.getBoundingClientRect().width; };\r\n            var common = {\r\n                container: g.parentElement,\r\n                filter: function (evt) { return evt.button === 0 && !evt.shiftKey; },\r\n                onStart: function (_, x) {\r\n                    beforeDomain_1 = _this.domain;\r\n                    beforeRange_1 = _this.range;\r\n                    var normalized = normalize_1(x);\r\n                    shiftDomain_1 = _this.domain - normalized;\r\n                    shiftRange_1 = _this.range - normalized;\r\n                },\r\n                onEnd: function () {\r\n                    if (!similar(beforeDomain_1, _this.domain) || !similar(beforeRange_1, _this.range)) {\r\n                        _this.adapter.updated(_this);\r\n                    }\r\n                }\r\n            };\r\n            var line = this.node.querySelector('line:first-of-type');\r\n            dragHandle(line, tslib_1.__assign({}, common, { onDrag: function (_, x) {\r\n                    var normalized = normalize_1(x);\r\n                    _this.update(clamp(normalized + shiftDomain_1), clamp(normalized + shiftRange_1));\r\n                } }));\r\n            var domainCircle = this.node.querySelector('circle:first-of-type');\r\n            dragHandle(domainCircle, tslib_1.__assign({}, common, { onDrag: function (_, x) {\r\n                    var normalized = normalize_1(x);\r\n                    _this.update(clamp(normalized), _this.range);\r\n                } }));\r\n            var rangeCircle = this.node.querySelector('circle:last-of-type');\r\n            dragHandle(rangeCircle, tslib_1.__assign({}, common, { onDrag: function (_, x) {\r\n                    var normalized = normalize_1(x);\r\n                    _this.update(_this.domain, clamp(normalized));\r\n                } }));\r\n        }\r\n        this.node.onclick = function (evt) {\r\n            if (!evt.shiftKey) {\r\n                return;\r\n            }\r\n            _this.openDialog();\r\n        };\r\n        this.node.ondblclick = function () {\r\n            _this.openDialog();\r\n        };\r\n    }\r\n    MappingLine.prototype.openDialog = function () {\r\n        var ctx = {\r\n            manager: this.adapter.dialog.manager,\r\n            level: this.adapter.dialog.level + 1,\r\n            attachment: this.node,\r\n            idPrefix: this.adapter.dialog.idPrefix\r\n        };\r\n        var dialog = new MappingLineDialog(this, ctx, this.adapter);\r\n        dialog.open();\r\n    };\r\n    Object.defineProperty(MappingLine.prototype, \"frozen\", {\r\n        get: function () {\r\n            return this.node.classList.contains(cssClass('frozen'));\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    MappingLine.prototype.destroy = function (handled) {\r\n        if (handled === void 0) { handled = false; }\r\n        this.node.remove();\r\n        if (!handled) {\r\n            this.adapter.destroyed(this);\r\n        }\r\n    };\r\n    MappingLine.prototype.update = function (domain, range, trigger) {\r\n        if (trigger === void 0) { trigger = false; }\r\n        if (similar(domain, 100)) {\r\n            domain = 100;\r\n        }\r\n        if (similar(domain, 0)) {\r\n            domain = 0;\r\n        }\r\n        if (similar(range, 100)) {\r\n            range = 100;\r\n        }\r\n        if (similar(range, 0)) {\r\n            range = 0;\r\n        }\r\n        if (similar(domain, this.domain) && similar(range, this.range)) {\r\n            return;\r\n        }\r\n        if (this.frozen) {\r\n            domain = this.domain;\r\n        }\r\n        this.domain = domain;\r\n        this.range = range;\r\n        this.node.setAttribute('transform', \"translate(\" + domain + \",0)\");\r\n        var shift = range - domain;\r\n        Array.from(this.node.querySelectorAll('line')).forEach(function (d) { return d.setAttribute('x2', String(shift)); });\r\n        this.node.querySelector('circle[cx]').setAttribute('cx', String(shift));\r\n        var t1 = this.node.querySelector('text');\r\n        t1.textContent = this.adapter.formatter(this.adapter.unnormalizeRaw(domain));\r\n        t1.classList.toggle(cssClass('dialog-mapper-mapping-right'), domain > 75);\r\n        t1.classList.toggle(cssClass('dialog-mapper-mapping-middle'), domain >= 25 && domain <= 75);\r\n        var t2 = this.node.querySelector('text[x]');\r\n        t2.textContent = round(range / 100, 3).toString();\r\n        t2.classList.toggle(cssClass('dialog-mapper-mapping-right'), range > 75);\r\n        t2.classList.toggle(cssClass('dialog-mapper-mapping-middle'), range >= 25 && range <= 75);\r\n        t2.setAttribute('x', String(shift));\r\n        if (trigger) {\r\n            this.adapter.updated(this);\r\n        }\r\n    };\r\n    return MappingLine;\r\n}());\r\nexport { MappingLine };\r\n//# sourceMappingURL=MappingLineDialog.js.map","import * as tslib_1 from \"tslib\";\r\nimport { round } from '../../internal';\r\nimport { isMissingValue, isMapAbleColumn } from '../../model';\r\nimport ADialog from './ADialog';\r\nimport { MappingLine } from './MappingLineDialog';\r\nimport { cssClass } from '../../styles';\r\nimport { ScaleMappingFunction, ScriptMappingFunction } from '../../model/MappingFunction';\r\n/** @internal */\r\nvar MappingDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(MappingDialog, _super);\r\n    function MappingDialog(column, dialog, ctx) {\r\n        var _this = _super.call(this, dialog, {\r\n            livePreview: 'dataMapping',\r\n            cancelSubDialogs: true,\r\n        }) || this;\r\n        _this.column = column;\r\n        _this.mappingLines = [];\r\n        _this.mappingAdapter = {\r\n            destroyed: function (self) {\r\n                _this.mappingLines.splice(_this.mappingLines.indexOf(self), 1);\r\n                _this.updateLines(_this.computeScale());\r\n            },\r\n            updated: function () { return _this.updateLines(_this.computeScale()); },\r\n            domain: function () { return _this.rawDomain; },\r\n            normalizeRaw: _this.normalizeRaw.bind(_this),\r\n            unnormalizeRaw: _this.unnormalizeRaw.bind(_this),\r\n            dialog: _this.dialog,\r\n            formatter: _this.column.getNumberFormat()\r\n        };\r\n        _this.idPrefix = \"me\" + ctx.idPrefix;\r\n        _this.before = _this.column.getMapping().clone();\r\n        _this.scale = _this.column.getMapping().clone();\r\n        var domain = _this.scale.domain;\r\n        _this.rawDomain = [domain[0], domain[domain.length - 1]];\r\n        _this.data = Promise.resolve(ctx.provider.mappingSample(column));\r\n        return _this;\r\n    }\r\n    Object.defineProperty(MappingDialog.prototype, \"scaleType\", {\r\n        get: function () {\r\n            if ((this.scale instanceof ScriptMappingFunction)) {\r\n                return 'script';\r\n            }\r\n            if (this.scale instanceof ScaleMappingFunction) {\r\n                var base = this.scale.scaleType;\r\n                if (base !== 'linear') {\r\n                    return base;\r\n                }\r\n                // check if invert or absolute\r\n                var r = this.scale.range;\r\n                if (r.length === 2 && r[0] === 1 && r[1] === 0) {\r\n                    return 'linear_invert';\r\n                }\r\n                if (r.length === 3 && r[0] === 1 && r[1] === 0 && r[2] === 1) {\r\n                    return 'linear_abs';\r\n                }\r\n                return 'linear';\r\n            }\r\n            return 'unknown';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    MappingDialog.prototype.build = function (node) {\r\n        var _this = this;\r\n        node.classList.add(cssClass('dialog-mapper'));\r\n        var r = this.column.findMyRanker();\r\n        var others = !r ? [] : r.flatColumns.filter(function (d) { return isMapAbleColumn(d) && d !== _this.column; });\r\n        node.insertAdjacentHTML('beforeend', \"\\n        <div><label for=\\\"\" + this.idPrefix + \"mapping_type\\\"><strong>Normalization Scaling:</strong></label><select id=\\\"\" + this.idPrefix + \"mapping_type\\\" class=\\\"browser-default\\\">\\n        <option value=\\\"linear\\\">Linear</option>\\n        <option value=\\\"linear_invert\\\">Invert</option>\\n        <option value=\\\"linear_abs\\\">Absolute</option>\\n        <option value=\\\"log\\\">Log</option>\\n        <option value=\\\"pow1.1\\\">Pow 1.1</option>\\n        <option value=\\\"pow2\\\">Pow 2</option>\\n        <option value=\\\"pow3\\\">Pow 3</option>\\n        <option value=\\\"sqrt\\\">Sqrt</option>\\n        <option value=\\\"script\\\">Custom Script</option>\\n        <option value=\\\"unknown\\\">Unknown</option>\\n        \" + (others.length > 0 ? \"<optgroup label=\\\"Copy From\\\">\" + others.map(function (d) { return \"<option value=\\\"copy_\" + d.id + \"\\\">\" + d.label + \"</option>\"; }).join('') + \"</optgroup>\" : '') + \"\\n      </select>\\n      </div>\\n        <div class=\" + cssClass('dialog-mapper-domain') + \">\\n          <input id=\\\"\" + this.idPrefix + \"min\\\" required type=\\\"number\\\" value=\\\"\" + round(this.rawDomain[0], 3) + \"\\\" step=\\\"any\\\">\\n          <span>Input Domain (min - max)</span>\\n          <input id=\\\"\" + this.idPrefix + \"max\\\" required type=\\\"number\\\" value=\\\"\" + round(this.rawDomain[1], 3) + \"\\\" step=\\\"any\\\">\\n        </div>\\n        <svg class=\\\"\" + cssClass('dialog-mapper-details') + \"\\\" viewBox=\\\"0 0 106 66\\\">\\n           <g transform=\\\"translate(3,7)\\\">\\n              <rect y=\\\"-3\\\" width=\\\"100\\\" height=\\\"10\\\">\\n                <title>Click to create a new mapping line</title>\\n              </rect>\\n              <rect y=\\\"49\\\" width=\\\"100\\\" height=\\\"10\\\">\\n                <title>Click to create a new mapping line</title>\\n              </rect>\\n           </g>\\n        </svg>\\n        <div class=\" + cssClass('dialog-mapper-range') + \">\\n          <span>Output Normalized Domain (0 - 1)</span>\\n        </div>\\n        <div class=\\\"\" + cssClass('dialog-mapper-script') + \"\\\">\\n          <strong>Custom Normalization Script</strong>\\n          <textarea class=\\\"\" + cssClass('textarea') + \"\\\"></textarea>\\n        </div>\");\r\n        var g = node.querySelector(\".\" + cssClass('dialog-mapper-details') + \" > g\");\r\n        this.forEach(\".\" + cssClass('dialog-mapper-details') + \" rect\", function (d) { return d.onclick = function (evt) {\r\n            evt.preventDefault();\r\n            evt.stopPropagation();\r\n            var bb = d.getBoundingClientRect();\r\n            var x = round((evt.x - bb.left) * 100 / bb.width, 2);\r\n            var m = new MappingLine(g, x, x, _this.mappingAdapter);\r\n            _this.mappingLines.push(m);\r\n        }; });\r\n        {\r\n            var select = this.find('select');\r\n            var textarea_1 = this.find('textarea');\r\n            select.onchange = function (evt) {\r\n                var select = evt.currentTarget;\r\n                switch (select.value) {\r\n                    case 'linear_invert':\r\n                        _this.scale = new ScaleMappingFunction(_this.rawDomain.slice(), 'linear', [1, 0]);\r\n                        break;\r\n                    case 'linear_abs':\r\n                        _this.scale = new ScaleMappingFunction([_this.rawDomain[0], (_this.rawDomain[1] - _this.rawDomain[0]) / 2, _this.rawDomain[1]], 'linear', [1, 0, 1]);\r\n                        break;\r\n                    case 'script':\r\n                        var s = new ScriptMappingFunction(_this.rawDomain.slice());\r\n                        _this.scale = s;\r\n                        textarea_1.value = s.code;\r\n                        break;\r\n                    case 'unknown':\r\n                        // clone original again\r\n                        _this.scale = _this.column.getOriginalMapping().clone();\r\n                        break;\r\n                    default:\r\n                        if (select.value.startsWith('copy_')) {\r\n                            _this.copyMapping(select.value.slice('copy_'.length));\r\n                            return;\r\n                        }\r\n                        _this.scale = new ScaleMappingFunction(_this.rawDomain.slice(), select.value, [0, 1]);\r\n                        break;\r\n                }\r\n                _this.createMappings();\r\n                node.dataset.scale = select.value;\r\n                _this.updateLines();\r\n            };\r\n            var scaleType_1 = node.dataset.scale = this.scaleType;\r\n            select.selectedIndex = Array.from(select.options).findIndex(function (d) { return d.value === scaleType_1; });\r\n            if (scaleType_1 === 'script') {\r\n                textarea_1.value = this.scale.code;\r\n            }\r\n            this.createMappings();\r\n        }\r\n        {\r\n            this.forEach(\"#\" + this.idPrefix + \"min, #\" + this.idPrefix + \"max\", function (d, i) { return d.onchange = function () {\r\n                var v = d.valueAsNumber;\r\n                if (v === _this.rawDomain[i]) {\r\n                    d.setCustomValidity('');\r\n                    return;\r\n                }\r\n                var other = _this.rawDomain[1 - i];\r\n                if (isNaN(v) || (i === 0 && v >= other) || (i === 1 && v <= other)) {\r\n                    d.setCustomValidity(\"value has to be \" + (i === 0 ? '<= max' : '>= min'));\r\n                    return;\r\n                }\r\n                d.setCustomValidity('');\r\n                _this.rawDomain[i] = v;\r\n                _this.scale = _this.computeScale();\r\n                var patchedDomain = _this.scale.domain.slice();\r\n                patchedDomain[0] = _this.rawDomain[0];\r\n                patchedDomain[patchedDomain.length - 1] = _this.rawDomain[1];\r\n                _this.scale.domain = patchedDomain;\r\n                _this.createMappings();\r\n                _this.updateLines();\r\n                if (_this.showLivePreviews()) {\r\n                    _this.column.setMapping(_this.scale);\r\n                }\r\n            }; });\r\n        }\r\n        this.data.then(function (values) {\r\n            values.forEach(function (v) {\r\n                if (!isMissingValue(v)) {\r\n                    g.insertAdjacentHTML('afterbegin', \"<line data-v=\\\"\" + v + \"\\\" x1=\\\"\" + round(_this.normalizeRaw(v), 2) + \"\\\" x2=\\\"\" + round(_this.scale.apply(v) * 100, 2) + \"\\\" y2=\\\"52\\\"></line>\");\r\n                }\r\n            });\r\n        });\r\n    };\r\n    MappingDialog.prototype.createMappings = function () {\r\n        this.mappingLines.splice(0, this.mappingLines.length).forEach(function (d) { return d.destroy(true); });\r\n        if (!(this.scale instanceof ScaleMappingFunction)) {\r\n            return;\r\n        }\r\n        var g = this.node.querySelector(\".\" + cssClass('dialog-mapper-details') + \" > g\");\r\n        var domain = this.scale.domain;\r\n        var range = this.scale.range;\r\n        for (var i = 0; i < domain.length; ++i) {\r\n            this.mappingLines.push(new MappingLine(g, this.normalizeRaw(domain[i]), range[i] * 100, this.mappingAdapter));\r\n        }\r\n    };\r\n    MappingDialog.prototype.update = function () {\r\n        var _this = this;\r\n        var scaleType = this.node.dataset.scale = this.scaleType;\r\n        var select = this.find('select');\r\n        select.selectedIndex = Array.from(select.options).findIndex(function (d) { return d.value === scaleType; });\r\n        if (scaleType === 'script') {\r\n            this.find('textarea').value = this.scale.code;\r\n        }\r\n        this.forEach(\"input[type=number]\", function (d, i) {\r\n            d.value = round(_this.rawDomain[i], 3).toString();\r\n        });\r\n    };\r\n    MappingDialog.prototype.updateLines = function (scale) {\r\n        var _this = this;\r\n        if (scale === void 0) { scale = this.scale; }\r\n        this.forEach(\".\" + cssClass('dialog-mapper-details') + \"  > g > line[x1]\", function (d) {\r\n            var v = parseFloat(d.getAttribute('data-v'));\r\n            d.setAttribute('x1', round(_this.normalizeRaw(v), 2).toString());\r\n            d.setAttribute('x2', round(scale.apply(v) * 100, 2).toString());\r\n        });\r\n    };\r\n    MappingDialog.prototype.reset = function () {\r\n        this.scale = this.column.getOriginalMapping().clone();\r\n        var domain = this.scale.domain;\r\n        this.rawDomain = [domain[0], domain[domain.length - 1]];\r\n        this.update();\r\n        this.createMappings();\r\n        this.updateLines();\r\n    };\r\n    MappingDialog.prototype.copyMapping = function (columnId) {\r\n        var r = this.column.findMyRanker();\r\n        if (!r) {\r\n            return;\r\n        }\r\n        var ref = r.find(columnId);\r\n        this.scale = ref.getMapping().clone();\r\n        this.rawDomain = this.scale.domain.slice();\r\n        this.update();\r\n        this.createMappings();\r\n        this.updateLines();\r\n    };\r\n    MappingDialog.prototype.normalizeRaw = function (d) {\r\n        var v = (d - this.rawDomain[0]) * 100 / (this.rawDomain[1] - this.rawDomain[0]);\r\n        return Math.max(Math.min(v, 100), 0); // clamp\r\n    };\r\n    MappingDialog.prototype.unnormalizeRaw = function (d) {\r\n        return (d) * (this.rawDomain[1] - this.rawDomain[0]) / 100 + this.rawDomain[0];\r\n    };\r\n    MappingDialog.prototype.computeScale = function () {\r\n        var _this = this;\r\n        var type = this.scaleType;\r\n        if (type === 'script') {\r\n            return new ScriptMappingFunction(this.rawDomain.slice(), this.node.querySelector('textarea').value);\r\n        }\r\n        this.mappingLines.sort(function (a, b) { return a.domain - b.domain; });\r\n        var domain = this.mappingLines.map(function (d) { return _this.unnormalizeRaw(d.domain); });\r\n        var range = this.mappingLines.map(function (d) { return d.range / 100; });\r\n        return new ScaleMappingFunction(domain, type, range);\r\n    };\r\n    MappingDialog.prototype.submit = function () {\r\n        if (!this.node.checkValidity()) {\r\n            return false;\r\n        }\r\n        var scale = this.computeScale();\r\n        this.column.setMapping(scale);\r\n        return true;\r\n    };\r\n    MappingDialog.prototype.cancel = function () {\r\n        this.column.setMapping(this.before);\r\n    };\r\n    return MappingDialog;\r\n}(ADialog));\r\nexport default MappingDialog;\r\n//# sourceMappingURL=MappingDialog.js.map","import * as tslib_1 from \"tslib\";\r\nimport { createNumberFilter } from '../../renderer/HistogramCellRenderer';\r\nimport { cssClass } from '../../styles';\r\nimport ADialog from './ADialog';\r\n/** @internal */\r\nvar NumberFilterDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(NumberFilterDialog, _super);\r\n    function NumberFilterDialog(column, dialog, ctx) {\r\n        var _this = _super.call(this, dialog, {\r\n            livePreview: 'filter',\r\n            cancelSubDialogs: true,\r\n        }) || this;\r\n        _this.column = column;\r\n        _this.ctx = ctx;\r\n        _this.handler = null;\r\n        _this.before = column.getFilter();\r\n        return _this;\r\n    }\r\n    NumberFilterDialog.prototype.build = function (node) {\r\n        node.classList.add(cssClass('dialog-mapper'));\r\n        this.handler = createNumberFilter(this.column, node, {\r\n            dialogManager: this.ctx.dialogManager,\r\n            idPrefix: this.ctx.idPrefix,\r\n            tasks: this.ctx.provider.getTaskExecutor(),\r\n        }, this.showLivePreviews());\r\n    };\r\n    NumberFilterDialog.prototype.cleanUp = function (action) {\r\n        _super.prototype.cleanUp.call(this, action);\r\n        this.handler.cleanUp();\r\n    };\r\n    NumberFilterDialog.prototype.reset = function () {\r\n        this.handler.reset();\r\n    };\r\n    NumberFilterDialog.prototype.submit = function () {\r\n        this.handler.submit();\r\n        return true;\r\n    };\r\n    NumberFilterDialog.prototype.cancel = function () {\r\n        this.column.setFilter(this.before);\r\n    };\r\n    return NumberFilterDialog;\r\n}(ADialog));\r\nexport default NumberFilterDialog;\r\n//# sourceMappingURL=NumberFilterDialog.js.map","import { forEach } from '../../renderer/utils';\r\nimport { cssClass } from '../../styles';\r\nimport { getSortLabel } from '../../internal';\r\n/** @internal */\r\nexport function sortMethods(node, column, methods) {\r\n    var bak = column.getSortMethod();\r\n    methods.forEach(function (d) { return node.insertAdjacentHTML('beforeend', \"<label class=\\\"\" + cssClass('checkbox') + \"\\\"><input type=\\\"radio\\\" name=\\\"multivaluesort\\\" value=\\\"\" + d + \"\\\"  \" + ((bak === d) ? 'checked' : '') + \" ><span>\" + getSortLabel(d) + \"</span></label>\"); });\r\n    forEach(node, 'input[name=multivaluesort]', function (n) {\r\n        n.addEventListener('change', function () { return column.setSortMethod(n.value); }, {\r\n            passive: true\r\n        });\r\n    });\r\n    return {\r\n        elems: 'input[name=multivaluesort]',\r\n        submit: function () {\r\n            var selected = node.querySelector('input[name=multivaluesort]:checked').value;\r\n            column.setSortMethod(selected);\r\n            return true;\r\n        },\r\n        cancel: function () {\r\n            column.setSortMethod(bak);\r\n        },\r\n        reset: function () {\r\n            node.querySelector(\"input[name=multivaluesort][value=\\\"\" + bak + \"\\\"]\").checked = true;\r\n        }\r\n    };\r\n}\r\n/** @internal */\r\nexport { uniqueId, forEach, forEachChild, colorOf } from '../../renderer/utils';\r\n//# sourceMappingURL=utils.js.map","import * as tslib_1 from \"tslib\";\r\nimport { EAdvancedSortMethod } from '../../model';\r\nimport ADialog from './ADialog';\r\nimport { sortMethods } from './utils';\r\n/** @internal */\r\nvar ReduceDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ReduceDialog, _super);\r\n    function ReduceDialog(column, dialog) {\r\n        var _this = _super.call(this, dialog, {\r\n            livePreview: 'reduce'\r\n        }) || this;\r\n        _this.column = column;\r\n        _this.handler = null;\r\n        return _this;\r\n    }\r\n    ReduceDialog.prototype.build = function (node) {\r\n        var _this = this;\r\n        var wrapper = {\r\n            getSortMethod: function () { return _this.column.getReduce(); },\r\n            setSortMethod: function (s) { return _this.column.setReduce(s); }\r\n        };\r\n        this.handler = sortMethods(node, wrapper, Object.keys(EAdvancedSortMethod));\r\n        this.enableLivePreviews(this.handler.elems);\r\n    };\r\n    ReduceDialog.prototype.submit = function () {\r\n        return this.handler.submit();\r\n    };\r\n    ReduceDialog.prototype.reset = function () {\r\n        this.handler.reset();\r\n    };\r\n    ReduceDialog.prototype.cancel = function () {\r\n        this.handler.cancel();\r\n    };\r\n    return ReduceDialog;\r\n}(ADialog));\r\nexport default ReduceDialog;\r\n//# sourceMappingURL=ReduceDialog.js.map","import * as tslib_1 from \"tslib\";\r\nimport ADialog from './ADialog';\r\nimport { cssClass } from '../../styles';\r\n/** @internal */\r\nvar RenameDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(RenameDialog, _super);\r\n    function RenameDialog(column, dialog) {\r\n        var _this = _super.call(this, dialog) || this;\r\n        _this.column = column;\r\n        _this.before = column.getMetaData();\r\n        return _this;\r\n    }\r\n    RenameDialog.prototype.build = function (node) {\r\n        node.classList.add(cssClass('dialog-rename'));\r\n        node.insertAdjacentHTML('beforeend', \"\\n      <input type=\\\"text\\\" value=\\\"\" + this.column.label + \"\\\" required autofocus placeholder=\\\"name\\\">\\n      <input type=\\\"text\\\" value=\\\"\" + this.column.getMetaData().summary + \"\\\" placeholder=\\\"summary\\\" name=\\\"summary\\\">\\n      <textarea class=\\\"\" + cssClass('textarea') + \"\\\" rows=\\\"5\\\" placeholder=\\\"description\\\">\" + this.column.description + \"</textarea>\");\r\n    };\r\n    RenameDialog.prototype.reset = function () {\r\n        var desc = this.column.desc;\r\n        var meta = {\r\n            label: desc.label || this.column.id,\r\n            summary: desc.summary || '',\r\n            description: desc.description || ''\r\n        };\r\n        this.findInput('input[type=\"text\"]').value = meta.label;\r\n        this.findInput('input[name=\"summary\"]').value = meta.summary;\r\n        this.node.querySelector('textarea').value = meta.description;\r\n    };\r\n    RenameDialog.prototype.submit = function () {\r\n        var label = this.findInput('input[type=\"text\"]').value;\r\n        var summary = this.findInput('input[name=\"summary\"]').value.trim();\r\n        var description = this.node.querySelector('textarea').value;\r\n        this.column.setMetaData({ label: label, description: description, summary: summary });\r\n        return true;\r\n    };\r\n    RenameDialog.prototype.cancel = function () {\r\n        this.column.setMetaData(this.before);\r\n    };\r\n    return RenameDialog;\r\n}(ADialog));\r\nexport default RenameDialog;\r\n//# sourceMappingURL=RenameDialog.js.map","import * as tslib_1 from \"tslib\";\r\nimport { ScriptColumn } from '../../model';\r\nimport ADialog from './ADialog';\r\nimport { cssClass } from '../../styles';\r\n/** @internal */\r\nvar ScriptEditDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ScriptEditDialog, _super);\r\n    function ScriptEditDialog(column, dialog) {\r\n        var _this = _super.call(this, dialog) || this;\r\n        _this.column = column;\r\n        _this.before = column.getScript();\r\n        return _this;\r\n    }\r\n    ScriptEditDialog.prototype.build = function (node) {\r\n        node.insertAdjacentHTML('beforeend', \"<textarea class=\\\"\" + cssClass('textarea') + \"\\\" autofocus=\\\"true\\\" rows=\\\"5\\\" autofocus=\\\"autofocus\\\" style=\\\"width: 95%;\\\">\" + this.column.getScript() + \"</textarea>\");\r\n    };\r\n    ScriptEditDialog.prototype.cancel = function () {\r\n        this.column.setScript(this.before);\r\n    };\r\n    ScriptEditDialog.prototype.reset = function () {\r\n        this.node.querySelector('textarea').value = this.column.desc.script || ScriptColumn.DEFAULT_SCRIPT;\r\n    };\r\n    ScriptEditDialog.prototype.submit = function () {\r\n        this.column.setScript(this.node.querySelector('textarea').value);\r\n        return true;\r\n    };\r\n    return ScriptEditDialog;\r\n}(ADialog));\r\nexport default ScriptEditDialog;\r\n//# sourceMappingURL=ScriptEditDialog.js.map","import * as tslib_1 from \"tslib\";\r\nimport ADialog from './ADialog';\r\nimport { cssClass } from '../../styles';\r\nimport { debounce } from '../../internal';\r\n/** @internal */\r\nvar SearchDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SearchDialog, _super);\r\n    function SearchDialog(column, dialog, provider) {\r\n        var _this = _super.call(this, dialog, {\r\n            livePreview: 'search'\r\n        }) || this;\r\n        _this.column = column;\r\n        _this.provider = provider;\r\n        return _this;\r\n    }\r\n    SearchDialog.prototype.build = function (node) {\r\n        var _this = this;\r\n        node.insertAdjacentHTML('beforeend', \"<input type=\\\"text\\\" size=\\\"20\\\" value=\\\"\\\" required autofocus placeholder=\\\"search... (>= 3 chars)\\\">\\n      <label class=\\\"\" + cssClass('checkbox') + \"\\\">\\n        <input type=\\\"checkbox\\\">\\n        <span>Use regular expressions</span>\\n      </label>\\n    \");\r\n        var input = node.querySelector('input[type=\"text\"]');\r\n        var checkbox = node.querySelector('input[type=\"checkbox\"]');\r\n        var update = function () {\r\n            var search = input.value;\r\n            if (search.length < 3) {\r\n                input.setCustomValidity('at least 3 characters');\r\n                return;\r\n            }\r\n            input.setCustomValidity('');\r\n        };\r\n        input.addEventListener('input', update, {\r\n            passive: true\r\n        });\r\n        checkbox.addEventListener('change', update, {\r\n            passive: true\r\n        });\r\n        this.enableLivePreviews([input, checkbox]);\r\n        if (!this.showLivePreviews()) {\r\n            return;\r\n        }\r\n        input.addEventListener('input', debounce(function () { return _this.submit(); }, 100), {\r\n            passive: true\r\n        });\r\n    };\r\n    SearchDialog.prototype.submit = function () {\r\n        var input = this.findInput('input[type=\"text\"]');\r\n        var checkbox = this.findInput('input[type=\"checkbox\"]');\r\n        var search = input.value;\r\n        var isRegex = checkbox.checked;\r\n        if (isRegex) {\r\n            search = new RegExp(search);\r\n        }\r\n        this.provider.searchAndJump(search, this.column);\r\n        return true;\r\n    };\r\n    SearchDialog.prototype.reset = function () {\r\n        var input = this.findInput('input[type=\"text\"]');\r\n        var checkbox = this.findInput('input[type=\"checkbox\"]');\r\n        input.value = '';\r\n        checkbox.checked = false;\r\n    };\r\n    SearchDialog.prototype.cancel = function () {\r\n        // nothing to do\r\n    };\r\n    return SearchDialog;\r\n}(ADialog));\r\nexport default SearchDialog;\r\n//# sourceMappingURL=SearchDialog.js.map","import * as tslib_1 from \"tslib\";\r\nimport ADialog from './ADialog';\r\nimport { cssClass } from '../../styles';\r\n/** @internal */\r\nvar ShowTopNDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ShowTopNDialog, _super);\r\n    function ShowTopNDialog(provider, dialog) {\r\n        var _this = _super.call(this, dialog) || this;\r\n        _this.provider = provider;\r\n        _this.before = _this.provider.getShowTopN();\r\n        return _this;\r\n    }\r\n    ShowTopNDialog.prototype.build = function (node) {\r\n        node.classList.add(cssClass('dialog-rename'));\r\n        node.insertAdjacentHTML('beforeend', \"\\n      <input type=\\\"number\\\" min=\\\"0\\\" step=\\\"1\\\" value=\\\"\" + this.before + \"\\\">\");\r\n        this.enableLivePreviews('input');\r\n    };\r\n    ShowTopNDialog.prototype.cancel = function () {\r\n        this.provider.setShowTopN(this.before);\r\n    };\r\n    ShowTopNDialog.prototype.submit = function () {\r\n        var value = this.findInput('input').valueAsNumber;\r\n        this.provider.setShowTopN(value);\r\n        return true;\r\n    };\r\n    ShowTopNDialog.prototype.reset = function () {\r\n        var defaultValue = 10;\r\n        this.findInput('input').value = defaultValue.toString();\r\n    };\r\n    return ShowTopNDialog;\r\n}(ADialog));\r\nexport default ShowTopNDialog;\r\n//# sourceMappingURL=ShowTopNDialog.js.map","import * as tslib_1 from \"tslib\";\r\nimport ADialog from './ADialog';\r\nimport { uniqueId, forEach } from './utils';\r\nimport { getToolbarDialogAddons } from '../toolbar';\r\nimport { cssClass } from '../../styles';\r\n/** @internal */\r\nvar SortDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SortDialog, _super);\r\n    function SortDialog(column, groupSortBy, dialog, ctx) {\r\n        var _this = _super.call(this, dialog, {\r\n            livePreview: groupSortBy ? 'groupSort' : 'sort'\r\n        }) || this;\r\n        _this.column = column;\r\n        _this.groupSortBy = groupSortBy;\r\n        _this.ctx = ctx;\r\n        _this.handlers = [];\r\n        return _this;\r\n    }\r\n    SortDialog.prototype.build = function (node) {\r\n        var addons = getToolbarDialogAddons(this.column, this.groupSortBy ? 'sortGroup' : 'sort', this.ctx);\r\n        for (var _i = 0, addons_1 = addons; _i < addons_1.length; _i++) {\r\n            var addon = addons_1[_i];\r\n            this.node.insertAdjacentHTML('beforeend', \"<strong>\" + addon.title + \"</strong>\");\r\n            this.handlers.push(addon.append(this.column, this.node, this.dialog, this.ctx));\r\n        }\r\n        this.handlers.push(sortOrder(node, this.column, this.dialog.idPrefix, this.groupSortBy));\r\n        for (var _a = 0, _b = this.handlers; _a < _b.length; _a++) {\r\n            var handler = _b[_a];\r\n            this.enableLivePreviews(handler.elems);\r\n        }\r\n    };\r\n    SortDialog.prototype.submit = function () {\r\n        for (var _i = 0, _a = this.handlers; _i < _a.length; _i++) {\r\n            var handler = _a[_i];\r\n            if (handler.submit() === false) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    SortDialog.prototype.cancel = function () {\r\n        for (var _i = 0, _a = this.handlers; _i < _a.length; _i++) {\r\n            var handler = _a[_i];\r\n            handler.cancel();\r\n        }\r\n    };\r\n    SortDialog.prototype.reset = function () {\r\n        for (var _i = 0, _a = this.handlers; _i < _a.length; _i++) {\r\n            var handler = _a[_i];\r\n            handler.reset();\r\n        }\r\n    };\r\n    return SortDialog;\r\n}(ADialog));\r\nexport default SortDialog;\r\nfunction sortOrder(node, column, idPrefix, groupSortBy) {\r\n    if (groupSortBy === void 0) { groupSortBy = false; }\r\n    var ranking = column.findMyRanker();\r\n    var current = groupSortBy ? ranking.getGroupSortCriteria() : ranking.getSortCriteria();\r\n    var order = Object.assign({}, groupSortBy ? column.isGroupSortedByMe() : column.isSortedByMe());\r\n    var priority = order.priority === undefined ? current.length : order.priority;\r\n    var id = uniqueId(idPrefix);\r\n    node.insertAdjacentHTML('afterbegin', \"\\n        <strong>Sort Order</strong>\\n        <label class=\\\"\" + cssClass('checkbox') + \"\\\"><input type=\\\"radio\\\" name=\\\"sortorder\\\" value=\\\"asc\\\"  \" + ((order.asc === 'asc') ? 'checked' : '') + \" ><span>Ascending</span></label>\\n        <label class=\\\"\" + cssClass('checkbox') + \"\\\"><input type=\\\"radio\\\" name=\\\"sortorder\\\" value=\\\"desc\\\"  \" + ((order.asc === 'desc') ? 'checked' : '') + \" ><span>Decending</span></label>\\n        <label class=\\\"\" + cssClass('checkbox') + \"\\\"><input type=\\\"radio\\\" name=\\\"sortorder\\\" value=\\\"none\\\"  \" + ((order.asc === undefined) ? 'checked' : '') + \" ><span>Unsorted</span></label>\\n        <strong>Sort Priority</strong>\\n        <input type=\\\"number\\\" id=\\\"\" + id + \"P\\\" step=\\\"1\\\" min=\\\"1\\\" max=\\\"\" + (current.length + 1) + \"\\\" value=\\\"\" + (priority + 1) + \"\\\">\\n    \");\r\n    var updateDisabled = function (disable) {\r\n        forEach(node, 'input:not([name=sortorder]), select, textarea', function (d) {\r\n            d.disabled = disable;\r\n        });\r\n    };\r\n    updateDisabled(order.asc === undefined);\r\n    forEach(node, 'input[name=sortorder]', function (n) {\r\n        n.addEventListener('change', function () {\r\n            updateDisabled(n.value === 'none');\r\n        }, {\r\n            passive: true\r\n        });\r\n    });\r\n    return {\r\n        elems: \"input[name=sortorder], #\" + id + \"P\",\r\n        submit: function () {\r\n            var asc = node.querySelector('input[name=sortorder]:checked').value;\r\n            var priority = Number.parseInt(node.querySelector(\"#\" + id + \"P\").value, 10) - 1;\r\n            if (groupSortBy) {\r\n                ranking.groupSortBy(column, asc === 'asc', asc === 'none' ? -1 : priority);\r\n            }\r\n            else {\r\n                ranking.sortBy(column, asc === 'asc', asc === 'none' ? -1 : priority);\r\n            }\r\n            return true;\r\n        },\r\n        reset: function () {\r\n            node.querySelector('input[name=sortorder][value=none]').checked = true;\r\n            node.querySelector(\"#\" + id + \"P\").value = (current.length + (order.priority === undefined ? 1 : 0)).toString();\r\n            updateDisabled(true);\r\n        },\r\n        cancel: function () {\r\n            if (groupSortBy) {\r\n                ranking.groupSortBy(column, order.asc === 'asc', order.asc === undefined ? -1 : order.priority);\r\n            }\r\n            else {\r\n                ranking.sortBy(column, order.asc === 'asc', order.asc === undefined ? -1 : order.priority);\r\n            }\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=SortDialog.js.map","import * as tslib_1 from \"tslib\";\r\nimport { filterMissingMarkup, findFilterMissing } from '../missing';\r\nimport ADialog from './ADialog';\r\nimport { cssClass } from '../../styles';\r\nimport { debounce } from '../../internal';\r\nfunction toInput(text, isRegex) {\r\n    var v = text.trim();\r\n    if (v === '') {\r\n        return null;\r\n    }\r\n    return isRegex ? new RegExp(v, 'gm') : v;\r\n}\r\n/** @internal */\r\nvar StringFilterDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(StringFilterDialog, _super);\r\n    function StringFilterDialog(column, dialog) {\r\n        var _this = _super.call(this, dialog, {\r\n            livePreview: 'filter'\r\n        }) || this;\r\n        _this.column = column;\r\n        _this.before = _this.column.getFilter();\r\n        return _this;\r\n    }\r\n    StringFilterDialog.prototype.updateFilter = function (filter, filterMissing) {\r\n        if (filter == null && !filterMissing) {\r\n            this.column.setFilter(null);\r\n        }\r\n        else {\r\n            this.column.setFilter({ filter: filter, filterMissing: filterMissing });\r\n        }\r\n    };\r\n    StringFilterDialog.prototype.reset = function () {\r\n        this.findInput('input[type=\"text\"]').value = '';\r\n        this.forEach('input[type=checkbox]', function (n) { return n.checked = false; });\r\n    };\r\n    StringFilterDialog.prototype.cancel = function () {\r\n        if (this.before) {\r\n            this.updateFilter(this.before.filter === '' ? null : this.before.filter, this.before.filterMissing);\r\n        }\r\n        else {\r\n            this.updateFilter(null, false);\r\n        }\r\n    };\r\n    StringFilterDialog.prototype.submit = function () {\r\n        var filterMissing = findFilterMissing(this.node).checked;\r\n        var input = this.findInput('input[type=\"text\"]').value;\r\n        var isRegex = this.findInput('input[type=\"checkbox\"]').checked;\r\n        this.updateFilter(toInput(input, isRegex), filterMissing);\r\n        return true;\r\n    };\r\n    StringFilterDialog.prototype.build = function (node) {\r\n        var _this = this;\r\n        var bak = this.column.getFilter() || { filter: '', filterMissing: false };\r\n        node.insertAdjacentHTML('beforeend', \"<input type=\\\"text\\\" placeholder=\\\"Filter \" + this.column.desc.label + \"...\\\" autofocus value=\\\"\" + ((bak.filter instanceof RegExp) ? bak.filter.source : bak.filter || '') + \"\\\" style=\\\"width: 100%\\\">\\n    <label class=\\\"\" + cssClass('checkbox') + \"\\\">\\n      <input type=\\\"checkbox\\\" \" + ((bak.filter instanceof RegExp) ? 'checked=\"checked\"' : '') + \">\\n      <span>Use regular expressions</span>\\n    </label>\\n    \" + filterMissingMarkup(bak.filterMissing));\r\n        var filterMissing = findFilterMissing(node);\r\n        var input = node.querySelector('input[type=\"text\"]');\r\n        var isRegex = node.querySelector('input[type=\"checkbox\"]');\r\n        this.enableLivePreviews([filterMissing, input, isRegex]);\r\n        if (!this.showLivePreviews()) {\r\n            return;\r\n        }\r\n        input.addEventListener('input', debounce(function () { return _this.submit(); }, 100), {\r\n            passive: true\r\n        });\r\n    };\r\n    return StringFilterDialog;\r\n}(ADialog));\r\nexport default StringFilterDialog;\r\n//# sourceMappingURL=StringFilterDialog.js.map","import * as tslib_1 from \"tslib\";\r\nimport { round } from '../../internal';\r\nimport ADialog from './ADialog';\r\nimport { forEach, colorOf } from './utils';\r\nimport { cssClass } from '../../styles';\r\n/** @internal */\r\nvar WeightsEditDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(WeightsEditDialog, _super);\r\n    function WeightsEditDialog(column, dialog) {\r\n        var _this = _super.call(this, dialog) || this;\r\n        _this.column = column;\r\n        _this.weights = _this.column.getWeights();\r\n        return _this;\r\n    }\r\n    WeightsEditDialog.prototype.cancel = function () {\r\n        this.column.setWeights(this.weights.slice());\r\n    };\r\n    WeightsEditDialog.prototype.reset = function () {\r\n        var weight = 100 / this.weights.length;\r\n        forEach(this.node, 'input[type=number]', function (n) {\r\n            var v = round(weight, 2);\r\n            n.value = String(v);\r\n            n.nextElementSibling.firstElementChild.style.width = v + \"%\";\r\n        });\r\n    };\r\n    WeightsEditDialog.prototype.build = function (node) {\r\n        var _this = this;\r\n        var children = this.column.children;\r\n        node.insertAdjacentHTML('beforeend', \"<div class=\\\"\" + cssClass('dialog-table') + \"\\\">\\n        \" + this.weights.map(function (weight, i) { return \"<div class=\\\"\" + cssClass('dialog-weights-table-entry') + \"\\\">\\n          <input type=\\\"number\\\" value=\\\"\" + round(weight * 100, 2) + \"\\\" min=\\\"0\\\" max=\\\"100\\\" step=\\\"any\\\" required>\\n          <span class=\\\"\" + cssClass('dialog-filter-color-bar') + \"\\\">\\n            <span style=\\\"background-color: \" + colorOf(children[i]) + \"; width: \" + round(weight * 100, 2) + \"%\\\"></span>\\n          </span>\\n          \" + children[i].label + \"\\n        </div>\"; }).join('') + \"\\n    </div>\");\r\n        var inputs = Array.from(this.node.querySelectorAll('input[type=number]'));\r\n        inputs.forEach(function (d, i) {\r\n            d.oninput = function () {\r\n                var weight = d.valueAsNumber;\r\n                if (weight <= 0) {\r\n                    d.setCustomValidity('weight cannot be zero');\r\n                }\r\n                else {\r\n                    d.setCustomValidity('');\r\n                }\r\n                _this.updateBar(d);\r\n                if (inputs.length !== 2) {\r\n                    return;\r\n                }\r\n                // corner case auto decrease the other\r\n                var rest = 100 - weight;\r\n                if (rest <= 0) {\r\n                    d.setCustomValidity('weight cannot be 100 in case of two elements');\r\n                }\r\n                else {\r\n                    d.setCustomValidity('');\r\n                }\r\n                var other = inputs[1 - i];\r\n                other.value = round(rest, 2).toString();\r\n                _this.updateBar(other);\r\n            };\r\n        });\r\n    };\r\n    WeightsEditDialog.prototype.updateBar = function (input) {\r\n        input.nextElementSibling.firstElementChild.style.width = input.value + \"%\";\r\n    };\r\n    WeightsEditDialog.prototype.distributeWeights = function () {\r\n        var inputs = Array.from(this.node.querySelectorAll('input[type=number]')).map(function (d) { return ({ input: d, weight: d.value ? d.valueAsNumber : NaN }); });\r\n        var hasMissing = inputs.some(function (d) { return isNaN(d.weight); });\r\n        if (hasMissing) {\r\n            // compute missing ones\r\n            var missingIndices = inputs.filter(function (d) { return isNaN(d.weight); });\r\n            var correct = inputs.filter(function (d) { return !isNaN(d.weight); });\r\n            var sum_1 = correct.reduce(function (a, b) { return a + b.weight; }, 0);\r\n            if (sum_1 < 100) {\r\n                // compute rest\r\n                var rest = (100 - sum_1) / missingIndices.length;\r\n                for (var _i = 0, missingIndices_1 = missingIndices; _i < missingIndices_1.length; _i++) {\r\n                    var input = missingIndices_1[_i];\r\n                    input.input.value = round(rest, 2).toString();\r\n                    this.updateBar(input.input);\r\n                }\r\n                return;\r\n            }\r\n            // already above 100, set missing to 0 and do a regular normalization (user has to deal with it)\r\n            for (var _a = 0, missingIndices_2 = missingIndices; _a < missingIndices_2.length; _a++) {\r\n                var input = missingIndices_2[_a];\r\n                input.input.value = '0';\r\n                this.updateBar(input.input);\r\n            }\r\n        }\r\n        var weights = inputs.map(function (d) { return d.weight; });\r\n        if (validWeights(weights)) {\r\n            return; // nothing to do\r\n        }\r\n        // pure distribute the sum\r\n        var sum = weights.reduce(function (a, b) { return a + b; }, 0);\r\n        for (var _b = 0, inputs_1 = inputs; _b < inputs_1.length; _b++) {\r\n            var input = inputs_1[_b];\r\n            input.input.value = round(input.weight * 100 / sum, 2).toString();\r\n            this.updateBar(input.input);\r\n        }\r\n    };\r\n    WeightsEditDialog.prototype.appendDialogButtons = function () {\r\n        var _this = this;\r\n        _super.prototype.appendDialogButtons.call(this);\r\n        var buttons = this.node.querySelector(\".\" + cssClass('dialog-buttons'));\r\n        buttons.insertAdjacentHTML('beforeend', \"<button class=\\\"\" + cssClass('dialog-button') + \" \" + cssClass('dialog-weights-distribute-button') + \"\\\" type=\\\"button\\\" title=\\\"distribute weights\\\"></button>\");\r\n        var last = buttons.lastElementChild;\r\n        last.onclick = function (evt) {\r\n            evt.preventDefault();\r\n            evt.stopPropagation();\r\n            _this.distributeWeights();\r\n        };\r\n    };\r\n    WeightsEditDialog.prototype.submit = function () {\r\n        var inputs = Array.from(this.node.querySelectorAll('input[type=number]')).map(function (d) { return ({ input: d, weight: d.valueAsNumber }); });\r\n        var invalid = false;\r\n        for (var _i = 0, inputs_2 = inputs; _i < inputs_2.length; _i++) {\r\n            var input = inputs_2[_i];\r\n            if (input.weight <= 0) {\r\n                input.input.setCustomValidity('weight cannot be zero');\r\n                invalid = true;\r\n            }\r\n            else {\r\n                input.input.setCustomValidity('');\r\n            }\r\n        }\r\n        var weights = inputs.map(function (d) { return d.weight; });\r\n        if (!invalid && !validWeights(weights)) {\r\n            inputs[inputs.length - 1].input.setCustomValidity('sum of weights has to be 100, change weights or use the redistribute button to fix');\r\n            invalid = true;\r\n        }\r\n        if (invalid) {\r\n            if (typeof this.node.reportValidity === 'function') {\r\n                this.node.reportValidity();\r\n            }\r\n            return false;\r\n        }\r\n        this.column.setWeights(weights.map(function (d) { return d / 100; }));\r\n        return true;\r\n    };\r\n    return WeightsEditDialog;\r\n}(ADialog));\r\nexport default WeightsEditDialog;\r\nfunction validWeights(weights) {\r\n    return Math.abs(weights.reduce(function (a, b) { return a + b; }, 0) - 100) < 3;\r\n}\r\n//# sourceMappingURL=WeightsEditDialog.js.map","import { getAllToolbarActions, getAllToolbarDialogAddons } from '../model/internal';\r\nimport { EDateSort, EAdvancedSortMethod, ESortMethod, isSupportType, isSortingAscByDefault } from '../model';\r\nimport { cssClass } from '../styles';\r\nimport { dialogContext } from './dialogs/ADialog';\r\nimport BooleanFilterDialog from './dialogs/BooleanFilterDialog';\r\nimport CategoricalColorMappingDialog from './dialogs/CategoricalColorMappingDialog';\r\nimport CategoricalFilterDialog from './dialogs/CategoricalFilterDialog';\r\nimport CategoricalMappingFilterDialog from './dialogs/CategoricalMappingFilterDialog';\r\nimport ChangeRendererDialog from './dialogs/ChangeRendererDialog';\r\nimport ColorMappingDialog from './dialogs/ColorMappingDialog';\r\nimport CompositeChildrenDialog from './dialogs/CompositeChildrenDialog';\r\nimport CutOffHierarchyDialog from './dialogs/CutOffHierarchyDialog';\r\nimport DateFilterDialog from './dialogs/DateFilterDialog';\r\nimport EditPatternDialog from './dialogs/EditPatternDialog';\r\nimport appendDate from './dialogs/groupDate';\r\nimport GroupDialog from './dialogs/GroupDialog';\r\nimport appendNumber from './dialogs/groupNumber';\r\nimport appendString from './dialogs/groupString';\r\nimport MappingDialog from './dialogs/MappingDialog';\r\nimport NumberFilterDialog from './dialogs/NumberFilterDialog';\r\nimport ReduceDialog from './dialogs/ReduceDialog';\r\nimport RenameDialog from './dialogs/RenameDialog';\r\nimport ScriptEditDialog from './dialogs/ScriptEditDialog';\r\nimport SearchDialog from './dialogs/SearchDialog';\r\nimport ShowTopNDialog from './dialogs/ShowTopNDialog';\r\nimport SortDialog from './dialogs/SortDialog';\r\nimport StringFilterDialog from './dialogs/StringFilterDialog';\r\nimport { sortMethods } from './dialogs/utils';\r\nimport WeightsEditDialog from './dialogs/WeightsEditDialog';\r\nfunction ui(title, onClick, options) {\r\n    if (options === void 0) { options = {}; }\r\n    return { title: title, onClick: onClick, options: options };\r\n}\r\nfunction uiDialog(title, dialogClass, extraArgs, options) {\r\n    if (extraArgs === void 0) { extraArgs = function () { return []; }; }\r\n    if (options === void 0) { options = {}; }\r\n    return {\r\n        title: title,\r\n        onClick: function (col, evt, ctx, level) {\r\n            var dialog = new (dialogClass.bind.apply(dialogClass, [void 0, col, dialogContext(ctx, level, evt)].concat(extraArgs(ctx))))();\r\n            dialog.open();\r\n        }, options: options\r\n    };\r\n}\r\nfunction uiSortMethod(methods) {\r\n    methods = methods.sort(function (a, b) { return a.toLowerCase().localeCompare(b.toLowerCase()); });\r\n    return {\r\n        title: 'Sort By',\r\n        order: 2,\r\n        append: function (col, node) {\r\n            return sortMethods(node, col, methods);\r\n        }\r\n    };\r\n}\r\nvar sort = {\r\n    title: 'Sort',\r\n    onClick: function (col, evt, ctx, level) {\r\n        ctx.dialogManager.removeAboveLevel(level);\r\n        if (!evt.ctrlKey) {\r\n            col.toggleMySorting();\r\n            return;\r\n        }\r\n        var ranking = col.findMyRanker();\r\n        var current = ranking.getSortCriteria();\r\n        var order = col.isSortedByMe();\r\n        var isAscByDefault = isSortingAscByDefault(col);\r\n        if (order.priority === undefined) {\r\n            ranking.sortBy(col, isAscByDefault, current.length);\r\n            return;\r\n        }\r\n        var next = undefined;\r\n        if (isAscByDefault) {\r\n            next = order.asc ? 'desc' : undefined;\r\n        }\r\n        else {\r\n            next = !order.asc ? 'asc' : undefined;\r\n        }\r\n        ranking.sortBy(col, next === 'asc', next ? order.priority : -1);\r\n    },\r\n    options: {\r\n        mode: 'shortcut',\r\n        order: 1,\r\n        featureCategory: 'ranking',\r\n        featureLevel: 'basic'\r\n    }\r\n};\r\nvar sortBy = {\r\n    title: 'Sort By &hellip;',\r\n    onClick: function (col, evt, ctx, level) {\r\n        var dialog = new SortDialog(col, false, dialogContext(ctx, level, evt), ctx);\r\n        dialog.open();\r\n    },\r\n    options: {\r\n        mode: 'menu',\r\n        order: 1,\r\n        featureCategory: 'ranking',\r\n        featureLevel: 'advanced'\r\n    }\r\n};\r\nvar sortGroupBy = {\r\n    title: 'Sort Groups By &hellip;',\r\n    onClick: function (col, evt, ctx, level) {\r\n        var dialog = new SortDialog(col, true, dialogContext(ctx, level, evt), ctx);\r\n        dialog.open();\r\n    },\r\n    options: {\r\n        mode: 'menu',\r\n        order: 3,\r\n        featureCategory: 'ranking',\r\n        featureLevel: 'advanced'\r\n    }\r\n};\r\nvar rename = {\r\n    title: 'Rename &hellip;',\r\n    onClick: function (col, evt, ctx, level) {\r\n        var dialog = new RenameDialog(col, dialogContext(ctx, level, evt));\r\n        dialog.open();\r\n    },\r\n    options: {\r\n        order: 5,\r\n        featureCategory: 'ui',\r\n        featureLevel: 'advanced'\r\n    }\r\n};\r\nvar vis = {\r\n    title: 'Visualization &hellip;',\r\n    onClick: function (col, evt, ctx, level) {\r\n        var dialog = new ChangeRendererDialog(col, dialogContext(ctx, level, evt), ctx);\r\n        dialog.open();\r\n    },\r\n    options: {\r\n        featureCategory: 'ui',\r\n        featureLevel: 'advanced'\r\n    }\r\n};\r\nvar clone = {\r\n    title: 'Clone',\r\n    onClick: function (col, _evt, ctx) {\r\n        ctx.dialogManager.removeAll(); // since the column will be removed\r\n        ctx.provider.takeSnapshot(col);\r\n    },\r\n    options: {\r\n        order: 80,\r\n        featureCategory: 'model',\r\n        featureLevel: 'advanced'\r\n    }\r\n};\r\nvar remove = {\r\n    title: 'Remove',\r\n    onClick: function (col, _evt, ctx) {\r\n        ctx.dialogManager.removeAll(); // since the column will be removed\r\n        var ranking = col.findMyRanker();\r\n        var last = ranking.children.every(function (d) { return isSupportType(d) || d.fixed || d === col; });\r\n        if (!last) {\r\n            col.removeMe();\r\n            return;\r\n        }\r\n        ctx.provider.removeRanking(ranking);\r\n        ctx.provider.ensureOneRanking();\r\n    },\r\n    options: {\r\n        order: 90,\r\n        featureCategory: 'model',\r\n        featureLevel: 'advanced'\r\n    }\r\n};\r\n// basic ranking\r\nvar group = ui('Group', function (col, evt, ctx, level) {\r\n    ctx.dialogManager.removeAboveLevel(level);\r\n    if (!evt.ctrlKey) {\r\n        col.groupByMe();\r\n        return;\r\n    }\r\n    var ranking = col.findMyRanker();\r\n    var current = ranking.getGroupCriteria();\r\n    var order = current.indexOf(col);\r\n    ranking.groupBy(col, order >= 0 ? -1 : current.length);\r\n}, { mode: 'shortcut', order: 2, featureCategory: 'ranking', featureLevel: 'basic' });\r\n// advanced ranking\r\nvar groupBy = ui('Group By &hellip;', function (col, evt, ctx, level) {\r\n    var dialog = new GroupDialog(col, dialogContext(ctx, level, evt), ctx);\r\n    dialog.open();\r\n}, { mode: 'menu', order: 2, featureCategory: 'ranking', featureLevel: 'advanced' });\r\nfunction toggleCompressExpand(col, evt, ctx, level) {\r\n    ctx.dialogManager.removeAboveLevel(level);\r\n    var mcol = col;\r\n    mcol.setCollapsed(!mcol.getCollapsed());\r\n    var collapsed = mcol.getCollapsed();\r\n    var i = evt.currentTarget;\r\n    i.title = collapsed ? 'Expand' : 'Compress';\r\n    i.classList.toggle(cssClass('action-compress'), !collapsed);\r\n    i.classList.toggle(cssClass('action-expand'), collapsed);\r\n    var inner = i.getElementsByTagName('span')[0];\r\n    if (inner) {\r\n        inner.textContent = i.title;\r\n    }\r\n}\r\nvar compress = {\r\n    title: 'Compress',\r\n    enabled: function (col) { return !col.getCollapsed(); },\r\n    onClick: toggleCompressExpand,\r\n    options: { featureCategory: 'model', featureLevel: 'advanced' }\r\n};\r\nvar expand = {\r\n    title: 'Expand',\r\n    enabled: function (col) { return col.getCollapsed(); },\r\n    onClick: toggleCompressExpand,\r\n    options: { featureCategory: 'model', featureLevel: 'advanced' }\r\n};\r\nvar setShowTopN = {\r\n    title: 'Change Show Top N',\r\n    onClick: function (_col, evt, ctx, level) {\r\n        var dialog = new ShowTopNDialog(ctx.provider, dialogContext(ctx, level, evt));\r\n        dialog.open();\r\n    },\r\n    options: {\r\n        featureCategory: 'ui',\r\n        featureLevel: 'advanced'\r\n    }\r\n};\r\nexport var toolbarDialogAddons = {\r\n    sortNumber: uiSortMethod(Object.keys(EAdvancedSortMethod)),\r\n    sortNumbers: uiSortMethod(Object.keys(EAdvancedSortMethod)),\r\n    sortBoxPlot: uiSortMethod(Object.keys(ESortMethod)),\r\n    sortDates: uiSortMethod(Object.keys(EDateSort)),\r\n    sortGroups: uiSortMethod(['count', 'name']),\r\n    groupNumber: {\r\n        title: 'Split',\r\n        order: 2,\r\n        append: appendNumber\r\n    },\r\n    groupString: {\r\n        title: 'Groups',\r\n        order: 2,\r\n        append: appendString\r\n    },\r\n    groupDate: {\r\n        title: 'Granularity',\r\n        order: 2,\r\n        append: appendDate\r\n    },\r\n};\r\nexport var toolbarActions = {\r\n    vis: vis,\r\n    group: group,\r\n    groupBy: groupBy,\r\n    compress: compress,\r\n    expand: expand,\r\n    sort: sort,\r\n    sortBy: sortBy,\r\n    sortGroupBy: sortGroupBy,\r\n    clone: clone,\r\n    remove: remove,\r\n    rename: rename,\r\n    setShowTopN: setShowTopN,\r\n    search: uiDialog('Search &hellip;', SearchDialog, function (ctx) { return [ctx.provider]; }, { mode: 'menu+shortcut', order: 4, featureCategory: 'ranking', featureLevel: 'basic' }),\r\n    filterNumber: uiDialog('Filter &hellip;', NumberFilterDialog, function (ctx) { return [ctx]; }, { mode: 'menu+shortcut', featureCategory: 'ranking', featureLevel: 'basic' }),\r\n    filterDate: uiDialog('Filter &hellip;', DateFilterDialog, function (ctx) { return [ctx]; }, { mode: 'menu+shortcut', featureCategory: 'ranking', featureLevel: 'basic' }),\r\n    filterString: uiDialog('Filter &hellip;', StringFilterDialog, function () { return []; }, { mode: 'menu+shortcut', featureCategory: 'ranking', featureLevel: 'basic' }),\r\n    filterCategorical: uiDialog('Filter &hellip;', CategoricalFilterDialog, function () { return []; }, { mode: 'menu+shortcut', featureCategory: 'ranking', featureLevel: 'basic' }),\r\n    filterOrdinal: uiDialog('Filter &hellip;', CategoricalMappingFilterDialog, function () { return []; }, { mode: 'menu+shortcut', featureCategory: 'ranking', featureLevel: 'basic' }),\r\n    filterBoolean: uiDialog('Filter &hellip;', BooleanFilterDialog, function () { return []; }, { mode: 'menu+shortcut', featureCategory: 'ranking', featureLevel: 'basic' }),\r\n    colorMapped: uiDialog('Color Mapping &hellip;', ColorMappingDialog, function (ctx) { return [ctx]; }, { mode: 'menu', featureCategory: 'ui', featureLevel: 'advanced' }),\r\n    colorMappedCategorical: uiDialog('Color Mapping &hellip;', CategoricalColorMappingDialog, function () { return []; }, { mode: 'menu', featureCategory: 'ui', featureLevel: 'advanced' }),\r\n    script: uiDialog('Edit Combine Script &hellip;', ScriptEditDialog, function () { return []; }, { mode: 'menu+shortcut', featureCategory: 'model', featureLevel: 'advanced' }),\r\n    reduce: uiDialog('Reduce by &hellip;', ReduceDialog, function () { return []; }, { featureCategory: 'model', featureLevel: 'advanced' }),\r\n    cutoff: uiDialog('Set Cut Off &hellip;', CutOffHierarchyDialog, function (ctx) { return [ctx.idPrefix]; }, { featureCategory: 'model', featureLevel: 'advanced' }),\r\n    editMapping: uiDialog('Data Mapping &hellip;', MappingDialog, function (ctx) { return [ctx]; }, { featureCategory: 'model', featureLevel: 'advanced' }),\r\n    editPattern: uiDialog('Edit Pattern &hellip;', EditPatternDialog, function (ctx) { return [ctx.idPrefix]; }, { featureCategory: 'model', featureLevel: 'advanced' }),\r\n    editWeights: uiDialog('Edit Weights &hellip;', WeightsEditDialog, function () { return []; }, { mode: 'menu+shortcut', featureCategory: 'model', featureLevel: 'advanced' }),\r\n    compositeContained: uiDialog('Contained Columns &hellip;', CompositeChildrenDialog, function (ctx) { return [ctx]; }, { featureCategory: 'model', featureLevel: 'advanced' }),\r\n    splitCombined: ui('Split Combined Column', function (col, _evt, ctx, level) {\r\n        ctx.dialogManager.removeAboveLevel(level - 1); // close itself\r\n        // split the combined column into its children\r\n        col.children.reverse().forEach(function (c) { return col.insertAfterMe(c); });\r\n        col.removeMe();\r\n    }, { featureCategory: 'model', featureLevel: 'advanced' }),\r\n    invertSelection: ui('Invert Selection', function (col, _evt, ctx, level) {\r\n        ctx.dialogManager.removeAboveLevel(level - 1); // close itself\r\n        var s = ctx.provider.getSelection();\r\n        var order = Array.from(col.findMyRanker().getOrder());\r\n        if (s.length === 0) {\r\n            ctx.provider.setSelection(order);\r\n            return;\r\n        }\r\n        var ss = new Set(s);\r\n        var others = order.filter(function (d) { return !ss.has(d); });\r\n        ctx.provider.setSelection(others);\r\n    }, { featureCategory: 'model', featureLevel: 'advanced' })\r\n};\r\nfunction sortActions(a, b) {\r\n    if (a.options.order === b.options.order) {\r\n        return a.title.toString().localeCompare(b.title.toString());\r\n    }\r\n    return (a.options.order || 50) - (b.options.order || 50);\r\n}\r\nfunction getFullToolbar(col, ctx) {\r\n    var cache = ctx.caches.toolbar;\r\n    if (cache.has(col.desc.type)) {\r\n        return cache.get(col.desc.type);\r\n    }\r\n    var keys = getAllToolbarActions(col);\r\n    if (!col.fixed) {\r\n        keys.push('remove');\r\n    }\r\n    {\r\n        var possible = ctx.getPossibleRenderer(col);\r\n        if (possible.item.length > 2 || possible.group.length > 2 || possible.summary.length > 2) { // default always possible\r\n            keys.push('vis');\r\n        }\r\n    }\r\n    var actions = ctx.resolveToolbarActions(col, keys);\r\n    var r = Array.from(new Set(actions)).sort(sortActions);\r\n    cache.set(col.desc.type, r);\r\n    return r;\r\n}\r\n/** @internal */\r\nexport function getToolbar(col, ctx) {\r\n    var toolbar = getFullToolbar(col, ctx);\r\n    var flags = ctx.flags;\r\n    return toolbar.filter(function (a) {\r\n        if (a.enabled && !a.enabled(col)) {\r\n            return false;\r\n        }\r\n        // level is basic or not one of disabled features\r\n        return a.options.featureLevel === 'basic' || !((flags.advancedModelFeatures === false && a.options.featureCategory === 'model') || (flags.advancedRankingFeatures === false && a.options.featureCategory === 'ranking') || (flags.advancedUIFeatures === false && a.options.featureCategory === 'ui'));\r\n    });\r\n}\r\n/** @internal */\r\nexport function getToolbarDialogAddons(col, key, ctx) {\r\n    var cacheKey = col.desc.type + \"@\" + key;\r\n    var cacheAddon = ctx.caches.toolbarAddons;\r\n    if (cacheAddon.has(cacheKey)) {\r\n        return cacheAddon.get(cacheKey);\r\n    }\r\n    var keys = getAllToolbarDialogAddons(col, key);\r\n    var actions = ctx.resolveToolbarDialogAddons(col, keys);\r\n    var r = Array.from(new Set(actions)).sort(function (a, b) {\r\n        if (a.order === b.order) {\r\n            return a.title.localeCompare(b.title);\r\n        }\r\n        return (a.order || 50) - (b.order || 50);\r\n    });\r\n    cacheAddon.set(cacheKey, r);\r\n    return r;\r\n}\r\n/** @internal */\r\nexport function isSortAble(col, ctx) {\r\n    var toolbar = getFullToolbar(col, ctx);\r\n    return toolbar.find(function (d) { return d === sort || d === sortBy || d.title === sort.title || d.title.startsWith('Sort By'); }) != null;\r\n}\r\n/** @internal */\r\nexport function isGroupAble(col, ctx) {\r\n    var toolbar = getFullToolbar(col, ctx);\r\n    return toolbar.find(function (d) { return d === group || d === groupBy || d.title === group.title || d.title.startsWith('Group By'); }) != null;\r\n}\r\n/** @internal */\r\nexport function isGroupSortAble(col, ctx) {\r\n    var toolbar = getFullToolbar(col, ctx);\r\n    return toolbar.find(function (d) { return d === sortGroupBy || d.title === sortGroupBy.title || d.title.startsWith('Sort Groups By'); }) != null;\r\n}\r\n//# sourceMappingURL=toolbar.js.map","import { round, getNumberOfBins } from '../../internal';\r\nimport { forEach } from '../../renderer/utils';\r\nimport { cssClass } from '../../styles';\r\n/** @internal */\r\nexport default function groupNumber(col, node, dialog) {\r\n    var domain = col.getMapping().domain;\r\n    var before = col.getGroupThresholds();\r\n    var isThreshold = before.length <= 1;\r\n    var ranking = col.findMyRanker();\r\n    node.insertAdjacentHTML('beforeend', \"\\n    <label class=\\\"\" + cssClass('checkbox') + \"\\\">\\n      <input type=\\\"radio\\\" name=\\\"threshold\\\" value=\\\"threshold\\\" \" + (isThreshold ? 'checked' : '') + \">\\n      <span>at&nbsp;<input type=\\\"number\\\" size=\\\"10\\\" id=\\\"\" + dialog.idPrefix + \"N1\\\" value=\\\"\" + (before.length > 0 ? before[0] : round((domain[1] - domain[0]) / 2, 2)) + \"\\\"\\n          required min=\\\"\" + domain[0] + \"\\\" max=\\\"\" + domain[1] + \"\\\" step=\\\"any\\\" \" + (!isThreshold ? 'disabled' : '') + \">\\n      </span>\\n    </label>\\n    <label class=\\\"\" + cssClass('checkbox') + \"\\\">\\n      <input type=\\\"radio\\\" name=\\\"threshold\\\" value=\\\"bins\\\" \" + (!isThreshold ? 'checked' : '') + \">\\n      <span> in&nbsp;<input type=\\\"number\\\" size=\\\"5\\\" id=\\\"\" + dialog.idPrefix + \"N2\\\" value=\\\"\" + (before.length > 1 ? before.length : getNumberOfBins(ranking.getOrderLength())) + \"\\\"\\n          required min=\\\"2\\\" step=\\\"1\\\" \" + (isThreshold ? 'disabled' : '') + \">&nbsp;bins\\n      </span>\\n    </label>\\n  \");\r\n    var threshold = node.querySelector(\"#\" + dialog.idPrefix + \"N1\");\r\n    var bins = node.querySelector(\"#\" + dialog.idPrefix + \"N2\");\r\n    forEach(node, 'input[name=threshold]', function (d) {\r\n        d.addEventListener('change', function () {\r\n            var isThreshold = d.value === 'threshold';\r\n            threshold.disabled = !isThreshold;\r\n            bins.disabled = isThreshold;\r\n        }, { passive: true });\r\n    });\r\n    return {\r\n        elems: \"input[name=threshold], #\" + dialog.idPrefix + \"N1, #\" + dialog.idPrefix + \"N2\",\r\n        submit: function () {\r\n            var isThreshold = node.querySelector('input[name=threshold]:checked').value === 'threshold';\r\n            if (isThreshold) {\r\n                col.setGroupThresholds([threshold.valueAsNumber]);\r\n                return true;\r\n            }\r\n            var count = parseInt(bins.value, 10);\r\n            var delta = (domain[1] - domain[0]) / count;\r\n            var act = domain[0] + delta;\r\n            var thresholds = [act];\r\n            for (var i = 1; i < count - 1; ++i) {\r\n                act += delta;\r\n                thresholds.push(act);\r\n            }\r\n            col.setGroupThresholds(thresholds);\r\n            return true;\r\n        },\r\n        cancel: function () {\r\n            col.setGroupThresholds(before);\r\n        },\r\n        reset: function () {\r\n            var value = round((domain[1] - domain[0]) / 2, 2);\r\n            threshold.value = value.toString();\r\n            threshold.disabled = false;\r\n            bins.value = getNumberOfBins(ranking.getOrderLength()).toString();\r\n            bins.disabled = true;\r\n            node.querySelector('input[name=threshold][value=threshold]').checked = true;\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=groupNumber.js.map","import { EStringGroupCriteriaType } from '../../model';\r\nimport { cssClass } from '../../styles';\r\n/** @internal */\r\nexport default function groupString(col, node, dialog) {\r\n    var current = col.getGroupCriteria();\r\n    var type = current.type, values = current.values;\r\n    node.insertAdjacentHTML('beforeend', \"\\n    <label class=\\\"\" + cssClass('checkbox') + \"\\\">\\n      <input type=\\\"radio\\\" name=\\\"\" + dialog.idPrefix + \"groupString\\\" value=\\\"\" + EStringGroupCriteriaType.value + \"\\\" id=\\\"\" + dialog.idPrefix + \"VAL\\\" \" + (type === EStringGroupCriteriaType.value ? 'checked' : '') + \">\\n      <span>Use text value</span>\\n    </label>\\n    <label class=\\\"\" + cssClass('checkbox') + \"\\\">\\n      <input type=\\\"radio\\\" name=\\\"\" + dialog.idPrefix + \"groupString\\\" value=\\\"\" + EStringGroupCriteriaType.startsWith + \"\\\" id=\\\"\" + dialog.idPrefix + \"RW\\\" \" + (type === EStringGroupCriteriaType.startsWith ? 'checked' : '') + \">\\n      <span>Text starts with &hellip;</span>\\n    </label>\\n    <label class=\\\"\" + cssClass('checkbox') + \"\\\">\\n      <input type=\\\"radio\\\" name=\\\"\" + dialog.idPrefix + \"groupString\\\" value=\\\"\" + EStringGroupCriteriaType.regex + \"\\\" id=\\\"\" + dialog.idPrefix + \"RE\\\" \" + (type === EStringGroupCriteriaType.regex ? 'checked' : '') + \">\\n      <span>Use regular expressions</span>\\n    </label>\\n    <textarea required rows=\\\"5\\\" placeholder=\\\"e.g. Test,a.*\\\" id=\\\"\" + dialog.idPrefix + \"T\\\">\" + values.map(function (value) { return value instanceof RegExp ? value.source : value; }).join('\\n') + \"</textarea>\\n  \");\r\n    var valueRadioButton = node.querySelector(\"#\" + dialog.idPrefix + \"VAL\");\r\n    var startsWithRadioButton = node.querySelector(\"#\" + dialog.idPrefix + \"RW\");\r\n    var regexRadioButton = node.querySelector(\"#\" + dialog.idPrefix + \"RE\");\r\n    var text = node.querySelector(\"#\" + dialog.idPrefix + \"T\");\r\n    var showOrHideTextarea = function (show) {\r\n        text.style.display = show ? null : 'none';\r\n    };\r\n    showOrHideTextarea(type !== EStringGroupCriteriaType.value);\r\n    valueRadioButton.onchange = function () { return showOrHideTextarea(!valueRadioButton.checked); };\r\n    startsWithRadioButton.onchange = function () { return showOrHideTextarea(startsWithRadioButton.checked); };\r\n    regexRadioButton.onchange = function () { return showOrHideTextarea(regexRadioButton.checked); };\r\n    text.addEventListener('change', function () {\r\n        var items = text.value.trim().split('\\n').map(function (d) { return d.trim(); }).filter(function (d) { return d.length > 0; });\r\n        text.setCustomValidity(!valueRadioButton.checked && items.length === 0 ? 'At least one entry is required' : '');\r\n    });\r\n    return {\r\n        elems: [text, valueRadioButton, startsWithRadioButton, regexRadioButton],\r\n        submit: function () {\r\n            var checkedNode = node.querySelector(\"input[name=\\\"\" + dialog.idPrefix + \"groupString\\\"]:checked\");\r\n            var newType = checkedNode.value;\r\n            var items = text.value.trim().split('\\n').map(function (d) { return d.trim(); }).filter(function (d) { return d.length > 0; });\r\n            if (newType !== EStringGroupCriteriaType.value) {\r\n                var invalid = items.length === 0;\r\n                text.setCustomValidity(invalid ? 'At least one entry is required' : '');\r\n                if (invalid) {\r\n                    text.reportValidity(); // typedoc not uptodate\r\n                    return false;\r\n                }\r\n            }\r\n            if (newType === EStringGroupCriteriaType.regex) {\r\n                items = items.map(function (d) { return new RegExp(d.toString(), 'gm'); });\r\n            }\r\n            col.setGroupCriteria({\r\n                type: newType,\r\n                values: items\r\n            });\r\n            return true;\r\n        },\r\n        cancel: function () {\r\n            col.setGroupCriteria(current);\r\n        },\r\n        reset: function () {\r\n            text.value = '';\r\n            startsWithRadioButton.checked = true;\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=groupString.js.map","import { cssClass } from '../../styles';\r\nimport { defaultDateGrouper } from '../../model/internalDate';\r\n/** @internal */\r\nexport default function appendDate(col, node) {\r\n    var before = col.getDateGrouper();\r\n    var html = '';\r\n    for (var _i = 0, _a = ['century', 'decade', 'year', 'month', 'week', 'day_of_week', 'day_of_month', 'day_of_year', 'hour', 'minute', 'second']; _i < _a.length; _i++) {\r\n        var g = _a[_i];\r\n        html += \"<label class=\\\"\" + cssClass('checkbox') + \"\\\">\\n    <input type=\\\"radio\\\" name=\\\"granularity\\\" value=\\\"\" + g + \"\\\" \" + (before.granularity === g ? 'checked' : '') + \">\\n    <span> by \" + g + \" </span>\\n  </label>\";\r\n    }\r\n    html += \"<label class=\\\"\" + cssClass('checkbox') + \"\\\">\\n    <input type=\\\"checkbox\\\" name=\\\"circular\\\" \" + (before.circular ? 'checked' : '') + \">\\n    <span> Circular </span>\\n  </label>\";\r\n    node.insertAdjacentHTML('beforeend', html);\r\n    var circular = node.querySelector('input[name=circular]');\r\n    return {\r\n        elems: 'input[name=granularity],input[name=circular]',\r\n        submit: function () {\r\n            var granularity = node.querySelector('input[name=granularity]:checked').value;\r\n            col.setDateGrouper({\r\n                granularity: granularity,\r\n                circular: circular.checked\r\n            });\r\n            return true;\r\n        },\r\n        cancel: function () {\r\n            col.setDateGrouper(before);\r\n        },\r\n        reset: function () {\r\n            var r = defaultDateGrouper();\r\n            circular.checked = r.circular;\r\n            var g = node.querySelector(\"input[name=granularity][value=\\\"\" + r.granularity + \"\\\"]\");\r\n            g.checked = true;\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=groupDate.js.map","import { renderers } from './renderer/renderers';\r\nimport { toolbarActions, toolbarDialogAddons } from './ui/toolbar';\r\nfunction resolveToolbarActions(col, keys, lookup) {\r\n    var actions = [];\r\n    keys.forEach(function (key) {\r\n        if (lookup.hasOwnProperty(key)) {\r\n            actions.push(lookup[key]);\r\n        }\r\n        else {\r\n            console.warn(\"cannot find toolbar action of type: \\\"\" + col.desc.type + \"\\\" with key \\\"\" + key + \"\\\"\");\r\n        }\r\n    });\r\n    return actions;\r\n}\r\nfunction resolveToolbarDialogAddons(col, keys, lookup) {\r\n    var actions = [];\r\n    keys.forEach(function (key) {\r\n        if (lookup.hasOwnProperty(key)) {\r\n            actions.push(lookup[key]);\r\n        }\r\n        else {\r\n            console.warn(\"cannot find toolbar dialog addon of type: \\\"\" + col.desc.type + \"\\\" with key \\\"\" + key + \"\\\"\");\r\n        }\r\n    });\r\n    return actions;\r\n}\r\nexport function defaultOptions() {\r\n    return {\r\n        toolbarActions: toolbarActions,\r\n        toolbarDialogAddons: toolbarDialogAddons,\r\n        resolveToolbarActions: resolveToolbarActions,\r\n        resolveToolbarDialogAddons: resolveToolbarDialogAddons,\r\n        renderers: Object.assign({}, renderers),\r\n        canRender: function () { return true; },\r\n        labelRotation: 0,\r\n        summaryHeader: true,\r\n        animated: true,\r\n        expandLineOnHover: false,\r\n        sidePanel: true,\r\n        sidePanelCollapsed: false,\r\n        hierarchyIndicator: true,\r\n        defaultSlopeGraphMode: 'item',\r\n        overviewMode: false,\r\n        livePreviews: {\r\n            search: true,\r\n            filter: true,\r\n            vis: true,\r\n            sort: true,\r\n            group: true,\r\n            groupSort: true,\r\n            colorMapping: true\r\n        },\r\n        onDialogBackgroundClick: 'cancel',\r\n        rowHeight: 18,\r\n        groupHeight: 40,\r\n        groupPadding: 5,\r\n        rowPadding: 2,\r\n        levelOfDetail: function () { return 'high'; },\r\n        customRowUpdate: function () { return undefined; },\r\n        dynamicHeight: function () { return null; },\r\n        flags: {\r\n            disableFrozenColumns: true,\r\n            advancedRankingFeatures: true,\r\n            advancedModelFeatures: true,\r\n            advancedUIFeatures: true,\r\n        },\r\n        ignoreUnsupportedBrowser: false\r\n    };\r\n}\r\n//# sourceMappingURL=config.js.map","import { detect } from 'detect-browser';\r\nexport var SUPPORTED_FIREFOX_VERSION = 57;\r\nexport var SUPPORTED_CHROME_VERSION = 64;\r\nexport var SUPPORTED_EDGE_VERSION = 16;\r\n/**\r\n * @internal\r\n */\r\nexport function getUnsupportedBrowserError() {\r\n    var info = detect();\r\n    if (!info || !info.version) {\r\n        return 'browser cannot be detected';\r\n    }\r\n    var prefix = \"unsupported browser detected:\";\r\n    switch (info.name) {\r\n        case 'firefox':\r\n            var fVersion = parseInt(info.version.slice(0, info.version.indexOf('.')), 10);\r\n            if (fVersion <= SUPPORTED_FIREFOX_VERSION && fVersion !== 52) { // ESR\r\n                return prefix + \" Firefox \" + info.version + \" (&lt; \" + SUPPORTED_FIREFOX_VERSION + \")\";\r\n            }\r\n            return null;\r\n        case 'edge':\r\n            var eVersion = parseInt(info.version.slice(0, info.version.indexOf('.')), 10);\r\n            if (eVersion <= SUPPORTED_EDGE_VERSION) {\r\n                return prefix + \" Edge \" + info.version + \" (&lt; \" + SUPPORTED_EDGE_VERSION + \")\";\r\n            }\r\n            return null;\r\n        case 'chrome':\r\n            var cVersion = parseInt(info.version.slice(0, info.version.indexOf('.')), 10);\r\n            if (cVersion <= SUPPORTED_CHROME_VERSION) {\r\n                return prefix + \" Chrome \" + info.version + \" (&lt; \" + SUPPORTED_CHROME_VERSION + \")\";\r\n            }\r\n            return null;\r\n        case 'ie':\r\n            return prefix + \" Internet Explorer\";\r\n    }\r\n    console.warn('unknown browser detected', info, 'assuming fine...');\r\n    return null;\r\n}\r\n/**\r\n * checks whether the current browser is compatible with lineupjs\r\n * @return boolean\r\n */\r\nexport function isBrowserSupported() {\r\n    return getUnsupportedBrowserError() == null;\r\n}\r\n//# sourceMappingURL=browser.js.map","import * as tslib_1 from \"tslib\";\r\nimport { cssClass } from '../../styles';\r\nimport { AEventDispatcher } from '../../internal';\r\nvar DialogManager = /** @class */ (function (_super) {\r\n    tslib_1.__extends(DialogManager, _super);\r\n    function DialogManager(options) {\r\n        var _this = _super.call(this) || this;\r\n        _this.escKeyListener = function (evt) {\r\n            if (evt.which === 27) {\r\n                _this.removeLast();\r\n            }\r\n        };\r\n        _this.openDialogs = [];\r\n        var doc = options.doc;\r\n        _this.livePreviews = options.livePreviews;\r\n        _this.onDialogBackgroundClick = options.onDialogBackgroundClick;\r\n        _this.node = doc.createElement('div');\r\n        _this.node.classList.add(cssClass('backdrop'));\r\n        _this.node.innerHTML = \"<div class=\\\"\" + cssClass('backdrop-bg') + \"\\\"></div>\";\r\n        _this.node.onclick = function () {\r\n            _this.removeAll();\r\n        };\r\n        return _this;\r\n    }\r\n    DialogManager.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([DialogManager.EVENT_DIALOG_CLOSED, DialogManager.EVENT_DIALOG_OPENED]);\r\n    };\r\n    DialogManager.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    Object.defineProperty(DialogManager.prototype, \"maxLevel\", {\r\n        get: function () {\r\n            return this.openDialogs.reduce(function (acc, a) { return Math.max(acc, a.level); }, 0);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    DialogManager.prototype.setHighlight = function (mask) {\r\n        var area = this.node.firstElementChild;\r\n        // @see http://bennettfeely.com/clippy/ -> select `Frame` example\r\n        // use webkit prefix for safari\r\n        area.style.clipPath = area.style.webkitClipPath = \"polygon(\\n      0% 0%,\\n      0% 100%,\\n      \" + mask.left + \"px 100%,\\n      \" + mask.left + \"px \" + mask.top + \"px,\\n      \" + (mask.left + mask.width) + \"px \" + mask.top + \"px,\\n      \" + (mask.left + mask.width) + \"px \" + (mask.top + mask.height) + \"px,\\n      \" + mask.left + \"px \" + (mask.top + mask.height) + \"px,\\n      \" + mask.left + \"px 100%,\\n      100% 100%,\\n      100% 0%\\n    )\";\r\n    };\r\n    DialogManager.prototype.setHighlightColumn = function (column) {\r\n        var root = this.node.parentElement;\r\n        if (!root) {\r\n            this.clearHighlight();\r\n            return;\r\n        }\r\n        var header = root.querySelector(\".\" + cssClass('header') + \"[data-col-id=\\\"\" + column.id + \"\\\"]\");\r\n        if (!header) {\r\n            this.clearHighlight();\r\n            return;\r\n        }\r\n        var base = header.getBoundingClientRect();\r\n        var offset = root.getBoundingClientRect();\r\n        this.setHighlight({\r\n            left: base.left - offset.left,\r\n            top: base.top - offset.top,\r\n            width: base.width,\r\n            height: offset.height\r\n        });\r\n    };\r\n    DialogManager.prototype.clearHighlight = function () {\r\n        var area = this.node.firstElementChild;\r\n        area.style.clipPath = null;\r\n    };\r\n    DialogManager.prototype.removeLast = function () {\r\n        if (this.openDialogs.length === 0) {\r\n            return;\r\n        }\r\n        this.remove(this.openDialogs[this.openDialogs.length - 1]);\r\n    };\r\n    DialogManager.prototype.removeAll = function () {\r\n        var _this = this;\r\n        if (this.openDialogs.length === 0) {\r\n            return;\r\n        }\r\n        var all = this.openDialogs.splice(0, this.openDialogs.length);\r\n        all.reverse().forEach(function (d) { return d.cleanUp(_this.onDialogBackgroundClick); });\r\n        this.takeDown();\r\n    };\r\n    DialogManager.prototype.triggerDialogClosed = function (dialog, action) {\r\n        this.fire(DialogManager.EVENT_DIALOG_CLOSED, dialog, action);\r\n    };\r\n    DialogManager.prototype.remove = function (dialog, handled) {\r\n        var _this = this;\r\n        if (handled === void 0) { handled = false; }\r\n        var index = this.openDialogs.indexOf(dialog);\r\n        if (index < 0) {\r\n            return false;\r\n        }\r\n        // destroy self and all levels below that = after that\r\n        var destroyed = this.openDialogs.splice(index, this.openDialogs.length - index);\r\n        destroyed.reverse().forEach(function (d) { return d.cleanUp(handled ? 'handled' : _this.onDialogBackgroundClick); });\r\n        while (handled && this.openDialogs.length > 0 && this.openDialogs[this.openDialogs.length - 1].autoClose) {\r\n            var dialog_1 = this.openDialogs.pop();\r\n            dialog_1.cleanUp(this.onDialogBackgroundClick);\r\n        }\r\n        if (this.openDialogs.length === 0) {\r\n            this.takeDown();\r\n        }\r\n        return true;\r\n    };\r\n    DialogManager.prototype.removeAboveLevel = function (level) {\r\n        var _this = this;\r\n        // hide all dialogs which have a higher or equal level to the newly opened one\r\n        this.openDialogs.filter(function (d) { return d.level >= level; }).reverse().forEach(function (d) { return _this.remove(d); });\r\n    };\r\n    DialogManager.prototype.removeLike = function (dialog) {\r\n        var similar = this.openDialogs.find(function (d) { return dialog.equals(d); });\r\n        if (!similar) {\r\n            return false;\r\n        }\r\n        this.remove(similar);\r\n        return true;\r\n    };\r\n    DialogManager.prototype.setUp = function () {\r\n        this.node.ownerDocument.addEventListener('keyup', this.escKeyListener, {\r\n            passive: true\r\n        });\r\n        this.node.style.display = 'block';\r\n    };\r\n    DialogManager.prototype.takeDown = function () {\r\n        this.clearHighlight();\r\n        this.node.ownerDocument.removeEventListener('keyup', this.escKeyListener);\r\n        this.node.style.display = null;\r\n    };\r\n    DialogManager.prototype.push = function (dialog) {\r\n        this.removeAboveLevel(dialog.level);\r\n        if (this.openDialogs.length === 0) {\r\n            this.setUp();\r\n        }\r\n        this.openDialogs.push(dialog);\r\n        this.fire(DialogManager.EVENT_DIALOG_OPENED, dialog);\r\n    };\r\n    DialogManager.EVENT_DIALOG_OPENED = 'dialogOpened';\r\n    DialogManager.EVENT_DIALOG_CLOSED = 'dialogClosed';\r\n    return DialogManager;\r\n}(AEventDispatcher));\r\nexport default DialogManager;\r\n//# sourceMappingURL=DialogManager.js.map","export { default as KeyFinder } from './KeyFinder';\r\n/**\r\n * different row animation modes\r\n */\r\nexport var EAnimationMode;\r\n(function (EAnimationMode) {\r\n    /**\r\n     * plain update existed both before and after\r\n     */\r\n    EAnimationMode[EAnimationMode[\"UPDATE\"] = 0] = \"UPDATE\";\r\n    /**\r\n     * exists both before and after but wasn't visible yet thus waas created\r\n     */\r\n    EAnimationMode[EAnimationMode[\"UPDATE_CREATE\"] = 1] = \"UPDATE_CREATE\";\r\n    /**\r\n     * exists both before and after is visible but not needed anymore and thus removed\r\n     */\r\n    EAnimationMode[EAnimationMode[\"UPDATE_REMOVE\"] = 2] = \"UPDATE_REMOVE\";\r\n    /**\r\n     * row appears\r\n     */\r\n    EAnimationMode[EAnimationMode[\"SHOW\"] = 3] = \"SHOW\";\r\n    /**\r\n     * row disappears\r\n     */\r\n    EAnimationMode[EAnimationMode[\"HIDE\"] = 4] = \"HIDE\";\r\n})(EAnimationMode || (EAnimationMode = {}));\r\nvar NO_CHANGE_DELTA = 1;\r\nexport function noAnimationChange(_a, previousHeight, currentHeight) {\r\n    var previous = _a.previous, mode = _a.mode, nodeY = _a.nodeY, current = _a.current;\r\n    // sounds like the same\r\n    var prev = previous.height == null ? previousHeight : previous.height;\r\n    var curr = current.height == null ? currentHeight : current.height;\r\n    return mode === EAnimationMode.UPDATE && (Math.abs(previous.y - nodeY) <= NO_CHANGE_DELTA) && (Math.abs(prev - curr) <= NO_CHANGE_DELTA);\r\n}\r\n/**\r\n * maximal duration of all animations + extra waiting before e.g. rows are really removed\r\n * @type {number}\r\n */\r\nvar MAX_ANIMATION_TIME = 1100;\r\nexport var defaultPhases = [\r\n    {\r\n        delay: 0,\r\n        apply: function (_a) {\r\n            var mode = _a.mode, previous = _a.previous, nodeY = _a.nodeY, current = _a.current, node = _a.node;\r\n            node.dataset.animation = EAnimationMode[mode].toLowerCase();\r\n            node.style.transform = \"translate(0, \" + (previous.y - nodeY) + \"px)\";\r\n            if (mode === EAnimationMode.SHOW) {\r\n                // already target height\r\n                node.style.height = current.height !== null ? current.height + \"px\" : null;\r\n            }\r\n            else { // always set previous height for default height changes\r\n                node.style.height = previous.height + \"px\";\r\n            }\r\n            node.style.opacity = mode === EAnimationMode.SHOW ? '0' : (mode === EAnimationMode.HIDE ? '1' : null);\r\n        }\r\n    },\r\n    {\r\n        delay: 10,\r\n        apply: function (_a) {\r\n            var mode = _a.mode, current = _a.current, nodeY = _a.nodeY, node = _a.node;\r\n            // null for added/update since already at the right position\r\n            node.style.transform = (mode === EAnimationMode.HIDE || mode === EAnimationMode.UPDATE_REMOVE) ? \"translate(0, \" + (current.y - nodeY) + \"px)\" : '';\r\n            if (mode !== EAnimationMode.HIDE) { // keep height for removal\r\n                node.style.height = current.height !== null ? current.height + \"px\" : null;\r\n            }\r\n            node.style.opacity = mode === EAnimationMode.SHOW ? '1' : (mode === EAnimationMode.HIDE ? '0' : null);\r\n        }\r\n    },\r\n    {\r\n        delay: MAX_ANIMATION_TIME,\r\n        apply: function (_a) {\r\n            var node = _a.node;\r\n            delete node.dataset.animation;\r\n            node.style.opacity = null;\r\n            node.style.transform = '';\r\n        }\r\n    }\r\n];\r\n//# sourceMappingURL=index.js.map","import * as tslib_1 from \"tslib\";\r\nimport { getUnsupportedBrowserError, SUPPORTED_CHROME_VERSION, SUPPORTED_EDGE_VERSION, SUPPORTED_FIREFOX_VERSION } from '../browser';\r\nimport { AEventDispatcher, clear } from '../internal';\r\nimport { DataProvider } from '../provider';\r\nimport { cssClass } from '../styles';\r\nimport DialogManager from './dialogs/DialogManager';\r\nvar ALineUp = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ALineUp, _super);\r\n    function ALineUp(node, _data, ignoreIncompatibleBrowser) {\r\n        var _this = _super.call(this) || this;\r\n        _this.node = node;\r\n        _this._data = _data;\r\n        _this.highlightListeners = 0;\r\n        var error = getUnsupportedBrowserError();\r\n        _this.isBrowserSupported = ignoreIncompatibleBrowser || !error;\r\n        if (!_this.isBrowserSupported) {\r\n            _this.node.classList.add(cssClass('unsupported-browser'));\r\n            _this.node.innerHTML = \"<span>\" + error + \"</span>\\n      <div class=\\\"\" + cssClass('unsupported-browser') + \"\\\">\\n        <a href=\\\"https://www.mozilla.org/en-US/firefox/\\\" rel=\\\"noopener\\\" target=\\\"_blank\\\" data-browser=\\\"firefox\\\" data-version=\\\"\" + SUPPORTED_FIREFOX_VERSION + \"\\\"></a>\\n        <a href=\\\"https://www.google.com/chrome/index.html\\\" rel=\\\"noopener\\\" target=\\\"_blank\\\" data-browser=\\\"chrome\\\" data-version=\\\"\" + SUPPORTED_CHROME_VERSION + \"\\\" title=\\\"best support\\\"></a>\\n        <a href=\\\"https://www.microsoft.com/en-us/windows/microsoft-edge\\\" rel=\\\"noopener\\\" target=\\\"_blank\\\" data-browser=\\\"edge\\\" data-version=\\\"\" + SUPPORTED_EDGE_VERSION + \"\\\"></a>\\n      </div><span>use the <code>ignoreUnsupportedBrowser=true</code> option to ignore this error at your own risk</span>\";\r\n        }\r\n        _this.forward(_data, DataProvider.EVENT_SELECTION_CHANGED + \".main\");\r\n        _data.on(DataProvider.EVENT_BUSY + \".busy\", function (busy) { return _this.node.classList.toggle(cssClass('busy'), busy); });\r\n        return _this;\r\n    }\r\n    ALineUp.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([ALineUp.EVENT_HIGHLIGHT_CHANGED, ALineUp.EVENT_SELECTION_CHANGED, ALineUp.EVENT_DIALOG_OPENED, ALineUp.EVENT_DIALOG_CLOSED]);\r\n    };\r\n    ALineUp.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    Object.defineProperty(ALineUp.prototype, \"data\", {\r\n        get: function () {\r\n            return this._data;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ALineUp.prototype.destroy = function () {\r\n        // just clear since we hand in the node itself\r\n        clear(this.node);\r\n        this._data.destroy();\r\n    };\r\n    ALineUp.prototype.dump = function () {\r\n        return this.data.dump();\r\n    };\r\n    ALineUp.prototype.restore = function (dump) {\r\n        this._data.restore(dump);\r\n    };\r\n    ALineUp.prototype.setDataProvider = function (data, dump) {\r\n        var _this = this;\r\n        if (this._data) {\r\n            this.unforward(this._data, DataProvider.EVENT_SELECTION_CHANGED + \".taggle\");\r\n            this._data.on(DataProvider.EVENT_BUSY + \".busy\", null);\r\n        }\r\n        this._data = data;\r\n        if (dump) {\r\n            data.restore(dump);\r\n        }\r\n        this.forward(data, DataProvider.EVENT_SELECTION_CHANGED + \".taggle\");\r\n        data.on(DataProvider.EVENT_BUSY + \".busy\", function (busy) { return _this.node.classList.toggle(cssClass('busy'), busy); });\r\n    };\r\n    ALineUp.prototype.getSelection = function () {\r\n        return this._data.getSelection();\r\n    };\r\n    ALineUp.prototype.setSelection = function (dataIndices) {\r\n        this._data.setSelection(dataIndices);\r\n    };\r\n    /**\r\n     * sorts LineUp by he given column\r\n     * @param column callback function finding the column to sort\r\n     * @param ascending\r\n     * @returns {boolean}\r\n     */\r\n    ALineUp.prototype.sortBy = function (column, ascending) {\r\n        if (ascending === void 0) { ascending = false; }\r\n        var col = this.data.find(column);\r\n        if (col) {\r\n            col.sortByMe(ascending);\r\n        }\r\n        return col != null;\r\n    };\r\n    ALineUp.prototype.listenersChanged = function (type, enabled) {\r\n        _super.prototype.listenersChanged.call(this, type, enabled);\r\n        if (!type.startsWith(ALineUp.EVENT_HIGHLIGHT_CHANGED)) {\r\n            return;\r\n        }\r\n        if (enabled) {\r\n            this.highlightListeners++;\r\n            if (this.highlightListeners === 1) { // first\r\n                this.enableHighlightListening(true);\r\n            }\r\n        }\r\n        else {\r\n            this.highlightListeners -= 1;\r\n            if (this.highlightListeners === 0) { // last\r\n                this.enableHighlightListening(false);\r\n            }\r\n        }\r\n    };\r\n    ALineUp.prototype.enableHighlightListening = function (_enable) {\r\n        // hook\r\n    };\r\n    ALineUp.EVENT_SELECTION_CHANGED = DataProvider.EVENT_SELECTION_CHANGED;\r\n    ALineUp.EVENT_DIALOG_OPENED = DialogManager.EVENT_DIALOG_OPENED;\r\n    ALineUp.EVENT_DIALOG_CLOSED = DialogManager.EVENT_DIALOG_CLOSED;\r\n    ALineUp.EVENT_HIGHLIGHT_CHANGED = 'highlightChanged';\r\n    return ALineUp;\r\n}(AEventDispatcher));\r\nexport { ALineUp };\r\nexport default ALineUp;\r\n//# sourceMappingURL=ALineUp.js.map","/**\r\n * utility class for optimized row context access\r\n */\r\nvar KeyFinder = /** @class */ (function () {\r\n    /**\r\n     * constructor for fast key based row access\r\n     * @param {IExceptionContext} context context to use\r\n     * @param {(rowIndex: number) => string} key key function\r\n     */\r\n    function KeyFinder(context, key) {\r\n        var _this = this;\r\n        this.context = context;\r\n        this.key = key;\r\n        this.cache = [];\r\n        this.lastFilled = 0;\r\n        this.key2index = new Map();\r\n        this.context.exceptions.forEach(function (e) {\r\n            _this.cache[e.index] = e.y;\r\n            _this.key2index.set(key(e.index), e.index);\r\n        });\r\n    }\r\n    KeyFinder.prototype.findValidStart = function (before) {\r\n        for (var i = before - 1; i >= 0; --i) {\r\n            if (this.cache[i] !== undefined) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n    /**\r\n     * returns the position of the given given or -1 if not found\r\n     * @param {string} key\r\n     * @return {number} -1 if not found\r\n     */\r\n    KeyFinder.prototype.posByKey = function (key) {\r\n        if (this.key2index.has(key)) {\r\n            var index = this.key2index.get(key);\r\n            return { index: index, pos: this.pos(index) };\r\n        }\r\n        return this.fillCacheTillKey(key);\r\n    };\r\n    /**\r\n     * returns the position of the tthe given index\r\n     * @param {number} index index to look for\r\n     * @returns {number}\r\n     */\r\n    KeyFinder.prototype.pos = function (index) {\r\n        if (this.context.exceptions.length === 0) {\r\n            // fast pass\r\n            return index * this.context.defaultRowHeight;\r\n        }\r\n        var cached = this.cache[index];\r\n        if (cached !== undefined) {\r\n            return cached;\r\n        }\r\n        //need to compute it\r\n        // find the starting point where to start counting\r\n        var start = this.findValidStart(index);\r\n        if (start < 0) {\r\n            this.fillCache(0, index, 0);\r\n        }\r\n        else {\r\n            this.fillCache(start + 1, index, this.cache[start] + this.heightOf(start));\r\n        }\r\n        return this.cache[index];\r\n    };\r\n    KeyFinder.prototype.fillCache = function (first, last, offset, callback) {\r\n        if (last <= this.lastFilled) {\r\n            //everything already there\r\n            if (!callback) {\r\n                return;\r\n            }\r\n            for (var i = first; i <= last; ++i) {\r\n                callback(i, this.key(i), this.cache[i]);\r\n            }\r\n            return;\r\n        }\r\n        var pos = offset;\r\n        for (var i = first; i <= last; ++i) {\r\n            this.cache[i] = pos;\r\n            var key = this.key(i);\r\n            this.key2index.set(key, i);\r\n            if (callback) {\r\n                callback(i, key, pos);\r\n            }\r\n            pos += this.heightOf(i);\r\n        }\r\n    };\r\n    /**\r\n     * returns the height of the row identified by index\r\n     * @param {number} index\r\n     * @returns {number}\r\n     */\r\n    KeyFinder.prototype.heightOf = function (index) {\r\n        var lookup = this.context.exceptionsLookup;\r\n        return lookup.has(index) ? lookup.get(index) : this.context.defaultRowHeight;\r\n    };\r\n    /**\r\n     * see heightOf but ignores padding and optional null in case of default height\r\n     * @param {number} index row index\r\n     * @param {boolean} returnDefault return null if default height\r\n     * @returns {number}\r\n     */\r\n    KeyFinder.prototype.exceptionHeightOf = function (index, returnDefault) {\r\n        if (returnDefault === void 0) { returnDefault = false; }\r\n        var padding = this.context.padding(index);\r\n        var lookup = this.context.exceptionsLookup;\r\n        if (lookup.has(index)) {\r\n            return lookup.get(index) - padding;\r\n        }\r\n        return returnDefault ? this.context.defaultRowHeight - padding : null;\r\n    };\r\n    /**\r\n     * padding of the given index\r\n     * @param {number} index\r\n     * @returns {number}\r\n     */\r\n    KeyFinder.prototype.padding = function (index) {\r\n        return this.context.padding(index);\r\n    };\r\n    KeyFinder.prototype.fillCacheTillKey = function (target) {\r\n        var pos = 0;\r\n        for (var i = this.lastFilled; i < this.context.numberOfRows; ++i, ++this.lastFilled) {\r\n            var c = this.cache[i];\r\n            if (c !== undefined) {\r\n                pos = c + this.heightOf(i);\r\n                continue;\r\n            }\r\n            // new one fill up\r\n            var key = this.key(i);\r\n            this.cache[i] = pos;\r\n            this.key2index.set(key, i);\r\n            if (key === target) {\r\n                return { index: i, pos: pos };\r\n            }\r\n            pos += this.heightOf(i);\r\n        }\r\n        return { index: -1, pos: -1 };\r\n    };\r\n    /**\r\n     * computes the positions and keys for a range of given indices\r\n     * @param {number} first first row index\r\n     * @param {number} last last row index\r\n     * @param {number} offset pos offset for the first row index\r\n     * @param {(index: number, key: string, pos: number) => void} callback callack for each identified index\r\n     */\r\n    KeyFinder.prototype.positions = function (first, last, offset, callback) {\r\n        this.fillCache(first, last, offset, callback);\r\n    };\r\n    return KeyFinder;\r\n}());\r\nexport default KeyFinder;\r\n//# sourceMappingURL=KeyFinder.js.map","export var defaultMode = 'animation'; // Boolean((<any>window).chrome) ? 'animation' : 0, // animation frame on chrome;\r\nfunction dummy() {\r\n    return {\r\n        handler: [],\r\n        prev: null,\r\n        timer: -1\r\n    };\r\n}\r\nvar ScrollHandler = /** @class */ (function () {\r\n    function ScrollHandler(node) {\r\n        // this.current = this.asInfo();\r\n        var _this = this;\r\n        this.node = node;\r\n        this.sync = dummy();\r\n        this.animation = dummy();\r\n        this.numbers = new Map();\r\n        this.handleAnimationImpl = function () {\r\n            if (_this.animation.timer !== 1) {\r\n                return;\r\n            }\r\n            _this.handle(_this.animation);\r\n            _this.animation.timer = -1;\r\n        };\r\n        node.addEventListener('scroll', function () {\r\n            // this.current = this.asInfo();\r\n            // if (this.prev && (Math.abs(this.current.left - this.prev.left) + Math.abs(this.current.top - this.prev.top)) < 4) {\r\n            //   return;\r\n            // }\r\n            // this.prev = this.current;\r\n            if (_this.sync.handler.length > 0) {\r\n                _this.handle(_this.sync);\r\n            }\r\n            _this.handleAnimation();\r\n            _this.handleTimeouts();\r\n        }, {\r\n            passive: true\r\n        });\r\n    }\r\n    Object.defineProperty(ScrollHandler.prototype, \"current\", {\r\n        // current: IScrollInfo;\r\n        // private prev: IScrollInfo | null = null;\r\n        get: function () {\r\n            return this.asInfo();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ScrollHandler.prototype.handle = function (handler) {\r\n        var info = this.current;\r\n        if (handler.prev && (Math.abs(info.left - handler.prev.left) + Math.abs(info.top - handler.prev.top)) < 4) {\r\n            return;\r\n        }\r\n        handler.prev = info;\r\n        for (var _i = 0, _a = handler.handler; _i < _a.length; _i++) {\r\n            var s = _a[_i];\r\n            s(info);\r\n        }\r\n    };\r\n    ScrollHandler.prototype.handleAnimation = function () {\r\n        if (this.animation.timer !== -1 || this.animation.handler.length === 0) {\r\n            return;\r\n        }\r\n        this.animation.timer = 1;\r\n        requestAnimationFrame(this.handleAnimationImpl);\r\n    };\r\n    ScrollHandler.prototype.handleTimeouts = function () {\r\n        var _this = this;\r\n        if (this.numbers.size === 0) {\r\n            return;\r\n        }\r\n        this.numbers.forEach(function (handler, n) {\r\n            if (handler.handler.length === 0) {\r\n                return;\r\n            }\r\n            handler.timer = self.setTimeout(function () {\r\n                _this.handle(handler);\r\n                handler.timer = -1;\r\n            }, n);\r\n        });\r\n    };\r\n    ScrollHandler.prototype.asInfo = function () {\r\n        return {\r\n            left: this.node.scrollLeft,\r\n            top: this.node.scrollTop,\r\n            width: this.node.clientWidth,\r\n            height: this.node.clientHeight\r\n        };\r\n    };\r\n    ScrollHandler.prototype.push = function (mode, handler) {\r\n        if (typeof mode === 'number') {\r\n            if (!this.numbers.has(mode)) {\r\n                this.numbers.set(mode, dummy());\r\n            }\r\n            this.numbers.get(mode).handler.push(handler);\r\n        }\r\n        switch (mode) {\r\n            case 'sync':\r\n                this.sync.handler.push(handler);\r\n                break;\r\n            case 'animation':\r\n                this.animation.handler.push(handler);\r\n                break;\r\n        }\r\n    };\r\n    ScrollHandler.prototype.remove = function (handler) {\r\n        var test = [this.sync, this.animation].concat(Array.from(this.numbers.values()));\r\n        return test.some(function (d) {\r\n            var index = d.handler.indexOf(handler);\r\n            if (index >= 0) {\r\n                d.handler.splice(index, 1);\r\n            }\r\n            return index >= 0;\r\n        });\r\n    };\r\n    ScrollHandler.prototype.isWaiting = function (mode) {\r\n        switch (mode) {\r\n            case 'animation':\r\n                return this.animation.timer >= 0;\r\n            case 'sync':\r\n                return false;\r\n            default:\r\n                return this.numbers.has(mode) && this.numbers.get(mode).timer >= 0;\r\n        }\r\n    };\r\n    return ScrollHandler;\r\n}());\r\n/**\r\n * @internal\r\n */\r\nexport function addScroll(scroller, mode, handler) {\r\n    // hide in element to have just one real listener\r\n    if (!scroller.__le_scroller__) {\r\n        scroller.__le_scroller__ = new ScrollHandler(scroller);\r\n    }\r\n    var s = scroller.__le_scroller__;\r\n    s.push(mode, handler);\r\n    return s.asInfo();\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function isScrollEventWaiting(scroller, mode) {\r\n    if (!scroller.__le_scroller__) {\r\n        return false;\r\n    }\r\n    var s = scroller.__le_scroller__;\r\n    return s.isWaiting(mode);\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function removeScroll(scroller, handler) {\r\n    if (scroller.__le_scroller__) {\r\n        scroller.__le_scroller__.remove(handler);\r\n    }\r\n}\r\n//# sourceMappingURL=scroll.js.map","export * from './scroll';\r\n/**\r\n * clear node clearing\r\n * @param node\r\n * @internal\r\n */\r\nexport function clear(node) {\r\n    while (node.lastChild) {\r\n        node.removeChild(node.lastChild);\r\n    }\r\n    return node;\r\n}\r\n//# sourceMappingURL=index.js.map","var RowHeightException = /** @class */ (function () {\r\n    function RowHeightException(index, y, height) {\r\n        this.index = index;\r\n        this.y = y;\r\n        this.height = height;\r\n    }\r\n    Object.defineProperty(RowHeightException.prototype, \"y2\", {\r\n        get: function () {\r\n            return this.y + this.height;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return RowHeightException;\r\n}());\r\n/**\r\n * creates a uniform exception context, i.e no exceptions all rows are of the same height\r\n * @param {number} numberOfRows\r\n * @param {number} rowHeight\r\n * @param {number} rowPadding padding between rows\r\n * @return {IExceptionContext}\r\n */\r\nexport function uniformContext(numberOfRows, rowHeight, rowPadding) {\r\n    if (rowPadding === void 0) { rowPadding = 0; }\r\n    rowHeight += rowPadding;\r\n    var exceptionsLookup = {\r\n        keys: function () { return [].values(); },\r\n        get: function () { return rowHeight; },\r\n        has: function () { return false; },\r\n        size: 0\r\n    };\r\n    return {\r\n        exceptions: [],\r\n        exceptionsLookup: exceptionsLookup,\r\n        totalHeight: numberOfRows * rowHeight,\r\n        numberOfRows: numberOfRows,\r\n        defaultRowHeight: rowHeight,\r\n        padding: function () { return rowPadding; }\r\n    };\r\n}\r\n/**\r\n * computes the most frequent value in a given array like\r\n * @param {} values\r\n * @return {number}\r\n */\r\nfunction mostFrequentValue(values) {\r\n    var lookup = new Map();\r\n    values.forEach(function (value) {\r\n        lookup.set(value, (lookup.get(value) || 0) + 1);\r\n    });\r\n    if (lookup.size === 0) {\r\n        return 20; // default value since it doesn't matter\r\n    }\r\n    // sort desc take first key and asc by the second in case of tie, it is optimized to have exceptions for higher rows less for big rows\r\n    var sorted = Array.from(lookup).sort(function (a, b) {\r\n        if (a[1] !== b[1]) {\r\n            return b[1] - a[1];\r\n        }\r\n        return a[0] - b[0];\r\n    });\r\n    var mostFrequent = sorted[0][0];\r\n    if (mostFrequent === 0) { // cornercase\r\n        return sorted.length > 1 ? sorted[1][0] : 20; // all empty\r\n    }\r\n    return mostFrequent;\r\n}\r\n/**\r\n * creates a non uniform context based on the given array like heights\r\n * @param rowHeights arrayish to get the heights\r\n * @param {number} defaultRowHeight if not given the most frequent value will be used\r\n * @param {number} rowPadding padding between rows\r\n * @return {IExceptionContext}\r\n */\r\nexport function nonUniformContext(rowHeights, defaultRowHeight, rowPadding) {\r\n    if (defaultRowHeight === void 0) { defaultRowHeight = NaN; }\r\n    if (rowPadding === void 0) { rowPadding = 0; }\r\n    var exceptionsLookup = new Map();\r\n    var exceptions = [];\r\n    var padding = typeof rowPadding === 'function' ? rowPadding : function () { return rowPadding; };\r\n    if (isNaN(defaultRowHeight)) {\r\n        defaultRowHeight = mostFrequentValue(rowHeights);\r\n    }\r\n    defaultRowHeight += padding(-1);\r\n    var prev = -1, acc = 0, totalHeight = 0, numberOfRows = 0;\r\n    rowHeights.forEach(function (height, index) {\r\n        height += padding(index);\r\n        totalHeight += height;\r\n        numberOfRows++;\r\n        if (height === defaultRowHeight) {\r\n            //regular\r\n            return;\r\n        }\r\n        exceptionsLookup.set(index, height);\r\n        var between = (index - prev - 1) * defaultRowHeight;\r\n        prev = index;\r\n        var y = acc + between;\r\n        acc = y + height;\r\n        exceptions.push(new RowHeightException(index, y, height));\r\n    });\r\n    return { exceptionsLookup: exceptionsLookup, exceptions: exceptions, totalHeight: totalHeight, defaultRowHeight: defaultRowHeight, numberOfRows: numberOfRows, padding: padding };\r\n}\r\n/**\r\n * creates a random context with the given constraints\r\n * @param {number} numberOfRows\r\n * @param {number} defaultRowHeight\r\n * @param {number} minRowHeight\r\n * @param {number} maxRowHeight\r\n * @param {number} ratio around ratio percent will get a non uniform height\r\n * @param {number} seed random seed\r\n * @return {IExceptionContext}\r\n */\r\nexport function randomContext(numberOfRows, defaultRowHeight, minRowHeight, maxRowHeight, ratio, seed) {\r\n    if (minRowHeight === void 0) { minRowHeight = 2; }\r\n    if (maxRowHeight === void 0) { maxRowHeight = defaultRowHeight * 10; }\r\n    if (ratio === void 0) { ratio = 0.2; }\r\n    if (seed === void 0) { seed = Date.now(); }\r\n    var actSeed = seed;\r\n    var random = function () {\r\n        var x = Math.sin(actSeed++) * 10000;\r\n        return x - Math.floor(x);\r\n    };\r\n    var getter = function () {\r\n        var coin = random();\r\n        if (coin < ratio) {\r\n            //non uniform\r\n            return minRowHeight + Math.round(random() * (maxRowHeight - minRowHeight));\r\n        }\r\n        return defaultRowHeight;\r\n    };\r\n    var forEach = function (callback) {\r\n        for (var index = 0; index < numberOfRows; ++index) {\r\n            callback(getter(), index);\r\n        }\r\n    };\r\n    return nonUniformContext({ forEach: forEach }, defaultRowHeight);\r\n}\r\n/**\r\n * computes the visible range\r\n * @param {number} scrollTop top scrolling\r\n * @param {number} clientHeight visible height\r\n * @param {number} rowHeight height of a row by default\r\n * @param {IRowHeightException[]} heightExceptions exceptions of this default height\r\n * @param {number} numberOfRows the number of rows\r\n * @return {IVisibleRange} the computed visible range\r\n */\r\nexport function range(scrollTop, clientHeight, rowHeight, heightExceptions, numberOfRows) {\r\n    if (numberOfRows === 0) {\r\n        return { first: 0, last: -1, firstRowPos: 0, endPos: 0 };\r\n    }\r\n    if (numberOfRows === 1) {\r\n        return {\r\n            first: 0,\r\n            last: 0,\r\n            firstRowPos: 0,\r\n            endPos: heightExceptions.length === 0 ? rowHeight : heightExceptions[0].y2\r\n        };\r\n    }\r\n    var offset = scrollTop;\r\n    var offset2 = offset + clientHeight;\r\n    function indexOf(pos, indexShift) {\r\n        return Math.min(numberOfRows - 1, indexShift + Math.max(0, Math.floor(pos / rowHeight)));\r\n    }\r\n    function calc(offsetShift, indexShift, isGuess) {\r\n        if (isGuess === void 0) { isGuess = false; }\r\n        var shifted = offset - offsetShift;\r\n        var shifted2 = offset2 - offsetShift;\r\n        var first = indexOf(shifted, indexShift);\r\n        var last = indexOf(shifted2, indexShift);\r\n        var firstRowPos = offsetShift + (first - indexShift) * rowHeight;\r\n        var endPos = offsetShift + (last + 1 - indexShift) * rowHeight;\r\n        //if (!isGuess) {\r\n        //  console.log(first, '@', firstRowPos, last, '#', end, offset, offset2, firstRowPos <= offset, offset2 <= end);\r\n        //}\r\n        console.assert(!isGuess || !(firstRowPos > offset || (endPos < offset2 && last < numberOfRows - 1)), 'error', isGuess, firstRowPos, endPos, offset, offset2, indexShift, offsetShift);\r\n        return { first: first, last: last, firstRowPos: firstRowPos, endPos: endPos };\r\n    }\r\n    var r = calc(0, 0, true);\r\n    if (heightExceptions.length === 0) {\r\n        //uniform\r\n        return r;\r\n    }\r\n    if (r.last < heightExceptions[0].index) {\r\n        //console.log('before the first exception = uniform with no shift');\r\n        //console.log(r.first, '@', r.firstRowPos, r.last, '#', r.end, offset, offset2, r.firstRowPos <= offset, offset2 <= r.end);\r\n        return r;\r\n    }\r\n    if (r.last === heightExceptions[0].index && heightExceptions[0].height > rowHeight) {\r\n        return Object.assign(r, { endPos: heightExceptions[0].y2 });\r\n    }\r\n    //the position where the exceptions ends\r\n    var lastPos = heightExceptions[heightExceptions.length - 1];\r\n    if (offset >= lastPos.y) {\r\n        var rest = calc(lastPos.y2, lastPos.index + 1);\r\n        if (offset < lastPos.y2) {\r\n            // include me\r\n            return Object.assign(rest, { first: lastPos.index, firstRowPos: lastPos.y });\r\n        }\r\n        return rest;\r\n    }\r\n    //we have some exceptions\r\n    var visible = [];\r\n    var closest = heightExceptions[0]; //closest before not in range\r\n    for (var _i = 0, heightExceptions_1 = heightExceptions; _i < heightExceptions_1.length; _i++) {\r\n        var item = heightExceptions_1[_i];\r\n        var y = item.y, y2 = item.y2;\r\n        if (y >= offset2) {\r\n            break;\r\n        }\r\n        if (y2 <= offset) {\r\n            closest = item;\r\n            continue;\r\n        }\r\n        visible.push(item);\r\n    }\r\n    if (visible.length === 0) {\r\n        //console.log('we are in the between some exceptions and none are visible');\r\n        return calc(closest.y2, closest.index + 1); //skip myself\r\n    }\r\n    {\r\n        //console.log('we show at least one exception');\r\n        var firstException = visible[0];\r\n        var lastException = visible[visible.length - 1];\r\n        var first = Math.max(0, firstException.index - Math.max(0, Math.ceil((firstException.y - offset) / rowHeight)));\r\n        var last = lastException.index;\r\n        if (offset2 >= lastException.y2) {\r\n            last = indexOf(offset2 - lastException.y2, lastException.index + 1);\r\n        }\r\n        var firstRowPos = firstException.y - (firstException.index - first) * rowHeight;\r\n        var endPos = lastException.y2 + (last - lastException.index) * rowHeight;\r\n        //console.log(first, '@', firstRowPos, last, '#', end, offset, offset2, firstRowPos <= offset, offset2 <= end);\r\n        console.assert(firstRowPos <= offset && (endPos >= offset2 || last === numberOfRows - 1), 'error', firstRowPos, endPos, offset, offset2, firstException, lastException);\r\n        return { first: first, last: last, firstRowPos: firstRowPos, endPos: endPos };\r\n    }\r\n}\r\nexport function frozenDelta(current, target) {\r\n    var clength = current.length;\r\n    var tlength = target.length;\r\n    if (clength === 0) {\r\n        return { added: target, removed: [], common: 0 };\r\n    }\r\n    if (tlength === 0) {\r\n        return { added: [], removed: current, common: 0 };\r\n    }\r\n    if (clength === tlength) { //since sorted and left increasing true\r\n        return { added: [], removed: [], common: clength };\r\n    }\r\n    var removed = current.slice(Math.min(tlength, clength));\r\n    var added = target.slice(Math.min(tlength, clength));\r\n    return { added: added, removed: removed, common: clength - removed.length };\r\n}\r\nexport function updateFrozen(old, columns, first) {\r\n    var oldLast = old.length === 0 ? 0 : old[old.length - 1] + 1;\r\n    var added = [];\r\n    var removed = [];\r\n    for (var i = old.length - 1; i >= 0; --i) {\r\n        var index = old[i];\r\n        if (index >= first) {\r\n            removed.push(old.pop());\r\n        }\r\n        else {\r\n            // can stop since sorted and it will never happen again\r\n            break;\r\n        }\r\n    }\r\n    //added\r\n    for (var i = oldLast; i < first; ++i) {\r\n        if (columns[i].frozen) {\r\n            added.push(i);\r\n            old.push(i);\r\n        }\r\n    }\r\n    return { target: old, added: added, removed: removed };\r\n}\r\n//# sourceMappingURL=logic.js.map","/**\r\n * scrolling result\r\n */\r\nexport var EScrollResult;\r\n(function (EScrollResult) {\r\n    /**\r\n     * nothing has changed\r\n     */\r\n    EScrollResult[EScrollResult[\"NONE\"] = 0] = \"NONE\";\r\n    /**\r\n     * all rows needed to be recreated\r\n     */\r\n    EScrollResult[EScrollResult[\"ALL\"] = 1] = \"ALL\";\r\n    /**\r\n     * unknown\r\n     */\r\n    EScrollResult[EScrollResult[\"SOME\"] = 2] = \"SOME\";\r\n    /**\r\n     * some rows are added at the bottom\r\n     */\r\n    EScrollResult[EScrollResult[\"SOME_BOTTOM\"] = 3] = \"SOME_BOTTOM\";\r\n    /**\r\n     * some rows are added at the top\r\n     */\r\n    EScrollResult[EScrollResult[\"SOME_TOP\"] = 4] = \"SOME_TOP\";\r\n})(EScrollResult || (EScrollResult = {}));\r\n//# sourceMappingURL=IMixin.js.map","var PREFIX = 'le';\r\n/**\r\n * @internal\r\n * @param suffix suffix to suffix\r\n */\r\nexport function cssClass(suffix) {\r\n    if (!suffix) {\r\n        return PREFIX;\r\n    }\r\n    return PREFIX + \"-\" + suffix;\r\n}\r\nexport var CSS_CLASS_LOADING = cssClass('loading');\r\nexport var CSS_CLASS_FROZEN = cssClass('frozen');\r\nexport var CSS_CLASS_HIDDEN = cssClass('hidden');\r\nexport var CSS_CLASS_MULTI = cssClass('multi');\r\nexport var CSS_CLASS_EVEN = cssClass('even');\r\nexport var CSS_CLASS_SHIFTED = cssClass('shifted');\r\nexport var CSS_CLASS_SCROLLBAR_TESTER = cssClass('scrollbar-tester');\r\nexport var CSS_CLASS_HEADER = cssClass('header');\r\nexport var CSS_CLASS_BODY = cssClass('body');\r\nexport var CSS_CLASS_FOOTER = cssClass('footer');\r\nexport var CSS_CLASS_THEAD = cssClass('thead');\r\nexport var CSS_CLASS_TBODY = cssClass('tbody');\r\nexport var CSS_CLASS_TR = cssClass('tr');\r\nexport var CSS_CLASS_TH = cssClass('th');\r\nexport var CSS_CLASS_TD = cssClass('td');\r\nexport var CSS_CLASS_SCROLLING = cssClass('scrolling');\r\nexport var CSS_CLASS_ROW_ANIMATION = cssClass('row-animation');\r\n//# sourceMappingURL=index.js.map","import { ABORTED, isAbortAble } from './abortAble';\r\nimport { defaultPhases, EAnimationMode, noAnimationChange } from './animation';\r\nimport KeyFinder from './animation/KeyFinder';\r\nimport { addScroll, clear, defaultMode, removeScroll } from './internal';\r\nimport { isScrollEventWaiting } from './internal/scroll';\r\nimport { range } from './logic';\r\nimport { EScrollResult } from './mixin';\r\nimport { cssClass, CSS_CLASS_EVEN, CSS_CLASS_FOOTER, CSS_CLASS_LOADING, CSS_CLASS_ROW_ANIMATION, CSS_CLASS_SCROLLING, CSS_CLASS_TR } from './styles';\r\nexport function isLoadingCell(node) {\r\n    return node.classList.contains(CSS_CLASS_LOADING);\r\n}\r\n/**\r\n * base class for creating a scalable table renderer based on rows\r\n */\r\nvar ARowRenderer = /** @class */ (function () {\r\n    function ARowRenderer(body, options) {\r\n        var _this = this;\r\n        if (options === void 0) { options = {}; }\r\n        this.body = body;\r\n        this.pool = [];\r\n        this.loadingPool = [];\r\n        this.loading = new WeakMap();\r\n        /**\r\n         * currently visible slice\r\n         */\r\n        this.visible = {\r\n            first: 0,\r\n            forcedFirst: 0,\r\n            last: -1,\r\n            forcedLast: -1\r\n        };\r\n        /**\r\n         * position of the first visible row in pixel\r\n         * @type {number}\r\n         */\r\n        this.visibleFirstRowPos = 0;\r\n        this.scrollListener = null;\r\n        this.lastScrollInfo = null;\r\n        this.abortAnimation = function () { return undefined; };\r\n        this.options = {\r\n            async: defaultMode,\r\n            minScrollDelta: 10,\r\n            mixins: [],\r\n            scrollingHint: false,\r\n            batchSize: 10,\r\n            striped: false,\r\n            viewportOversize: 200\r\n        };\r\n        this.adapter = this.createAdapter();\r\n        Object.assign(this.options, options);\r\n        this.mixins = this.options.mixins.map(function (mixinClass) { return new mixinClass(_this.adapter); });\r\n        this.fragment = body.ownerDocument.createDocumentFragment();\r\n    }\r\n    /**\r\n     * register another mixin to this renderer\r\n     * @param {IMixinClass} mixinClass the mixin class to instantitiate\r\n     * @param options optional constructor options\r\n     */\r\n    ARowRenderer.prototype.addMixin = function (mixinClass, options) {\r\n        this.mixins.push(new mixinClass(this.adapter, options));\r\n    };\r\n    ARowRenderer.prototype.createAdapter = function () {\r\n        var _this = this;\r\n        var r = {\r\n            visible: this.visible,\r\n            addAtBeginning: this.addAtBeginning.bind(this),\r\n            addAtBottom: this.addAtBottom.bind(this),\r\n            removeFromBeginning: this.removeFromBeginning.bind(this),\r\n            removeFromBottom: this.removeFromBottom.bind(this),\r\n            updateOffset: this.updateOffset.bind(this),\r\n            isScrollEventWaiting: function () { return isScrollEventWaiting(_this.bodyScroller, _this.options.async); }\r\n        };\r\n        Object.defineProperties(r, {\r\n            visibleFirstRowPos: {\r\n                get: function () { return _this.visibleFirstRowPos; },\r\n                enumerable: true\r\n            },\r\n            context: {\r\n                get: function () { return _this.context; },\r\n                enumerable: true\r\n            },\r\n            scrollOffset: {\r\n                get: function () { return _this.lastScrollInfo ? _this.lastScrollInfo.top : 0; },\r\n                enumerable: true\r\n            },\r\n            scrollTotal: {\r\n                get: function () { return _this.lastScrollInfo ? _this.lastScrollInfo.height : _this.bodyScroller.clientHeight; },\r\n                enumerable: true\r\n            }\r\n        });\r\n        return r;\r\n    };\r\n    Object.defineProperty(ARowRenderer.prototype, \"bodyScroller\", {\r\n        /**\r\n         * get the scrolling container i.e. parent of the body element\r\n         * @returns {HTMLElement}\r\n         */\r\n        get: function () {\r\n            return this.body.parentElement;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ARowRenderer.prototype, \"bodySizer\", {\r\n        get: function () {\r\n            var parent = this.bodyScroller;\r\n            var sizer = Array.from(parent.children).find(function (d) { return d.tagName.toLowerCase() === 'footer'; });\r\n            if (sizer) {\r\n                return sizer;\r\n            }\r\n            var s = parent.ownerDocument.createElement('footer');\r\n            s.classList.add(CSS_CLASS_FOOTER, cssClass(\"footer-\" + this.idPrefix));\r\n            parent.insertBefore(s, parent.firstChild);\r\n            return s;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * initializes the table and register the onscroll listener\r\n     * @returns {void} nothing\r\n     */\r\n    ARowRenderer.prototype.init = function () {\r\n        var _this = this;\r\n        var scroller = this.bodyScroller;\r\n        var old = addScroll(scroller, this.options.async, this.scrollListener = function (act) {\r\n            _this.lastScrollInfo = act;\r\n            if (Math.abs(old.top - act.top) < _this.options.minScrollDelta && Math.abs(old.height - act.height) < _this.options.minScrollDelta) {\r\n                return;\r\n            }\r\n            var isGoingDown = act.top > old.top;\r\n            old = act;\r\n            _this.onScrolledVertically(act.top, act.height, isGoingDown);\r\n            if (_this.options.scrollingHint) {\r\n                _this.body.classList.remove(CSS_CLASS_SCROLLING);\r\n            }\r\n        });\r\n        if (this.options.scrollingHint) {\r\n            addScroll(scroller, 'animation', function () { return _this.body.classList.add(CSS_CLASS_SCROLLING); });\r\n        }\r\n        this.recreate();\r\n    };\r\n    /**\r\n     * destroys this renderer and unregisters all event listeners\r\n     */\r\n    ARowRenderer.prototype.destroy = function () {\r\n        removeScroll(this.bodyScroller, this.scrollListener);\r\n        this.body.remove();\r\n    };\r\n    ARowRenderer.cleanUp = function (item) {\r\n        item.style.height = null;\r\n    };\r\n    ARowRenderer.prototype.select = function (index) {\r\n        var item;\r\n        var result;\r\n        if (this.pool.length > 0) {\r\n            item = this.pool.pop();\r\n            result = this.updateRow(item, index);\r\n        }\r\n        else if (this.loadingPool.length > 0) {\r\n            item = this.loadingPool.pop();\r\n            item.classList.remove(CSS_CLASS_LOADING);\r\n            result = this.createRow(item, index);\r\n        }\r\n        else {\r\n            item = this.body.ownerDocument.createElement('div');\r\n            item.classList.add(CSS_CLASS_TR, cssClass(\"tr-\" + this.idPrefix));\r\n            result = this.createRow(item, index);\r\n        }\r\n        item.dataset.index = String(index);\r\n        if (this.options.striped) {\r\n            item.classList.toggle(CSS_CLASS_EVEN, index % 2 === 0);\r\n        }\r\n        return { item: item, result: result };\r\n    };\r\n    ARowRenderer.prototype.selectProxy = function () {\r\n        var proxy;\r\n        if (this.loadingPool.length > 0) {\r\n            proxy = this.loadingPool.pop();\r\n        }\r\n        else {\r\n            proxy = this.body.ownerDocument.createElement('div');\r\n            proxy.classList.add(CSS_CLASS_LOADING, CSS_CLASS_TR, cssClass(\"tr-\" + this.idPrefix));\r\n        }\r\n        return proxy;\r\n    };\r\n    ARowRenderer.prototype.recycle = function (item) {\r\n        ARowRenderer.cleanUp(item);\r\n        // check if the original dom element is still being manipulated\r\n        if (this.loading.has(item)) {\r\n            var abort = this.loading.get(item);\r\n            abort.abort();\r\n        }\r\n        else {\r\n            this.pool.push(item);\r\n        }\r\n    };\r\n    ARowRenderer.prototype.proxy = function (item, result) {\r\n        var _this = this;\r\n        if (!isAbortAble(result)) {\r\n            return item;\r\n        }\r\n        var abort = result;\r\n        //lazy loading\r\n        var real = item;\r\n        var proxy = this.selectProxy();\r\n        // copy attributes\r\n        proxy.dataset.index = real.dataset.index;\r\n        proxy.style.height = real.style.height;\r\n        this.loading.set(proxy, abort);\r\n        abort.then(function (result) {\r\n            if (result === ABORTED) {\r\n                //aborted can recycle the real one\r\n                ARowRenderer.cleanUp(real);\r\n                _this.pool.push(real);\r\n            }\r\n            else {\r\n                //fully loaded\r\n                _this.body.replaceChild(real, proxy);\r\n            }\r\n            _this.loading.delete(proxy);\r\n            ARowRenderer.cleanUp(proxy);\r\n            _this.loadingPool.push(proxy);\r\n        }, function () {\r\n            // handle as aborted\r\n            //aborted can recycle the real one\r\n            ARowRenderer.cleanUp(real);\r\n            _this.pool.push(real);\r\n            _this.loading.delete(proxy);\r\n            ARowRenderer.cleanUp(proxy);\r\n            _this.loadingPool.push(proxy);\r\n        });\r\n        return proxy;\r\n    };\r\n    ARowRenderer.prototype.create = function (index) {\r\n        var _a = this.select(index), item = _a.item, result = _a.result;\r\n        var _b = this.context, ex = _b.exceptionsLookup, padding = _b.padding;\r\n        if (ex.has(index)) {\r\n            item.style.height = ex.get(index) - padding(index) + \"px\";\r\n        }\r\n        return this.proxy(item, result);\r\n    };\r\n    ARowRenderer.prototype.removeAll = function (perform) {\r\n        if (perform === void 0) { perform = true; }\r\n        var b = this.body;\r\n        if (!perform) {\r\n            return Array.from(b.children);\r\n        }\r\n        var torecycle = [];\r\n        while (b.lastElementChild) {\r\n            var i = b.lastElementChild;\r\n            b.removeChild(i);\r\n            this.recycle(i);\r\n            torecycle.push(i);\r\n        }\r\n        return torecycle;\r\n    };\r\n    /**\r\n     * triggers and visual update of all visible rows\r\n     */\r\n    ARowRenderer.prototype.update = function () {\r\n        var _this = this;\r\n        var first = this.visible.first;\r\n        var fragment = this.fragment;\r\n        var items = Array.from(this.body.children);\r\n        clear(this.body);\r\n        items.forEach(function (item, i) {\r\n            if (_this.loading.has(item)) {\r\n                // still loading\r\n                fragment.appendChild(item);\r\n                return;\r\n            }\r\n            var abort = _this.updateRow(item, i + first);\r\n            fragment.appendChild(_this.proxy(item, abort));\r\n        });\r\n        this.body.appendChild(fragment);\r\n    };\r\n    /**\r\n     * utility to execute a function for each visible row\r\n     * @param {(row: HTMLElement, rowIndex: number) => void} callback callback to execute\r\n     * @param {boolean} inplace whether the DOM changes should be performed inplace instead of in a fragment\r\n     */\r\n    ARowRenderer.prototype.forEachRow = function (callback, inplace) {\r\n        var _this = this;\r\n        if (inplace === void 0) { inplace = false; }\r\n        var rows = Array.from(this.body.children);\r\n        var fragment = this.fragment;\r\n        if (!inplace) {\r\n            clear(this.body);\r\n        }\r\n        rows.forEach(function (row, index) {\r\n            if (!isLoadingCell(row) && row.dataset.animation !== 'update_remove' && row.dataset.animation !== 'hide') {\r\n                //skip loading ones and temporary ones\r\n                callback(row, index + _this.visible.first);\r\n            }\r\n            if (!inplace) {\r\n                fragment.appendChild(row);\r\n            }\r\n        });\r\n        if (!inplace) {\r\n            this.body.appendChild(fragment);\r\n        }\r\n    };\r\n    ARowRenderer.prototype.removeFromBeginning = function (from, to, perform) {\r\n        if (perform === void 0) { perform = true; }\r\n        return this.remove(from, to, true, perform);\r\n    };\r\n    ARowRenderer.prototype.removeFromBottom = function (from, to, perform) {\r\n        if (perform === void 0) { perform = true; }\r\n        return this.remove(from, to, false, perform);\r\n    };\r\n    ARowRenderer.prototype.remove = function (from, to, fromBeginning, perform) {\r\n        if (perform === void 0) { perform = true; }\r\n        if (to < from) {\r\n            return;\r\n        }\r\n        var b = this.body;\r\n        var torecycle = [];\r\n        // console.log('remove', fromBeginning, (to - from) + 1, this.body.childElementCount - ((to - from) + 1));\r\n        var act = (fromBeginning ? b.firstChild : b.lastChild);\r\n        for (var i = from; i <= to; ++i) {\r\n            var item = act;\r\n            act = (fromBeginning ? act.nextSibling : act.previousSibling);\r\n            if (perform) {\r\n                b.removeChild(item);\r\n                this.recycle(item);\r\n            }\r\n            torecycle.push(item);\r\n        }\r\n        return torecycle;\r\n    };\r\n    ARowRenderer.prototype.addAtBeginning = function (from, to, perform) {\r\n        if (perform === void 0) { perform = true; }\r\n        if (to < from) {\r\n            return;\r\n        }\r\n        // console.log('add', (to - from) + 1, this.body.childElementCount + ((to - from) + 1));\r\n        var fragment = this.fragment;\r\n        if (from === to && perform) {\r\n            this.body.insertBefore(this.create(from), this.body.firstChild);\r\n            return;\r\n        }\r\n        for (var i = from; i <= to; ++i) {\r\n            fragment.appendChild(this.create(i));\r\n        }\r\n        if (perform) {\r\n            this.body.insertBefore(fragment, this.body.firstChild);\r\n        }\r\n        return fragment;\r\n    };\r\n    ARowRenderer.prototype.addAtBottom = function (from, to, perform) {\r\n        if (perform === void 0) { perform = true; }\r\n        if (to < from) {\r\n            return;\r\n        }\r\n        // console.log('add_b', (to - from) + 1, this.body.childElementCount + ((to - from) + 1));\r\n        if (from === to && perform) {\r\n            this.body.appendChild(this.create(from));\r\n            return;\r\n        }\r\n        var fragment = this.fragment;\r\n        for (var i = from; i <= to; ++i) {\r\n            fragment.appendChild(this.create(i));\r\n        }\r\n        if (perform) {\r\n            this.body.appendChild(fragment);\r\n        }\r\n        return fragment;\r\n    };\r\n    ARowRenderer.prototype.updateOffset = function (firstRowPos) {\r\n        this.visibleFirstRowPos = firstRowPos;\r\n        this.updateSizer(firstRowPos);\r\n    };\r\n    ARowRenderer.prototype.updateSizer = function (firstRowPos) {\r\n        var totalHeight = this.context.totalHeight;\r\n        setTransform(this.body, 0, firstRowPos.toFixed(0));\r\n        setTransform(this.bodySizer, 0, Math.max(0, totalHeight - 1).toFixed(0));\r\n    };\r\n    /**\r\n     * removes all rows and recreates the table\r\n     * @param {IAnimationContext} ctx optional animation context to create a transition between the previous and the current tables\r\n     * @returns {void} nothing\r\n     */\r\n    ARowRenderer.prototype.recreate = function (ctx) {\r\n        this.abortAnimation();\r\n        if (ctx) {\r\n            return this.recreateAnimated(ctx);\r\n        }\r\n        return this.recreatePure();\r\n    };\r\n    ARowRenderer.prototype.recreatePure = function () {\r\n        var context = this.context;\r\n        var scroller = this.bodyScroller;\r\n        //update first to avoid resetting scrollTop\r\n        this.updateOffset(0);\r\n        this.removeAll();\r\n        this.clearPool();\r\n        var _a = range(scroller.scrollTop, scroller.clientHeight, context.defaultRowHeight, context.exceptions, context.numberOfRows), first = _a.first, last = _a.last, firstRowPos = _a.firstRowPos;\r\n        this.visible.first = this.visible.forcedFirst = first;\r\n        this.visible.last = this.visible.forcedLast = last;\r\n        if (first < 0) {\r\n            // empty\r\n            this.updateOffset(0);\r\n            return;\r\n        }\r\n        this.addAtBottom(first, last);\r\n        this.updateOffset(firstRowPos);\r\n    };\r\n    ARowRenderer.prototype.recreateAnimated = function (ctx) {\r\n        var _this = this;\r\n        var lookup = new Map();\r\n        var prev = new KeyFinder(ctx.previous, ctx.previousKey);\r\n        var cur = new KeyFinder(this.context, ctx.currentKey);\r\n        var next = range(this.bodyScroller.scrollTop, this.bodyScroller.clientHeight, cur.context.defaultRowHeight, cur.context.exceptions, cur.context.numberOfRows);\r\n        {\r\n            var rows_1 = Array.from(this.body.children);\r\n            var old = Object.assign({}, this.visible);\r\n            //store the current rows in a lookup and clear\r\n            clear(this.body);\r\n            prev.positions(old.first, Math.min(old.last, old.first + rows_1.length), this.visibleFirstRowPos, function (i, key, pos) {\r\n                var n = rows_1[i];\r\n                if (n) { // shouldn't happen that it is not there\r\n                    lookup.set(key, { n: n, pos: pos, i: i });\r\n                }\r\n                // else {\r\n                //  console.error(i, key, pos, rows);\r\n                //}\r\n            });\r\n        }\r\n        this.visible.first = this.visible.forcedFirst = next.first;\r\n        this.visible.last = this.visible.forcedLast = next.last;\r\n        var fragment = this.fragment;\r\n        var animation = [];\r\n        var nodeY = next.firstRowPos;\r\n        cur.positions(next.first, next.last, next.firstRowPos, function (i, key, pos) {\r\n            var node;\r\n            var mode = EAnimationMode.UPDATE;\r\n            var previous;\r\n            if (lookup.has(key)) {\r\n                // still visible\r\n                var item = lookup.get(key);\r\n                lookup.delete(key);\r\n                // update height\r\n                item.n.dataset.index = String(i);\r\n                node = _this.proxy(item.n, _this.updateRow(item.n, i));\r\n                previous = {\r\n                    index: item.i,\r\n                    y: item.pos,\r\n                    height: prev.exceptionHeightOf(item.i, true)\r\n                };\r\n            }\r\n            else {\r\n                // need a new row\r\n                var old = prev.posByKey(key);\r\n                // maybe not visible  before so keep in place\r\n                node = _this.create(i);\r\n                mode = old.index < 0 ? EAnimationMode.SHOW : EAnimationMode.UPDATE_CREATE;\r\n                previous = {\r\n                    index: old.index,\r\n                    y: old.pos >= 0 ? old.pos : pos,\r\n                    height: old.index < 0 ? cur.exceptionHeightOf(i, true) : prev.exceptionHeightOf(old.index, true)\r\n                };\r\n            }\r\n            animation.push({\r\n                node: node,\r\n                key: key,\r\n                mode: mode,\r\n                previous: previous,\r\n                nodeY: nodeY,\r\n                nodeYCurrentHeight: pos,\r\n                current: {\r\n                    index: i,\r\n                    y: pos,\r\n                    height: cur.exceptionHeightOf(i)\r\n                }\r\n            });\r\n            node.style.transform = \"translate(0, \" + (nodeY - pos) + \"px)\";\r\n            nodeY += previous.height + (previous.index < 0 ? cur.padding(i) : prev.padding(previous.index));\r\n            fragment.appendChild(node);\r\n        });\r\n        var nodeYCurrentHeight = next.endPos;\r\n        // items that are going to be removed\r\n        lookup.forEach(function (item, key) {\r\n            // calculate their next position\r\n            var r = cur.posByKey(key);\r\n            // maybe not visible anymore, keep in place\r\n            var nextPos = r.pos >= 0 ? r.pos : item.pos;\r\n            var node = item.n;\r\n            // located at addedPos\r\n            // should end up at nextPos\r\n            // was previously at item.pos\r\n            node.style.transform = \"translate(0, \" + (item.pos - nodeY) + \"px)\";\r\n            fragment.appendChild(node);\r\n            var prevHeight = prev.exceptionHeightOf(item.i, true);\r\n            animation.push({\r\n                node: item.n,\r\n                key: key,\r\n                mode: r.index < 0 ? EAnimationMode.HIDE : EAnimationMode.UPDATE_REMOVE,\r\n                previous: {\r\n                    index: item.i,\r\n                    y: item.pos,\r\n                    height: prevHeight\r\n                },\r\n                nodeY: nodeY,\r\n                nodeYCurrentHeight: nodeYCurrentHeight,\r\n                current: {\r\n                    index: r.index,\r\n                    y: nextPos,\r\n                    height: r.index < 0 ? null : cur.exceptionHeightOf(r.index)\r\n                }\r\n            });\r\n            nodeYCurrentHeight += r.index < 0 ? cur.context.defaultRowHeight : (cur.exceptionHeightOf(r.index, true) + cur.padding(r.index));\r\n            nodeY += prevHeight + prev.padding(item.i);\r\n        });\r\n        this.updateOffset(next.firstRowPos);\r\n        this.animate(animation, ctx.phases || defaultPhases, prev, cur, fragment);\r\n    };\r\n    ARowRenderer.prototype.animate = function (animation, phases, previousFinder, currentFinder, fragment) {\r\n        var _this = this;\r\n        if (animation.length <= 0) {\r\n            this.body.appendChild(fragment);\r\n            return;\r\n        }\r\n        var currentTimer = -1;\r\n        var actPhase = 0;\r\n        var executePhase = function (phase, items) {\r\n            if (items === void 0) { items = animation; }\r\n            items.forEach(function (anim) { return phase.apply(anim, previousFinder, currentFinder); });\r\n        };\r\n        var run = function () {\r\n            //dummy log for forcing dom update\r\n            console.assert(animation[0].node.offsetTop >= 0, 'dummy log for forcing dom update');\r\n            executePhase(phases[actPhase++]);\r\n            // shifted by one since already added through ++\r\n            if (actPhase < phases.length) {\r\n                // schedule the next one\r\n                var next = phases[actPhase];\r\n                currentTimer = self.setTimeout(run, next.delay);\r\n                return;\r\n            }\r\n            // last one\r\n            var body = _this.body.classList;\r\n            Array.from(body).forEach(function (v) {\r\n                if (v.startsWith(cssClass()) && v.endsWith('-animation')) {\r\n                    body.remove(v);\r\n                }\r\n            });\r\n            // clean up\r\n            animation.forEach(function (_a) {\r\n                var node = _a.node, mode = _a.mode;\r\n                if (mode !== EAnimationMode.UPDATE_REMOVE && mode !== EAnimationMode.HIDE) {\r\n                    return;\r\n                }\r\n                node.remove();\r\n                node.style.transform = '';\r\n                _this.recycle(node);\r\n            });\r\n            _this.abortAnimation = function () { return undefined; };\r\n            currentTimer = -1;\r\n        };\r\n        // execute all phases having a delay of zero\r\n        while (phases[actPhase].delay === 0) {\r\n            executePhase(phases[actPhase++]);\r\n        }\r\n        // after the initial one\r\n        var body = this.body;\r\n        this.body.appendChild(fragment);\r\n        var dummyAnimation = [];\r\n        animation = animation.filter(function (d) {\r\n            if (noAnimationChange(d, previousFinder.context.defaultRowHeight, currentFinder.context.defaultRowHeight)) {\r\n                dummyAnimation.push(d);\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n        if (dummyAnimation.length > 0) {\r\n            // execute all phases for them\r\n            phases.slice(actPhase).forEach(function (phase) { return executePhase(phase, dummyAnimation); });\r\n        }\r\n        if (animation.length === 0) {\r\n            return;\r\n        }\r\n        body.classList.add(CSS_CLASS_ROW_ANIMATION);\r\n        (new Set(animation.map(function (d) { return d.mode; }))).forEach(function (mode) {\r\n            // add class but map to UPDATE only\r\n            body.classList.add(cssClass(EAnimationMode[mode].toLowerCase().split('_')[0] + \"-animation\"));\r\n        });\r\n        this.abortAnimation = function () {\r\n            if (currentTimer <= 0) {\r\n                return;\r\n            }\r\n            // abort by removing\r\n            clearTimeout(currentTimer);\r\n            currentTimer = -1;\r\n            // run the last phase\r\n            actPhase = phases.length - 1;\r\n            run();\r\n        };\r\n        // next tick such that DOM will be updated\r\n        currentTimer = self.setTimeout(run, phases[actPhase].delay);\r\n    };\r\n    /**\r\n     * clears the row pool used for faster creation\r\n     */\r\n    ARowRenderer.prototype.clearPool = function () {\r\n        // clear pool\r\n        this.pool.splice(0, this.pool.length);\r\n    };\r\n    /**\r\n     * triggers a revalidation of the current scrolling offest\r\n     */\r\n    ARowRenderer.prototype.revalidate = function () {\r\n        var scroller = this.bodyScroller;\r\n        this.onScrolledVertically(scroller.scrollTop, scroller.clientHeight, true);\r\n        this.updateOffset(this.visibleFirstRowPos);\r\n    };\r\n    /**\r\n     * scrolling vertically\r\n     * @param {number} scrollTop top scrolling\r\n     * @param {number} clientHeight visible height\r\n     * @param {boolean} isGoingDown hint whether the scrollTop increases\r\n     * @return {EScrollResult} full in case of a full rebuild or partial update\r\n     */\r\n    ARowRenderer.prototype.onScrolledVertically = function (scrollTop, clientHeight, isGoingDown) {\r\n        var shift = this.options.viewportOversize;\r\n        var shiftTop = Math.max(0, scrollTop - shift);\r\n        var scrollResult = this.onScrolledImpl(shiftTop, clientHeight + shift + (scrollTop - shiftTop));\r\n        for (var _i = 0, _a = this.mixins; _i < _a.length; _i++) {\r\n            var mixin = _a[_i];\r\n            mixin.onScrolled(isGoingDown, scrollResult);\r\n        }\r\n        return scrollResult;\r\n    };\r\n    ARowRenderer.prototype.shiftLast = function (current, currentDelta) {\r\n        var b = this.options.batchSize;\r\n        if (currentDelta >= b) {\r\n            return current;\r\n        }\r\n        var total = this.context.numberOfRows;\r\n        return Math.min(total - 1, current + (this.options.batchSize - currentDelta));\r\n    };\r\n    ARowRenderer.prototype.shiftFirst = function (current, currentFirstRow, currentDelta) {\r\n        var b = this.options.batchSize;\r\n        if (currentDelta >= b || current <= 0) {\r\n            return { first: current, firstRowPos: currentFirstRow };\r\n        }\r\n        var first = Math.max(0, current - (this.options.batchSize - currentDelta));\r\n        var _a = this.context, exceptionsLookup = _a.exceptionsLookup, defaultRowHeight = _a.defaultRowHeight;\r\n        var firstRowPos = currentFirstRow;\r\n        for (var i = first; i < current; ++i) {\r\n            if (exceptionsLookup.has(i)) {\r\n                firstRowPos -= exceptionsLookup.get(i);\r\n            }\r\n            else {\r\n                firstRowPos -= defaultRowHeight;\r\n            }\r\n        }\r\n        return { first: first, firstRowPos: firstRowPos };\r\n    };\r\n    ARowRenderer.prototype.onScrolledImpl = function (scrollTop, clientHeight) {\r\n        var context = this.context;\r\n        var _a = range(scrollTop, clientHeight, context.defaultRowHeight, context.exceptions, context.numberOfRows), first = _a.first, last = _a.last, firstRowPos = _a.firstRowPos;\r\n        var visible = this.visible;\r\n        visible.forcedFirst = first;\r\n        visible.forcedLast = last;\r\n        if ((first - visible.first) >= 0 && (last - visible.last) <= 0) {\r\n            //nothing to do\r\n            return EScrollResult.NONE;\r\n        }\r\n        var r = EScrollResult.SOME;\r\n        var torecycle;\r\n        var toadd;\r\n        var toaddBottom = false;\r\n        if (first > visible.last || last < visible.first) {\r\n            //no overlap, clean and draw everything\r\n            //console.log(`ff added: ${last - first + 1} removed: ${visibleLast - visibleFirst + 1} ${first}:${last} ${offset}`);\r\n            //removeRows(visibleFirst, visibleLast);\r\n            torecycle = this.removeAll(false);\r\n            toadd = this.addAtBottom(first, last, false);\r\n            toaddBottom = true;\r\n            r = EScrollResult.ALL;\r\n        }\r\n        else if (first < visible.first) {\r\n            //some first rows missing and some last rows to much\r\n            //console.log(`up added: ${visibleFirst - first + 1} removed: ${visibleLast - last + 1} ${first}:${last} ${offset}`);\r\n            var toRemove = visible.last - (last + 1);\r\n            if (toRemove >= this.options.batchSize) {\r\n                torecycle = this.removeFromBottom(last + 1, visible.last, false);\r\n            }\r\n            else {\r\n                last = visible.last;\r\n            }\r\n            var shift = this.shiftFirst(first, firstRowPos, visible.first - 1 - first);\r\n            first = shift.first;\r\n            firstRowPos = shift.firstRowPos;\r\n            toadd = this.addAtBeginning(first, visible.first - 1, false);\r\n            toaddBottom = false;\r\n            r = EScrollResult.SOME_TOP;\r\n        }\r\n        else {\r\n            //console.log(`do added: ${last - visibleLast + 1} removed: ${first - visibleFirst + 1} ${first}:${last} ${offset}`);\r\n            //some last rows missing and some first rows to much\r\n            var toRemove = first - 1 - visible.first;\r\n            if (toRemove >= this.options.batchSize) {\r\n                torecycle = this.removeFromBeginning(visible.first, first - 1, false);\r\n            }\r\n            else {\r\n                first = visible.first;\r\n                firstRowPos = this.visibleFirstRowPos;\r\n            }\r\n            last = this.shiftLast(last, last - visible.last + 1);\r\n            toadd = this.addAtBottom(visible.last + 1, last, false);\r\n            toaddBottom = true;\r\n            r = EScrollResult.SOME_BOTTOM;\r\n        }\r\n        visible.first = first;\r\n        visible.last = last;\r\n        this.updateOffset(firstRowPos);\r\n        this.manipulate(torecycle, toadd, toaddBottom);\r\n        return r;\r\n    };\r\n    ARowRenderer.prototype.manipulate = function (toRecycle, toAdd, bottom) {\r\n        if (toRecycle) {\r\n            for (var _i = 0, toRecycle_1 = toRecycle; _i < toRecycle_1.length; _i++) {\r\n                var item = toRecycle_1[_i];\r\n                item.remove();\r\n                this.recycle(item);\r\n            }\r\n        }\r\n        if (!toAdd) {\r\n            return;\r\n        }\r\n        if (bottom) {\r\n            this.body.appendChild(toAdd);\r\n        }\r\n        else {\r\n            this.body.insertBefore(toAdd, this.body.firstChild);\r\n        }\r\n    };\r\n    return ARowRenderer;\r\n}());\r\nexport { ARowRenderer };\r\nexport default ARowRenderer;\r\nexport function setTransform(elem, x, y) {\r\n    var text = \"translate(\" + x + \"px, \" + y + \"px)\";\r\n    var anyelem = elem;\r\n    if (anyelem.__transform__ === text) {\r\n        return;\r\n    }\r\n    anyelem.__transform__ = elem.style.transform = text;\r\n}\r\n//# sourceMappingURL=ARowRenderer.js.map","// import manually import './style.scss';\r\nfunction assignStyles(target, source) {\r\n    for (var _i = 0, _a = Object.keys(source); _i < _a.length; _i++) {\r\n        var key = _a[_i];\r\n        var v = source[key];\r\n        if (!v.endsWith(' !important')) {\r\n            if (target[key] !== v) {\r\n                target[key] = v;\r\n            }\r\n            continue;\r\n        }\r\n        // handle special important case\r\n        var plain = v.slice(0, -' !important'.length);\r\n        if (target[key] === plain) {\r\n            continue;\r\n        }\r\n        target[key] = plain;\r\n        // see https://gist.github.com/youssman/745578062609e8acac9f\r\n        var hyphen = key.replace(/([a-zA-Z])(?=[A-Z])/g, '$1-').toLowerCase();\r\n        target.setProperty(hyphen, plain, 'important');\r\n    }\r\n}\r\nvar StyleManager = /** @class */ (function () {\r\n    /**\r\n     * the parent element to append this managed style\r\n     * @param {HTMLElement} root\r\n     */\r\n    function StyleManager(root) {\r\n        this.rules = [];\r\n        this.testVerifyTimeout = -1;\r\n        this.node = root.ownerDocument.createElement('style');\r\n        this.node.appendChild(root.ownerDocument.createTextNode('')); // for webkit?\r\n        root.appendChild(this.node);\r\n    }\r\n    StyleManager.prototype.destroy = function () {\r\n        this.node.remove();\r\n    };\r\n    StyleManager.prototype.verifySheet = function () {\r\n        var _this = this;\r\n        var sheet = this.sheet;\r\n        if (!sheet) {\r\n            if (this.testVerifyTimeout >= 0) {\r\n                return;\r\n            }\r\n            // test till attached\r\n            this.testVerifyTimeout = self.setTimeout(function () {\r\n                _this.testVerifyTimeout = -1;\r\n                _this.verifySheet();\r\n            }, 20);\r\n            return;\r\n        }\r\n        var rules = sheet.cssRules;\r\n        if (rules.length === this.rules.length && this.rules.every(function (d, i) { return rules[i].selectorText === d.selector; })) {\r\n            // same\r\n            return;\r\n        }\r\n        console.warn('invalid sheet rules detected');\r\n        var l = rules.length;\r\n        for (var i = 0; i < l; ++i) {\r\n            sheet.deleteRule(i);\r\n        }\r\n        // create all\r\n        for (var _i = 0, _a = this.rules; _i < _a.length; _i++) {\r\n            var rule = _a[_i];\r\n            var index = sheet.insertRule(rule.selector + \" {}\", sheet.cssRules.length);\r\n            var cssRule = sheet.cssRules[index];\r\n            rule.selector = cssRule.selectorText;\r\n            assignStyles(cssRule.style, rule.style);\r\n        }\r\n    };\r\n    Object.defineProperty(StyleManager.prototype, \"sheet\", {\r\n        get: function () {\r\n            return this.node.sheet;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    StyleManager.prototype.getSheetRule = function (index) {\r\n        var sheet = this.sheet;\r\n        return sheet ? sheet.cssRules[index] : null;\r\n    };\r\n    /**\r\n     * add a custom css rule\r\n     * @param {string} id unique id of the rule for later identification\r\n     * @param {string} selector the css selector\r\n     * @param {Partial<CSSStyleDeclaration>} style the style attributes\r\n     * @returns {string} the id again\r\n     */\r\n    StyleManager.prototype.addRule = function (id, selector, style) {\r\n        this.verifySheet();\r\n        var sheet = this.sheet;\r\n        if (!sheet) {\r\n            // upon next update\r\n            this.rules.push({ id: id, selector: selector, style: style });\r\n            return;\r\n        }\r\n        var index = sheet.insertRule(selector + \" {}\", sheet.cssRules.length);\r\n        var rule = sheet.cssRules[index];\r\n        this.rules.push({ id: id, selector: rule.selectorText, style: style });\r\n        assignStyles(rule.style, style);\r\n        return id;\r\n    };\r\n    /**\r\n     * updates or add a rule, see @addRule\r\n     * @param {string} id unique id of the rule for later identification\r\n     * @param {string} selector the css selector\r\n     * @param {Partial<CSSStyleDeclaration>} style the style attributes\r\n     * @returns {string} the id again\r\n     */\r\n    StyleManager.prototype.updateRule = function (id, selector, style) {\r\n        this.verifySheet();\r\n        var index = this.rules.findIndex(function (d) { return d.id === id; });\r\n        if (index < 0) {\r\n            return this.addRule(id, selector, style);\r\n        }\r\n        var stored = this.rules[index];\r\n        stored.selector = selector;\r\n        stored.style = style;\r\n        var rule = this.getSheetRule(index);\r\n        if (rule) {\r\n            if (rule.selectorText.replace(/\\s/gm, '') !== selector.replace(/\\s/gm, '')) { //ignoring white space\r\n                rule.selectorText = selector;\r\n                stored.selector = rule.selectorText;\r\n            }\r\n            assignStyles(rule.style, style);\r\n        }\r\n        return id;\r\n    };\r\n    /**\r\n     * deletes the given rule by id\r\n     * @param {string} id the rule to delete\r\n     */\r\n    StyleManager.prototype.deleteRule = function (id) {\r\n        this.verifySheet();\r\n        var index = this.rules.findIndex(function (d) { return d.id === id; });\r\n        if (index < 0) {\r\n            return;\r\n        }\r\n        this.rules.splice(index, 1);\r\n        var sheet = this.sheet;\r\n        if (sheet) {\r\n            sheet.deleteRule(index);\r\n        }\r\n    };\r\n    Object.defineProperty(StyleManager.prototype, \"ruleNames\", {\r\n        /**\r\n         * get a list of all registered rule ids\r\n         * @returns {string[]}\r\n         */\r\n        get: function () {\r\n            return this.rules.map(function (d) { return d.id; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return StyleManager;\r\n}());\r\nexport default StyleManager;\r\n//# sourceMappingURL=StyleManager.js.map","import { __extends } from \"tslib\";\r\nimport { addScroll } from '../internal';\r\nimport { cssClass, CSS_CLASS_BODY, CSS_CLASS_FOOTER, CSS_CLASS_HEADER, CSS_CLASS_SCROLLBAR_TESTER, CSS_CLASS_SHIFTED, CSS_CLASS_TBODY, CSS_CLASS_THEAD } from '../styles';\r\nimport StyleManager from './StyleManager';\r\nexport function setTemplate(root, id) {\r\n    id = id.startsWith('#') ? id.slice(1) : id;\r\n    root.innerHTML = \"\\n  <header id=\\\"header-\" + id + \"\\\" class=\\\"\" + CSS_CLASS_HEADER + \" \" + cssClass(\"header-\" + id) + \"\\\">\\n    <article class=\\\"\" + CSS_CLASS_THEAD + \" \" + cssClass(\"thead-\" + id) + \"\\\"></article>\\n  </header>\\n  <main id=\\\"body-\" + id + \"\\\" class=\\\"\" + CSS_CLASS_BODY + \" \" + cssClass(\"body-\" + id) + \"\\\">\\n    <footer class=\\\"\" + CSS_CLASS_FOOTER + \"\\\">&nbsp;</footer>\\n    <article class=\\\"\" + CSS_CLASS_TBODY + \" \" + cssClass(\"tbody-\" + id) + \"\\\"></article>\\n  </main>\";\r\n    return root;\r\n}\r\n/**\r\n * generates the HTML Ids used for the header and body article of a table\r\n * @param {string} tableId base table id\r\n * @param {boolean} asSelector flag whether to prepend with # for CSS selector\r\n * @return {ISelectors} the table ids used for header and body\r\n */\r\nexport function tableIds(tableId) {\r\n    return {\r\n        thead: \"thead-\" + tableId,\r\n        tbody: \"tbody-\" + tableId,\r\n        tr: \"tr-\" + tableId,\r\n        th: \"th-\" + tableId,\r\n        td: \"td-\" + tableId\r\n    };\r\n}\r\nexport function tableCSSClasses(tableId) {\r\n    var ids = tableIds(tableId);\r\n    return {\r\n        thead: cssClass(ids.thead),\r\n        tbody: cssClass(ids.tbody),\r\n        tr: cssClass(ids.tr),\r\n        th: cssClass(ids.th),\r\n        td: cssClass(ids.td)\r\n    };\r\n}\r\n/**\r\n * utility for custom generated CSS rules with a focus on dynamically generated grid layouts\r\n */\r\nvar GridStyleManager = /** @class */ (function (_super) {\r\n    __extends(GridStyleManager, _super);\r\n    function GridStyleManager(root, id) {\r\n        var _this = _super.call(this, root) || this;\r\n        _this.id = id.startsWith('#') ? id.slice(1) : id;\r\n        _this.ids = tableIds(_this.id);\r\n        _this.cssClasses = tableCSSClasses(_this.id);\r\n        var headerScroller = root.getElementsByTagName('header')[0];\r\n        var bodyScroller = root.getElementsByTagName('main')[0];\r\n        // async since style needs to be added to dom first\r\n        self.setTimeout(function () {\r\n            var width = measureScrollbar(root).width;\r\n            _this.updateRule('__scollBarFix2', \"#header-\" + _this.id + \" > article:last-of-type\", {\r\n                borderRight: width + \"px solid transparent\"\r\n            });\r\n        }, 20);\r\n        var old = headerScroller.scrollLeft;\r\n        // update frozen and sync header with body\r\n        addScroll(bodyScroller, 'animation', function (act) {\r\n            var newValue = act.left;\r\n            if (old !== newValue) {\r\n                old = headerScroller.scrollLeft = newValue;\r\n            }\r\n            root.classList.toggle(CSS_CLASS_SHIFTED, act.left > 0);\r\n        });\r\n        return _this;\r\n    }\r\n    /**\r\n     * updates the column widths and default row height for a table\r\n     * @param {number} defaultRowHeight\r\n     * @param {IColumn[]} columns\r\n     * @param {number} frozenShift shift frozen colums\r\n     * @param {string} tableId optional tableId in case of multiple tables within the same engine\r\n     * @param {string} unit\r\n     */\r\n    GridStyleManager.prototype.update = function (defaultRowHeight, columns, padding, frozenShift, tableId, unit) {\r\n        if (unit === void 0) { unit = 'px'; }\r\n        var ids = tableIds(tableId);\r\n        var selectors = tableCSSClasses(tableId);\r\n        var total = \"\" + columns.reduce(function (a, b, i) { return a + b.width + padding(i); }, 0) + unit;\r\n        this.updateRule(\"__heightsRule\" + selectors.tr, \".\" + selectors.tr, {\r\n            height: defaultRowHeight + \"px\",\r\n            width: total\r\n        });\r\n        this.updateRule(\"__heightsRule\" + selectors.tbody, \"#\" + ids.tbody, {\r\n            width: total\r\n        });\r\n        this.updateColumns(columns, padding, selectors, frozenShift, unit);\r\n    };\r\n    /**\r\n     * removes a given tableId if not needed anymore\r\n     * @param {string} tableId tableId to remove\r\n     */\r\n    GridStyleManager.prototype.remove = function (tableId) {\r\n        var selectors = tableCSSClasses(tableId);\r\n        this.deleteRule(\"__heightsRule\" + selectors.tr);\r\n        this.deleteRule(\"__heightsRule\" + selectors.tbody);\r\n        var prefix = \"__col\" + selectors.td + \"_\";\r\n        var rules = this.ruleNames.reduce(function (a, b) { return a + (b.startsWith(prefix) ? 1 : 0); }, 0);\r\n        // reset\r\n        for (var i = 0; i < rules; ++i) {\r\n            this.deleteRule(\"\" + prefix + i);\r\n        }\r\n    };\r\n    GridStyleManager.prototype.updateColumns = function (columns, padding, cssSelectors, frozenShift, unit) {\r\n        var _this = this;\r\n        if (unit === void 0) { unit = 'px'; }\r\n        var prefix = \"__col\" + cssSelectors.td + \"_\";\r\n        var rules = new Set(this.ruleNames.filter(function (d) { return d.startsWith(prefix); }));\r\n        var acc = 0;\r\n        columns.forEach(function (c, i) {\r\n            var th = \".\" + cssSelectors.th + \"[data-id=\\\"\" + c.id + \"\\\"]\";\r\n            var thStyles = {\r\n                width: \"\" + c.width + unit\r\n            };\r\n            var td = \".\" + cssSelectors.td + \"[data-id=\\\"\" + c.id + \"\\\"]\";\r\n            var tdStyles = {\r\n                transform: \"translateX(\" + acc + unit + \")\",\r\n                width: \"\" + c.width + unit\r\n            };\r\n            if (c.frozen) {\r\n                thStyles.left = acc + \"px\";\r\n                _this.updateRule(\"\" + prefix + td + \"F\", \".\" + cssSelectors.td + \".\" + CSS_CLASS_SHIFTED + \"[data-id=\\\"\" + c.id + \"\\\"]\", {\r\n                    transform: \"translateX(0)\",\r\n                    left: \"\" + (acc + frozenShift) + unit\r\n                });\r\n                rules.delete(\"\" + prefix + td + \"F\");\r\n            }\r\n            _this.updateRule(\"\" + prefix + th, th, thStyles);\r\n            rules.delete(\"\" + prefix + th);\r\n            _this.updateRule(\"\" + prefix + td, td, tdStyles);\r\n            rules.delete(\"\" + prefix + td);\r\n            acc += c.width + padding(i);\r\n        });\r\n        rules.forEach(function (d) { return _this.deleteRule(d); });\r\n    };\r\n    return GridStyleManager;\r\n}(StyleManager));\r\nexport default GridStyleManager;\r\n/**\r\n * measure the width and height of the scrollbars\r\n * based on Slick grid implementation\r\n * @param root\r\n */\r\nfunction measureScrollbar(root) {\r\n    var body = root.ownerDocument.body;\r\n    body.insertAdjacentHTML('beforeend', \"\\n    <div class=\\\"\" + CSS_CLASS_SCROLLBAR_TESTER + \"\\\"><div></div></div>\\n  \");\r\n    var elem = body.lastElementChild;\r\n    var width = elem.offsetWidth - elem.clientWidth;\r\n    var height = elem.offsetHeight - elem.clientHeight;\r\n    elem.remove();\r\n    return { width: width, height: height };\r\n}\r\n//# sourceMappingURL=GridStyleManager.js.map","import { setTransform } from '../ARowRenderer';\r\nimport { addScroll, defaultMode } from '../internal';\r\nimport { GridStyleManager, tableCSSClasses, tableIds } from '../style';\r\nimport { cssClass, CSS_CLASS_BODY, CSS_CLASS_FOOTER, CSS_CLASS_HEADER, CSS_CLASS_MULTI, CSS_CLASS_TBODY, CSS_CLASS_THEAD } from '../styles';\r\n/**\r\n * manager of multiple columns separated by separators each an own row renderer\r\n */\r\nvar MultiTableRowRenderer = /** @class */ (function () {\r\n    function MultiTableRowRenderer(node, htmlId, options) {\r\n        var _this = this;\r\n        if (options === void 0) { options = {}; }\r\n        this.node = node;\r\n        this.tableId = 0;\r\n        this.sections = [];\r\n        this.options = {\r\n            columnPadding: 0,\r\n            async: defaultMode,\r\n            minScrollDelta: 30\r\n        };\r\n        Object.assign(this.options, options);\r\n        htmlId = htmlId.startsWith('#') ? htmlId.slice(1) : htmlId;\r\n        node.id = htmlId;\r\n        node.innerHTML = \"<header id=\\\"header-\" + htmlId + \"\\\" class=\\\"\" + CSS_CLASS_HEADER + \" \" + cssClass(\"header-\" + htmlId) + \"\\\">\\n      <footer class=\\\"\" + CSS_CLASS_FOOTER + \" \" + cssClass(\"footer-\" + htmlId) + \"\\\">&nbsp;</footer>\\n    </header>\\n    <main id=\\\"body-\" + htmlId + \"\\\" class=\\\"\" + CSS_CLASS_BODY + \" \" + cssClass(\"body-\" + htmlId) + \"\\\">\\n      <footer class=\\\"\" + CSS_CLASS_FOOTER + \"\\\">&nbsp;</footer>\\n    </main>\";\r\n        node.classList.add(cssClass(), CSS_CLASS_MULTI, 'lineup-engine');\r\n        this.style = new GridStyleManager(this.node, htmlId);\r\n        var old = addScroll(this.main, this.options.async, function (act) {\r\n            if (Math.abs(old.left - act.left) < _this.options.minScrollDelta && Math.abs(old.width - act.width) < _this.options.minScrollDelta) {\r\n                return;\r\n            }\r\n            var isGoingRight = act.left > old.left;\r\n            old = act;\r\n            _this.onScrolledHorizontally(act.left, act.width, isGoingRight);\r\n        });\r\n    }\r\n    MultiTableRowRenderer.prototype.update = function () {\r\n        var _this = this;\r\n        this.onScrolledHorizontally(this.main.scrollLeft, this.main.clientWidth, false);\r\n        var offset = 0;\r\n        this.sections.forEach(function (s) {\r\n            s.body.style.left = s.header.style.left = offset + \"px\";\r\n            offset += s.width + _this.options.columnPadding;\r\n        });\r\n    };\r\n    MultiTableRowRenderer.prototype.onScrolledHorizontally = function (scrollLeft, clientWidth, isGoingRight) {\r\n        var _this = this;\r\n        var offset = 0;\r\n        var scrollEnd = scrollLeft + clientWidth;\r\n        this.sections.forEach(function (s) {\r\n            var end = offset + s.width;\r\n            if (end < scrollLeft || offset > scrollEnd) {\r\n                s.hide();\r\n            }\r\n            else {\r\n                s.show(Math.max(0, scrollLeft - offset), Math.min(scrollEnd - offset, s.width), isGoingRight);\r\n            }\r\n            offset = end + _this.options.columnPadding;\r\n        });\r\n        this.updateOffset();\r\n    };\r\n    MultiTableRowRenderer.prototype.updateOffset = function () {\r\n        var _this = this;\r\n        var headerFooter = this.header.getElementsByTagName('footer')[0];\r\n        var bodyFooter = this.main.getElementsByTagName('footer')[0];\r\n        var maxHeight = this.sections.reduce(function (acc, d) { return Math.max(acc, d.height); }, 0);\r\n        var total = this.sections.reduce(function (a, c) { return a + c.width + _this.options.columnPadding; }, 0);\r\n        setTransform(headerFooter, total, 0);\r\n        setTransform(bodyFooter, total, maxHeight);\r\n    };\r\n    MultiTableRowRenderer.prototype.destroy = function () {\r\n        this.sections.forEach(function (d) { return d.destroy(); });\r\n        this.node.remove();\r\n    };\r\n    Object.defineProperty(MultiTableRowRenderer.prototype, \"doc\", {\r\n        get: function () {\r\n            return this.node.ownerDocument;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MultiTableRowRenderer.prototype, \"header\", {\r\n        get: function () {\r\n            return this.node.getElementsByTagName('header')[0];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MultiTableRowRenderer.prototype, \"main\", {\r\n        get: function () {\r\n            return this.node.getElementsByTagName('main')[0];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * push another table to this instance\r\n     * @param {ITableFactory<T extends ITableSection>} factory factory for the table\r\n     * @param extras additional arguments to provide for the factory\r\n     * @returns {T} the table instance\r\n     */\r\n    MultiTableRowRenderer.prototype.pushTable = function (factory) {\r\n        var extras = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            extras[_i - 1] = arguments[_i];\r\n        }\r\n        var header = this.doc.createElement('article');\r\n        var body = this.doc.createElement('article');\r\n        var tableId = this.node.id + \"T\" + this.tableId++;\r\n        var ids = tableIds(tableId);\r\n        var cssClasses = tableCSSClasses(tableId);\r\n        header.id = ids.thead;\r\n        header.classList.add(CSS_CLASS_THEAD, cssClasses.thead);\r\n        body.id = ids.tbody;\r\n        body.classList.add(CSS_CLASS_TBODY, cssClasses.tbody);\r\n        this.header.insertBefore(header, this.header.lastElementChild); //before the footer\r\n        this.main.appendChild(body);\r\n        var table = factory.apply(this, [header, body, tableId, this.style].concat(extras));\r\n        table.init();\r\n        this.sections.push(table);\r\n        this.update();\r\n        return table;\r\n    };\r\n    /**\r\n     * push another separator to the manager\r\n     * @param {ISeparatorFactory<T extends ITableSection>} factory the factory to create the separator\r\n     * @param extras optional additional arguments\r\n     * @returns {T} the new created separator\r\n     */\r\n    MultiTableRowRenderer.prototype.pushSeparator = function (factory) {\r\n        var extras = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            extras[_i - 1] = arguments[_i];\r\n        }\r\n        var header = this.doc.createElement('section');\r\n        var body = this.doc.createElement('section');\r\n        header.classList.add(cssClass('header-separator'));\r\n        body.classList.add(cssClass('separator'));\r\n        this.header.insertBefore(header, this.header.lastElementChild); //before the footer\r\n        this.main.appendChild(body);\r\n        var separator = factory.apply(this, [header, body, this.style].concat(extras));\r\n        separator.init();\r\n        this.sections.push(separator);\r\n        this.update();\r\n        return separator;\r\n    };\r\n    /**\r\n     * removes a given table section\r\n     * @param {ITableSection} section section to remove\r\n     * @returns {boolean} successful flag\r\n     */\r\n    MultiTableRowRenderer.prototype.remove = function (section) {\r\n        var index = this.sections.indexOf(section);\r\n        if (index < 0) {\r\n            return false;\r\n        }\r\n        this.sections.splice(index, 1);\r\n        section.destroy();\r\n        this.update();\r\n        return true;\r\n    };\r\n    MultiTableRowRenderer.prototype.clear = function () {\r\n        this.sections.splice(0, this.sections.length).forEach(function (s) { return s.destroy(); });\r\n        this.update();\r\n    };\r\n    /**\r\n     * triggers and update because of a change in width of one or more table sections\r\n     */\r\n    MultiTableRowRenderer.prototype.widthChanged = function () {\r\n        this.update();\r\n    };\r\n    return MultiTableRowRenderer;\r\n}());\r\nexport default MultiTableRowRenderer;\r\n//# sourceMappingURL=MultiTableRowRenderer.js.map","import { range } from '../logic';\r\nimport { EScrollResult } from './IMixin';\r\n/**\r\n * mixin that prefetches rows depending on the scrolling direction for faster rendering\r\n */\r\nvar PrefetchMixin = /** @class */ (function () {\r\n    function PrefetchMixin(adapter, options) {\r\n        this.adapter = adapter;\r\n        this.prefetchTimeout = -1;\r\n        this.cleanupTimeout = -1;\r\n        this.options = {\r\n            prefetchRows: 20,\r\n            cleanUpRows: 10,\r\n            delay: 200\r\n        };\r\n        Object.assign(this.options, options);\r\n        return this;\r\n    }\r\n    PrefetchMixin.prototype.prefetchDown = function () {\r\n        this.prefetchTimeout = -1;\r\n        if (this.adapter.isScrollEventWaiting()) {\r\n            return;\r\n        }\r\n        var context = this.adapter.context;\r\n        var nextLast = Math.min(this.adapter.visible.forcedLast + this.options.prefetchRows, context.numberOfRows - 1);\r\n        // add some rows in advance\r\n        if (this.adapter.visible.last === nextLast && this.adapter.visible.last >= (this.adapter.visible.forcedLast + this.options.prefetchRows)) {\r\n            return;\r\n        }\r\n        this.adapter.addAtBottom(this.adapter.visible.last + 1, nextLast);\r\n        //console.log('prefetch', visibleFirst, visibleLast + 1, '=>', nextLast, ranking.children.length);\r\n        this.adapter.visible.last = nextLast;\r\n    };\r\n    PrefetchMixin.prototype.prefetchUp = function () {\r\n        this.prefetchTimeout = -1;\r\n        if (this.adapter.isScrollEventWaiting() || this.adapter.visible.first <= (this.adapter.visible.forcedFirst - this.options.prefetchRows)) {\r\n            return;\r\n        }\r\n        var context = this.adapter.context;\r\n        var fakeOffset = Math.max(this.adapter.scrollOffset - this.options.prefetchRows * context.defaultRowHeight, 0);\r\n        var height = this.adapter.scrollTotal;\r\n        var _a = range(fakeOffset, height, context.defaultRowHeight, context.exceptions, context.numberOfRows), first = _a.first, firstRowPos = _a.firstRowPos;\r\n        if (first === this.adapter.visible.first) {\r\n            return;\r\n        }\r\n        var frozenShift = this.adapter.syncFrozen ? this.adapter.syncFrozen(first) : 0;\r\n        this.adapter.addAtBeginning(first, this.adapter.visible.first - 1, frozenShift);\r\n        //console.log('prefetch up ', visibleFirst, '=>', first, visibleLast, ranking.children.length);\r\n        this.adapter.visible.first = first;\r\n        this.adapter.updateOffset(firstRowPos);\r\n    };\r\n    PrefetchMixin.prototype.triggerPrefetch = function (isGoingDown) {\r\n        if (this.prefetchTimeout >= 0) {\r\n            clearTimeout(this.prefetchTimeout);\r\n        }\r\n        var prefetchDownPossible = this.adapter.visible.last < (this.adapter.visible.forcedLast + this.options.prefetchRows);\r\n        var prefetchUpPossible = this.adapter.visible.first > (this.adapter.visible.forcedFirst - this.options.prefetchRows);\r\n        var isLast = this.adapter.visible.last === this.adapter.context.numberOfRows;\r\n        var isFirst = this.adapter.visible.first === 0;\r\n        if ((isGoingDown && !prefetchDownPossible && !isLast) || (!isGoingDown && !prefetchUpPossible && !isFirst)) {\r\n            return;\r\n        }\r\n        // go down if we are already at the top, too\r\n        var op = (isGoingDown || isFirst) ? this.prefetchDown.bind(this) : this.prefetchUp.bind(this);\r\n        this.prefetchTimeout = self.setTimeout(op, this.options.delay);\r\n    };\r\n    PrefetchMixin.prototype.cleanUpTop = function (first) {\r\n        this.cleanupTimeout = -1;\r\n        if (this.adapter.isScrollEventWaiting()) {\r\n            return;\r\n        }\r\n        var newFirst = Math.max(0, first - this.options.cleanUpRows);\r\n        if (newFirst <= this.adapter.visible.first) {\r\n            return;\r\n        }\r\n        //console.log('cleanup top');\r\n        var frozenShift = this.adapter.syncFrozen ? this.adapter.syncFrozen(newFirst) : 0;\r\n        this.adapter.removeFromBeginning(this.adapter.visible.first, newFirst - 1, frozenShift);\r\n        var context = this.adapter.context;\r\n        //console.log('cleanup up ', visibleFirst, '=>', newFirst, visibleLast, ranking.children.length);\r\n        var shift = (newFirst - this.adapter.visible.first) * context.defaultRowHeight;\r\n        if (context.exceptions.length > 0) {\r\n            for (var i = this.adapter.visible.first; i < newFirst; ++i) {\r\n                if (context.exceptionsLookup.has(i)) {\r\n                    shift += context.exceptionsLookup.get(i) - context.defaultRowHeight;\r\n                }\r\n            }\r\n        }\r\n        this.adapter.visible.first = newFirst;\r\n        this.adapter.updateOffset(this.adapter.visibleFirstRowPos + shift);\r\n        this.prefetchDown();\r\n    };\r\n    PrefetchMixin.prototype.cleanUpBottom = function (last) {\r\n        this.cleanupTimeout = -1;\r\n        var newLast = last + this.options.cleanUpRows;\r\n        if (this.adapter.visible.last <= newLast) {\r\n            return;\r\n        }\r\n        //console.log('cleanup bottom');\r\n        this.adapter.removeFromBottom(newLast + 1, this.adapter.visible.last);\r\n        this.adapter.visible.last = newLast;\r\n        this.prefetchUp();\r\n    };\r\n    PrefetchMixin.prototype.triggerCleanUp = function (first, last, isGoingDown) {\r\n        if (this.cleanupTimeout >= 0) {\r\n            clearTimeout(this.cleanupTimeout);\r\n        }\r\n        if ((isGoingDown && (first - this.options.cleanUpRows) <= this.adapter.visible.first) || (!isGoingDown && this.adapter.visible.last <= (last + this.options.cleanUpRows))) {\r\n            return;\r\n        }\r\n        this.cleanupTimeout = self.setTimeout(isGoingDown ? this.cleanUpTop.bind(this) : this.cleanUpBottom.bind(this), this.options.delay, isGoingDown ? first : last);\r\n    };\r\n    PrefetchMixin.prototype.onScrolled = function (isGoingDown, scrollResult) {\r\n        if (this.adapter.isScrollEventWaiting()) {\r\n            return;\r\n        }\r\n        if (scrollResult !== EScrollResult.ALL && this.options.cleanUpRows > 0) {\r\n            this.triggerCleanUp(this.adapter.visible.forcedFirst, this.adapter.visible.forcedLast, isGoingDown);\r\n        }\r\n        if (scrollResult !== EScrollResult.NONE && this.options.prefetchRows > 0) {\r\n            this.triggerPrefetch(isGoingDown);\r\n        }\r\n    };\r\n    return PrefetchMixin;\r\n}());\r\nexport default PrefetchMixin;\r\n//# sourceMappingURL=PrefetchMixin.js.map","import { ABORTED, isAbortAble, isAsyncUpdate } from '../../abortAble';\r\nimport { isLoadingCell } from '../../ARowRenderer';\r\nimport { clear } from '../../internal';\r\nimport { isScrollEventWaiting } from '../../internal/scroll';\r\nimport { range, updateFrozen } from '../../logic';\r\nimport { EScrollResult } from '../../mixin';\r\nimport { cssClass, CSS_CLASS_FROZEN, CSS_CLASS_LOADING, CSS_CLASS_SHIFTED, CSS_CLASS_TD, CSS_CLASS_TH } from '../../styles';\r\nvar debug = false;\r\n/**\r\n * @internal\r\n */\r\nvar ACellAdapter = /** @class */ (function () {\r\n    function ACellAdapter(header, style, tableId, mixinClasses) {\r\n        var _this = this;\r\n        if (mixinClasses === void 0) { mixinClasses = []; }\r\n        this.header = header;\r\n        this.style = style;\r\n        this.tableId = tableId;\r\n        /**\r\n         * pool of cells per column\r\n         * @type {Array}\r\n         */\r\n        this.cellPool = [];\r\n        this.loading = new WeakMap();\r\n        this.visibleColumns = {\r\n            frozen: [],\r\n            first: 0,\r\n            forcedFirst: 0,\r\n            last: -1,\r\n            forcedLast: -1\r\n        };\r\n        this.visibleFirstColumnPos = 0;\r\n        this.horizontallyShifted = false;\r\n        this.columnAdapter = this.createColumnAdapter();\r\n        this.columnMixins = mixinClasses.map(function (mixinClass) { return new mixinClass(_this.columnAdapter); });\r\n        this.columnFragment = header.ownerDocument.createDocumentFragment();\r\n    }\r\n    ACellAdapter.prototype.leftShift = function () {\r\n        var ctx = this.context;\r\n        var frozen = this.visibleColumns.frozen.reduce(function (a, d) { return a + ctx.columns[d].width + ctx.column.padding(d); }, 0);\r\n        return this.visibleFirstColumnPos - frozen;\r\n    };\r\n    Object.defineProperty(ACellAdapter.prototype, \"headerScroller\", {\r\n        get: function () {\r\n            return this.header.parentElement;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ACellAdapter.prototype.addColumnMixin = function (mixinClass, options) {\r\n        this.columnMixins.push(new mixinClass(this.columnAdapter, options));\r\n    };\r\n    ACellAdapter.prototype.createColumnAdapter = function () {\r\n        var _this = this;\r\n        var r = {\r\n            visible: this.visibleColumns,\r\n            addAtBeginning: this.addColumnAtStart.bind(this),\r\n            addAtBottom: this.addColumnAtEnd.bind(this),\r\n            removeFromBeginning: this.removeColumnFromStart.bind(this),\r\n            removeFromBottom: this.removeColumnFromEnd.bind(this),\r\n            updateOffset: this.updateColumnOffset.bind(this),\r\n            scroller: this.headerScroller,\r\n            syncFrozen: this.syncFrozen.bind(this),\r\n            isScrollEventWaiting: function () { return isScrollEventWaiting(_this.headerScroller, 'animation'); }\r\n        };\r\n        Object.defineProperties(r, {\r\n            visibleFirstRowPos: {\r\n                get: function () { return _this.visibleFirstColumnPos; },\r\n                enumerable: true\r\n            },\r\n            context: {\r\n                get: function () { return _this.context.column; },\r\n                enumerable: true\r\n            },\r\n            scrollOffset: {\r\n                get: function () { return _this.lastScrollInfo ? _this.lastScrollInfo.left : 0; },\r\n                enumerable: true\r\n            },\r\n            scrollTotal: {\r\n                get: function () { return _this.lastScrollInfo ? _this.lastScrollInfo.width : _this.headerScroller.clientWidth; },\r\n                enumerable: true\r\n            }\r\n        });\r\n        return r;\r\n    };\r\n    ACellAdapter.prototype.init = function () {\r\n        var _this = this;\r\n        var context = this.context;\r\n        this.style.update(context.defaultRowHeight - context.padding(-1), context.columns, context.column.padding, 0, this.tableId);\r\n        context.columns.forEach(function () {\r\n            //init pool\r\n            _this.cellPool.push([]);\r\n        });\r\n    };\r\n    ACellAdapter.prototype.onScrolledHorizontally = function (scrollLeft, clientWidth, isGoingRight) {\r\n        var scrollResult = this.onScrolledHorizontallyImpl(scrollLeft, clientWidth);\r\n        for (var _i = 0, _a = this.columnMixins; _i < _a.length; _i++) {\r\n            var mixin = _a[_i];\r\n            mixin.onScrolled(isGoingRight, scrollResult);\r\n        }\r\n        return scrollResult;\r\n    };\r\n    ACellAdapter.prototype.removeColumnFromStart = function (from, to, frozenShift) {\r\n        var _this = this;\r\n        if (frozenShift === void 0) { frozenShift = this.visibleColumns.frozen.length; }\r\n        this.forEachRow(function (row) {\r\n            _this.removeCellFromStart(row, from, to, frozenShift);\r\n        });\r\n        if (debug) {\r\n            this.verifyRows();\r\n        }\r\n    };\r\n    ACellAdapter.prototype.removeCellFromStart = function (row, from, to, frozenShift) {\r\n        for (var i = from; i <= to; ++i) {\r\n            var node = (frozenShift === 0 ? row.firstElementChild : row.children[frozenShift]);\r\n            node.remove();\r\n            this.recycleCell(node, i);\r\n        }\r\n        if (debug) {\r\n            verifyRow(row, -1, this.context.columns);\r\n        }\r\n    };\r\n    ACellAdapter.prototype.removeColumnFromEnd = function (from, to) {\r\n        var _this = this;\r\n        this.forEachRow(function (row) {\r\n            _this.removeCellFromEnd(row, from, to);\r\n        });\r\n        if (debug) {\r\n            this.verifyRows();\r\n        }\r\n    };\r\n    ACellAdapter.prototype.removeCellFromEnd = function (row, from, to) {\r\n        for (var i = to; i >= from; --i) {\r\n            var node = row.lastElementChild;\r\n            node.remove();\r\n            this.recycleCell(node, i);\r\n        }\r\n        if (debug) {\r\n            verifyRow(row, -1, this.context.columns);\r\n        }\r\n    };\r\n    ACellAdapter.prototype.removeFrozenCells = function (row, columnIndices, shift) {\r\n        for (var _i = 0, columnIndices_1 = columnIndices; _i < columnIndices_1.length; _i++) {\r\n            var columnIndex = columnIndices_1[_i];\r\n            var node = row.children[shift];\r\n            node.remove();\r\n            this.recycleCell(node, columnIndex);\r\n        }\r\n        if (debug) {\r\n            verifyRow(row, -1, this.context.columns);\r\n        }\r\n    };\r\n    ACellAdapter.prototype.removeFrozenColumns = function (columnIndices, shift) {\r\n        var _this = this;\r\n        this.forEachRow(function (row) {\r\n            _this.removeFrozenCells(row, columnIndices, shift);\r\n        });\r\n        if (debug) {\r\n            this.verifyRows();\r\n        }\r\n    };\r\n    ACellAdapter.prototype.removeAllColumns = function (includingFrozen) {\r\n        var _this = this;\r\n        this.forEachRow(function (row) {\r\n            _this.removeAllCells(row, includingFrozen);\r\n        });\r\n        if (debug) {\r\n            this.verifyRows();\r\n        }\r\n    };\r\n    ACellAdapter.prototype.removeAllCells = function (row, includingFrozen, shift) {\r\n        var _this = this;\r\n        if (shift === void 0) { shift = this.visibleColumns.first; }\r\n        var arr = Array.from(row.children);\r\n        var frozen = this.visibleColumns.frozen;\r\n        clear(row);\r\n        if (includingFrozen || frozen.length === 0) {\r\n            for (var _i = 0, frozen_1 = frozen; _i < frozen_1.length; _i++) {\r\n                var i = frozen_1[_i];\r\n                this.recycleCell(arr.shift(), i);\r\n            }\r\n        }\r\n        else {\r\n            // have frozen and keep them, so readd them\r\n            for (var _a = 0, frozen_2 = frozen; _a < frozen_2.length; _a++) {\r\n                var _ = frozen_2[_a];\r\n                row.appendChild(arr.shift());\r\n            }\r\n        }\r\n        arr.forEach(function (item, i) {\r\n            _this.recycleCell(item, i + shift);\r\n        });\r\n        if (debug) {\r\n            verifyRow(row, -1, this.context.columns);\r\n        }\r\n    };\r\n    ACellAdapter.prototype.selectProxyCell = function (row, column, columns) {\r\n        var pool = this.cellPool[column];\r\n        var columnObj = columns[column];\r\n        var item;\r\n        var ready;\r\n        var pooled = pool.pop();\r\n        var r = pooled ? this.updateCell(pooled, row, columnObj) || pooled : this.createCell(this.header.ownerDocument, row, columnObj);\r\n        if (isAsyncUpdate(r)) {\r\n            item = r.item;\r\n            ready = r.ready;\r\n        }\r\n        else {\r\n            item = r;\r\n        }\r\n        if (item !== pooled) {\r\n            item.dataset.id = columnObj.id;\r\n            item.classList.add(CSS_CLASS_TD, this.style.cssClasses.td, cssClass(\"td-\" + this.tableId));\r\n        }\r\n        this.updateShiftedState(item, columnObj);\r\n        return { item: item, ready: ready };\r\n    };\r\n    ACellAdapter.prototype.handleCellReady = function (item, ready, column) {\r\n        var _this = this;\r\n        if (column === void 0) { column = -1; }\r\n        item.classList.add(CSS_CLASS_LOADING);\r\n        var abort = ready;\r\n        //lazy loading\r\n        this.loading.set(item, abort);\r\n        abort.then(function (result) {\r\n            _this.loading.delete(item);\r\n            item.classList.remove(CSS_CLASS_LOADING);\r\n            if (result === ABORTED && column >= 0) {\r\n                //aborted can recycle the real one\r\n                _this.cellPool[column].push(item);\r\n            }\r\n        });\r\n        return item;\r\n    };\r\n    ACellAdapter.prototype.selectCell = function (row, column, columns) {\r\n        var _a = this.selectProxyCell(row, column, columns), item = _a.item, ready = _a.ready;\r\n        if (!isAbortAble(ready)) {\r\n            return item;\r\n        }\r\n        return this.handleCellReady(item, ready, column);\r\n    };\r\n    ACellAdapter.prototype.updateShiftedState = function (node, col) {\r\n        node.classList.toggle(CSS_CLASS_SHIFTED, col.frozen && this.horizontallyShifted);\r\n    };\r\n    ACellAdapter.prototype.recycleCell = function (item, column) {\r\n        if (column === void 0) { column = -1; }\r\n        // check if the dom element is still being manipulated\r\n        if (this.loading.has(item)) {\r\n            var abort = this.loading.get(item);\r\n            abort.abort();\r\n        }\r\n        else if (!isLoadingCell(item) && column >= 0) {\r\n            this.cellPool[column].push(item);\r\n        }\r\n    };\r\n    ACellAdapter.prototype.addColumnAtStart = function (from, to, frozenShift) {\r\n        var _this = this;\r\n        if (frozenShift === void 0) { frozenShift = this.visibleColumns.frozen.length; }\r\n        var columns = this.context.columns;\r\n        this.forEachRow(function (row, rowIndex) {\r\n            _this.addCellAtStart(row, rowIndex, from, to, frozenShift, columns);\r\n        });\r\n        if (debug) {\r\n            this.verifyRows();\r\n        }\r\n    };\r\n    ACellAdapter.prototype.addCellAtStart = function (row, rowIndex, from, to, frozenShift, columns) {\r\n        if (debug) {\r\n            verifyRow(row, rowIndex, this.context.columns);\r\n        }\r\n        for (var i = to; i >= from; --i) {\r\n            var cell = this.selectCell(rowIndex, i, columns);\r\n            row.insertBefore(cell, frozenShift > 0 ? row.children[frozenShift] : row.firstChild);\r\n        }\r\n        if (debug) {\r\n            verifyRow(row, rowIndex, this.context.columns);\r\n        }\r\n    };\r\n    ACellAdapter.prototype.insertFrozenCells = function (row, rowIndex, columnIndices, shift, columns) {\r\n        var before = row.children[shift];\r\n        for (var _i = 0, columnIndices_2 = columnIndices; _i < columnIndices_2.length; _i++) {\r\n            var i = columnIndices_2[_i];\r\n            var cell = this.selectCell(rowIndex, i, columns);\r\n            if (before) {\r\n                row.insertBefore(cell, before);\r\n            }\r\n            else {\r\n                row.appendChild(cell);\r\n            }\r\n        }\r\n    };\r\n    ACellAdapter.prototype.insertFrozenColumns = function (columnIndices, shift) {\r\n        var _this = this;\r\n        var columns = this.context.columns;\r\n        this.forEachRow(function (row, rowIndex) {\r\n            _this.insertFrozenCells(row, rowIndex, columnIndices, shift, columns);\r\n        });\r\n    };\r\n    ACellAdapter.prototype.addColumnAtEnd = function (from, to) {\r\n        var _this = this;\r\n        var columns = this.context.columns;\r\n        this.forEachRow(function (row, rowIndex) {\r\n            _this.addCellAtEnd(row, rowIndex, from, to, columns);\r\n        });\r\n        if (debug) {\r\n            this.verifyRows();\r\n        }\r\n    };\r\n    ACellAdapter.prototype.verifyRows = function () {\r\n        var columns = this.context.columns;\r\n        this.forEachRow(function (row, rowIndex) { return verifyRow(row, rowIndex, columns); });\r\n    };\r\n    ACellAdapter.prototype.addCellAtEnd = function (row, rowIndex, from, to, columns) {\r\n        for (var i = from; i <= to; ++i) {\r\n            var cell = this.selectCell(rowIndex, i, columns);\r\n            row.appendChild(cell);\r\n        }\r\n        if (debug) {\r\n            verifyRow(row, rowIndex, this.context.columns);\r\n        }\r\n    };\r\n    ACellAdapter.prototype.updateHeaders = function () {\r\n        var _this = this;\r\n        var columns = this.context.columns;\r\n        Array.from(this.header.children).forEach(function (node, i) {\r\n            var base = node;\r\n            var col = columns[i];\r\n            var r = _this.updateHeader(base, col);\r\n            var n;\r\n            if (isAsyncUpdate(r)) {\r\n                n = _this.handleCellReady(r.item, r.ready, -1);\r\n            }\r\n            else {\r\n                n = r || base;\r\n            }\r\n            if (n === base) {\r\n                return;\r\n            }\r\n            n.dataset.id = col.id;\r\n            n.classList.add(CSS_CLASS_TH, _this.style.cssClasses.th, cssClass(\"th-\" + _this.tableId));\r\n            _this.header.replaceChild(base, n);\r\n        });\r\n    };\r\n    ACellAdapter.prototype.recreate = function (left, width) {\r\n        var _this = this;\r\n        var context = this.context;\r\n        this.style.update(context.defaultRowHeight - context.padding(-1), context.columns, context.column.padding, -this.leftShift(), this.tableId);\r\n        this.clearPool();\r\n        // init pool\r\n        for (var i = this.cellPool.length; i < context.columns.length; ++i) {\r\n            this.cellPool.push([]);\r\n        }\r\n        //create all header columns\r\n        {\r\n            var fragment_1 = this.columnFragment;\r\n            var document_1 = fragment_1.ownerDocument;\r\n            // create lookup cache to reuse headers\r\n            var ids_1 = new Map();\r\n            while (this.header.lastChild) {\r\n                var c = this.header.lastChild;\r\n                this.header.removeChild(c);\r\n                ids_1.set(c.dataset.id, c);\r\n            }\r\n            context.columns.forEach(function (col) {\r\n                var existing = ids_1.get(col.id);\r\n                var r = existing ? _this.updateHeader(existing, col) || existing : _this.createHeader(document_1, col);\r\n                var n;\r\n                if (isAsyncUpdate(r)) {\r\n                    n = _this.handleCellReady(r.item, r.ready, -1);\r\n                }\r\n                else {\r\n                    n = r;\r\n                }\r\n                if (n !== existing) {\r\n                    n.dataset.id = col.id;\r\n                    n.classList.add(CSS_CLASS_TH, _this.style.cssClasses.th, cssClass(\"th-\" + _this.tableId));\r\n                }\r\n                fragment_1.appendChild(n);\r\n            });\r\n            this.header.appendChild(fragment_1);\r\n        }\r\n        var _a = range(left, width, context.column.defaultRowHeight, context.column.exceptions, context.column.numberOfRows), first = _a.first, last = _a.last, firstRowPos = _a.firstRowPos;\r\n        this.visibleColumns.first = this.visibleColumns.forcedFirst = first;\r\n        this.visibleColumns.last = this.visibleColumns.forcedLast = last;\r\n        if (context.columns.some(function (c) { return c.frozen; })) {\r\n            var target = updateFrozen([], context.columns, first).target;\r\n            this.visibleColumns.frozen = target;\r\n        }\r\n        else {\r\n            this.visibleColumns.frozen = [];\r\n        }\r\n        this.updateColumnOffset(firstRowPos);\r\n    };\r\n    ACellAdapter.prototype.clearPool = function () {\r\n        this.cellPool.forEach(function (p) { return p.splice(0, p.length); });\r\n    };\r\n    ACellAdapter.prototype.updateColumnOffset = function (firstColumnPos) {\r\n        var changed = firstColumnPos !== this.visibleFirstColumnPos;\r\n        this.visibleFirstColumnPos = firstColumnPos;\r\n        if (changed) {\r\n            var context = this.context;\r\n            this.style.update(context.defaultRowHeight - context.padding(-1), context.columns, context.column.padding, -this.leftShift(), this.tableId);\r\n        }\r\n    };\r\n    ACellAdapter.prototype.createRow = function (node, rowIndex) {\r\n        var columns = this.context.columns;\r\n        var visible = this.visibleColumns;\r\n        if (visible.frozen.length > 0) {\r\n            for (var _i = 0, _a = visible.frozen; _i < _a.length; _i++) {\r\n                var i = _a[_i];\r\n                var cell = this.selectCell(rowIndex, i, columns);\r\n                node.appendChild(cell);\r\n            }\r\n        }\r\n        for (var i = visible.first; i <= visible.last; ++i) {\r\n            var cell = this.selectCell(rowIndex, i, columns);\r\n            node.appendChild(cell);\r\n        }\r\n    };\r\n    ACellAdapter.prototype.updateRow = function (node, rowIndex) {\r\n        var columns = this.context.columns;\r\n        var visible = this.visibleColumns;\r\n        //columns may not match anymore if it is a pooled item a long time ago\r\n        switch (node.childElementCount) {\r\n            case 0:\r\n                if (visible.frozen.length > 0) {\r\n                    this.insertFrozenCells(node, rowIndex, visible.frozen, 0, columns);\r\n                }\r\n                this.addCellAtEnd(node, rowIndex, visible.first, visible.last, columns);\r\n                break;\r\n            case 1:\r\n                var old = node.firstElementChild;\r\n                var id_1 = old.dataset.id;\r\n                var columnIndex = columns.findIndex(function (c) { return c.id === id_1; });\r\n                node.removeChild(old);\r\n                if (columnIndex >= 0) {\r\n                    this.recycleCell(old, columnIndex);\r\n                }\r\n                if (visible.frozen.length > 0) {\r\n                    this.insertFrozenCells(node, rowIndex, visible.frozen, 0, columns);\r\n                }\r\n                this.addCellAtEnd(node, rowIndex, visible.first, visible.last, columns);\r\n                break;\r\n            default:\r\n                this.mergeColumns(node, rowIndex);\r\n                break;\r\n        }\r\n    };\r\n    ACellAdapter.prototype.mergeColumns = function (node, rowIndex) {\r\n        var _this = this;\r\n        var columns = this.context.columns;\r\n        var visible = this.visibleColumns;\r\n        var ids = new Map();\r\n        while (node.lastChild) {\r\n            var c = node.lastChild;\r\n            node.removeChild(c);\r\n            ids.set(c.dataset.id, c);\r\n        }\r\n        var updateImpl = function (i) {\r\n            var col = columns[i];\r\n            var existing = ids.get(col.id);\r\n            if (!existing) {\r\n                var cell_1 = _this.selectCell(rowIndex, i, columns);\r\n                node.appendChild(cell_1);\r\n                return;\r\n            }\r\n            ids.delete(col.id);\r\n            var r = _this.updateCell(existing, rowIndex, col) || existing;\r\n            var cell;\r\n            if (isAsyncUpdate(r)) {\r\n                cell = _this.handleCellReady(r.item, r.ready, i);\r\n            }\r\n            else {\r\n                cell = r;\r\n            }\r\n            if (cell && cell !== existing) {\r\n                cell.dataset.id = col.id;\r\n                cell.classList.add(CSS_CLASS_TD, _this.style.cssClasses.td, cssClass(\"td-\" + _this.tableId));\r\n            }\r\n            _this.updateShiftedState(cell, col);\r\n            node.appendChild(cell);\r\n        };\r\n        for (var _i = 0, _a = visible.frozen; _i < _a.length; _i++) {\r\n            var frozen = _a[_i];\r\n            updateImpl(frozen);\r\n        }\r\n        for (var i = visible.first; i <= visible.last; ++i) {\r\n            updateImpl(i);\r\n        }\r\n        if (ids.size === 0) {\r\n            return;\r\n        }\r\n        // recycle\r\n        var byId = new Map(columns.map(function (d, i) { return [d.id, i]; }));\r\n        ids.forEach(function (node, key) {\r\n            var index = byId.get(key);\r\n            if (index != null && index >= 0) {\r\n                _this.recycleCell(node, index);\r\n            }\r\n        });\r\n    };\r\n    ACellAdapter.prototype.updateShiftedStates = function () {\r\n        if (!this.context.columns.some(function (d) { return d.frozen; })) {\r\n            return;\r\n        }\r\n        var shifted = this.horizontallyShifted;\r\n        var clazz = CSS_CLASS_SHIFTED;\r\n        if (shifted) {\r\n            var headers = Array.from(this.header.querySelectorAll(\".\" + CSS_CLASS_FROZEN + \":not(.\" + clazz + \")\"));\r\n            var bodies = Array.from(this.body.querySelectorAll(\".\" + CSS_CLASS_FROZEN + \":not(.\" + clazz + \")\"));\r\n            for (var _i = 0, headers_1 = headers; _i < headers_1.length; _i++) {\r\n                var item = headers_1[_i];\r\n                item.classList.add(clazz);\r\n            }\r\n            for (var _a = 0, bodies_1 = bodies; _a < bodies_1.length; _a++) {\r\n                var item = bodies_1[_a];\r\n                item.classList.add(clazz);\r\n            }\r\n        }\r\n        else {\r\n            var headers = Array.from(this.header.querySelectorAll(\".\" + CSS_CLASS_FROZEN + \".\" + clazz));\r\n            var bodies = Array.from(this.body.querySelectorAll(\".\" + CSS_CLASS_FROZEN + \".\" + clazz));\r\n            for (var _b = 0, headers_2 = headers; _b < headers_2.length; _b++) {\r\n                var item = headers_2[_b];\r\n                item.classList.remove(clazz);\r\n            }\r\n            for (var _c = 0, bodies_2 = bodies; _c < bodies_2.length; _c++) {\r\n                var item = bodies_2[_c];\r\n                item.classList.remove(clazz);\r\n            }\r\n        }\r\n    };\r\n    ACellAdapter.prototype.syncFrozen = function (first) {\r\n        var columns = this.context.columns;\r\n        var visible = this.visibleColumns;\r\n        if (!columns.some(function (d) { return d.frozen; })) {\r\n            return 0;\r\n        }\r\n        if (first === 0) {\r\n            if (visible.frozen.length > 0) {\r\n                this.removeFrozenColumns(visible.frozen, 0);\r\n                visible.frozen = [];\r\n            }\r\n            return 0;\r\n        }\r\n        var old = visible.frozen.length;\r\n        var _a = updateFrozen(visible.frozen, columns, first), target = _a.target, added = _a.added, removed = _a.removed;\r\n        if (removed.length > 0) {\r\n            this.removeFrozenColumns(removed, old - removed.length);\r\n        }\r\n        if (added.length > 0) {\r\n            this.insertFrozenColumns(added, old - removed.length);\r\n        }\r\n        visible.frozen = target;\r\n        return target.length;\r\n    };\r\n    ACellAdapter.prototype.onScrolledHorizontallyImpl = function (scrollLeft, clientWidth) {\r\n        var shiftingChanged = this.horizontallyShifted !== scrollLeft > 0;\r\n        this.horizontallyShifted = scrollLeft > 0;\r\n        var column = this.context.column;\r\n        var _a = range(scrollLeft, clientWidth, column.defaultRowHeight, column.exceptions, column.numberOfRows), first = _a.first, last = _a.last, firstRowPos = _a.firstRowPos;\r\n        var visible = this.visibleColumns;\r\n        visible.forcedFirst = first;\r\n        visible.forcedLast = last;\r\n        if ((first - visible.first) >= 0 && (last - visible.last) <= 0) {\r\n            //nothing to do\r\n            if (shiftingChanged) {\r\n                this.updateShiftedStates();\r\n            }\r\n            return EScrollResult.NONE;\r\n        }\r\n        var r = EScrollResult.SOME;\r\n        var frozenShift = this.syncFrozen(first);\r\n        if (first > visible.last || last < visible.first) {\r\n            //no overlap, clean and draw everything\r\n            //console.log(`ff added: ${last - first + 1} removed: ${visibleLast - visibleFirst + 1} ${first}:${last} ${offset}`);\r\n            //removeRows(visibleFirst, visibleLast);\r\n            this.removeAllColumns(false);\r\n            this.addColumnAtEnd(first, last);\r\n            r = EScrollResult.ALL;\r\n        }\r\n        else if (first < visible.first) {\r\n            //some first rows missing and some last rows to much\r\n            //console.log(`up added: ${visibleFirst - first + 1} removed: ${visibleLast - last + 1} ${first}:${last} ${offset}`);\r\n            this.removeColumnFromEnd(last + 1, visible.last);\r\n            this.updateShiftedStates();\r\n            this.addColumnAtStart(first, visible.first - 1, frozenShift);\r\n            r = EScrollResult.SOME_TOP;\r\n        }\r\n        else {\r\n            //console.log(`do added: ${last - visibleLast + 1} removed: ${first - visibleFirst + 1} ${first}:${last} ${offset}`);\r\n            //some last rows missing and some first rows to much\r\n            this.removeColumnFromStart(visible.first, first - 1, frozenShift);\r\n            this.updateShiftedStates();\r\n            this.addColumnAtEnd(visible.last + 1, last);\r\n            r = EScrollResult.SOME_BOTTOM;\r\n        }\r\n        visible.first = first;\r\n        visible.last = last;\r\n        this.updateColumnOffset(firstRowPos);\r\n        return r;\r\n    };\r\n    return ACellAdapter;\r\n}());\r\nexport { ACellAdapter };\r\n/**\r\n * @internal\r\n */\r\nexport default ACellAdapter;\r\nfunction verifyRow(row, index, columns) {\r\n    var cols = Array.from(row.children);\r\n    //sort incrementally\r\n    if (cols.length <= 1) {\r\n        return;\r\n    }\r\n    var colObjs = cols.map(function (c) { return columns.find(function (d) { return d.id === c.dataset.id; }); });\r\n    console.assert(colObjs.every(function (d) { return Boolean(d); }), 'all columns must exist', index);\r\n    console.assert(colObjs.every(function (d, i) { return i === 0 || d.index >= colObjs[i - 1].index; }), 'all columns in ascending order', index);\r\n    console.assert((new Set(colObjs)).size === colObjs.length, 'unique columns', colObjs);\r\n}\r\n//# sourceMappingURL=ACellAdapter.js.map","import { __extends } from \"tslib\";\r\nimport ARowRenderer, { setTransform } from '../ARowRenderer';\r\nimport { EScrollResult } from '../mixin';\r\nimport { CSS_CLASS_HIDDEN, CSS_CLASS_LOADING } from '../styles';\r\nimport ACellAdapter from './internal/ACellAdapter';\r\n/**\r\n * base class for a cell renderer as table section\r\n */\r\nvar ACellTableSection = /** @class */ (function (_super) {\r\n    __extends(ACellTableSection, _super);\r\n    function ACellTableSection(header, body, tableId, style, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this, body, options) || this;\r\n        _this.header = header;\r\n        _this.body = body;\r\n        _this.tableId = tableId;\r\n        _this.style = style;\r\n        var that = _this;\r\n        var LocalCell = /** @class */ (function (_super) {\r\n            __extends(LocalCell, _super);\r\n            function LocalCell() {\r\n                return _super !== null && _super.apply(this, arguments) || this;\r\n            }\r\n            Object.defineProperty(LocalCell.prototype, \"context\", {\r\n                get: function () {\r\n                    return that.context;\r\n                },\r\n                enumerable: true,\r\n                configurable: true\r\n            });\r\n            Object.defineProperty(LocalCell.prototype, \"body\", {\r\n                get: function () {\r\n                    return that.body;\r\n                },\r\n                enumerable: true,\r\n                configurable: true\r\n            });\r\n            Object.defineProperty(LocalCell.prototype, \"lastScrollInfo\", {\r\n                get: function () {\r\n                    return that.lastScrollInfo;\r\n                },\r\n                enumerable: true,\r\n                configurable: true\r\n            });\r\n            LocalCell.prototype.createHeader = function (document, column) {\r\n                return that.createHeader(document, column);\r\n            };\r\n            LocalCell.prototype.updateHeader = function (node, column) {\r\n                return that.updateHeader(node, column);\r\n            };\r\n            LocalCell.prototype.createCell = function (document, index, column) {\r\n                return that.createCell(document, index, column);\r\n            };\r\n            LocalCell.prototype.updateColumnOffset = function (firstColumnPos) {\r\n                _super.prototype.updateColumnOffset.call(this, firstColumnPos);\r\n                that.updateOffset(that.visibleFirstRowPos);\r\n            };\r\n            LocalCell.prototype.updateCell = function (node, index, column) {\r\n                return that.updateCell(node, index, column);\r\n            };\r\n            LocalCell.prototype.forEachRow = function (callback) {\r\n                return that.forEachRow(callback);\r\n            };\r\n            return LocalCell;\r\n        }(ACellAdapter));\r\n        _this.cell = new LocalCell(_this.header, _this.style, tableId, (options.mixins || []));\r\n        return _this;\r\n    }\r\n    ACellTableSection.prototype.addColumnMixin = function (mixinClass, options) {\r\n        this.cell.addColumnMixin(mixinClass, options);\r\n    };\r\n    Object.defineProperty(ACellTableSection.prototype, \"idPrefix\", {\r\n        get: function () {\r\n            return this.tableId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ACellTableSection.prototype, \"width\", {\r\n        get: function () {\r\n            return this.context.column.totalHeight;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ACellTableSection.prototype, \"visibleColumns\", {\r\n        get: function () {\r\n            return this.cell.visibleColumns;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ACellTableSection.prototype, \"visibleFirstColumnPos\", {\r\n        get: function () {\r\n            return this.cell.visibleFirstColumnPos;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ACellTableSection.prototype, \"height\", {\r\n        get: function () {\r\n            return this.context.totalHeight;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ACellTableSection.prototype, \"hidden\", {\r\n        get: function () {\r\n            return this.header.classList.contains(CSS_CLASS_LOADING);\r\n        },\r\n        set: function (value) {\r\n            var old = this.hidden;\r\n            if (old === value) {\r\n                return;\r\n            }\r\n            this.header.classList.toggle(CSS_CLASS_LOADING, value);\r\n            this.body.classList.toggle(CSS_CLASS_LOADING, value);\r\n            this.header.classList.toggle(CSS_CLASS_HIDDEN, value);\r\n            this.body.classList.toggle(CSS_CLASS_HIDDEN, value);\r\n            this.onVisibilityChanged(!value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ACellTableSection.prototype.updateSizer = function (firstRowPos) {\r\n        this.updateShifts(firstRowPos, this.cell.leftShift());\r\n        // no sizer update since centrally managed\r\n    };\r\n    ACellTableSection.prototype.updateShifts = function (top, _left) {\r\n        setTransform(this.body, 0 /*left.toFixed(0)*/, top.toFixed(0));\r\n    };\r\n    /**\r\n     * hook when the visibility changes\r\n     * @param {boolean} _visible current visibility\r\n     */\r\n    ACellTableSection.prototype.onVisibilityChanged = function (_visible) {\r\n        // hook\r\n    };\r\n    ACellTableSection.prototype.hide = function () {\r\n        this.hidden = true;\r\n    };\r\n    ACellTableSection.prototype.show = function (scrollLeft, clientWidth, isGoingRight) {\r\n        var wasHidden = this.hidden;\r\n        this.hidden = false;\r\n        if (wasHidden) { // full update\r\n            this.revalidate();\r\n        }\r\n        else {\r\n            this.onScrolledHorizontally(scrollLeft, clientWidth, isGoingRight);\r\n        }\r\n    };\r\n    ACellTableSection.prototype.init = function () {\r\n        this.hide(); // hide by default\r\n        this.cell.init();\r\n        _super.prototype.init.call(this);\r\n    };\r\n    ACellTableSection.prototype.destroy = function () {\r\n        _super.prototype.destroy.call(this);\r\n        this.header.remove();\r\n        this.style.remove(this.tableId);\r\n    };\r\n    ACellTableSection.prototype.onScrolledVertically = function (scrollTop, clientHeight, isGoingDown) {\r\n        if (this.hidden) {\r\n            return EScrollResult.NONE;\r\n        }\r\n        return _super.prototype.onScrolledVertically.call(this, scrollTop, clientHeight, isGoingDown);\r\n    };\r\n    ACellTableSection.prototype.onScrolledHorizontally = function (scrollLeft, clientWidth, isGoingRight) {\r\n        var r = this.cell.onScrolledHorizontally(scrollLeft, clientWidth, isGoingRight);\r\n        this.updateSizer(this.visibleFirstRowPos);\r\n        return r;\r\n    };\r\n    /**\r\n     * triggers updating the header\r\n     */\r\n    ACellTableSection.prototype.updateHeaders = function () {\r\n        this.cell.updateHeaders();\r\n    };\r\n    ACellTableSection.prototype.handleCellReady = function (item, ready, column) {\r\n        if (column === void 0) { column = -1; }\r\n        return this.cell.handleCellReady(item, ready, column);\r\n    };\r\n    ACellTableSection.prototype.recycleCell = function (item, column) {\r\n        if (column === void 0) { column = -1; }\r\n        this.cell.recycleCell(item, column);\r\n    };\r\n    /**\r\n     * trigger an update all all column widths\r\n     */\r\n    ACellTableSection.prototype.updateColumnWidths = function () {\r\n        var context = this.context;\r\n        this.style.update(context.defaultRowHeight - context.padding(-1), context.columns, context.column.padding, -this.cell.leftShift(), this.tableId);\r\n    };\r\n    ACellTableSection.prototype.recreate = function (ctx) {\r\n        var scroller = this.bodyScroller;\r\n        var oldLeft = scroller.scrollLeft;\r\n        this.cell.recreate(oldLeft, scroller.clientWidth);\r\n        _super.prototype.recreate.call(this, ctx);\r\n        // restore left\r\n        scroller.scrollLeft = oldLeft;\r\n    };\r\n    ACellTableSection.prototype.clearPool = function () {\r\n        _super.prototype.clearPool.call(this);\r\n        this.cell.clearPool();\r\n    };\r\n    ACellTableSection.prototype.createRow = function (node, rowIndex) {\r\n        this.cell.createRow(node, rowIndex);\r\n        node.classList.add(this.style.cssClasses.tr);\r\n    };\r\n    ACellTableSection.prototype.updateRow = function (node, rowIndex) {\r\n        this.cell.updateRow(node, rowIndex);\r\n    };\r\n    return ACellTableSection;\r\n}(ARowRenderer));\r\nexport { ACellTableSection };\r\nexport default ACellTableSection;\r\n//# sourceMappingURL=ACellTableSection.js.map","import { defaultPhases, EAnimationMode } from 'lineupengine';\r\nimport { isGroup } from '../model';\r\nfunction toGroupLookup(items) {\r\n    var item2groupIndex = new Map();\r\n    var group2firstItemIndex = new Map();\r\n    items.forEach(function (item, i) {\r\n        if (isGroup(item)) {\r\n            for (var o = 0; o < item.order.length; ++o) {\r\n                item2groupIndex.set(o, i);\r\n            }\r\n        }\r\n        else if (item.group && item.relativeIndex === 0) {\r\n            group2firstItemIndex.set(item.group.name, i);\r\n        }\r\n    });\r\n    return { item2groupIndex: item2groupIndex, group2firstItemIndex: group2firstItemIndex };\r\n}\r\nfunction toKey(item) {\r\n    if (isGroup(item)) {\r\n        return item.name;\r\n    }\r\n    return item.dataIndex.toString();\r\n}\r\n/** @internal */\r\nexport function lineupAnimation(previous, previousData, currentData) {\r\n    var previousKey = function (index) { return toKey(previousData[index]); };\r\n    var currentKey = function (index) { return toKey(currentData[index]); };\r\n    var previousGroupCount = previousData.reduce(function (acc, i) { return acc + (isGroup(i) ? 1 : 0); }, 0);\r\n    var currentGroupCount = currentData.reduce(function (acc, i) { return acc + (isGroup(i) ? 1 : 0); }, 0);\r\n    if (previousGroupCount === currentGroupCount) {\r\n        // reorder or filter only\r\n        return { currentKey: currentKey, previous: previous, previousKey: previousKey };\r\n    }\r\n    // try to appear where the group was uncollapsed and vice versa\r\n    var prevHelper;\r\n    var appearPosition = function (currentRowIndex, previousFinder, defaultValue) {\r\n        if (!prevHelper) {\r\n            prevHelper = toGroupLookup(previousData);\r\n        }\r\n        var item = currentData[currentRowIndex];\r\n        var referenceIndex = isGroup(item) ? prevHelper.group2firstItemIndex.get(item.name) : prevHelper.item2groupIndex.get(item.dataIndex);\r\n        if (referenceIndex === undefined) {\r\n            return defaultValue;\r\n        }\r\n        var pos = previousFinder.posByKey(previousKey(referenceIndex));\r\n        return pos.pos >= 0 ? pos.pos : defaultValue;\r\n    };\r\n    var currHelper;\r\n    var removePosition = function (previousRowIndex, currentFinder, defaultValue) {\r\n        if (!currHelper) {\r\n            currHelper = toGroupLookup(currentData);\r\n        }\r\n        var item = previousData[previousRowIndex];\r\n        var referenceIndex = isGroup(item) ? currHelper.group2firstItemIndex.get(item.name) : currHelper.item2groupIndex.get(item.dataIndex);\r\n        if (referenceIndex === undefined) {\r\n            return defaultValue;\r\n        }\r\n        var pos = currentFinder.posByKey(currentKey(referenceIndex));\r\n        return pos.pos >= 0 ? pos.pos : defaultValue;\r\n    };\r\n    var phases = [\r\n        Object.assign({}, defaultPhases[0], {\r\n            apply: function (item, previousFinder) {\r\n                defaultPhases[0].apply(item);\r\n                if (item.mode === EAnimationMode.SHOW) {\r\n                    item.node.style.transform = \"translate(0, \" + (appearPosition(item.current.index, previousFinder, item.previous.y) - item.nodeY) + \"px)\";\r\n                }\r\n            }\r\n        }),\r\n        Object.assign({}, defaultPhases[1], {\r\n            apply: function (item, _previousFinder, currentFinder) {\r\n                defaultPhases[1].apply(item);\r\n                if (item.mode === EAnimationMode.HIDE) {\r\n                    item.node.style.transform = \"translate(0, \" + (removePosition(item.previous.index, currentFinder, item.current.y) - item.nodeY) + \"px)\";\r\n                }\r\n            }\r\n        }),\r\n        defaultPhases[defaultPhases.length - 1]\r\n    ];\r\n    return { previous: previous, previousKey: previousKey, currentKey: currentKey, phases: phases };\r\n}\r\n//# sourceMappingURL=animation.js.map","import { isAbortAble } from 'lineupengine';\r\nimport { createHeader, updateHeader } from './header';\r\nimport { cssClass, engineCssClass } from '../styles';\r\nimport { isPromiseLike } from '../internal';\r\nvar RenderColumn = /** @class */ (function () {\r\n    function RenderColumn(c, index, ctx, flags) {\r\n        this.c = c;\r\n        this.index = index;\r\n        this.ctx = ctx;\r\n        this.flags = flags;\r\n        this.renderers = null;\r\n    }\r\n    Object.defineProperty(RenderColumn.prototype, \"width\", {\r\n        get: function () {\r\n            return this.c.getWidth();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RenderColumn.prototype, \"id\", {\r\n        get: function () {\r\n            return this.c.id;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RenderColumn.prototype, \"frozen\", {\r\n        get: function () {\r\n            return this.flags.disableFrozenColumns ? false : this.c.frozen;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    RenderColumn.prototype.singleRenderer = function () {\r\n        if (!this.renderers || !this.renderers.single) {\r\n            return null;\r\n        }\r\n        if (this.renderers.singleTemplate) {\r\n            return this.renderers.singleTemplate.cloneNode(true);\r\n        }\r\n        var elem = this.ctx.asElement(this.renderers.single.template);\r\n        elem.classList.add(cssClass(\"renderer-\" + this.renderers.singleId), cssClass('detail'));\r\n        elem.dataset.renderer = this.renderers.singleId;\r\n        elem.dataset.group = 'd';\r\n        this.renderers.singleTemplate = elem.cloneNode(true);\r\n        return elem;\r\n    };\r\n    RenderColumn.prototype.groupRenderer = function () {\r\n        if (!this.renderers || !this.renderers.group) {\r\n            return null;\r\n        }\r\n        if (this.renderers.groupTemplate) {\r\n            return this.renderers.groupTemplate.cloneNode(true);\r\n        }\r\n        var elem = this.ctx.asElement(this.renderers.group.template);\r\n        elem.classList.add(cssClass(\"renderer-\" + this.renderers.groupId), cssClass('group'));\r\n        elem.dataset.renderer = this.renderers.groupId;\r\n        elem.dataset.group = 'g';\r\n        this.renderers.groupTemplate = elem.cloneNode(true);\r\n        return elem;\r\n    };\r\n    RenderColumn.prototype.summaryRenderer = function () {\r\n        if (!this.renderers || !this.renderers.summary) {\r\n            return null;\r\n        }\r\n        if (this.renderers.summaryTemplate) {\r\n            return this.renderers.summaryTemplate.cloneNode(true);\r\n        }\r\n        var elem = this.ctx.asElement(this.renderers.summary.template);\r\n        elem.classList.add(cssClass('summary'), cssClass('th-summary'), cssClass(\"renderer-\" + this.renderers.summaryId));\r\n        elem.dataset.renderer = this.renderers.summaryId;\r\n        this.renderers.summaryTemplate = elem.cloneNode(true);\r\n        return elem;\r\n    };\r\n    RenderColumn.prototype.createHeader = function () {\r\n        var node = createHeader(this.c, this.ctx, {\r\n            extraPrefix: 'th',\r\n            dragAble: this.flags.advancedUIFeatures,\r\n            mergeDropAble: this.flags.advancedModelFeatures,\r\n            rearrangeAble: this.flags.advancedUIFeatures,\r\n            resizeable: this.flags.advancedUIFeatures\r\n        });\r\n        node.classList.add(cssClass('header'));\r\n        if (!this.flags.disableFrozenColumns) {\r\n            node.classList.toggle(engineCssClass('frozen'), this.frozen);\r\n        }\r\n        if (this.renderers && this.renderers.summary) {\r\n            var summary = this.summaryRenderer();\r\n            node.appendChild(summary);\r\n        }\r\n        return this.updateHeader(node);\r\n    };\r\n    RenderColumn.prototype.hasSummaryLine = function () {\r\n        return Boolean(this.c.getMetaData().summary);\r\n    };\r\n    RenderColumn.prototype.updateHeader = function (node) {\r\n        updateHeader(node, this.c);\r\n        if (!this.renderers || !this.renderers.summary) {\r\n            return node;\r\n        }\r\n        var summary = node.getElementsByClassName(cssClass('summary'))[0];\r\n        var oldRenderer = summary.dataset.renderer;\r\n        var currentRenderer = this.renderers.summaryId;\r\n        if (oldRenderer !== currentRenderer) {\r\n            summary.remove();\r\n            summary = this.summaryRenderer();\r\n            node.appendChild(summary);\r\n        }\r\n        var ready = this.renderers.summary.update(summary);\r\n        if (ready) {\r\n            return { item: node, ready: ready };\r\n        }\r\n        return node;\r\n    };\r\n    RenderColumn.prototype.createCell = function (index) {\r\n        var isGroup = this.ctx.isGroup(index);\r\n        var node = isGroup ? this.groupRenderer() : this.singleRenderer();\r\n        return this.updateCell(node, index);\r\n    };\r\n    RenderColumn.prototype.updateCell = function (node, index) {\r\n        var _this = this;\r\n        if (!this.flags.disableFrozenColumns) {\r\n            node.classList.toggle(engineCssClass('frozen'), this.frozen);\r\n        }\r\n        var isGroup = this.ctx.isGroup(index);\r\n        // assert that we have the template of the right mode\r\n        var oldRenderer = node.dataset.renderer;\r\n        var currentRenderer = isGroup ? this.renderers.groupId : this.renderers.singleId;\r\n        var oldGroup = node.dataset.group;\r\n        var currentGroup = (isGroup ? 'g' : 'd');\r\n        if (oldRenderer !== currentRenderer || oldGroup !== currentGroup) {\r\n            node = isGroup ? this.groupRenderer() : this.singleRenderer();\r\n        }\r\n        var ready;\r\n        if (isGroup) {\r\n            var g = this.ctx.getGroup(index);\r\n            ready = this.renderers.group.update(node, g);\r\n        }\r\n        else {\r\n            var r_1 = this.ctx.getRow(index);\r\n            var row = this.ctx.provider.getRow(r_1.dataIndex);\r\n            if (!isPromiseLike(row)) {\r\n                ready = this.renderers.single.update(node, row, r_1.relativeIndex, r_1.group);\r\n            }\r\n            else {\r\n                ready = chainAbortAble(row, function (row) { return _this.renderers.single.update(node, row, r_1.relativeIndex, r_1.group); });\r\n            }\r\n        }\r\n        if (ready) {\r\n            return { item: node, ready: ready };\r\n        }\r\n        return node;\r\n    };\r\n    RenderColumn.prototype.renderCell = function (ctx, index) {\r\n        var r = this.ctx.getRow(index);\r\n        var s = this.renderers.single;\r\n        if (!s.render) {\r\n            return false;\r\n        }\r\n        var row = this.ctx.provider.getRow(r.dataIndex);\r\n        if (!isPromiseLike(row)) {\r\n            return s.render(ctx, row, r.relativeIndex, r.group) || false;\r\n        }\r\n        return chainAbortAble(row, function (row) { return s.render(ctx, row, r.relativeIndex, r.group) || false; });\r\n    };\r\n    return RenderColumn;\r\n}());\r\nexport default RenderColumn;\r\nfunction chainAbortAble(toWait, mapper) {\r\n    var aborted = false;\r\n    var p = new Promise(function (resolve) {\r\n        if (aborted) {\r\n            return;\r\n        }\r\n        toWait.then(function (r) {\r\n            if (aborted) {\r\n                return;\r\n            }\r\n            var mapped = mapper(r);\r\n            if (isAbortAble(mapped)) {\r\n                p.abort = mapped.abort.bind(mapped);\r\n                return p.then(resolve);\r\n            }\r\n            return resolve(mapped);\r\n        });\r\n    });\r\n    p.abort = function () {\r\n        aborted = true;\r\n    };\r\n    return p;\r\n}\r\n//# sourceMappingURL=RenderColumn.js.map","import * as tslib_1 from \"tslib\";\r\nimport { abortAbleAll, isAsyncUpdate } from 'lineupengine';\r\nimport { round } from '../internal';\r\nimport { multiLevelGridCSSClass } from '../renderer/utils';\r\nimport { COLUMN_PADDING, cssClass } from '../styles';\r\nimport { createHeader, updateHeader } from './header';\r\nimport RenderColumn from './RenderColumn';\r\n/** @internal */\r\nvar MultiLevelRenderColumn = /** @class */ (function (_super) {\r\n    tslib_1.__extends(MultiLevelRenderColumn, _super);\r\n    function MultiLevelRenderColumn(c, index, ctx, flags) {\r\n        var _this = _super.call(this, c, index, ctx, flags) || this;\r\n        _this.summaries = [];\r\n        return _this;\r\n    }\r\n    Object.defineProperty(MultiLevelRenderColumn.prototype, \"mc\", {\r\n        get: function () {\r\n            return this.c;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MultiLevelRenderColumn.prototype, \"width\", {\r\n        get: function () {\r\n            return this.c.getWidth() + COLUMN_PADDING * this.mc.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    MultiLevelRenderColumn.prototype.createHeader = function () {\r\n        var r = _super.prototype.createHeader.call(this);\r\n        var wrapper = this.ctx.document.createElement('div');\r\n        wrapper.classList.add(cssClass('nested'));\r\n        wrapper.classList.add(multiLevelGridCSSClass(this.ctx.idPrefix, this.c));\r\n        if (isAsyncUpdate(r)) {\r\n            r.item.appendChild(wrapper);\r\n        }\r\n        else {\r\n            r.appendChild(wrapper);\r\n        }\r\n        return this.updateNested(wrapper, r);\r\n    };\r\n    MultiLevelRenderColumn.prototype.matchChildren = function (wrapper, children) {\r\n        var _this = this;\r\n        function matches(col, i) {\r\n            //do both match?\r\n            var n = wrapper.children[i];\r\n            return n != null && n.dataset.colId === col.id;\r\n        }\r\n        if (children.every(matches) && children.length === wrapper.childElementCount) {\r\n            // 1:1 match\r\n            return;\r\n        }\r\n        var lookup = new Map(Array.from(wrapper.children).map(function (n, i) {\r\n            return [n.dataset.colId, { node: n, summary: _this.summaries[i] }];\r\n        }));\r\n        // reset summaries array\r\n        this.summaries = [];\r\n        children.forEach(function (cc, i) {\r\n            var existing = lookup.get(cc.id);\r\n            if (existing) { // reuse existing\r\n                lookup.delete(cc.id);\r\n                var n_1 = existing.node;\r\n                n_1.style.gridColumnStart = (i + 1).toString();\r\n                wrapper.appendChild(n_1);\r\n                _this.summaries[i] = existing.summary;\r\n                return;\r\n            }\r\n            var n = createHeader(cc, _this.ctx, {\r\n                extraPrefix: 'th',\r\n                mergeDropAble: false,\r\n                dragAble: _this.flags.advancedModelFeatures,\r\n                rearrangeAble: _this.flags.advancedModelFeatures,\r\n                resizeable: _this.flags.advancedModelFeatures\r\n            });\r\n            n.classList.add(cssClass('header'), cssClass('nested-th'));\r\n            n.style.gridColumnStart = (i + 1).toString();\r\n            wrapper.appendChild(n);\r\n            if (!_this.renderers || !_this.renderers.summary) {\r\n                return;\r\n            }\r\n            var summary = _this.ctx.summaryRenderer(cc, false);\r\n            var summaryNode = _this.ctx.asElement(summary.template);\r\n            summaryNode.classList.add(cssClass('summary'), cssClass('th-summary'), cssClass(\"renderer-\" + cc.getSummaryRenderer()));\r\n            summaryNode.dataset.renderer = cc.getSummaryRenderer();\r\n            n.appendChild(summaryNode);\r\n            _this.summaries[i] = summary;\r\n            summary.update(summaryNode);\r\n        });\r\n        // delete not used ones anymore\r\n        lookup.forEach(function (v) { return v.node.remove(); });\r\n    };\r\n    MultiLevelRenderColumn.prototype.updateHeader = function (node) {\r\n        var r = _super.prototype.updateHeader.call(this, node);\r\n        node = isAsyncUpdate(r) ? r.item : r;\r\n        var wrapper = node.getElementsByClassName(cssClass('nested'))[0];\r\n        if (!wrapper) {\r\n            return r; // too early\r\n        }\r\n        node.appendChild(wrapper); // ensure the last one\r\n        return this.updateNested(wrapper, r);\r\n    };\r\n    MultiLevelRenderColumn.prototype.hasSummaryLine = function () {\r\n        return _super.prototype.hasSummaryLine.call(this) || this.mc.children.some(function (c) { return Boolean(c.getMetaData().summary); });\r\n    };\r\n    MultiLevelRenderColumn.prototype.updateWidthRule = function (style) {\r\n        var mc = this.mc;\r\n        // need this for chrome to work properly\r\n        var widths = mc.children.map(function (c) { return \"minmax(0, \" + round(c.getWidth()) + \"fr)\"; });\r\n        var clazz = multiLevelGridCSSClass(this.ctx.idPrefix, this.c);\r\n        style.updateRule(\"stacked-\" + this.c.id, \".\" + clazz, {\r\n            display: 'grid',\r\n            gridTemplateColumns: widths.join(' ')\r\n        });\r\n        return clazz;\r\n    };\r\n    MultiLevelRenderColumn.prototype.updateNested = function (wrapper, r) {\r\n        var _this = this;\r\n        var sub = this.mc.children;\r\n        this.matchChildren(wrapper, sub);\r\n        var children = Array.from(wrapper.children);\r\n        var toWait = [];\r\n        var header;\r\n        if (isAsyncUpdate(r)) {\r\n            toWait.push(r.ready);\r\n            header = r.item;\r\n        }\r\n        else {\r\n            header = r;\r\n        }\r\n        sub.forEach(function (c, i) {\r\n            var node = children[i];\r\n            updateHeader(node, c);\r\n            if (!_this.renderers || !_this.renderers.summary) {\r\n                return;\r\n            }\r\n            var summary = node.getElementsByClassName(cssClass('summary'))[0];\r\n            var oldRenderer = summary.dataset.renderer;\r\n            var currentRenderer = c.getSummaryRenderer();\r\n            if (oldRenderer !== currentRenderer) {\r\n                var renderer = _this.ctx.summaryRenderer(c, false);\r\n                summary.remove();\r\n                summary = _this.ctx.asElement(renderer.template);\r\n                summary.classList.add(cssClass('summary'), cssClass('th-summary'), cssClass(\"renderer-\" + currentRenderer));\r\n                summary.dataset.renderer = currentRenderer;\r\n                _this.summaries[i] = renderer;\r\n                node.appendChild(summary);\r\n            }\r\n            var ready = _this.summaries[i].update(summary);\r\n            if (ready) {\r\n                toWait.push(ready);\r\n            }\r\n        });\r\n        if (toWait.length === 0) {\r\n            return header;\r\n        }\r\n        return {\r\n            item: header,\r\n            ready: abortAbleAll(toWait)\r\n        };\r\n    };\r\n    return MultiLevelRenderColumn;\r\n}(RenderColumn));\r\nexport default MultiLevelRenderColumn;\r\n//# sourceMappingURL=MultiLevelRenderColumn.js.map","export var EMode;\r\n(function (EMode) {\r\n    EMode[\"ITEM\"] = \"item\";\r\n    EMode[\"BAND\"] = \"band\";\r\n})(EMode || (EMode = {}));\r\n//# sourceMappingURL=interfaces.js.map","import * as tslib_1 from \"tslib\";\r\nimport { OrderedSet, AEventDispatcher } from '../internal';\r\nimport { isGroup } from '../model';\r\nimport { cssClass, engineCssClass } from '../styles';\r\nimport { forEachIndices } from '../model/internal';\r\nimport { rangeSelection } from '../provider/utils';\r\n/** @internal */\r\nvar SelectionManager = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SelectionManager, _super);\r\n    function SelectionManager(ctx, body) {\r\n        var _this = _super.call(this) || this;\r\n        _this.ctx = ctx;\r\n        _this.body = body;\r\n        _this.start = null;\r\n        var root = body.parentElement.parentElement;\r\n        var hr = root.querySelector('hr');\r\n        if (!hr) {\r\n            hr = root.ownerDocument.createElement('hr');\r\n            root.appendChild(hr);\r\n        }\r\n        _this.hr = hr;\r\n        _this.hr.classList.add(cssClass('hr'));\r\n        var mouseMove = function (evt) {\r\n            _this.showHint(evt);\r\n        };\r\n        var mouseUp = function (evt) {\r\n            _this.body.removeEventListener('mousemove', mouseMove);\r\n            _this.body.removeEventListener('mouseup', mouseUp);\r\n            _this.body.removeEventListener('mouseleave', mouseUp);\r\n            if (!_this.start) {\r\n                return;\r\n            }\r\n            var row = engineCssClass('tr');\r\n            var startNode = _this.start.node.classList.contains(row) ? _this.start.node : _this.start.node.closest(\".\" + row);\r\n            // somehow on firefox the mouseUp will be triggered on the original node\r\n            // thus search the node explicitly\r\n            var end = _this.body.ownerDocument.elementFromPoint(evt.clientX, evt.clientY);\r\n            var endNode = end.classList.contains(row) ? end : (end.closest(\".\" + row));\r\n            _this.start = null;\r\n            _this.body.classList.remove(cssClass('selection-active'));\r\n            _this.hr.classList.remove(cssClass('selection-active'));\r\n            _this.select(evt.ctrlKey, startNode, endNode);\r\n        };\r\n        body.addEventListener('mousedown', function (evt) {\r\n            var r = root.getBoundingClientRect();\r\n            _this.start = { x: evt.clientX, y: evt.clientY, xShift: r.left, yShift: r.top, node: evt.target };\r\n            _this.body.classList.add(cssClass('selection-active'));\r\n            body.addEventListener('mousemove', mouseMove, {\r\n                passive: true\r\n            });\r\n            body.addEventListener('mouseup', mouseUp, {\r\n                passive: true\r\n            });\r\n            body.addEventListener('mouseleave', mouseUp, {\r\n                passive: true\r\n            });\r\n        }, {\r\n            passive: true\r\n        });\r\n        return _this;\r\n    }\r\n    SelectionManager.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([SelectionManager.EVENT_SELECT_RANGE]);\r\n    };\r\n    SelectionManager.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    SelectionManager.prototype.select = function (additional, startNode, endNode) {\r\n        var _this = this;\r\n        if (!startNode || !endNode || startNode === endNode) {\r\n            return; // no single\r\n        }\r\n        var startIndex = parseInt(startNode.dataset.index, 10);\r\n        var endIndex = parseInt(endNode.dataset.index, 10);\r\n        var from = Math.min(startIndex, endIndex);\r\n        var end = Math.max(startIndex, endIndex);\r\n        if (from === end) {\r\n            return; // no single\r\n        }\r\n        // bounce event end\r\n        requestAnimationFrame(function () { return _this.fire(SelectionManager.EVENT_SELECT_RANGE, from, end, additional); });\r\n    };\r\n    SelectionManager.prototype.showHint = function (end) {\r\n        var start = this.start;\r\n        var sy = start.y;\r\n        var ey = end.clientY;\r\n        var visible = Math.abs(sy - ey) > SelectionManager.MIN_DISTANCE;\r\n        this.hr.classList.toggle(cssClass('selection-active'), visible);\r\n        this.hr.style.transform = \"translate(\" + (start.x - start.xShift) + \"px,\" + (sy - start.yShift) + \"px)scale(1,\" + Math.abs(ey - sy) + \")rotate(\" + (ey > sy ? 90 : -90) + \"deg)\";\r\n    };\r\n    SelectionManager.prototype.remove = function (node) {\r\n        node.onclick = undefined;\r\n    };\r\n    SelectionManager.prototype.add = function (node) {\r\n        var _this = this;\r\n        node.onclick = function (evt) {\r\n            var dataIndex = parseInt(node.dataset.i, 10);\r\n            if (evt.shiftKey) {\r\n                var relIndex = parseInt(node.dataset.index, 10);\r\n                var ranking = node.parentElement.dataset.ranking;\r\n                if (rangeSelection(_this.ctx.provider, ranking, dataIndex, relIndex, evt.ctrlKey)) {\r\n                    return;\r\n                }\r\n            }\r\n            _this.ctx.provider.toggleSelection(dataIndex, evt.ctrlKey);\r\n        };\r\n    };\r\n    SelectionManager.prototype.selectRange = function (rows, additional) {\r\n        if (additional === void 0) { additional = false; }\r\n        var current = new OrderedSet(additional ? this.ctx.provider.getSelection() : []);\r\n        var toggle = function (dataIndex) {\r\n            if (current.has(dataIndex)) {\r\n                current.delete(dataIndex);\r\n            }\r\n            else {\r\n                current.add(dataIndex);\r\n            }\r\n        };\r\n        rows.forEach(function (d) {\r\n            if (isGroup(d)) {\r\n                forEachIndices(d.order, toggle);\r\n            }\r\n            else {\r\n                toggle(d.dataIndex);\r\n            }\r\n        });\r\n        this.ctx.provider.setSelection(Array.from(current));\r\n    };\r\n    SelectionManager.prototype.updateState = function (node, dataIndex) {\r\n        if (this.ctx.provider.isSelected(dataIndex)) {\r\n            node.classList.add(cssClass('selected'));\r\n        }\r\n        else {\r\n            node.classList.remove(cssClass('selected'));\r\n        }\r\n    };\r\n    SelectionManager.prototype.update = function (node, selectedDataIndices) {\r\n        var dataIndex = parseInt(node.dataset.i, 10);\r\n        if (selectedDataIndices.has(dataIndex)) {\r\n            node.classList.add(cssClass('selected'));\r\n        }\r\n        else {\r\n            node.classList.remove(cssClass('selected'));\r\n        }\r\n    };\r\n    SelectionManager.EVENT_SELECT_RANGE = 'selectRange';\r\n    SelectionManager.MIN_DISTANCE = 10;\r\n    return SelectionManager;\r\n}(AEventDispatcher));\r\nexport default SelectionManager;\r\n//# sourceMappingURL=SelectionManager.js.map","import * as tslib_1 from \"tslib\";\r\nimport { ACellTableSection, isAbortAble, isAsyncUpdate, isLoadingCell, nonUniformContext, PrefetchMixin, tableIds, uniformContext } from 'lineupengine';\r\nimport { HOVER_DELAY_SHOW_DETAIL } from '../constants';\r\nimport { AEventDispatcher, clear, debounce, suffix } from '../internal';\r\nimport { Column, isGroup, isMultiLevelColumn, Ranking, StackColumn, defaultGroup } from '../model';\r\nimport { CANVAS_HEIGHT, COLUMN_PADDING, cssClass, engineCssClass } from '../styles';\r\nimport { lineupAnimation } from './animation';\r\nimport MultiLevelRenderColumn from './MultiLevelRenderColumn';\r\nimport RenderColumn from './RenderColumn';\r\nimport SelectionManager from './SelectionManager';\r\nimport { groupRoots } from '../model/internal';\r\nimport { isAlwaysShowingGroupStrategy, toRowMeta } from '../provider/internal';\r\n/** @internal */\r\nvar RankingEvents = /** @class */ (function (_super) {\r\n    tslib_1.__extends(RankingEvents, _super);\r\n    function RankingEvents() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    RankingEvents.prototype.fire = function (type) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        _super.prototype.fire.apply(this, [type].concat(args));\r\n    };\r\n    RankingEvents.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([RankingEvents.EVENT_WIDTH_CHANGED, RankingEvents.EVENT_UPDATE_DATA, RankingEvents.EVENT_RECREATE, RankingEvents.EVENT_HIGHLIGHT_CHANGED]);\r\n    };\r\n    RankingEvents.EVENT_WIDTH_CHANGED = 'widthChanged';\r\n    RankingEvents.EVENT_UPDATE_DATA = 'updateData';\r\n    RankingEvents.EVENT_RECREATE = 'recreate';\r\n    RankingEvents.EVENT_HIGHLIGHT_CHANGED = 'highlightChanged';\r\n    return RankingEvents;\r\n}(AEventDispatcher));\r\nvar PASSIVE = {\r\n    passive: false\r\n};\r\nvar EngineRanking = /** @class */ (function (_super) {\r\n    tslib_1.__extends(EngineRanking, _super);\r\n    function EngineRanking(ranking, header, body, tableId, style, ctx, roptions) {\r\n        if (roptions === void 0) { roptions = {}; }\r\n        var _this = _super.call(this, header, body, tableId, style, { mixins: [PrefetchMixin], batchSize: 20 }) || this;\r\n        _this.ranking = ranking;\r\n        _this.ctx = ctx;\r\n        _this.loadingCanvas = new WeakMap();\r\n        _this.data = [];\r\n        _this.highlight = -1;\r\n        _this.canvasPool = [];\r\n        _this.currentCanvasShift = 0;\r\n        _this.currentCanvasWidth = 0;\r\n        _this.events = new RankingEvents();\r\n        _this.roptions = {\r\n            animation: true,\r\n            levelOfDetail: function () { return 'high'; },\r\n            customRowUpdate: function () { return undefined; },\r\n            flags: {\r\n                disableFrozenColumns: false,\r\n                advancedModelFeatures: true,\r\n                advancedRankingFeatures: true,\r\n                advancedUIFeatures: true\r\n            }\r\n        };\r\n        _this.canvasMouseHandler = {\r\n            timer: new Set(),\r\n            hoveredRows: new Set(),\r\n            cleanUp: function () {\r\n                var c = _this.canvasMouseHandler;\r\n                c.timer.forEach(function (timer) {\r\n                    self.clearTimeout(timer);\r\n                });\r\n                c.timer.clear();\r\n                for (var _i = 0, _a = Array.from(c.hoveredRows); _i < _a.length; _i++) {\r\n                    var row = _a[_i];\r\n                    c.unhover(row);\r\n                }\r\n            },\r\n            enter: function (evt) {\r\n                var c = _this.canvasMouseHandler;\r\n                c.cleanUp();\r\n                var row = evt.currentTarget;\r\n                row.addEventListener('mouseleave', c.leave, PASSIVE);\r\n                c.timer.add(self.setTimeout(function () {\r\n                    c.hoveredRows.add(row);\r\n                    _this.updateHoveredRow(row, true);\r\n                }, HOVER_DELAY_SHOW_DETAIL));\r\n            },\r\n            leave: function (evt) {\r\n                // on row to survive canvas removal\r\n                var c = _this.canvasMouseHandler;\r\n                var row = ((typeof evt.currentTarget !== 'undefined') ? evt.currentTarget : evt);\r\n                c.unhover(row);\r\n                c.cleanUp();\r\n            },\r\n            unhover: function (row) {\r\n                // remove self\r\n                var c = _this.canvasMouseHandler;\r\n                c.hoveredRows.delete(row);\r\n                row.removeEventListener('mouseleave', c.leave);\r\n                if (!EngineRanking.isCanvasRenderedRow(row) && row.parentElement) { // and part of dom\r\n                    self.setTimeout(function () { return _this.updateHoveredRow(row, false); });\r\n                }\r\n            }\r\n        };\r\n        _this.highlightHandler = {\r\n            enabled: false,\r\n            enter: function (evt) {\r\n                if (_this.highlight >= 0) {\r\n                    var old = _this.body.getElementsByClassName(engineCssClass('highlighted'))[0];\r\n                    if (old) {\r\n                        old.classList.remove(engineCssClass('highlighted'));\r\n                    }\r\n                    _this.highlight = -1;\r\n                }\r\n                var row = evt.currentTarget;\r\n                var dataIndex = parseInt(row.dataset.i || '-1', 10);\r\n                _this.events.fire(EngineRanking.EVENT_HIGHLIGHT_CHANGED, dataIndex);\r\n            },\r\n            leave: function () {\r\n                if (_this.highlight >= 0) {\r\n                    var old = _this.body.getElementsByClassName(engineCssClass('highlighted'))[0];\r\n                    if (old) {\r\n                        old.classList.remove(engineCssClass('highlighted'));\r\n                    }\r\n                    _this.highlight = -1;\r\n                }\r\n                _this.events.fire(EngineRanking.EVENT_HIGHLIGHT_CHANGED, -1);\r\n            }\r\n        };\r\n        Object.assign(_this.roptions, roptions);\r\n        body.dataset.ranking = ranking.id;\r\n        var that = _this;\r\n        _this.delayedUpdate = debounce((function () {\r\n            if (this.type !== Ranking.EVENT_DIRTY_VALUES) {\r\n                that.events.fire(EngineRanking.EVENT_UPDATE_DATA);\r\n                return;\r\n            }\r\n            if (this.primaryType !== Column.EVENT_RENDERER_TYPE_CHANGED && this.primaryType !== Column.EVENT_GROUP_RENDERER_TYPE_CHANGED && this.primaryType !== Column.EVENT_LABEL_CHANGED) { // just the single column will be updated\r\n                that.updateBody();\r\n            }\r\n        }), 50, function (current, next) {\r\n            var currentEvent = current.self.type;\r\n            // order changed is more important\r\n            return currentEvent === Ranking.EVENT_ORDER_CHANGED ? current : next;\r\n        });\r\n        _this.delayedUpdateAll = debounce(function () { return _this.updateAll(); }, 50);\r\n        _this.delayedUpdateColumnWidths = debounce(function () { return _this.updateColumnWidths(); }, 50);\r\n        ranking.on(Ranking.EVENT_ADD_COLUMN + \".hist\", function (col, index) {\r\n            _this.columns.splice(index, 0, _this.createCol(col, index));\r\n            _this.reindex();\r\n            _this.delayedUpdateAll();\r\n        });\r\n        ranking.on(Ranking.EVENT_REMOVE_COLUMN + \".body\", function (col, index) {\r\n            EngineRanking.disableListener(col);\r\n            _this.columns.splice(index, 1);\r\n            _this.reindex();\r\n            _this.delayedUpdateAll();\r\n        });\r\n        ranking.on(Ranking.EVENT_MOVE_COLUMN + \".body\", function (col, index, old) {\r\n            //delete first\r\n            var c = _this.columns.splice(old, 1)[0];\r\n            console.assert(c.c === col);\r\n            // adapt target index based on previous index, i.e shift by one\r\n            _this.columns.splice(old < index ? index - 1 : index, 0, c);\r\n            _this.reindex();\r\n            _this.delayedUpdateAll();\r\n        });\r\n        ranking.on(Ranking.EVENT_COLUMN_VISIBILITY_CHANGED + \".body\", function (col, _oldValue, newValue) {\r\n            if (newValue) {\r\n                // become visible\r\n                var index = ranking.children.indexOf(col);\r\n                _this.columns.splice(index, 0, _this.createCol(col, index));\r\n            }\r\n            else {\r\n                // hide\r\n                var index = _this.columns.findIndex(function (d) { return d.c === col; });\r\n                EngineRanking.disableListener(col);\r\n                _this.columns.splice(index, 1);\r\n            }\r\n            _this.reindex();\r\n            _this.delayedUpdateAll();\r\n        });\r\n        ranking.on(Ranking.EVENT_ORDER_CHANGED + \".body\", _this.delayedUpdate);\r\n        _this.selection = new SelectionManager(_this.ctx, body);\r\n        _this.selection.on(SelectionManager.EVENT_SELECT_RANGE, function (from, to, additional) {\r\n            _this.selection.selectRange(_this.data.slice(from, to + 1), additional);\r\n        });\r\n        _this.renderCtx = Object.assign({\r\n            isGroup: function (index) { return isGroup(_this.data[index]); },\r\n            getRow: function (index) { return _this.data[index]; },\r\n            getGroup: function (index) { return _this.data[index]; }\r\n        }, ctx);\r\n        // default context\r\n        _this.columns = ranking.children.filter(function (c) { return c.isVisible(); }).map(function (c, i) { return _this.createCol(c, i); });\r\n        _this._context = Object.assign({\r\n            columns: _this.columns,\r\n            column: nonUniformContext(_this.columns.map(function (w) { return w.width; }), 100, COLUMN_PADDING)\r\n        }, uniformContext(0, 20));\r\n        _this.columns.forEach(function (column) {\r\n            if (column instanceof MultiLevelRenderColumn) {\r\n                column.updateWidthRule(_this.style);\r\n            }\r\n            column.renderers = _this.ctx.createRenderer(column.c);\r\n        });\r\n        _this.style.updateRule(\"hoverOnly\" + _this.tableId, \"\\n      #\" + tableIds(_this.tableId).tbody + \":hover > .\" + engineCssClass('tr') + \":hover .\" + cssClass('hover-only') + \",\\n      #\" + tableIds(_this.tableId).tbody + \" > .\" + engineCssClass('tr') + \".\" + cssClass('selected') + \" .\" + cssClass('hover-only') + \",\\n      #\" + tableIds(_this.tableId).tbody + \" > .\" + engineCssClass('tr') + \".\" + engineCssClass('highlighted') + \" .\" + cssClass('hover-only'), {\r\n            visibility: 'visible'\r\n        });\r\n        _this.updateCanvasRule();\r\n        return _this;\r\n    }\r\n    EngineRanking.prototype.on = function (type, listener) {\r\n        this.events.on(type, listener);\r\n        return this;\r\n    };\r\n    Object.defineProperty(EngineRanking.prototype, \"id\", {\r\n        get: function () {\r\n            return this.ranking.id;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    EngineRanking.prototype.onVisibilityChanged = function (visible) {\r\n        _super.prototype.onVisibilityChanged.call(this, visible);\r\n        if (visible) {\r\n            this.delayedUpdate.call({ type: Ranking.EVENT_ORDER_CHANGED });\r\n        }\r\n    };\r\n    EngineRanking.prototype.updateHeaders = function () {\r\n        this.updateColumnSummaryFlag();\r\n        return _super.prototype.updateHeaders.call(this);\r\n    };\r\n    Object.defineProperty(EngineRanking.prototype, \"currentData\", {\r\n        get: function () {\r\n            return this.data;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(EngineRanking.prototype, \"context\", {\r\n        get: function () {\r\n            return this._context;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    EngineRanking.prototype.createHeader = function (_document, column) {\r\n        return column.createHeader();\r\n    };\r\n    EngineRanking.prototype.updateColumnSummaryFlag = function () {\r\n        // updates the header flag depending on whether there are any sublabels\r\n        this.header.classList.toggle(cssClass('show-sublabel'), this.columns.some(function (c) { return c.hasSummaryLine(); }));\r\n    };\r\n    EngineRanking.prototype.updateHeader = function (node, column) {\r\n        if (column instanceof MultiLevelRenderColumn) {\r\n            column.updateWidthRule(this.style);\r\n        }\r\n        return column.updateHeader(node);\r\n    };\r\n    EngineRanking.prototype.createCell = function (_document, index, column) {\r\n        return column.createCell(index);\r\n    };\r\n    EngineRanking.prototype.createCellHandled = function (col, index) {\r\n        var r = col.createCell(index);\r\n        var item;\r\n        if (isAsyncUpdate(r)) {\r\n            item = this.handleCellReady(r.item, r.ready, col.index);\r\n        }\r\n        else {\r\n            item = r;\r\n        }\r\n        this.initCellClasses(item, col.id);\r\n        return item;\r\n    };\r\n    EngineRanking.prototype.updateCell = function (node, index, column) {\r\n        return column.updateCell(node, index);\r\n    };\r\n    EngineRanking.prototype.selectCanvas = function () {\r\n        if (this.canvasPool.length > 0) {\r\n            return this.canvasPool.pop();\r\n        }\r\n        var c = this.body.ownerDocument.createElement('canvas');\r\n        c.classList.add(cssClass(\"low-c\" + this.tableId));\r\n        return c;\r\n    };\r\n    EngineRanking.prototype.rowFlags = function (row) {\r\n        var rowany = row;\r\n        var v = rowany.__lu__;\r\n        if (v == null) {\r\n            return rowany.__lu__ = {};\r\n        }\r\n        return v;\r\n    };\r\n    EngineRanking.prototype.visibleRenderedWidth = function () {\r\n        var width = 0;\r\n        for (var _i = 0, _a = this.visibleColumns.frozen; _i < _a.length; _i++) {\r\n            var col = _a[_i];\r\n            width += this.columns[col].width + COLUMN_PADDING;\r\n        }\r\n        for (var col = this.visibleColumns.first; col <= this.visibleColumns.last; ++col) {\r\n            width += this.columns[col].width + COLUMN_PADDING;\r\n        }\r\n        if (width > 0) {\r\n            width -= COLUMN_PADDING; // for the last one\r\n        }\r\n        return width;\r\n    };\r\n    EngineRanking.prototype.pushLazyRedraw = function (canvas, x, column, render) {\r\n        var _this = this;\r\n        render.then(function (r) {\r\n            var l = (_this.loadingCanvas.get(canvas) || []);\r\n            var pos = l.findIndex(function (d) { return d.render === render && d.col === column.index; });\r\n            if (pos < 0) { // not part anymore ignore\r\n                return;\r\n            }\r\n            l.splice(pos, 1);\r\n            if (typeof r === 'function') { // i.e not aborted\r\n                var ctx = canvas.getContext('2d');\r\n                ctx.clearRect(x - 1, 0, column.width + 2, canvas.height);\r\n                ctx.save();\r\n                ctx.translate(x, 0);\r\n                r(ctx);\r\n                ctx.restore();\r\n            }\r\n            if (l.length > 0) {\r\n                return;\r\n            }\r\n            _this.loadingCanvas.delete(canvas);\r\n            canvas.classList.remove(cssClass('loading-c'));\r\n        });\r\n        if (!this.loadingCanvas.has(canvas)) {\r\n            canvas.classList.add(cssClass('loading-c'));\r\n            this.loadingCanvas.set(canvas, [{ col: column.index, render: render }]);\r\n        }\r\n        else {\r\n            this.loadingCanvas.get(canvas).push({ col: column.index, render: render });\r\n        }\r\n    };\r\n    EngineRanking.prototype.renderRow = function (canvas, node, index) {\r\n        var _this = this;\r\n        if (this.loadingCanvas.has(canvas)) {\r\n            for (var _i = 0, _a = this.loadingCanvas.get(canvas); _i < _a.length; _i++) {\r\n                var a = _a[_i];\r\n                a.render.abort();\r\n            }\r\n            this.loadingCanvas.delete(canvas);\r\n        }\r\n        canvas.classList.remove(cssClass('loading-c'));\r\n        canvas.width = this.currentCanvasWidth;\r\n        canvas.height = CANVAS_HEIGHT;\r\n        var ctx = canvas.getContext('2d');\r\n        ctx.imageSmoothingEnabled = false;\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        ctx.save();\r\n        var domColumns = [];\r\n        var x = 0;\r\n        var renderCellImpl = function (col) {\r\n            var c = _this.columns[col];\r\n            var r = c.renderCell(ctx, index);\r\n            if (r === true) {\r\n                domColumns.push(c);\r\n            }\r\n            else if (r !== false && isAbortAble(r)) {\r\n                _this.pushLazyRedraw(canvas, x, c, r);\r\n            }\r\n            var shift = c.width + COLUMN_PADDING;\r\n            x += shift;\r\n            ctx.translate(shift, 0);\r\n        };\r\n        for (var _b = 0, _c = this.visibleColumns.frozen; _b < _c.length; _b++) {\r\n            var col = _c[_b];\r\n            renderCellImpl(col);\r\n        }\r\n        for (var col = this.visibleColumns.first; col <= this.visibleColumns.last; ++col) {\r\n            renderCellImpl(col);\r\n        }\r\n        ctx.restore();\r\n        var visibleElements = node.childElementCount - 1; // for canvas\r\n        if (domColumns.length === 0) {\r\n            while (node.lastElementChild !== node.firstElementChild) {\r\n                var n = node.lastElementChild;\r\n                node.removeChild(n);\r\n                this.recycleCell(n);\r\n            }\r\n            return;\r\n        }\r\n        if (domColumns.length === 1) {\r\n            var first = domColumns[0];\r\n            if (visibleElements === 0) {\r\n                var item = this.createCellHandled(first, index);\r\n                item.classList.add(cssClass('low'));\r\n                node.appendChild(item);\r\n                return;\r\n            }\r\n            var firstDOM = node.lastElementChild;\r\n            if (visibleElements === 1 && firstDOM.dataset.colId === first.id) {\r\n                var isLoading = isLoadingCell(firstDOM);\r\n                if (isLoading) {\r\n                    var item = this.createCellHandled(first, index);\r\n                    node.replaceChild(item, firstDOM);\r\n                    this.recycleCell(firstDOM, first.index);\r\n                    return;\r\n                }\r\n                this.updateCellImpl(first, node.lastElementChild, index);\r\n                return;\r\n            }\r\n        }\r\n        var existing = new Map(Array.from(node.children).slice(1).map(function (d) { return [d.dataset.col, d]; }));\r\n        for (var _d = 0, domColumns_1 = domColumns; _d < domColumns_1.length; _d++) {\r\n            var col = domColumns_1[_d];\r\n            var elem = existing.get(col.id);\r\n            if (elem && !isLoadingCell(elem)) {\r\n                existing.delete(col.id);\r\n                this.updateCellImpl(col, elem, index);\r\n            }\r\n            else {\r\n                var c = this.createCellHandled(col, index);\r\n                c.classList.add(cssClass('low'));\r\n                node.appendChild(c);\r\n            }\r\n        }\r\n        existing.forEach(function (v) {\r\n            v.remove();\r\n            _this.recycleCell(v);\r\n        });\r\n    };\r\n    EngineRanking.prototype.updateCanvasCell = function (canvas, node, index, column, x) {\r\n        // delete lazy that would render the same thing\r\n        if (this.loadingCanvas.has(canvas)) {\r\n            var l = this.loadingCanvas.get(canvas);\r\n            var me = l.filter(function (d) { return d.col === column.index; });\r\n            if (me.length > 0) {\r\n                this.loadingCanvas.set(canvas, l.filter(function (d) { return d.col !== column.index; }));\r\n                for (var _i = 0, me_1 = me; _i < me_1.length; _i++) {\r\n                    var a = me_1[_i];\r\n                    a.render.abort();\r\n                }\r\n            }\r\n        }\r\n        var ctx = canvas.getContext('2d');\r\n        ctx.clearRect(x - 1, 0, column.width + 2, canvas.height);\r\n        ctx.save();\r\n        ctx.translate(x, 0);\r\n        var needDOM = column.renderCell(ctx, index);\r\n        ctx.restore();\r\n        if (typeof needDOM !== 'boolean' && isAbortAble(needDOM)) {\r\n            this.pushLazyRedraw(canvas, x, column, needDOM);\r\n        }\r\n        if (needDOM !== true && node.childElementCount === 1) { // just canvas\r\n            return;\r\n        }\r\n        var elem = node.querySelector(\"[data-col-id=\\\"\" + column.id + \"\\\"]\");\r\n        if (elem && !needDOM) {\r\n            elem.remove();\r\n            this.recycleCell(elem, column.index);\r\n            return;\r\n        }\r\n        if (elem) {\r\n            return this.updateCellImpl(column, elem, index);\r\n        }\r\n        var c = this.createCellHandled(column, index);\r\n        c.classList.add(cssClass('low'));\r\n        node.appendChild(c);\r\n    };\r\n    EngineRanking.prototype.reindex = function () {\r\n        this.columns.forEach(function (c, i) {\r\n            c.index = i;\r\n        });\r\n    };\r\n    EngineRanking.prototype.updateAll = function () {\r\n        var _this = this;\r\n        this.columns.forEach(function (c, i) {\r\n            c.index = i;\r\n            c.renderers = _this.ctx.createRenderer(c.c);\r\n        });\r\n        this._context = Object.assign({}, this._context, {\r\n            column: nonUniformContext(this.columns.map(function (w) { return w.width; }), 100, COLUMN_PADDING)\r\n        });\r\n        this.updateColumnSummaryFlag();\r\n        this.events.fire(EngineRanking.EVENT_RECREATE);\r\n        _super.prototype.recreate.call(this);\r\n        this.events.fire(EngineRanking.EVENT_WIDTH_CHANGED);\r\n    };\r\n    EngineRanking.prototype.updateBody = function () {\r\n        var _this = this;\r\n        if (this.hidden) {\r\n            return;\r\n        }\r\n        this.events.fire(EngineRanking.EVENT_WIDTH_CHANGED);\r\n        _super.prototype.forEachRow.call(this, function (row, rowIndex) { return _this.updateRow(row, rowIndex); });\r\n    };\r\n    EngineRanking.prototype.updateHeaderOf = function (col) {\r\n        var i = this._context.columns.findIndex(function (d) { return d.c === col; });\r\n        if (i < 0) {\r\n            return false;\r\n        }\r\n        var node = this.header.children[i];\r\n        var column = this._context.columns[i];\r\n        if (node && column) {\r\n            this.updateHeader(node, column);\r\n        }\r\n        this.updateColumnSummaryFlag();\r\n        return node && column;\r\n    };\r\n    EngineRanking.prototype.createRow = function (node, rowIndex) {\r\n        node.classList.add(this.style.cssClasses.tr);\r\n        this.roptions.customRowUpdate(node, rowIndex);\r\n        if (this.highlightHandler.enabled) {\r\n            node.addEventListener('mouseenter', this.highlightHandler.enter, PASSIVE);\r\n            this.rowFlags(node).highlight = true;\r\n        }\r\n        var isGroup = this.renderCtx.isGroup(rowIndex);\r\n        var meta = this.toRowMeta(rowIndex);\r\n        if (!meta) {\r\n            delete node.dataset.meta;\r\n        }\r\n        else {\r\n            node.dataset.meta = meta;\r\n        }\r\n        if (isGroup) {\r\n            node.dataset.agg = 'group';\r\n            _super.prototype.createRow.call(this, node, rowIndex);\r\n            return;\r\n        }\r\n        var dataIndex = this.renderCtx.getRow(rowIndex).dataIndex;\r\n        node.classList.toggle(engineCssClass('highlighted'), this.highlight === dataIndex);\r\n        node.dataset.i = dataIndex.toString();\r\n        node.dataset.agg = 'detail'; //or 'group'\r\n        this.selection.updateState(node, dataIndex);\r\n        this.selection.add(node);\r\n        var low = this.roptions.levelOfDetail(rowIndex) === 'low';\r\n        node.classList.toggle(cssClass('low'), low);\r\n        if (!low || this.ctx.provider.isSelected(dataIndex)) {\r\n            _super.prototype.createRow.call(this, node, rowIndex);\r\n            return;\r\n        }\r\n        var canvas = this.selectCanvas();\r\n        node.appendChild(canvas);\r\n        node.addEventListener('mouseenter', this.canvasMouseHandler.enter, PASSIVE);\r\n        this.renderRow(canvas, node, rowIndex);\r\n    };\r\n    EngineRanking.prototype.updateRow = function (node, rowIndex, hoverLod) {\r\n        this.roptions.customRowUpdate(node, rowIndex);\r\n        var computedLod = this.roptions.levelOfDetail(rowIndex);\r\n        var low = (hoverLod ? hoverLod : computedLod) === 'low';\r\n        var wasLow = node.classList.contains(cssClass('low'));\r\n        var isGroup = this.renderCtx.isGroup(rowIndex);\r\n        var wasGroup = node.dataset.agg === 'group';\r\n        node.classList.toggle(cssClass('low'), computedLod === 'low');\r\n        if (this.highlightHandler.enabled && !this.rowFlags(node).highlight) {\r\n            node.addEventListener('mouseenter', this.highlightHandler.enter, PASSIVE);\r\n            this.rowFlags(node).highlight = true;\r\n        }\r\n        if (isGroup !== wasGroup) {\r\n            // change of mode clear the children to reinitialize them\r\n            clear(node);\r\n            // adapt body\r\n            node.dataset.agg = isGroup ? 'group' : 'detail';\r\n            if (isGroup) {\r\n                node.dataset.i = '';\r\n                this.selection.remove(node);\r\n            }\r\n            else {\r\n                this.selection.add(node);\r\n            }\r\n        }\r\n        if (wasLow && (!computedLod || isGroup)) {\r\n            node.removeEventListener('mouseenter', this.canvasMouseHandler.enter);\r\n        }\r\n        var meta = this.toRowMeta(rowIndex);\r\n        if (!meta) {\r\n            delete node.dataset.meta;\r\n        }\r\n        else {\r\n            node.dataset.meta = meta;\r\n        }\r\n        if (isGroup) {\r\n            node.classList.remove(engineCssClass('highlighted'));\r\n            _super.prototype.updateRow.call(this, node, rowIndex);\r\n            return;\r\n        }\r\n        var dataIndex = this.renderCtx.getRow(rowIndex).dataIndex;\r\n        node.classList.toggle(engineCssClass('highlighted'), this.highlight === dataIndex);\r\n        node.dataset.i = dataIndex.toString();\r\n        this.selection.updateState(node, dataIndex);\r\n        var canvas = (wasLow && node.firstElementChild.nodeName.toLowerCase() === 'canvas') ? node.firstElementChild : null;\r\n        if (!low || this.ctx.provider.isSelected(dataIndex)) {\r\n            if (canvas) {\r\n                this.recycleCanvas(canvas);\r\n                clear(node);\r\n                node.removeEventListener('mouseenter', this.canvasMouseHandler.enter);\r\n            }\r\n            _super.prototype.updateRow.call(this, node, rowIndex);\r\n            return;\r\n        }\r\n        // use canvas\r\n        if (wasLow && canvas) {\r\n            this.renderRow(canvas, node, rowIndex);\r\n            return;\r\n        }\r\n        // clear old\r\n        clear(node);\r\n        node.dataset.agg = 'detail';\r\n        var canvas2 = this.selectCanvas();\r\n        node.appendChild(canvas2);\r\n        node.addEventListener('mouseenter', this.canvasMouseHandler.enter, PASSIVE);\r\n        this.renderRow(canvas2, node, rowIndex);\r\n    };\r\n    EngineRanking.prototype.updateCanvasBody = function () {\r\n        var _this = this;\r\n        this.updateCanvasRule();\r\n        _super.prototype.forEachRow.call(this, function (row, index) {\r\n            if (EngineRanking.isCanvasRenderedRow(row)) {\r\n                _this.renderRow(row.firstElementChild, row, index);\r\n            }\r\n        });\r\n    };\r\n    EngineRanking.prototype.toRowMeta = function (rowIndex) {\r\n        var _this = this;\r\n        var provider = this.renderCtx.provider;\r\n        var topNGetter = function (group) { return provider.getTopNAggregated(_this.ranking, group); };\r\n        return toRowMeta(this.renderCtx.getRow(rowIndex), provider.getAggregationStrategy(), topNGetter);\r\n    };\r\n    EngineRanking.prototype.updateCanvasRule = function () {\r\n        this.style.updateRule(\"renderCanvas\" + this.tableId, \".\" + cssClass(\"low-c\" + this.tableId), {\r\n            transform: \"translateX(\" + this.currentCanvasShift + \"px)\",\r\n            width: this.currentCanvasWidth + \"px\"\r\n        });\r\n    };\r\n    EngineRanking.prototype.updateShifts = function (top, left) {\r\n        _super.prototype.updateShifts.call(this, top, left);\r\n        var width = this.visibleRenderedWidth();\r\n        if (left === this.currentCanvasShift && width === this.currentCanvasWidth) {\r\n            return;\r\n        }\r\n        this.currentCanvasShift = left;\r\n        this.currentCanvasWidth = width;\r\n        this.updateCanvasBody();\r\n    };\r\n    EngineRanking.prototype.recycleCanvas = function (canvas) {\r\n        if (this.loadingCanvas.has(canvas)) {\r\n            for (var _i = 0, _a = this.loadingCanvas.get(canvas); _i < _a.length; _i++) {\r\n                var a = _a[_i];\r\n                a.render.abort();\r\n            }\r\n            this.loadingCanvas.delete(canvas);\r\n        }\r\n        else if (!canvas.classList.contains(cssClass('loading-c'))) {\r\n            this.canvasPool.push(canvas);\r\n        }\r\n    };\r\n    EngineRanking.prototype.enableHighlightListening = function (enable) {\r\n        var _this = this;\r\n        if (this.highlightHandler.enabled === enable) {\r\n            return;\r\n        }\r\n        this.highlightHandler.enabled = enable;\r\n        if (enable) {\r\n            this.body.addEventListener('mouseleave', this.highlightHandler.leave, PASSIVE);\r\n            _super.prototype.forEachRow.call(this, function (row) {\r\n                row.addEventListener('mouseenter', _this.highlightHandler.enter, PASSIVE);\r\n                _this.rowFlags(row).highlight = true;\r\n            });\r\n            return;\r\n        }\r\n        this.body.removeEventListener('mouseleave', this.highlightHandler.leave);\r\n        _super.prototype.forEachRow.call(this, function (row) {\r\n            row.removeEventListener('mouseenter', _this.highlightHandler.enter);\r\n            _this.rowFlags(row).highlight = false;\r\n        });\r\n    };\r\n    EngineRanking.prototype.updateHoveredRow = function (row, hover) {\r\n        var isCanvas = EngineRanking.isCanvasRenderedRow(row);\r\n        if (isCanvas !== hover) {\r\n            return; // good nothing to do\r\n        }\r\n        var index = parseInt(row.dataset.index, 10);\r\n        this.updateRow(row, index, hover ? 'high' : 'low');\r\n    };\r\n    EngineRanking.prototype.forEachRow = function (callback, inplace) {\r\n        if (inplace === void 0) { inplace = false; }\r\n        var adapter = function (row, rowIndex) {\r\n            if (EngineRanking.isCanvasRenderedRow(row)) {\r\n                // skip canvas\r\n                return;\r\n            }\r\n            callback(row, rowIndex);\r\n        };\r\n        return _super.prototype.forEachRow.call(this, adapter, inplace);\r\n    };\r\n    EngineRanking.prototype.updateSelection = function (selectedDataIndices) {\r\n        var _this = this;\r\n        _super.prototype.forEachRow.call(this, function (node, rowIndex) {\r\n            if (_this.renderCtx.isGroup(rowIndex)) {\r\n                _this.updateRow(node, rowIndex);\r\n            }\r\n            else {\r\n                // fast pass for item\r\n                _this.selection.update(node, selectedDataIndices);\r\n            }\r\n        }, true);\r\n    };\r\n    EngineRanking.prototype.updateColumnWidths = function () {\r\n        var _this = this;\r\n        // update the column context in place\r\n        this._context.column = nonUniformContext(this._context.columns.map(function (w) { return w.width; }), 100, COLUMN_PADDING);\r\n        _super.prototype.updateColumnWidths.call(this);\r\n        var columns = this.context.columns;\r\n        //no data update needed since just width changed\r\n        columns.forEach(function (column) {\r\n            if (column instanceof MultiLevelRenderColumn) {\r\n                column.updateWidthRule(_this.style);\r\n            }\r\n            column.renderers = _this.ctx.createRenderer(column.c);\r\n        });\r\n        this.events.fire(EngineRanking.EVENT_WIDTH_CHANGED);\r\n    };\r\n    EngineRanking.prototype.updateColumn = function (index) {\r\n        var _this = this;\r\n        var columns = this.context.columns;\r\n        var column = columns[index];\r\n        if (!column) {\r\n            return false;\r\n        }\r\n        var x = 0;\r\n        for (var i = this.visibleColumns.first; i < index; ++i) {\r\n            x += columns[i].width + COLUMN_PADDING;\r\n        }\r\n        _super.prototype.forEachRow.call(this, function (row, rowIndex) {\r\n            if (EngineRanking.isCanvasRenderedRow(row)) {\r\n                _this.updateCanvasCell(row.firstElementChild, row, rowIndex, column, x);\r\n                return;\r\n            }\r\n            _this.updateCellImpl(column, row.children[index], rowIndex);\r\n        });\r\n        return true;\r\n    };\r\n    EngineRanking.prototype.updateCellImpl = function (column, before, rowIndex) {\r\n        if (!before) {\r\n            return; // race condition\r\n        }\r\n        var r = this.updateCell(before, rowIndex, column);\r\n        var after;\r\n        if (isAsyncUpdate(r)) {\r\n            after = this.handleCellReady(r.item, r.ready, column.index);\r\n        }\r\n        else {\r\n            after = r;\r\n        }\r\n        if (before === after || !after) {\r\n            return;\r\n        }\r\n        this.initCellClasses(after, column.id);\r\n        before.parentElement.replaceChild(after, before);\r\n    };\r\n    EngineRanking.prototype.initCellClasses = function (node, id) {\r\n        node.dataset.id = id;\r\n        node.classList.add(engineCssClass('td'), this.style.cssClasses.td, engineCssClass(\"td-\" + this.tableId));\r\n    };\r\n    EngineRanking.prototype.destroy = function () {\r\n        _super.prototype.destroy.call(this);\r\n        this.style.deleteRule(\"hoverOnly\" + this.tableId);\r\n        this.style.deleteRule(\"renderCanvas\" + this.tableId);\r\n        this.ranking.flatColumns.forEach(function (c) { return EngineRanking.disableListener(c); });\r\n    };\r\n    EngineRanking.prototype.groupData = function () {\r\n        var _this = this;\r\n        var groups = this.ranking.getGroups();\r\n        var provider = this.ctx.provider;\r\n        var strategy = provider.getAggregationStrategy();\r\n        var alwaysShowGroup = isAlwaysShowingGroupStrategy(strategy);\r\n        var r = [];\r\n        if (groups.length === 0) {\r\n            return r;\r\n        }\r\n        var pushItem = function (group, dataIndex, i) {\r\n            r.push({\r\n                group: group,\r\n                dataIndex: dataIndex,\r\n                relativeIndex: i\r\n            });\r\n        };\r\n        if (groups.length === 1 && groups[0].name === defaultGroup.name) {\r\n            var group = groups[0];\r\n            var l = group.order.length;\r\n            for (var i = 0; i < l; ++i) {\r\n                pushItem(group, group.order[i], i);\r\n            }\r\n            return r;\r\n        }\r\n        var roots = groupRoots(groups);\r\n        var pushGroup = function (group) {\r\n            var n = provider.getTopNAggregated(_this.ranking, group);\r\n            // all are IOrderedGroup since propagated\r\n            var ordered = group;\r\n            var gparent = group;\r\n            if (n === 0 || alwaysShowGroup) {\r\n                r.push(ordered);\r\n            }\r\n            if (n !== 0 && Array.isArray(gparent.subGroups) && gparent.subGroups.length > 0) {\r\n                for (var _i = 0, _a = gparent.subGroups; _i < _a.length; _i++) {\r\n                    var g = _a[_i];\r\n                    pushGroup(g);\r\n                }\r\n                return;\r\n            }\r\n            var l = n < 0 ? ordered.order.length : Math.min(n, ordered.order.length);\r\n            for (var i = 0; i < l; ++i) {\r\n                pushItem(ordered, ordered.order[i], i);\r\n            }\r\n        };\r\n        for (var _i = 0, roots_1 = roots; _i < roots_1.length; _i++) {\r\n            var root = roots_1[_i];\r\n            pushGroup(root);\r\n        }\r\n        return r;\r\n    };\r\n    EngineRanking.prototype.render = function (data, rowContext) {\r\n        var _this = this;\r\n        var previous = this._context;\r\n        var previousData = this.data;\r\n        this.data = data;\r\n        this.columns.forEach(function (c, i) {\r\n            c.index = i;\r\n            c.renderers = _this.ctx.createRenderer(c.c);\r\n        });\r\n        this._context = Object.assign({\r\n            columns: this.columns,\r\n            column: nonUniformContext(this.columns.map(function (w) { return w.width; }), 100, COLUMN_PADDING)\r\n        }, rowContext);\r\n        if (!this.bodyScroller) { // somehow not part of dom\r\n            return;\r\n        }\r\n        this.events.fire(EngineRanking.EVENT_RECREATE);\r\n        return _super.prototype.recreate.call(this, this.roptions.animation ? lineupAnimation(previous, previousData, this.data) : undefined);\r\n    };\r\n    EngineRanking.prototype.setHighlight = function (dataIndex) {\r\n        this.highlight = dataIndex;\r\n        var old = this.body.querySelector(\"[data-i].\" + engineCssClass('highlighted'));\r\n        if (old) {\r\n            old.classList.remove(engineCssClass('highlighted'));\r\n        }\r\n        if (dataIndex < 0) {\r\n            return;\r\n        }\r\n        var item = this.body.querySelector(\"[data-i=\\\"\" + dataIndex + \"\\\"]\");\r\n        if (item) {\r\n            item.classList.add(engineCssClass('highlighted'));\r\n        }\r\n        return item != null;\r\n    };\r\n    EngineRanking.prototype.findNearest = function (dataIndices) {\r\n        var _this = this;\r\n        // find the nearest visible data index\r\n        // first check if already visible\r\n        var index = dataIndices.find(function (d) { return Boolean(_this.body.querySelectorAll(\"[data-i=\\\"\" + d + \"\\\"]\")); });\r\n        if (index != null) {\r\n            return index; // visible one\r\n        }\r\n        var visible = this.visible;\r\n        var lookFor = new Set(dataIndices);\r\n        var firstBeforePos = -1;\r\n        var firstAfterPos = -1;\r\n        for (var i = visible.first; i >= 0; --i) {\r\n            var d = this.data[i];\r\n            if (!isGroup(d) && lookFor.has(d.dataIndex)) {\r\n                firstBeforePos = i;\r\n                break;\r\n            }\r\n        }\r\n        for (var i = visible.last; i < this.data.length; ++i) {\r\n            var d = this.data[i];\r\n            if (!isGroup(d) && lookFor.has(d.dataIndex)) {\r\n                firstAfterPos = i;\r\n                break;\r\n            }\r\n        }\r\n        if (firstBeforePos < 0 && firstBeforePos < 0) {\r\n            return -1; // not found at all\r\n        }\r\n        var nearestPos = (firstBeforePos >= 0 && (visible.first - firstBeforePos) < (firstAfterPos - visible.last)) ? firstBeforePos : firstAfterPos;\r\n        return this.data[nearestPos].dataIndex;\r\n    };\r\n    EngineRanking.prototype.scrollIntoView = function (dataIndex) {\r\n        var _this = this;\r\n        var item = this.body.querySelector(\"[data-i=\\\"\" + dataIndex + \"\\\"]\");\r\n        if (item) {\r\n            item.scrollIntoView(true);\r\n            return true;\r\n        }\r\n        var index = this.data.findIndex(function (d) { return !isGroup(d) && d.dataIndex === dataIndex; });\r\n        if (index < 0) {\r\n            return false; // part of a group?\r\n        }\r\n        var posOf = function () {\r\n            var c = _this._context;\r\n            if (c.exceptions.length === 0 || index < c.exceptions[0].index) {\r\n                // fast pass\r\n                return index * c.defaultRowHeight;\r\n            }\r\n            var before = c.exceptions.reverse().find(function (d) { return d.index <= index; });\r\n            if (!before) {\r\n                return -1;\r\n            }\r\n            if (before.index === index) {\r\n                return before.y;\r\n            }\r\n            var regular = index - before.index - 1;\r\n            return before.y2 + regular * c.defaultRowHeight;\r\n        };\r\n        var pos = posOf();\r\n        if (pos < 0) {\r\n            return false;\r\n        }\r\n        var scroller = this.bodyScroller;\r\n        if (!scroller) {\r\n            return false;\r\n        }\r\n        var top = scroller.scrollTop;\r\n        scroller.scrollTop = Math.min(pos, scroller.scrollHeight - scroller.clientHeight);\r\n        this.onScrolledVertically(scroller.scrollTop, scroller.clientHeight, top < scroller.scrollTop);\r\n        var found = this.body.querySelector(\"[data-i=\\\"\" + dataIndex + \"\\\"]\");\r\n        if (found) {\r\n            found.scrollIntoView(true);\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    EngineRanking.prototype.getHighlight = function () {\r\n        var item = this.body.querySelector(\"[data-i]:hover, [data-i].\" + engineCssClass('highlighted'));\r\n        if (item) {\r\n            return parseInt(item.dataset.i, 10);\r\n        }\r\n        return this.highlight;\r\n    };\r\n    EngineRanking.prototype.createCol = function (c, index) {\r\n        var _this = this;\r\n        var col = (isMultiLevelColumn(c) && !c.getCollapsed()) ? new MultiLevelRenderColumn(c, index, this.renderCtx, this.roptions.flags) : new RenderColumn(c, index, this.renderCtx, this.roptions.flags);\r\n        c.on(Column.EVENT_WIDTH_CHANGED + \".body\", function () {\r\n            // replace myself upon width change since we renderers are allowed to\r\n            col.renderers = _this.ctx.createRenderer(c);\r\n            _this.delayedUpdateColumnWidths();\r\n        });\r\n        var debounceUpdate = debounce(function () {\r\n            var valid = _this.updateColumn(col.index);\r\n            if (!valid) {\r\n                EngineRanking.disableListener(c); // destroy myself\r\n            }\r\n        }, 25);\r\n        c.on([Column.EVENT_RENDERER_TYPE_CHANGED + \".body\", Column.EVENT_GROUP_RENDERER_TYPE_CHANGED + \".body\"], function () {\r\n            // replace myself upon renderer type change\r\n            col.renderers = _this.ctx.createRenderer(c);\r\n            debounceUpdate();\r\n        });\r\n        var that = this;\r\n        c.on(Column.EVENT_DIRTY_HEADER + \".body\", function () {\r\n            var valid = that.updateHeaderOf(col.c);\r\n            if (!valid) {\r\n                EngineRanking.disableListener(c); // destroy myself\r\n            }\r\n        });\r\n        c.on(suffix('.body', Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_CACHES), function () {\r\n            // replace myself upon renderer type change\r\n            col.renderers = _this.ctx.createRenderer(c);\r\n            var valid = _this.updateHeaderOf(col.c);\r\n            if (!valid) {\r\n                EngineRanking.disableListener(c); // destroy myself\r\n            }\r\n        });\r\n        c.on(Column.EVENT_DIRTY_VALUES + \".body\", debounceUpdate);\r\n        if (isMultiLevelColumn(c)) {\r\n            c.on(StackColumn.EVENT_COLLAPSE_CHANGED + \".body\", function () {\r\n                // rebuild myself from scratch\r\n                EngineRanking.disableListener(c); // destroy myself\r\n                var index = col.index;\r\n                var replacement = _this.createCol(c, index);\r\n                replacement.index = index;\r\n                _this.columns.splice(index, 1, replacement);\r\n                _this.delayedUpdateAll();\r\n            });\r\n            if (!c.getCollapsed()) {\r\n                col.updateWidthRule(this.style);\r\n                c.on(StackColumn.EVENT_MULTI_LEVEL_CHANGED + \".body\", function () {\r\n                    col.updateWidthRule(_this.style);\r\n                });\r\n                c.on(StackColumn.EVENT_MULTI_LEVEL_CHANGED + \".bodyUpdate\", debounceUpdate);\r\n            }\r\n        }\r\n        return col;\r\n    };\r\n    EngineRanking.isCanvasRenderedRow = function (row) {\r\n        return row.classList.contains(cssClass('low')) && row.childElementCount >= 1 && row.firstElementChild.nodeName.toLowerCase() === 'canvas';\r\n    };\r\n    EngineRanking.disableListener = function (c) {\r\n        c.on(Column.EVENT_WIDTH_CHANGED + \".body\", null);\r\n        c.on(suffix('.body', Column.EVENT_RENDERER_TYPE_CHANGED, Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_CACHES, Column.EVENT_LABEL_CHANGED), null);\r\n        c.on(Ranking.EVENT_DIRTY_HEADER + \".body\", null);\r\n        c.on(Ranking.EVENT_DIRTY_VALUES + \".body\", null);\r\n        if (!(isMultiLevelColumn(c))) {\r\n            return;\r\n        }\r\n        c.on(StackColumn.EVENT_COLLAPSE_CHANGED + \".body\", null);\r\n        c.on(StackColumn.EVENT_MULTI_LEVEL_CHANGED + \".body\", null);\r\n        c.on(StackColumn.EVENT_MULTI_LEVEL_CHANGED + \".bodyUpdate\", null);\r\n    };\r\n    EngineRanking.EVENT_WIDTH_CHANGED = RankingEvents.EVENT_WIDTH_CHANGED;\r\n    EngineRanking.EVENT_UPDATE_DATA = RankingEvents.EVENT_UPDATE_DATA;\r\n    EngineRanking.EVENT_RECREATE = RankingEvents.EVENT_RECREATE;\r\n    EngineRanking.EVENT_HIGHLIGHT_CHANGED = RankingEvents.EVENT_HIGHLIGHT_CHANGED;\r\n    return EngineRanking;\r\n}(ACellTableSection));\r\nexport default EngineRanking;\r\n//# sourceMappingURL=EngineRanking.js.map","import { range } from 'lineupengine';\r\nimport { isGroup } from '../model';\r\nimport { aria, cssClass, engineCssClass, SLOPEGRAPH_WIDTH } from '../styles';\r\nimport { EMode } from './interfaces';\r\nimport { forEachIndices, filterIndices } from '../model/internal';\r\nvar ItemSlope = /** @class */ (function () {\r\n    function ItemSlope(left, right, dataIndices) {\r\n        this.left = left;\r\n        this.right = right;\r\n        this.dataIndices = dataIndices;\r\n    }\r\n    ItemSlope.prototype.isSelected = function (selection) {\r\n        return this.dataIndices.length === 1 ? selection.has(this.dataIndices[0]) : this.dataIndices.some(function (s) { return selection.has(s); });\r\n    };\r\n    ItemSlope.prototype.update = function (path, width) {\r\n        path.setAttribute('data-i', String(this.dataIndices[0]));\r\n        path.setAttribute('class', cssClass('slope'));\r\n        path.setAttribute('d', \"M0,\" + this.left + \"L\" + width + \",\" + this.right);\r\n    };\r\n    return ItemSlope;\r\n}());\r\nvar GroupSlope = /** @class */ (function () {\r\n    function GroupSlope(left, right, dataIndices) {\r\n        this.left = left;\r\n        this.right = right;\r\n        this.dataIndices = dataIndices;\r\n    }\r\n    GroupSlope.prototype.isSelected = function (selection) {\r\n        return this.dataIndices.some(function (s) { return selection.has(s); });\r\n    };\r\n    GroupSlope.prototype.update = function (path, width) {\r\n        path.setAttribute('class', cssClass('group-slope'));\r\n        path.setAttribute('d', \"M0,\" + this.left[0] + \"L\" + width + \",\" + this.right[0] + \"L\" + width + \",\" + this.right[1] + \"L0,\" + this.left[1] + \"Z\");\r\n    };\r\n    return GroupSlope;\r\n}());\r\nvar SlopeGraph = /** @class */ (function () {\r\n    function SlopeGraph(header, body, id, ctx, options) {\r\n        if (options === void 0) { options = {}; }\r\n        this.header = header;\r\n        this.body = body;\r\n        this.id = id;\r\n        this.ctx = ctx;\r\n        this.leftSlopes = [];\r\n        // rendered row to one ore multiple slopes\r\n        this.rightSlopes = [];\r\n        this.pool = [];\r\n        this.scrollListener = null;\r\n        this.width = SLOPEGRAPH_WIDTH;\r\n        this.height = 0;\r\n        this.current = null;\r\n        this.chosen = new Set();\r\n        this.chosenSelectionOnly = new Set();\r\n        this._mode = EMode.ITEM;\r\n        this.node = header.ownerDocument.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        this.node.innerHTML = \"<g transform=\\\"translate(0,0)\\\"></g>\";\r\n        header.classList.add(cssClass('slopegraph-header'));\r\n        this._mode = options.mode === EMode.BAND ? EMode.BAND : EMode.ITEM;\r\n        this.initHeader(header);\r\n        body.classList.add(cssClass('slopegraph'));\r\n        this.body.style.height = \"1px\";\r\n        body.appendChild(this.node);\r\n    }\r\n    SlopeGraph.prototype.init = function () {\r\n        var _this = this;\r\n        this.hide(); // hide by default\r\n        var scroller = this.body.parentElement;\r\n        //sync scrolling of header and body\r\n        // use internals from lineup engine\r\n        var scroll = scroller.__le_scroller__;\r\n        var old = scroll.asInfo();\r\n        scroll.push('animation', this.scrollListener = function (act) {\r\n            if (Math.abs(old.top - act.top) < 5) {\r\n                return;\r\n            }\r\n            old = act;\r\n            _this.onScrolledVertically(act.top, act.height);\r\n        });\r\n    };\r\n    SlopeGraph.prototype.initHeader = function (header) {\r\n        var _this = this;\r\n        var active = cssClass('active');\r\n        header.innerHTML = \"<i title=\\\"Item\\\" class=\\\"\" + (this._mode === EMode.ITEM ? active : '') + \"\\\">\" + aria('Item') + \"</i>\\n        <i title=\\\"Band\\\" class=\\\"\" + (this._mode === EMode.BAND ? active : '') + \"\\\">\" + aria('Band') + \"</i>\";\r\n        var icons = Array.from(header.children);\r\n        icons.forEach(function (n, i) {\r\n            n.onclick = function (evt) {\r\n                evt.preventDefault();\r\n                evt.stopPropagation();\r\n                if (n.classList.contains(active)) {\r\n                    return;\r\n                }\r\n                _this.mode = i === 0 ? EMode.ITEM : EMode.BAND;\r\n                icons.forEach(function (d, j) { return d.classList.toggle(active, j === i); });\r\n            };\r\n        });\r\n    };\r\n    Object.defineProperty(SlopeGraph.prototype, \"mode\", {\r\n        get: function () {\r\n            return this._mode;\r\n        },\r\n        set: function (value) {\r\n            if (value === this._mode) {\r\n                return;\r\n            }\r\n            this._mode = value;\r\n            if (this.current) {\r\n                this.rebuild(this.current.leftRanking, this.current.left, this.current.leftContext, this.current.rightRanking, this.current.right, this.current.rightContext);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SlopeGraph.prototype, \"hidden\", {\r\n        get: function () {\r\n            return this.header.classList.contains(engineCssClass('loading'));\r\n        },\r\n        set: function (value) {\r\n            this.header.classList.toggle(engineCssClass('loading'), value);\r\n            this.body.classList.toggle(engineCssClass('loading'), value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SlopeGraph.prototype.hide = function () {\r\n        this.hidden = true;\r\n    };\r\n    SlopeGraph.prototype.show = function () {\r\n        var was = this.hidden;\r\n        this.hidden = false;\r\n        if (was) {\r\n            this.revalidate();\r\n        }\r\n    };\r\n    SlopeGraph.prototype.destroy = function () {\r\n        this.header.remove();\r\n        if (this.scrollListener) {\r\n            //sync scrolling of header and body\r\n            // use internals from lineup engine\r\n            var scroll_1 = this.body.parentElement.__le_scroller__;\r\n            scroll_1.remove(this.scrollListener);\r\n        }\r\n        this.body.remove();\r\n    };\r\n    SlopeGraph.prototype.rebuild = function (leftRanking, left, leftContext, rightRanking, right, rightContext) {\r\n        this.current = { leftRanking: leftRanking, left: left, leftContext: leftContext, right: right, rightRanking: rightRanking, rightContext: rightContext };\r\n        var lookup = this.prepareRightSlopes(right, rightContext);\r\n        this.computeSlopes(left, leftContext, lookup);\r\n        this.revalidate();\r\n    };\r\n    SlopeGraph.prototype.computeSlopes = function (left, leftContext, lookup) {\r\n        var _this = this;\r\n        var mode = this.mode;\r\n        var fakeGroups = new Map();\r\n        var createFakeGroup = function (first, group) {\r\n            var count = 0;\r\n            var height = 0;\r\n            // find all items in this group, assuming that they are in order\r\n            for (var i = first; i < left.length; ++i) {\r\n                var item = left[i];\r\n                if (isGroup(item) || item.group !== group) {\r\n                    break;\r\n                }\r\n                count++;\r\n                height += (leftContext.exceptionsLookup.get(i) || leftContext.defaultRowHeight);\r\n            }\r\n            var padded = height - leftContext.padding(first + count - 1);\r\n            var gr = group;\r\n            return { gr: gr, padded: padded, height: height };\r\n        };\r\n        var acc = 0;\r\n        this.leftSlopes = left.map(function (r, i) {\r\n            var height = (leftContext.exceptionsLookup.get(i) || leftContext.defaultRowHeight);\r\n            var padded = height - 0; //leftContext.padding(i);\r\n            var slopes = [];\r\n            var start = acc;\r\n            // shift by item height\r\n            acc += height;\r\n            var offset = 0;\r\n            var push = function (s, right, common, heightPerRow) {\r\n                if (common === void 0) { common = 1; }\r\n                if (heightPerRow === void 0) { heightPerRow = 0; }\r\n                // store slope in both\r\n                slopes.push(s);\r\n                forEachIndices(right.ref, function (r) { return _this.rightSlopes[r].push(s); });\r\n                // update the offset of myself and of the right side\r\n                right.offset += common * right.heightPerRow;\r\n                offset += common * heightPerRow;\r\n            };\r\n            var gr;\r\n            if (isGroup(r)) {\r\n                gr = r;\r\n            }\r\n            else {\r\n                var item = r;\r\n                var dataIndex = item.dataIndex;\r\n                var right = lookup.get(dataIndex);\r\n                if (!right) { // no match\r\n                    return slopes;\r\n                }\r\n                if (mode === EMode.ITEM) {\r\n                    var s = new ItemSlope(start + padded / 2, right.start + right.offset + right.heightPerRow / 2, [dataIndex]);\r\n                    push(s, right);\r\n                    return slopes;\r\n                }\r\n                if (fakeGroups.has(item.group)) {\r\n                    // already handled by the first one, take the fake slopes\r\n                    return fakeGroups.get(item.group);\r\n                }\r\n                var fakeGroup = createFakeGroup(i, item.group);\r\n                gr = fakeGroup.gr;\r\n                height = fakeGroup.height;\r\n                padded = fakeGroup.padded;\r\n                fakeGroups.set(item.group, slopes);\r\n            }\r\n            // free group items to share\r\n            var free = new Set(gr.order);\r\n            var heightPerRow = padded / gr.order.length;\r\n            forEachIndices(gr.order, function (d) {\r\n                if (!free.has(d)) {\r\n                    return; // already handled\r\n                }\r\n                free.delete(d);\r\n                var right = lookup.get(d);\r\n                if (!right) {\r\n                    return; // no matching\r\n                }\r\n                // find all of this group\r\n                var intersection = filterIndices(right.rows, function (r) { return free.delete(r); });\r\n                intersection.push(d); //self\r\n                var common = intersection.length;\r\n                var s;\r\n                if (common === 1) {\r\n                    s = new ItemSlope(start + offset + heightPerRow / 2, right.start + right.offset + right.heightPerRow / 2, [d]);\r\n                }\r\n                else if (mode === EMode.ITEM) {\r\n                    // fake item\r\n                    s = new ItemSlope(start + offset + heightPerRow * common / 2, right.start + right.offset + right.heightPerRow * common / 2, intersection);\r\n                }\r\n                else {\r\n                    s = new GroupSlope([start + offset, start + offset + heightPerRow * common], [right.start + right.offset, right.start + right.offset + right.heightPerRow * common], intersection);\r\n                }\r\n                push(s, right, common, heightPerRow);\r\n            });\r\n            return slopes;\r\n        });\r\n    };\r\n    SlopeGraph.prototype.prepareRightSlopes = function (right, rightContext) {\r\n        var lookup = new Map();\r\n        var mode = this.mode;\r\n        var fakeGroups = new Map();\r\n        var acc = 0;\r\n        this.rightSlopes = right.map(function (r, i) {\r\n            var height = (rightContext.exceptionsLookup.get(i) || rightContext.defaultRowHeight);\r\n            var padded = height - 0; //rightContext.padding(i);\r\n            var start = acc;\r\n            acc += height;\r\n            var slopes = [];\r\n            var base = {\r\n                start: start,\r\n                offset: 0,\r\n                ref: [i]\r\n            };\r\n            if (isGroup(r)) {\r\n                var p_1 = Object.assign(base, {\r\n                    rows: Array.from(r.order),\r\n                    heightPerRow: padded / r.order.length,\r\n                    group: r\r\n                });\r\n                forEachIndices(r.order, function (ri) { return lookup.set(ri, p_1); });\r\n                return slopes;\r\n            }\r\n            // item\r\n            var item = r;\r\n            var dataIndex = r.dataIndex;\r\n            var p = Object.assign(base, {\r\n                rows: [dataIndex],\r\n                heightPerRow: padded,\r\n                group: item.group\r\n            });\r\n            if (mode === EMode.ITEM) {\r\n                lookup.set(dataIndex, p);\r\n                return slopes;\r\n            }\r\n            // forced band mode\r\n            // merge with the 'ueber' band\r\n            if (!fakeGroups.has(item.group)) {\r\n                p.heightPerRow = height; // include padding\r\n                // TODO just support uniform item height\r\n                fakeGroups.set(item.group, p);\r\n            }\r\n            else { // reuse old\r\n                p = fakeGroups.get(item.group);\r\n                p.rows.push(dataIndex);\r\n                p.ref.push(i);\r\n            }\r\n            lookup.set(dataIndex, p);\r\n            return slopes;\r\n        });\r\n        return lookup;\r\n    };\r\n    SlopeGraph.prototype.revalidate = function () {\r\n        if (!this.current || this.hidden) {\r\n            return;\r\n        }\r\n        var p = this.body.parentElement;\r\n        this.onScrolledVertically(p.scrollTop, p.clientHeight);\r\n    };\r\n    SlopeGraph.prototype.highlight = function (dataIndex) {\r\n        var highlight = engineCssClass('highlighted');\r\n        var old = this.body.querySelector(\"[data-i].\" + highlight);\r\n        if (old) {\r\n            old.classList.remove(highlight);\r\n        }\r\n        if (dataIndex < 0) {\r\n            return;\r\n        }\r\n        var item = this.body.querySelector(\"[data-i=\\\"\" + dataIndex + \"\\\"]\");\r\n        if (item) {\r\n            item.classList.add(highlight);\r\n        }\r\n        return item != null;\r\n    };\r\n    SlopeGraph.prototype.onScrolledVertically = function (scrollTop, clientHeight) {\r\n        if (!this.current) {\r\n            return;\r\n        }\r\n        // which lines are currently shown\r\n        var _a = this.current, leftContext = _a.leftContext, rightContext = _a.rightContext;\r\n        var left = range(scrollTop, clientHeight, leftContext.defaultRowHeight, leftContext.exceptions, leftContext.numberOfRows);\r\n        var right = range(scrollTop, clientHeight, rightContext.defaultRowHeight, rightContext.exceptions, rightContext.numberOfRows);\r\n        var start = Math.min(left.firstRowPos, right.firstRowPos);\r\n        var end = Math.max(left.endPos, right.endPos);\r\n        // move to right position\r\n        this.body.style.transform = \"translate(0, \" + start.toFixed(0) + \"px)\";\r\n        this.body.style.height = (end - start).toFixed(0) + \"px\";\r\n        (this.node.firstElementChild).setAttribute('transform', \"translate(0,-\" + start.toFixed(0) + \")\");\r\n        this.chosen = this.choose(left.first, left.last, right.first, right.last);\r\n        this.render(this.chosen, this.chooseSelection(left.first, left.last, this.chosen));\r\n    };\r\n    SlopeGraph.prototype.choose = function (leftVisibleFirst, leftVisibleLast, rightVisibleFirst, rightVisibleLast) {\r\n        // assume no separate scrolling\r\n        var slopes = new Set();\r\n        for (var i = leftVisibleFirst; i <= leftVisibleLast; ++i) {\r\n            for (var _i = 0, _a = this.leftSlopes[i]; _i < _a.length; _i++) {\r\n                var s = _a[_i];\r\n                slopes.add(s);\r\n            }\r\n        }\r\n        for (var i = rightVisibleFirst; i <= rightVisibleLast; ++i) {\r\n            for (var _b = 0, _c = this.rightSlopes[i]; _b < _c.length; _b++) {\r\n                var s = _c[_b];\r\n                slopes.add(s);\r\n            }\r\n        }\r\n        return slopes;\r\n    };\r\n    SlopeGraph.prototype.chooseSelection = function (leftVisibleFirst, leftVisibleLast, alreadyVisible) {\r\n        var slopes = new Set();\r\n        // ensure selected slopes are always part of\r\n        var p = this.ctx.provider;\r\n        if (p.getSelection().length === 0) {\r\n            return slopes;\r\n        }\r\n        var selectionLookup = { has: function (dataIndex) { return p.isSelected(dataIndex); } };\r\n        // try all not visible ones\r\n        for (var i = 0; i < leftVisibleFirst; ++i) {\r\n            for (var _i = 0, _a = this.leftSlopes[i]; _i < _a.length; _i++) {\r\n                var s = _a[_i];\r\n                if (s.isSelected(selectionLookup) && !alreadyVisible.has(s)) {\r\n                    slopes.add(s);\r\n                }\r\n            }\r\n        }\r\n        for (var i = leftVisibleLast + 1; i < this.leftSlopes.length; ++i) {\r\n            for (var _b = 0, _c = this.leftSlopes[i]; _b < _c.length; _b++) {\r\n                var s = _c[_b];\r\n                if (s.isSelected(selectionLookup) && !alreadyVisible.has(s)) {\r\n                    slopes.add(s);\r\n                }\r\n            }\r\n        }\r\n        return slopes;\r\n    };\r\n    SlopeGraph.prototype.updatePath = function (p, g, s, width, selection) {\r\n        s.update(p, width);\r\n        p.__data__ = s; // data binding\r\n        var selected = s.isSelected(selection);\r\n        p.classList.toggle(cssClass('selected'), selected);\r\n        if (selected) {\r\n            g.appendChild(p); // to put it on top\r\n        }\r\n    };\r\n    SlopeGraph.prototype.render = function (visible, selectionSlopes) {\r\n        var _this = this;\r\n        var g = this.node.firstElementChild;\r\n        var width = g.ownerSVGElement.getBoundingClientRect().width;\r\n        var paths = this.matchLength(visible.size + selectionSlopes.size, g);\r\n        var p = this.ctx.provider;\r\n        var selectionLookup = { has: function (dataIndex) { return p.isSelected(dataIndex); } };\r\n        // update paths\r\n        var i = 0;\r\n        var updatePath = function (s) {\r\n            _this.updatePath(paths[i++], g, s, width, selectionLookup);\r\n        };\r\n        visible.forEach(updatePath);\r\n        selectionSlopes.forEach(updatePath);\r\n    };\r\n    SlopeGraph.prototype.addPath = function (g) {\r\n        var _this = this;\r\n        var elem = this.pool.pop();\r\n        if (elem) {\r\n            g.appendChild(elem);\r\n            return elem;\r\n        }\r\n        var path = g.ownerDocument.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n        path.onclick = function (evt) {\r\n            // d3 style\r\n            var s = path.__data__;\r\n            var p = _this.ctx.provider;\r\n            var ids = s.dataIndices;\r\n            if (evt.ctrlKey) {\r\n                ids.forEach(function (id) { return p.toggleSelection(id, true); });\r\n            }\r\n            else {\r\n                // either unset or set depending on the first state\r\n                var isSelected = p.isSelected(ids[0]);\r\n                p.setSelection(isSelected ? [] : ids);\r\n            }\r\n        };\r\n        g.appendChild(path);\r\n        return path;\r\n    };\r\n    SlopeGraph.prototype.matchLength = function (slopes, g) {\r\n        var paths = Array.from(g.children);\r\n        for (var i = slopes; i < paths.length; ++i) {\r\n            var elem = paths[i];\r\n            this.pool.push(elem);\r\n            elem.remove();\r\n        }\r\n        for (var i = paths.length; i < slopes; ++i) {\r\n            paths.push(this.addPath(g));\r\n        }\r\n        return paths;\r\n    };\r\n    SlopeGraph.prototype.updateSelection = function (selectedDataIndices) {\r\n        var g = this.node.firstElementChild;\r\n        var paths = Array.from(g.children);\r\n        var openDataIndices = new Set(selectedDataIndices);\r\n        if (selectedDataIndices.size === 0) {\r\n            // clear\r\n            for (var _i = 0, paths_1 = paths; _i < paths_1.length; _i++) {\r\n                var p = paths_1[_i];\r\n                var s = p.__data__;\r\n                p.classList.toggle(cssClass('selected'), false);\r\n                if (this.chosenSelectionOnly.has(s)) {\r\n                    p.remove();\r\n                }\r\n            }\r\n            this.chosenSelectionOnly.clear();\r\n            return;\r\n        }\r\n        for (var _a = 0, paths_2 = paths; _a < paths_2.length; _a++) {\r\n            var p = paths_2[_a];\r\n            var s = p.__data__;\r\n            var selected = s.isSelected(selectedDataIndices);\r\n            p.classList.toggle(cssClass('selected'), selected);\r\n            if (!selected) {\r\n                if (this.chosenSelectionOnly.delete(s)) {\r\n                    // was only needed because of the selection\r\n                    p.remove();\r\n                }\r\n                continue;\r\n            }\r\n            g.appendChild(p); // to put it on top\r\n            // remove already handled\r\n            s.dataIndices.forEach(function (d) { return openDataIndices.delete(d); });\r\n        }\r\n        if (openDataIndices.size === 0) {\r\n            return;\r\n        }\r\n        // find and add missing slopes\r\n        var width = g.ownerSVGElement.getBoundingClientRect().width;\r\n        for (var _b = 0, _c = this.leftSlopes; _b < _c.length; _b++) {\r\n            var ss = _c[_b];\r\n            for (var _d = 0, ss_1 = ss; _d < ss_1.length; _d++) {\r\n                var s = ss_1[_d];\r\n                if (this.chosen.has(s) || this.chosenSelectionOnly.has(s) || !s.isSelected(openDataIndices)) {\r\n                    // not visible or not selected -> skip\r\n                    continue;\r\n                }\r\n                // create new path for it\r\n                this.chosenSelectionOnly.add(s);\r\n                var p = this.addPath(g);\r\n                this.updatePath(p, g, s, width, openDataIndices);\r\n            }\r\n        }\r\n    };\r\n    return SlopeGraph;\r\n}());\r\nexport default SlopeGraph;\r\n//# sourceMappingURL=SlopeGraph.js.map","import * as tslib_1 from \"tslib\";\r\nimport { MultiTableRowRenderer, nonUniformContext } from 'lineupengine';\r\nimport { AEventDispatcher, round, suffix } from '../internal';\r\nimport { isGroup, Ranking } from '../model';\r\nimport { DataProvider } from '../provider';\r\nimport { isSummaryGroup, groupEndLevel } from '../provider/internal';\r\nimport { chooseGroupRenderer, chooseRenderer, chooseSummaryRenderer, getPossibleRenderer } from '../renderer/renderers';\r\nimport { cssClass, engineCssClass } from '../styles';\r\nimport DialogManager from './dialogs/DialogManager';\r\nimport domElementCache from './domElementCache';\r\nimport EngineRanking from './EngineRanking';\r\nimport { EMode } from './interfaces';\r\nimport SlopeGraph from './SlopeGraph';\r\nvar EngineRenderer = /** @class */ (function (_super) {\r\n    tslib_1.__extends(EngineRenderer, _super);\r\n    function EngineRenderer(data, parent, options) {\r\n        var _this = _super.call(this) || this;\r\n        _this.data = data;\r\n        _this.rankings = [];\r\n        _this.slopeGraphs = [];\r\n        _this.updateAbles = [];\r\n        _this.zoomFactor = 1;\r\n        _this.idPrefix = \"lu\" + Math.random().toString(36).slice(-8).substr(0, 3); //generate a random string with length3;\r\n        _this.enabledHighlightListening = false;\r\n        _this.options = options;\r\n        _this.node = parent.ownerDocument.createElement('main');\r\n        _this.node.id = _this.idPrefix;\r\n        // FIXME inline\r\n        _this.node.classList.toggle(cssClass('whole-hover'), options.expandLineOnHover);\r\n        parent.appendChild(_this.node);\r\n        var dialogManager = new DialogManager({\r\n            doc: parent.ownerDocument,\r\n            livePreviews: options.livePreviews,\r\n            onDialogBackgroundClick: options.onDialogBackgroundClick,\r\n        });\r\n        _this.forward.apply(_this, [dialogManager].concat(suffix('.main', EngineRenderer.EVENT_DIALOG_OPENED, EngineRenderer.EVENT_DIALOG_CLOSED)));\r\n        parent.appendChild(dialogManager.node);\r\n        _this.ctx = {\r\n            idPrefix: _this.idPrefix,\r\n            document: parent.ownerDocument,\r\n            provider: data,\r\n            tasks: data.getTaskExecutor(),\r\n            dialogManager: dialogManager,\r\n            resolveToolbarActions: function (col, keys) { return _this.options.resolveToolbarActions(col, keys, _this.options.toolbarActions); },\r\n            resolveToolbarDialogAddons: function (col, keys) { return _this.options.resolveToolbarDialogAddons(col, keys, _this.options.toolbarDialogAddons); },\r\n            flags: _this.options.flags,\r\n            asElement: domElementCache(parent.ownerDocument),\r\n            renderer: function (col, imposer) {\r\n                var r = chooseRenderer(col, _this.options.renderers);\r\n                return r.create(col, _this.ctx, imposer);\r\n            },\r\n            groupRenderer: function (col, imposer) {\r\n                var r = chooseGroupRenderer(col, _this.options.renderers);\r\n                return r.createGroup(col, _this.ctx, imposer);\r\n            },\r\n            summaryRenderer: function (col, interactive, imposer) {\r\n                var r = chooseSummaryRenderer(col, _this.options.renderers);\r\n                return r.createSummary(col, _this.ctx, interactive, imposer);\r\n            },\r\n            createRenderer: function (col, imposer) {\r\n                var single = this.renderer(col, imposer);\r\n                var group = this.groupRenderer(col, imposer);\r\n                var summary = options.summaryHeader ? this.summaryRenderer(col, false, imposer) : null;\r\n                return {\r\n                    single: single,\r\n                    group: group,\r\n                    summary: summary,\r\n                    singleId: col.getRenderer(),\r\n                    groupId: col.getGroupRenderer(),\r\n                    summaryId: col.getSummaryRenderer(),\r\n                    singleTemplate: null,\r\n                    groupTemplate: null,\r\n                    summaryTemplate: null\r\n                };\r\n            },\r\n            getPossibleRenderer: function (col) { return getPossibleRenderer(col, _this.options.renderers, _this.options.canRender); },\r\n            colWidth: function (col) { return !col.isVisible() ? 0 : col.getWidth(); },\r\n            caches: {\r\n                toolbar: new Map(),\r\n                toolbarAddons: new Map()\r\n            }\r\n        };\r\n        _this.table = new MultiTableRowRenderer(_this.node, _this.idPrefix);\r\n        {\r\n            // helper object for better resizing experience\r\n            var footer = _this.table.node.querySelector(\".\" + engineCssClass('body') + \" .\" + engineCssClass('footer'));\r\n            var copy = footer.cloneNode(true);\r\n            copy.classList.add(cssClass('resize-helper'));\r\n            footer.insertAdjacentElement('afterend', copy);\r\n        }\r\n        //apply rules\r\n        {\r\n            _this.style.addRule('lineup_rowPadding0', \"\\n        .\" + _this.style.cssClasses.tr, {\r\n                marginTop: options.rowPadding + \"px\"\r\n            });\r\n            for (var level = 0; level < 4; ++level) {\r\n                _this.style.addRule(\"lineup_groupPadding\" + level, \"\\n        .\" + _this.style.cssClasses.tr + \"[data-meta~=last\" + (level === 0 ? '' : level) + \"]\", {\r\n                    marginBottom: options.groupPadding * (level + 1) + \"px\"\r\n                });\r\n            }\r\n            _this.style.addRule('lineup_rowPaddingAgg0', \"\\n        .\" + cssClass('agg-level') + \"::after\", {\r\n                top: \"-\" + options.rowPadding + \"px\"\r\n            });\r\n            for (var level = 1; level <= 4; ++level) {\r\n                _this.style.addRule(\"lineup_rowPaddingAgg\" + level, \"\\n        .\" + cssClass('agg-level') + \"[data-level='\" + level + \"']::after\", {\r\n                    top: \"-\" + (options.rowPadding + options.groupPadding) + \"px\"\r\n                });\r\n            }\r\n            // FIXME flat\r\n            _this.style.addRule('lineup_rotation', \"\\n       #\" + _this.idPrefix + \".\" + cssClass('rotated-label') + \" .\" + cssClass('label') + \".\" + cssClass('rotated'), {\r\n                transform: \"rotate(\" + -_this.options.labelRotation + \"deg)\"\r\n            });\r\n            var toDisable = [];\r\n            if (!_this.options.flags.advancedRankingFeatures) {\r\n                toDisable.push('ranking');\r\n            }\r\n            if (!_this.options.flags.advancedModelFeatures) {\r\n                toDisable.push('model');\r\n            }\r\n            if (!_this.options.flags.advancedUIFeatures) {\r\n                toDisable.push('ui');\r\n            }\r\n            if (toDisable.length > 0) {\r\n                _this.style.addRule('lineup_feature_disable', \"\\n        \" + toDisable.map(function (d) { return \".\" + cssClass('feature') + \"-\" + d + \".\" + cssClass('feature-advanced'); }).join(', '), {\r\n                    display: 'none !important'\r\n                });\r\n            }\r\n        }\r\n        _this.initProvider(data);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(EngineRenderer.prototype, \"style\", {\r\n        get: function () {\r\n            return this.table.style;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    EngineRenderer.prototype.zoomOut = function () {\r\n        this.zoomFactor = Math.max(this.zoomFactor - 0.1, 0.5);\r\n        this.updateZoomFactor();\r\n        this.update();\r\n    };\r\n    EngineRenderer.prototype.zoomIn = function () {\r\n        this.zoomFactor = Math.min(this.zoomFactor + 0.1, 2.0);\r\n        this.updateZoomFactor();\r\n        this.update();\r\n    };\r\n    EngineRenderer.prototype.updateZoomFactor = function () {\r\n        var body = this.node.querySelector('main');\r\n        body.style.fontSize = this.zoomFactor * 100 + \"%\";\r\n    };\r\n    EngineRenderer.prototype.pushUpdateAble = function (updateAble) {\r\n        this.updateAbles.push(updateAble);\r\n    };\r\n    EngineRenderer.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([EngineRenderer.EVENT_HIGHLIGHT_CHANGED, EngineRenderer.EVENT_DIALOG_OPENED, EngineRenderer.EVENT_DIALOG_CLOSED]);\r\n    };\r\n    EngineRenderer.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    EngineRenderer.prototype.setDataProvider = function (data) {\r\n        this.takeDownProvider();\r\n        this.data = data;\r\n        this.ctx.provider = data;\r\n        this.ctx.tasks = data.getTaskExecutor();\r\n        this.initProvider(data);\r\n    };\r\n    EngineRenderer.prototype.takeDownProvider = function () {\r\n        var _this = this;\r\n        this.data.on(DataProvider.EVENT_SELECTION_CHANGED + \".body\", null);\r\n        this.data.on(DataProvider.EVENT_ADD_RANKING + \".body\", null);\r\n        this.data.on(DataProvider.EVENT_REMOVE_RANKING + \".body\", null);\r\n        this.data.on(DataProvider.EVENT_GROUP_AGGREGATION_CHANGED + \".body\", null);\r\n        this.data.on(DataProvider.EVENT_SHOWTOPN_CHANGED + \".body\", null);\r\n        this.data.on(DataProvider.EVENT_JUMP_TO_NEAREST + \".body\", null);\r\n        this.data.on(DataProvider.EVENT_BUSY + \".body\", null);\r\n        this.rankings.forEach(function (r) { return _this.table.remove(r); });\r\n        this.rankings.splice(0, this.rankings.length);\r\n        this.slopeGraphs.forEach(function (s) { return _this.table.remove(s); });\r\n        this.slopeGraphs.splice(0, this.slopeGraphs.length);\r\n    };\r\n    EngineRenderer.prototype.initProvider = function (data) {\r\n        var _this = this;\r\n        data.on(DataProvider.EVENT_SELECTION_CHANGED + \".body\", function () { return _this.updateSelection(data.getSelection()); });\r\n        data.on(DataProvider.EVENT_ADD_RANKING + \".body\", function (ranking) {\r\n            _this.addRanking(ranking);\r\n        });\r\n        data.on(DataProvider.EVENT_REMOVE_RANKING + \".body\", function (ranking) {\r\n            _this.removeRanking(ranking);\r\n        });\r\n        data.on(DataProvider.EVENT_GROUP_AGGREGATION_CHANGED + \".body\", function (ranking) {\r\n            _this.update(_this.rankings.filter(function (r) { return r.ranking === ranking; }));\r\n        });\r\n        data.on(DataProvider.EVENT_SHOWTOPN_CHANGED + \".body\", function () {\r\n            _this.update(_this.rankings);\r\n        });\r\n        data.on(DataProvider.EVENT_JUMP_TO_NEAREST + \".body\", function (indices) {\r\n            _this.setHighlightToNearest(indices, true);\r\n        });\r\n        this.ctx.provider = data;\r\n        this.data.getRankings().forEach(function (r) { return _this.addRanking(r); });\r\n    };\r\n    EngineRenderer.prototype.updateSelection = function (dataIndices) {\r\n        var s = new Set(dataIndices);\r\n        this.rankings.forEach(function (r) { return r.updateSelection(s); });\r\n        this.slopeGraphs.forEach(function (r) { return r.updateSelection(s); });\r\n    };\r\n    EngineRenderer.prototype.updateHist = function (ranking, col) {\r\n        if (!this.options.summaryHeader) {\r\n            return;\r\n        }\r\n        var rankings = ranking ? [ranking] : this.rankings;\r\n        for (var _i = 0, rankings_1 = rankings; _i < rankings_1.length; _i++) {\r\n            var r = rankings_1[_i];\r\n            if (col) {\r\n                // single update\r\n                r.updateHeaderOf(col);\r\n            }\r\n            else {\r\n                r.updateHeaders();\r\n            }\r\n        }\r\n        this.updateUpdateAbles();\r\n    };\r\n    EngineRenderer.prototype.addRanking = function (ranking) {\r\n        var _this = this;\r\n        if (this.rankings.length > 0) {\r\n            // add slope graph first\r\n            var s = this.table.pushSeparator(function (header, body) { return new SlopeGraph(header, body, ranking.id + \"S\", _this.ctx, {\r\n                mode: _this.options.defaultSlopeGraphMode === 'band' ? EMode.BAND : EMode.ITEM\r\n            }); });\r\n            this.slopeGraphs.push(s);\r\n        }\r\n        var r = this.table.pushTable(function (header, body, tableId, style) { return new EngineRanking(ranking, header, body, tableId, style, _this.ctx, {\r\n            animation: _this.options.animated,\r\n            customRowUpdate: _this.options.customRowUpdate || (function () { return undefined; }),\r\n            levelOfDetail: _this.options.levelOfDetail || (function () { return 'high'; }),\r\n            flags: _this.options.flags\r\n        }); });\r\n        r.on(EngineRanking.EVENT_WIDTH_CHANGED, function () {\r\n            _this.updateRotatedHeaderState();\r\n            _this.table.widthChanged();\r\n        });\r\n        r.on(EngineRanking.EVENT_UPDATE_DATA, function () { return _this.update([r]); });\r\n        r.on(EngineRanking.EVENT_RECREATE, function () { return _this.updateUpdateAbles(); });\r\n        this.forward(r, EngineRanking.EVENT_HIGHLIGHT_CHANGED);\r\n        if (this.enabledHighlightListening) {\r\n            r.enableHighlightListening(true);\r\n        }\r\n        ranking.on(suffix('.renderer', Ranking.EVENT_ORDER_CHANGED), function () { return _this.updateHist(r); });\r\n        this.rankings.push(r);\r\n        this.update([r]);\r\n    };\r\n    EngineRenderer.prototype.updateRotatedHeaderState = function () {\r\n        if (this.options.labelRotation === 0) {\r\n            return;\r\n        }\r\n        var l = this.node.querySelector(\".\" + cssClass('label') + \".\" + cssClass('rotated'));\r\n        this.node.classList.toggle(cssClass('rotated-label'), Boolean(l));\r\n    };\r\n    EngineRenderer.prototype.removeRanking = function (ranking) {\r\n        if (!ranking) {\r\n            // remove all\r\n            this.rankings.splice(0, this.rankings.length);\r\n            this.slopeGraphs.splice(0, this.slopeGraphs.length);\r\n            this.table.clear();\r\n            return;\r\n        }\r\n        var index = this.rankings.findIndex(function (r) { return r.ranking === ranking; });\r\n        if (index < 0) {\r\n            return; // error\r\n        }\r\n        var section = this.rankings.splice(index, 1)[0];\r\n        var slope = this.slopeGraphs.splice(index === 0 ? index : index - 1, 1)[0];\r\n        this.table.remove(section);\r\n        if (slope) {\r\n            this.table.remove(slope);\r\n        }\r\n    };\r\n    EngineRenderer.prototype.update = function (rankings) {\r\n        var _this = this;\r\n        if (rankings === void 0) { rankings = this.rankings; }\r\n        // visible and has parent = part of dom\r\n        rankings = rankings.filter(function (d) { return !d.hidden && d.body.parentElement; });\r\n        if (rankings.length === 0) {\r\n            return;\r\n        }\r\n        var round2 = function (v) { return round(v, 2); };\r\n        var rowPadding = round2(this.zoomFactor * this.options.rowPadding);\r\n        var groupPadding = round2(this.zoomFactor * this.options.groupPadding);\r\n        var heightsFor = function (ranking, data) {\r\n            if (_this.options.dynamicHeight) {\r\n                var impl_1 = _this.options.dynamicHeight(data, ranking);\r\n                var f_1 = function (v, d) { return typeof v === 'number' ? v : v(d); };\r\n                if (impl_1) {\r\n                    return {\r\n                        defaultHeight: round2(_this.zoomFactor * impl_1.defaultHeight),\r\n                        height: function (d) { return round2(_this.zoomFactor * f_1(impl_1.height, d)); },\r\n                        padding: function (d) { return round2(_this.zoomFactor * f_1(impl_1.padding, d)); },\r\n                    };\r\n                }\r\n            }\r\n            var item = round2(_this.zoomFactor * _this.options.rowHeight);\r\n            var group = round2(_this.zoomFactor * _this.options.groupHeight);\r\n            return {\r\n                defaultHeight: item,\r\n                height: function (d) { return isGroup(d) ? group : item; },\r\n                padding: rowPadding\r\n            };\r\n        };\r\n        var _loop_1 = function (r) {\r\n            var grouped = r.groupData();\r\n            // inline with creating the groupData\r\n            var _a = heightsFor(r.ranking, grouped), height = _a.height, defaultHeight = _a.defaultHeight, padding = _a.padding;\r\n            var strategy = this_1.data.getAggregationStrategy();\r\n            var topNGetter = function (group) { return _this.data.getTopNAggregated(r.ranking, group); };\r\n            // inline and create manually for better performance\r\n            var rowContext = nonUniformContext(grouped.map(height), defaultHeight, function (index) {\r\n                var pad = (typeof padding === 'number' ? padding : padding(grouped[index] || null));\r\n                var v = grouped[index];\r\n                if (index < 0 || !v || (isGroup(v) && isSummaryGroup(v, strategy, topNGetter))) {\r\n                    return pad;\r\n                }\r\n                return pad + groupPadding * groupEndLevel(v, topNGetter);\r\n            });\r\n            r.render(grouped, rowContext);\r\n        };\r\n        var this_1 = this;\r\n        for (var _i = 0, rankings_2 = rankings; _i < rankings_2.length; _i++) {\r\n            var r = rankings_2[_i];\r\n            _loop_1(r);\r\n        }\r\n        this.updateSlopeGraphs(rankings);\r\n        this.updateUpdateAbles();\r\n        this.updateRotatedHeaderState();\r\n        this.table.widthChanged();\r\n    };\r\n    EngineRenderer.prototype.updateUpdateAbles = function () {\r\n        for (var _i = 0, _a = this.updateAbles; _i < _a.length; _i++) {\r\n            var u = _a[_i];\r\n            u(this.ctx);\r\n        }\r\n    };\r\n    EngineRenderer.prototype.updateSlopeGraphs = function (rankings) {\r\n        var _this = this;\r\n        if (rankings === void 0) { rankings = this.rankings; }\r\n        var indices = new Set(rankings.map(function (d) { return _this.rankings.indexOf(d); }));\r\n        for (var i = 0; i < this.slopeGraphs.length; ++i) {\r\n            var s = this.slopeGraphs[i];\r\n            if (s.hidden) {\r\n                return;\r\n            }\r\n            var left = i;\r\n            var right = i + 1;\r\n            if (!indices.has(left) && !indices.has(right)) {\r\n                return;\r\n            }\r\n            var leftRanking = this.rankings[left];\r\n            var rightRanking = this.rankings[right];\r\n            s.rebuild(leftRanking.ranking, leftRanking.currentData, leftRanking.context, rightRanking.ranking, rightRanking.currentData, rightRanking.context);\r\n        }\r\n    };\r\n    EngineRenderer.prototype.setHighlight = function (dataIndex, scrollIntoView) {\r\n        var found = this.rankings.map(function (r) { return r.setHighlight(dataIndex); });\r\n        this.fire(EngineRenderer.EVENT_HIGHLIGHT_CHANGED, dataIndex);\r\n        if (this.rankings.length === 0 || dataIndex < 0) {\r\n            return false;\r\n        }\r\n        if (!scrollIntoView) {\r\n            return found[0];\r\n        }\r\n        return this.rankings[0].scrollIntoView(dataIndex);\r\n    };\r\n    EngineRenderer.prototype.setHighlightToNearest = function (dataIndices, scrollIntoView) {\r\n        if (this.rankings.length === 0) {\r\n            return false;\r\n        }\r\n        var nearest = this.rankings[0].findNearest(dataIndices);\r\n        if (nearest >= 0) {\r\n            return this.setHighlight(nearest, scrollIntoView);\r\n        }\r\n        return false;\r\n    };\r\n    EngineRenderer.prototype.getHighlight = function () {\r\n        for (var _i = 0, _a = this.rankings; _i < _a.length; _i++) {\r\n            var ranking = _a[_i];\r\n            var h = ranking.getHighlight();\r\n            if (h >= 0) {\r\n                return h;\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n    EngineRenderer.prototype.enableHighlightListening = function (enable) {\r\n        for (var _i = 0, _a = this.rankings; _i < _a.length; _i++) {\r\n            var ranking = _a[_i];\r\n            ranking.enableHighlightListening(enable);\r\n        }\r\n        this.enabledHighlightListening = enable;\r\n    };\r\n    EngineRenderer.prototype.destroy = function () {\r\n        this.takeDownProvider();\r\n        this.table.destroy();\r\n        this.node.remove();\r\n    };\r\n    EngineRenderer.EVENT_HIGHLIGHT_CHANGED = EngineRanking.EVENT_HIGHLIGHT_CHANGED;\r\n    EngineRenderer.EVENT_DIALOG_OPENED = DialogManager.EVENT_DIALOG_OPENED;\r\n    EngineRenderer.EVENT_DIALOG_CLOSED = DialogManager.EVENT_DIALOG_CLOSED;\r\n    return EngineRenderer;\r\n}(AEventDispatcher));\r\nexport default EngineRenderer;\r\n//# sourceMappingURL=EngineRenderer.js.map","/**\r\n * caches parsing of html strings in a dom element cache\r\n * @param doc the doc to create the elements under\r\n * @internal\r\n */\r\nexport default function domElementCache(doc) {\r\n    var cache = new Map();\r\n    var helper = doc.createElement('div');\r\n    return function (html) {\r\n        if (cache.has(html)) {\r\n            return cache.get(html).cloneNode(true);\r\n        }\r\n        helper.innerHTML = html;\r\n        var node = helper.firstElementChild;\r\n        // keep a copy\r\n        cache.set(html, node.cloneNode(true));\r\n        return node;\r\n    };\r\n}\r\n//# sourceMappingURL=domElementCache.js.map","import * as tslib_1 from \"tslib\";\r\nimport { cssClass } from '../../styles';\r\nimport APopup from './APopup';\r\n/** @internal */\r\nvar ChooseRankingDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(ChooseRankingDialog, _super);\r\n    function ChooseRankingDialog(items, dialog) {\r\n        var _this = _super.call(this, dialog) || this;\r\n        _this.items = items;\r\n        return _this;\r\n    }\r\n    ChooseRankingDialog.prototype.build = function (node) {\r\n        node.classList.add(cssClass('more-options'), cssClass('choose-options'));\r\n        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            node.appendChild(item);\r\n        }\r\n    };\r\n    return ChooseRankingDialog;\r\n}(APopup));\r\nexport default ChooseRankingDialog;\r\n//# sourceMappingURL=ChooseRankingDialog.js.map","import * as tslib_1 from \"tslib\";\r\nimport { clear, AEventDispatcher } from '../../internal';\r\nimport { cssClass } from '../../styles';\r\nfunction isItem(v) {\r\n    return v.id !== undefined;\r\n}\r\nvar SearchBox = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SearchBox, _super);\r\n    function SearchBox(options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this) || this;\r\n        _this.options = {\r\n            formatItem: function (item) { return item.text; },\r\n            doc: document,\r\n            placeholder: 'Select...',\r\n        };\r\n        _this.values = [];\r\n        Object.assign(_this.options, options);\r\n        _this.node = _this.options.doc.createElement('div');\r\n        _this.node.classList.add(cssClass('search'));\r\n        _this.node.innerHTML = \"<input class=\\\"\" + cssClass('search-input') + \"\\\" type=\\\"search\\\" placeholder=\\\"\" + _this.options.placeholder + \"\\\">\\n    <ul class=\\\"\" + cssClass('search-list') + \"\\\"></ul>\";\r\n        _this.search = _this.node.firstElementChild;\r\n        _this.body = _this.node.lastElementChild;\r\n        _this.search.onfocus = function () { return _this.focus(); };\r\n        _this.search.onblur = function () { return _this.blur(); };\r\n        _this.search.oninput = function () { return _this.filter(); };\r\n        _this.search.onkeydown = function (evt) { return _this.handleKey(evt); };\r\n        _this.itemTemplate = _this.options.doc.createElement('li');\r\n        _this.itemTemplate.classList.add(cssClass('search-item'));\r\n        _this.itemTemplate.innerHTML = \"<span></span>\";\r\n        _this.groupTemplate = _this.options.doc.createElement('li');\r\n        _this.groupTemplate.classList.add(cssClass('search-group'));\r\n        _this.groupTemplate.innerHTML = \"<span></span><ul></ul>\";\r\n        return _this;\r\n    }\r\n    Object.defineProperty(SearchBox.prototype, \"data\", {\r\n        get: function () {\r\n            return this.values;\r\n        },\r\n        set: function (data) {\r\n            this.values = data;\r\n            clear(this.body);\r\n            this.buildDialog(this.body, this.values);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SearchBox.prototype.buildDialog = function (node, values) {\r\n        var _this = this;\r\n        var _loop_1 = function (v) {\r\n            var li;\r\n            if (isItem(v)) {\r\n                li = this_1.itemTemplate.cloneNode(true);\r\n                li.onmousedown = function (evt) {\r\n                    // see https://stackoverflow.com/questions/10652852/jquery-fire-click-before-blur-event#10653160\r\n                    evt.preventDefault();\r\n                };\r\n                li.onclick = function () { return _this.select(v); };\r\n                li.onmouseenter = function () { return _this.highlighted = li; };\r\n                li.onmouseleave = function () { return _this.highlighted = null; };\r\n                node.appendChild(li);\r\n            }\r\n            else {\r\n                li = this_1.groupTemplate.cloneNode(true);\r\n                this_1.buildDialog(li.lastElementChild, v.children);\r\n                node.appendChild(li);\r\n            }\r\n            var item = li.firstElementChild;\r\n            item.innerHTML = this_1.options.formatItem(v, item);\r\n        };\r\n        var this_1 = this;\r\n        for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\r\n            var v = values_1[_i];\r\n            _loop_1(v);\r\n        }\r\n    };\r\n    SearchBox.prototype.handleKey = function (evt) {\r\n        var KEYS = {\r\n            ESC: 27,\r\n            ENTER: 13,\r\n            UP: 38,\r\n            DOWN: 40\r\n        };\r\n        switch (evt.which) {\r\n            case KEYS.ESC:\r\n                this.search.blur();\r\n                break;\r\n            case KEYS.ENTER:\r\n                var h = this.highlighted;\r\n                if (h) {\r\n                    h.click();\r\n                }\r\n                break;\r\n            case KEYS.UP:\r\n                this.highlightPrevious();\r\n                break;\r\n            case KEYS.DOWN:\r\n                this.highlightNext();\r\n                break;\r\n        }\r\n    };\r\n    SearchBox.prototype.select = function (item) {\r\n        this.search.value = ''; // reset\r\n        this.search.blur();\r\n        this.fire(SearchBox.EVENT_SELECT, item);\r\n    };\r\n    SearchBox.prototype.focus = function () {\r\n        this.body.style.width = this.search.offsetWidth + \"px\";\r\n        this.highlighted = this.body.firstElementChild || null;\r\n        this.node.classList.add(cssClass('search-open'));\r\n    };\r\n    Object.defineProperty(SearchBox.prototype, \"highlighted\", {\r\n        get: function () {\r\n            return this.body.getElementsByClassName(cssClass('search-highlighted'))[0] || null;\r\n        },\r\n        set: function (value) {\r\n            var old = this.highlighted;\r\n            if (old === value) {\r\n                return;\r\n            }\r\n            if (old) {\r\n                old.classList.remove(cssClass('search-highlighted'));\r\n            }\r\n            if (value) {\r\n                value.classList.add(cssClass('search-highlighted'));\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SearchBox.prototype.highlightNext = function () {\r\n        var h = this.highlighted;\r\n        if (!h || h.classList.contains(cssClass('hidden'))) {\r\n            this.highlighted = this.body.querySelector(\".\" + cssClass('search-item') + \":not(.\" + cssClass('hidden') + \")\") || null;\r\n            return;\r\n        }\r\n        var items = Array.from(this.body.querySelectorAll(\".\" + cssClass('search-item') + \":not(.\" + cssClass('hidden') + \")\"));\r\n        var index = items.indexOf(h);\r\n        this.highlighted = items[index + 1] || null;\r\n    };\r\n    SearchBox.prototype.highlightPrevious = function () {\r\n        var h = this.highlighted;\r\n        var items = Array.from(this.body.querySelectorAll(\".\" + cssClass('search-item') + \":not(.\" + cssClass('hidden') + \")\"));\r\n        if (!h || h.classList.contains(cssClass('hidden'))) {\r\n            this.highlighted = items[items.length - 1] || null;\r\n            return;\r\n        }\r\n        var index = items.indexOf(h);\r\n        this.highlighted = items[index - 1] || null;\r\n    };\r\n    SearchBox.prototype.blur = function () {\r\n        this.search.value = '';\r\n        // clear filter\r\n        this.filterResults(this.body, '');\r\n        this.node.classList.remove(cssClass('search-open'));\r\n    };\r\n    SearchBox.prototype.filter = function () {\r\n        var empty = this.filterResults(this.body, this.search.value.toLowerCase());\r\n        this.body.classList.toggle(cssClass('search-empty'), empty);\r\n    };\r\n    SearchBox.prototype.filterResults = function (node, text) {\r\n        var _this = this;\r\n        if (text === '') {\r\n            // show all\r\n            Array.from(node.getElementsByClassName(cssClass('hidden'))).forEach(function (d) { return d.classList.remove(cssClass('hidden')); });\r\n            return false;\r\n        }\r\n        var children = Array.from(node.children);\r\n        children.forEach(function (d) {\r\n            var content = d.firstElementChild.innerHTML.toLowerCase();\r\n            var hidden = !content.includes(text);\r\n            if (d.classList.contains(cssClass('search-group'))) {\r\n                var ul = d.lastElementChild;\r\n                var allChildrenHidden = _this.filterResults(ul, text);\r\n                hidden = hidden && allChildrenHidden;\r\n            }\r\n            d.classList.toggle(cssClass('hidden'), hidden);\r\n        });\r\n        return children.every(function (d) { return d.classList.contains(cssClass('hidden')); });\r\n    };\r\n    SearchBox.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([SearchBox.EVENT_SELECT]);\r\n    };\r\n    SearchBox.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    SearchBox.EVENT_SELECT = 'select';\r\n    return SearchBox;\r\n}(AEventDispatcher));\r\nexport default SearchBox;\r\n//# sourceMappingURL=SearchBox.js.map","import * as tslib_1 from \"tslib\";\r\nimport ADialog from './ADialog';\r\nimport { cssClass } from '../../styles';\r\n/** @internal */\r\nvar RenameRankingDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(RenameRankingDialog, _super);\r\n    function RenameRankingDialog(ranking, dialog) {\r\n        var _this = _super.call(this, dialog, {\r\n            livePreview: 'rename'\r\n        }) || this;\r\n        _this.ranking = ranking;\r\n        _this.before = ranking.getLabel();\r\n        return _this;\r\n    }\r\n    RenameRankingDialog.prototype.build = function (node) {\r\n        node.classList.add(cssClass('dialog-rename'));\r\n        node.insertAdjacentHTML('beforeend', \"\\n      <input type=\\\"text\\\" value=\\\"\" + this.ranking.getLabel() + \"\\\" required autofocus placeholder=\\\"name\\\">\");\r\n    };\r\n    RenameRankingDialog.prototype.reset = function () {\r\n        this.findInput('input[type=\"text\"]').value = this.before;\r\n    };\r\n    RenameRankingDialog.prototype.cancel = function () {\r\n        this.ranking.setLabel(this.before);\r\n    };\r\n    RenameRankingDialog.prototype.submit = function () {\r\n        var newValue = this.findInput('input[type=\"text\"]').value;\r\n        this.ranking.setLabel(newValue);\r\n        return true;\r\n    };\r\n    return RenameRankingDialog;\r\n}(ADialog));\r\nexport default RenameRankingDialog;\r\n//# sourceMappingURL=RenameRankingDialog.js.map","import * as tslib_1 from \"tslib\";\r\nimport { dialogContext } from './ADialog';\r\nimport RenameRankingDialog from './RenameRankingDialog';\r\nimport { cssClass } from '../../styles';\r\nimport { actionCSSClass } from '../header';\r\nimport APopup from './APopup';\r\n/** @internal */\r\nvar MoreRankingOptionsDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(MoreRankingOptionsDialog, _super);\r\n    function MoreRankingOptionsDialog(ranking, dialog, ctx) {\r\n        var _this = _super.call(this, dialog, {\r\n            autoClose: true\r\n        }) || this;\r\n        _this.ranking = ranking;\r\n        _this.ctx = ctx;\r\n        return _this;\r\n    }\r\n    MoreRankingOptionsDialog.prototype.addIcon = function (node, title, onClick) {\r\n        node.insertAdjacentHTML('beforeend', \"<i title=\\\"\" + title + \"\\\" class=\\\"\" + actionCSSClass(title) + \"\\\"><span>\" + title + \"</span> </i>\");\r\n        var i = node.lastElementChild;\r\n        i.onclick = function (evt) {\r\n            evt.stopPropagation();\r\n            onClick(evt);\r\n        };\r\n    };\r\n    MoreRankingOptionsDialog.prototype.build = function (node) {\r\n        var _this = this;\r\n        node.classList.add(cssClass('more-options'));\r\n        this.addIcon(node, 'Rename', function (evt) {\r\n            evt.stopPropagation();\r\n            evt.preventDefault();\r\n            var dialog = new RenameRankingDialog(_this.ranking, dialogContext(_this.ctx, _this.level + 1, evt));\r\n            dialog.open();\r\n        });\r\n        this.addIcon(node, 'Remove', function (evt) {\r\n            evt.stopPropagation();\r\n            evt.preventDefault();\r\n            _this.destroy('confirm');\r\n            _this.ctx.provider.removeRanking(_this.ranking);\r\n        });\r\n    };\r\n    return MoreRankingOptionsDialog;\r\n}(APopup));\r\nexport default MoreRankingOptionsDialog;\r\n//# sourceMappingURL=MoreRankingOptionsDialog.js.map","import * as tslib_1 from \"tslib\";\r\nimport ADialog from './ADialog';\r\n/** @internal */\r\nvar AddonDialog = /** @class */ (function (_super) {\r\n    tslib_1.__extends(AddonDialog, _super);\r\n    function AddonDialog(column, addons, dialog, ctx, onClick) {\r\n        var _this = _super.call(this, dialog) || this;\r\n        _this.column = column;\r\n        _this.addons = addons;\r\n        _this.ctx = ctx;\r\n        _this.onClick = onClick;\r\n        _this.handlers = [];\r\n        return _this;\r\n    }\r\n    AddonDialog.prototype.build = function (node) {\r\n        for (var _i = 0, _a = this.addons; _i < _a.length; _i++) {\r\n            var addon = _a[_i];\r\n            this.node.insertAdjacentHTML('beforeend', \"<strong>\" + addon.title + \"</strong>\");\r\n            this.handlers.push(addon.append(this.column, node, this.dialog, this.ctx));\r\n        }\r\n    };\r\n    AddonDialog.prototype.submit = function () {\r\n        for (var _i = 0, _a = this.handlers; _i < _a.length; _i++) {\r\n            var handler = _a[_i];\r\n            if (handler.submit() === false) {\r\n                return false;\r\n            }\r\n        }\r\n        if (this.onClick) {\r\n            this.onClick();\r\n        }\r\n        return true;\r\n    };\r\n    AddonDialog.prototype.cancel = function () {\r\n        for (var _i = 0, _a = this.handlers; _i < _a.length; _i++) {\r\n            var handler = _a[_i];\r\n            handler.cancel();\r\n        }\r\n    };\r\n    AddonDialog.prototype.reset = function () {\r\n        for (var _i = 0, _a = this.handlers; _i < _a.length; _i++) {\r\n            var handler = _a[_i];\r\n            handler.reset();\r\n        }\r\n    };\r\n    return AddonDialog;\r\n}(ADialog));\r\nexport default AddonDialog;\r\n//# sourceMappingURL=AddonDialog.js.map","import { clear } from '../../internal';\r\nimport { categoryOf, isSortingAscByDefault, isSupportType } from '../../model';\r\nimport { aria, cssClass } from '../../styles';\r\nimport AddonDialog from '../dialogs/AddonDialog';\r\nimport { actionCSSClass, updateHeader } from '../header';\r\nimport { getToolbarDialogAddons, isGroupAble, isGroupSortAble, isSortAble } from '../toolbar';\r\nimport SearchBox from './SearchBox';\r\nimport { dialogContext } from '../dialogs';\r\n/**\r\n * @internal\r\n */\r\nvar Hierarchy = /** @class */ (function () {\r\n    function Hierarchy(ctx, document) {\r\n        this.ctx = ctx;\r\n        this.node = document.createElement('aside');\r\n        this.node.classList.add(cssClass('hierarchy'), cssClass('feature-advanced'), cssClass('feature-ranking'));\r\n        this.node.innerHTML = \"\\n      <section class=\\\"\" + cssClass('group-hierarchy') + \"\\\">\\n      </section>\\n      <section class=\\\"\" + cssClass('sort-hierarchy') + \"\\\">\\n      </section>\\n      <section class=\\\"\" + cssClass('sort-groups-hierarchy') + \"\\\">\\n      </section>\\n    \";\r\n        var options = {\r\n            doc: document,\r\n            placeholder: 'Add Sort Criteria...',\r\n            formatItem: function (item, node) {\r\n                node.classList.add(cssClass('typed-icon'));\r\n                node.dataset.typeCat = categoryOf(item.col).name;\r\n                node.dataset.type = item.col.desc.type;\r\n                return item.text;\r\n            },\r\n        };\r\n        this.groupAdder = new SearchBox(Object.assign({}, options, {\r\n            placeholder: 'Add Grouping Criteria...'\r\n        }));\r\n        this.groupSortAdder = new SearchBox(Object.assign({}, options, {\r\n            placeholder: 'Add Grouping Sort Criteria...'\r\n        }));\r\n        this.sortAdder = new SearchBox(options);\r\n    }\r\n    Hierarchy.prototype.update = function (ranking) {\r\n        if (!ranking) {\r\n            this.node.style.display = 'none';\r\n            return;\r\n        }\r\n        this.node.style.display = null;\r\n        this.renderGroups(ranking, this.node.firstElementChild);\r\n        this.renderSorting(ranking, this.node.children[1]);\r\n        this.renderGroupSorting(ranking, this.node.lastElementChild);\r\n    };\r\n    Hierarchy.prototype.render = function (node, items, toColumn, extras, addonKey, onChange) {\r\n        var _this = this;\r\n        var cache = new Map(Array.from(node.children).map(function (d) { return [d.dataset.id, d]; }));\r\n        clear(node);\r\n        items.forEach(function (d) {\r\n            var col = toColumn(d);\r\n            var item = cache.get(col.id);\r\n            if (item) {\r\n                node.appendChild(item);\r\n                updateHeader(item, col, 0);\r\n                return;\r\n            }\r\n            var addons = getToolbarDialogAddons(col, addonKey, _this.ctx);\r\n            node.insertAdjacentHTML('beforeend', \"<div data-id=\\\"\" + col.id + \"\\\" class=\\\"\" + cssClass('toolbar') + \" \" + cssClass('hierarchy-entry') + \"\\\">\\n      <div class=\\\"\" + cssClass('label') + \" \" + cssClass('typed-icon') + \"\\\">\" + col.label + \"</div>\\n      \" + (addons.length > 0 ? \"<i title=\\\"Customize\\\" class=\\\"\" + actionCSSClass('customize') + \"\\\">\" + aria('Customize') + \"</i>\" : '') + \"\\n      <i title=\\\"Move Up\\\" class=\\\"\" + actionCSSClass('Move Up') + \"\\\">\" + aria('Move Up') + \"</i>\\n      <i title=\\\"Move Down\\\" class=\\\"\" + actionCSSClass('Move Down') + \"\\\">\" + aria('Move Down') + \"</i>\\n      <i title=\\\"Remove from hierarchy\\\" class=\\\"\" + actionCSSClass('Remove') + \"\\\">\" + aria('Remove from hierarchy') + \"</i>\\n      </div>\");\r\n            var last = node.lastElementChild;\r\n            function prevent(evt) {\r\n                evt.preventDefault();\r\n                evt.stopPropagation();\r\n            }\r\n            last.querySelector('i[title=\"Move Down\"]').onclick = function (evt) {\r\n                prevent(evt);\r\n                onChange(d, +1);\r\n            };\r\n            last.querySelector('i[title=\"Move Up\"]').onclick = function (evt) {\r\n                prevent(evt);\r\n                onChange(d, -1);\r\n            };\r\n            last.querySelector('i[title^=Remove]').onclick = function (evt) {\r\n                prevent(evt);\r\n                onChange(d, 0);\r\n            };\r\n            if (addons.length > 0) {\r\n                last.querySelector('i[title=Customize]').onclick = function (evt) {\r\n                    prevent(evt);\r\n                    _this.customize(col, addons, evt);\r\n                };\r\n            }\r\n            extras(d, last);\r\n            updateHeader(last, col, 0);\r\n        });\r\n    };\r\n    Hierarchy.prototype.renderGroups = function (ranking, node) {\r\n        var groups = ranking.getGroupCriteria();\r\n        if (groups.length === 0) {\r\n            clear(node);\r\n            return;\r\n        }\r\n        var click = function (col, delta) {\r\n            if (delta === 0) {\r\n                col.groupByMe();\r\n                return;\r\n            }\r\n            var current = col.isGroupedBy();\r\n            col.findMyRanker().groupBy(col, current + delta);\r\n        };\r\n        var addButton = function (_, last) {\r\n            last.insertAdjacentHTML('afterbegin', \"<i title=\\\"Group\\\" class=\\\"\" + actionCSSClass('group') + \"\\\" data-group=\\\"true\\\">\" + aria('Group') + \"</i>\");\r\n        };\r\n        this.render(node, groups, function (d) { return d; }, addButton, 'group', click);\r\n        this.addGroupAdder(ranking, groups, node);\r\n    };\r\n    Hierarchy.prototype.renderSorting = function (ranking, node) {\r\n        var sortCriterias = ranking.getSortCriteria();\r\n        if (sortCriterias.length === 0) {\r\n            clear(node);\r\n            return;\r\n        }\r\n        var click = function (_a, delta) {\r\n            var col = _a.col;\r\n            var current = col.isSortedByMe();\r\n            if (!isFinite(delta)) {\r\n                col.sortByMe(current.asc === 'desc', current.priority);\r\n                return;\r\n            }\r\n            if (delta === 0) {\r\n                col.sortByMe(current.asc === 'asc', -1);\r\n                return;\r\n            }\r\n            col.sortByMe(current.asc === 'asc', current.priority + delta);\r\n        };\r\n        var addButton = function (s, last) {\r\n            last.insertAdjacentHTML('afterbegin', \"\\n      <i title=\\\"Sort\\\" class=\\\"\" + actionCSSClass('sort') + \"\\\" data-sort=\\\"\" + (s.asc ? 'asc' : 'desc') + \"\\\">\" + aria('Toggle Sorting') + \"</i>\");\r\n            last.querySelector('i[title=Sort]').onclick = function (evt) {\r\n                evt.preventDefault();\r\n                evt.stopPropagation();\r\n                click(s, Infinity);\r\n            };\r\n        };\r\n        this.render(node, sortCriterias, function (d) { return d.col; }, addButton, 'sort', click);\r\n        this.addSortAdder(ranking, sortCriterias, node);\r\n    };\r\n    Hierarchy.prototype.renderGroupSorting = function (ranking, node) {\r\n        var sortCriterias = ranking.getGroupSortCriteria();\r\n        if (sortCriterias.length === 0) {\r\n            clear(node);\r\n            return;\r\n        }\r\n        var click = function (_a, delta) {\r\n            var col = _a.col;\r\n            var current = col.isGroupSortedByMe();\r\n            if (!isFinite(delta)) {\r\n                col.groupSortByMe(current.asc === 'desc', current.priority);\r\n                return;\r\n            }\r\n            if (delta === 0) {\r\n                col.groupSortByMe(current.asc === 'asc', -1);\r\n                return;\r\n            }\r\n            col.groupSortByMe(current.asc === 'asc', current.priority + delta);\r\n        };\r\n        var addButton = function (s, last) {\r\n            last.insertAdjacentHTML('afterbegin', \"\\n      <i title=\\\"Sort Group\\\" class=\\\"\" + actionCSSClass('sort-groups') + \"\\\" data-sort=\\\"\" + (s.asc ? 'asc' : 'desc') + \"\\\">\" + aria('Toggle Sorting') + \"</i>\");\r\n            last.querySelector('i[title=\"Sort Group\"]').onclick = function (evt) {\r\n                evt.preventDefault();\r\n                evt.stopPropagation();\r\n                click(s, Infinity);\r\n            };\r\n        };\r\n        this.render(node, sortCriterias, function (d) { return d.col; }, addButton, 'sortGroup', click);\r\n        this.addGroupSortAdder(ranking, sortCriterias, node);\r\n    };\r\n    Hierarchy.prototype.addAdder = function (adder, ranking, addonKey, current, node, check, onSelect) {\r\n        var _this = this;\r\n        var used = new Set(current);\r\n        adder.data = ranking.children.filter(function (col) { return !isSupportType(col) && !used.has(col) && check(col); }).map(function (col) { return ({ col: col, id: col.id, text: col.label }); });\r\n        adder.on(SearchBox.EVENT_SELECT, function (item) {\r\n            var addons = getToolbarDialogAddons(item.col, addonKey, _this.ctx);\r\n            if (addons.length > 0) {\r\n                _this.customize(item.col, addons, adder.node, function () { return onSelect(item.col); });\r\n            }\r\n            else {\r\n                onSelect(item.col);\r\n            }\r\n        });\r\n        if (adder.data.length <= 0) {\r\n            return;\r\n        }\r\n        var wrapper = node.ownerDocument.createElement('footer');\r\n        wrapper.appendChild(adder.node);\r\n        wrapper.classList.add(cssClass('hierarchy-adder'));\r\n        node.appendChild(wrapper);\r\n    };\r\n    Hierarchy.prototype.addSortAdder = function (ranking, sortCriterias, node) {\r\n        var _this = this;\r\n        this.addAdder(this.sortAdder, ranking, 'sort', sortCriterias.map(function (d) { return d.col; }), node, function (d) { return isSortAble(d, _this.ctx); }, function (col) {\r\n            ranking.sortBy(col, isSortingAscByDefault(col), sortCriterias.length);\r\n        });\r\n    };\r\n    Hierarchy.prototype.addGroupAdder = function (ranking, groups, node) {\r\n        var _this = this;\r\n        this.addAdder(this.groupAdder, ranking, 'group', groups, node, function (d) { return isGroupAble(d, _this.ctx); }, function (col) {\r\n            ranking.groupBy(col, groups.length);\r\n        });\r\n    };\r\n    Hierarchy.prototype.addGroupSortAdder = function (ranking, sortCriterias, node) {\r\n        var _this = this;\r\n        this.addAdder(this.groupSortAdder, ranking, 'sortGroup', sortCriterias.map(function (d) { return d.col; }), node, function (d) { return isGroupSortAble(d, _this.ctx); }, function (col) {\r\n            ranking.groupSortBy(col, isSortingAscByDefault(col), sortCriterias.length);\r\n        });\r\n    };\r\n    Hierarchy.prototype.customize = function (col, addons, attachment, onClick) {\r\n        var dialog = new AddonDialog(col, addons, dialogContext(this.ctx, 0, attachment), this.ctx, onClick);\r\n        dialog.open();\r\n    };\r\n    return Hierarchy;\r\n}());\r\nexport default Hierarchy;\r\n//# sourceMappingURL=Hierarchy.js.map","import { Column, isMapAbleColumn, NumberColumn } from '../../model';\r\nimport { cssClass, engineCssClass } from '../../styles';\r\nimport { createShortcutMenuItems, dragAbleColumn, updateHeader } from '../header';\r\nimport { suffix } from '../../internal';\r\n/** @internal */\r\nvar SidePanelEntryVis = /** @class */ (function () {\r\n    function SidePanelEntryVis(column, ctx, document) {\r\n        var _this = this;\r\n        this.column = column;\r\n        this.ctx = ctx;\r\n        this.summaryUpdater = null;\r\n        this.node = document.createElement('article');\r\n        this.node.classList.add(cssClass('side-panel-entry'));\r\n        this.node.dataset.colId = column.id;\r\n        this.node.dataset.type = column.desc.type;\r\n        this.summary = ctx.summaryRenderer(column, true);\r\n        this.column.on(suffix('.panel', NumberColumn.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_HEADER), function () {\r\n            _this.update();\r\n        });\r\n        this.column.on(suffix('.panel', Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_CACHES), function () {\r\n            _this.recreateSummary();\r\n        });\r\n        this.init();\r\n        this.update();\r\n    }\r\n    SidePanelEntryVis.prototype.init = function () {\r\n        this.node.innerHTML = \"\\n      <header class=\\\"\" + cssClass('side-panel-entry-header') + \"\\\">\\n        <div class=\\\"\" + cssClass('side-panel-labels') + \"\\\">\\n          <span class=\\\"\" + cssClass('label') + \" \" + cssClass('typed-icon') + \" \" + cssClass('side-panel-label') + \"\\\"></span>\\n          <span class=\\\"\" + cssClass('sublabel') + \" \" + cssClass('side-panel-sublabel') + \"\\\"></span>\\n        </div>\\n        <div class=\\\"\" + cssClass('toolbar') + \" \" + cssClass('side-panel-toolbar') + \"\\\"></div>\\n      </header>\";\r\n        createShortcutMenuItems(this.node.querySelector(\".\" + cssClass('toolbar')), 0, this.column, this.ctx, 'sidePanel', false);\r\n        dragAbleColumn(this.node.querySelector('header'), this.column, this.ctx);\r\n        this.appendSummary();\r\n    };\r\n    SidePanelEntryVis.prototype.update = function (ctx) {\r\n        if (ctx === void 0) { ctx = this.ctx; }\r\n        this.ctx = ctx;\r\n        updateHeader(this.node, this.column);\r\n        this.updateSummary();\r\n    };\r\n    SidePanelEntryVis.prototype.updateSummary = function () {\r\n        var summaryNode = this.node.querySelector(\".\" + cssClass('summary'));\r\n        if (this.summaryUpdater) {\r\n            this.summaryUpdater.abort();\r\n            summaryNode.classList.remove(engineCssClass('loading'));\r\n            this.summaryUpdater = null;\r\n        }\r\n        var r = this.summary.update(summaryNode);\r\n        if (!r) {\r\n            return;\r\n        }\r\n        this.summaryUpdater = r;\r\n        summaryNode.classList.add(engineCssClass('loading'));\r\n        r.then(function (a) {\r\n            if (typeof a === 'symbol') {\r\n                return;\r\n            }\r\n            summaryNode.classList.remove(engineCssClass('loading'));\r\n        });\r\n    };\r\n    SidePanelEntryVis.prototype.appendSummary = function () {\r\n        var summary = this.ctx.asElement(this.summary.template);\r\n        summary.classList.add(cssClass('summary'), cssClass('side-panel-summary'), cssClass('renderer'), cssClass(\"renderer-\" + this.column.getSummaryRenderer()));\r\n        summary.dataset.renderer = this.column.getSummaryRenderer();\r\n        summary.dataset.interactive = isMapAbleColumn(this.column).toString();\r\n        this.node.appendChild(summary);\r\n    };\r\n    SidePanelEntryVis.prototype.recreateSummary = function () {\r\n        // remove old summary\r\n        this.node.removeChild(this.node.querySelector(\".\" + cssClass('summary')));\r\n        this.summary = this.ctx.summaryRenderer(this.column, true);\r\n        this.appendSummary();\r\n        this.updateSummary();\r\n    };\r\n    SidePanelEntryVis.prototype.destroy = function () {\r\n        this.column.on(suffix('.panel', NumberColumn.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_CACHES), null);\r\n        this.node.remove();\r\n    };\r\n    return SidePanelEntryVis;\r\n}());\r\nexport default SidePanelEntryVis;\r\n//# sourceMappingURL=SidePanelEntryVis.js.map","import { clear, suffix } from '../../internal';\r\nimport { Ranking, isSupportType } from '../../model';\r\nimport { aria, cssClass } from '../../styles';\r\nimport MoreRankingOptionsDialog from '../dialogs/MoreRankingOptionsDialog';\r\nimport { actionCSSClass } from '../header';\r\nimport { dialogContext } from '../dialogs';\r\nimport Hierarchy from './Hierarchy';\r\nimport SidePanelEntryVis from './SidePanelEntryVis';\r\n/** @internal */\r\nvar SidePanelRanking = /** @class */ (function () {\r\n    function SidePanelRanking(ranking, ctx, document, options) {\r\n        this.ranking = ranking;\r\n        this.ctx = ctx;\r\n        this.options = options;\r\n        this.entries = new Map();\r\n        this.node = document.createElement('section');\r\n        this.header = document.createElement('div');\r\n        this.dropdown = document.createElement('div');\r\n        this.node.classList.add(cssClass('side-panel-ranking'));\r\n        this.header.classList.add(cssClass('side-panel-ranking-header'), cssClass('side-panel-ranking-label'));\r\n        this.dropdown.classList.add(cssClass('side-panel-ranking-label'));\r\n        this.dropdown.innerHTML = this.header.innerHTML = \"<span>\" + ranking.getLabel() + \"</span><i class=\\\"\" + actionCSSClass('more') + \"\\\" title=\\\"More &hellip;\\\">\" + aria('More &hellip;') + \"</i>\";\r\n        this.header.lastElementChild.onclick = this.dropdown.lastElementChild.onclick = function (evt) {\r\n            evt.stopPropagation();\r\n            evt.preventDefault();\r\n            var dialog = new MoreRankingOptionsDialog(ranking, dialogContext(ctx, 1, evt), ctx);\r\n            dialog.open();\r\n        };\r\n        this.hierarchy = this.options.hierarchy ? new Hierarchy(ctx, document) : null;\r\n        this.init();\r\n    }\r\n    SidePanelRanking.prototype.init = function () {\r\n        var _this = this;\r\n        this.node.innerHTML = \"<main class=\\\"\" + cssClass('side-panel-ranking-main') + \"\\\"></main>\";\r\n        if (this.hierarchy) {\r\n            this.node.insertBefore(this.hierarchy.node, this.node.firstChild);\r\n        }\r\n        if (this.hierarchy) {\r\n            this.ranking.on(suffix('.panel', Ranking.EVENT_GROUP_CRITERIA_CHANGED, Ranking.EVENT_SORT_CRITERIA_CHANGED, Ranking.EVENT_GROUP_SORT_CRITERIA_CHANGED), function () {\r\n                _this.updateHierarchy();\r\n            });\r\n        }\r\n        this.ranking.on(suffix('.panel', Ranking.EVENT_ADD_COLUMN, Ranking.EVENT_REMOVE_COLUMN, Ranking.EVENT_MOVE_COLUMN), function () {\r\n            _this.updateList();\r\n            _this.updateHierarchy();\r\n        });\r\n        this.ranking.on(suffix('.panel', Ranking.EVENT_LABEL_CHANGED), function () {\r\n            _this.dropdown.firstElementChild.textContent = _this.header.firstElementChild.textContent = _this.ranking.getLabel();\r\n        });\r\n    };\r\n    Object.defineProperty(SidePanelRanking.prototype, \"active\", {\r\n        get: function () {\r\n            return this.node.classList.contains(cssClass('active'));\r\n        },\r\n        set: function (value) {\r\n            this.node.classList.toggle(cssClass('active'), value);\r\n            this.header.classList.toggle(cssClass('active'), value);\r\n            this.dropdown.classList.toggle(cssClass('active'), value);\r\n            if (value) {\r\n                return;\r\n            }\r\n            this.updateList();\r\n            this.updateHierarchy();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SidePanelRanking.prototype.update = function (ctx) {\r\n        this.ctx = ctx;\r\n        this.updateList();\r\n        this.updateHierarchy();\r\n    };\r\n    SidePanelRanking.prototype.updateHierarchy = function () {\r\n        if (!this.hierarchy || !this.active) {\r\n            return;\r\n        }\r\n        this.hierarchy.update(this.ranking);\r\n    };\r\n    SidePanelRanking.prototype.updateList = function () {\r\n        var _this = this;\r\n        if (!this.active) {\r\n            return;\r\n        }\r\n        var node = this.node.querySelector('main');\r\n        var columns = this.ranking.flatColumns.filter(function (d) { return !isSupportType(d); });\r\n        if (columns.length === 0) {\r\n            clear(node);\r\n            this.entries.forEach(function (d) { return d.destroy(); });\r\n            this.entries.clear();\r\n            return;\r\n        }\r\n        clear(node);\r\n        var copy = new Map(this.entries);\r\n        this.entries.clear();\r\n        columns.forEach(function (col) {\r\n            var existing = copy.get(col.id);\r\n            if (existing) {\r\n                existing.update(_this.ctx);\r\n                node.appendChild(existing.node);\r\n                _this.entries.set(col.id, existing);\r\n                copy.delete(col.id);\r\n                return;\r\n            }\r\n            var entry = new SidePanelEntryVis(col, _this.ctx, node.ownerDocument);\r\n            node.appendChild(entry.node);\r\n            _this.entries.set(col.id, entry);\r\n        });\r\n        copy.forEach(function (d) { return d.destroy(); });\r\n    };\r\n    SidePanelRanking.prototype.destroy = function () {\r\n        this.header.remove();\r\n        this.node.remove();\r\n        this.ranking.on(suffix('.panel', Ranking.EVENT_GROUP_CRITERIA_CHANGED, Ranking.EVENT_SORT_CRITERIA_CHANGED, Ranking.EVENT_GROUP_SORT_CRITERIA_CHANGED, Ranking.EVENT_ADD_COLUMN, Ranking.EVENT_MOVE_COLUMN, Ranking.EVENT_REMOVE_COLUMN, Ranking.EVENT_LABEL_CHANGED), null);\r\n        this.entries.forEach(function (d) { return d.destroy(); });\r\n        this.entries.clear();\r\n    };\r\n    return SidePanelRanking;\r\n}());\r\nexport default SidePanelRanking;\r\n//# sourceMappingURL=SidePanelRanking.js.map","import { suffix } from '../../internal';\r\nimport { categoryOfDesc, createAggregateDesc, createGroupDesc, createImpositionDesc, createNestedDesc, createRankDesc, createReduceDesc, createScriptDesc, createSelectionDesc, createStackDesc } from '../../model';\r\nimport { DataProvider } from '../../provider';\r\nimport { aria, cssClass } from '../../styles';\r\nimport ChooseRankingDialog from '../dialogs/ChooseRankingDialog';\r\nimport { dialogContext } from '../dialogs';\r\nimport SearchBox from './SearchBox';\r\nimport SidePanelRanking from './SidePanelRanking';\r\nimport { format } from 'd3-format';\r\nfunction isWrapper(item) {\r\n    return item.desc != null;\r\n}\r\nvar SidePanel = /** @class */ (function () {\r\n    function SidePanel(ctx, document, options) {\r\n        if (options === void 0) { options = {}; }\r\n        this.ctx = ctx;\r\n        this.options = {\r\n            additionalDescs: [\r\n                createStackDesc('Weighted Sum'),\r\n                createScriptDesc('Scripted Formula'),\r\n                createNestedDesc('Nested'),\r\n                createReduceDesc(),\r\n                createImpositionDesc(),\r\n                createRankDesc(),\r\n                createSelectionDesc(),\r\n                createGroupDesc(),\r\n                createAggregateDesc(),\r\n            ],\r\n            chooser: true,\r\n            hierarchy: true,\r\n            placeholder: 'Add Column...',\r\n            formatItem: function (item, node) {\r\n                var w = isWrapper(item) ? item : item.children[0];\r\n                node.dataset.typeCat = w.category.name;\r\n                node.classList.add(cssClass('typed-icon'));\r\n                if (isWrapper(item)) {\r\n                    node.dataset.type = w.desc.type;\r\n                }\r\n                if (node.parentElement) {\r\n                    node.parentElement.classList.add(cssClass('feature-model'));\r\n                    node.parentElement.classList.toggle(cssClass('feature-advanced'), w.category.featureLevel === 'advanced');\r\n                    node.parentElement.classList.toggle(cssClass('feature-basic'), w.category.featureLevel === 'basic');\r\n                }\r\n                return item.text;\r\n            },\r\n            collapseable: true\r\n        };\r\n        this.chooser = null;\r\n        this.descs = [];\r\n        this.rankings = [];\r\n        Object.assign(this.options, options);\r\n        this.node = document.createElement('aside');\r\n        this.node.classList.add(cssClass('side-panel'));\r\n        this.search = this.options.chooser ? new SearchBox(this.options) : null;\r\n        this.data = ctx.provider;\r\n        this.init();\r\n        this.update(ctx);\r\n    }\r\n    SidePanel.prototype.init = function () {\r\n        var _this = this;\r\n        this.node.innerHTML = \"\\n      <aside class=\\\"\" + cssClass('stats') + \"\\\"></aside>\\n      <header class=\\\"\" + cssClass('side-panel-rankings') + \"\\\">\\n        <i class=\\\"\" + cssClass('action') + \"\\\" title=\\\"Choose &hellip;\\\">\" + aria('Choose &hellip;') + \"</i>\\n      </header>\\n      <main class=\\\"\" + cssClass('side-panel-main') + \"\\\"></main>\\n    \";\r\n        {\r\n            var choose = this.node.querySelector('header > i');\r\n            choose.onclick = function (evt) {\r\n                evt.stopPropagation();\r\n                var dialog = new ChooseRankingDialog(_this.rankings.map(function (d) { return d.dropdown; }), dialogContext(_this.ctx, 1, evt));\r\n                dialog.open();\r\n            };\r\n        }\r\n        if (this.options.collapseable) {\r\n            this.node.insertAdjacentHTML('beforeend', \"<div class=\\\"\" + cssClass('collapser') + \"\\\" title=\\\"Collapse Panel\\\">\" + aria('Collapse Panel') + \"</div>\");\r\n            var last = this.node.lastElementChild;\r\n            last.onclick = function () { return _this.collapsed = !_this.collapsed; };\r\n            this.collapsed = this.options.collapseable === 'collapsed';\r\n        }\r\n        this.initChooser();\r\n        this.changeDataStorage(null, this.data);\r\n    };\r\n    SidePanel.prototype.initChooser = function () {\r\n        var _this = this;\r\n        if (!this.search) {\r\n            return;\r\n        }\r\n        this.chooser = this.node.ownerDocument.createElement('header');\r\n        this.chooser.appendChild(this.chooser.ownerDocument.createElement('form'));\r\n        this.chooser.classList.add(cssClass('side-panel-chooser'));\r\n        this.chooser.firstElementChild.appendChild(this.search.node);\r\n        this.search.on(SearchBox.EVENT_SELECT, function (panel) {\r\n            var col = _this.data.create(panel.desc);\r\n            if (!col) {\r\n                return;\r\n            }\r\n            var a = _this.active;\r\n            if (a) {\r\n                a.ranking.push(col);\r\n            }\r\n        });\r\n    };\r\n    Object.defineProperty(SidePanel.prototype, \"active\", {\r\n        get: function () {\r\n            return this.rankings.find(function (d) { return d.active; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SidePanel.prototype.changeDataStorage = function (old, data) {\r\n        var _a;\r\n        var _this = this;\r\n        if (old) {\r\n            old.on(suffix('.panel', DataProvider.EVENT_ADD_RANKING, DataProvider.EVENT_REMOVE_RANKING, DataProvider.EVENT_ADD_DESC, DataProvider.EVENT_CLEAR_DESC, DataProvider.EVENT_ORDER_CHANGED, DataProvider.EVENT_SELECTION_CHANGED), null);\r\n        }\r\n        this.data = data;\r\n        var wrapDesc = function (desc) { return ({\r\n            desc: desc,\r\n            category: categoryOfDesc(desc, data.columnTypes),\r\n            id: desc.type + \"@\" + desc.label,\r\n            text: desc.label\r\n        }); };\r\n        (_a = this.descs).splice.apply(_a, [0, this.descs.length].concat(data.getColumns().concat(this.options.additionalDescs).map(wrapDesc)));\r\n        data.on(DataProvider.EVENT_ADD_DESC + \".panel\", function (desc) {\r\n            _this.descs.push(wrapDesc(desc));\r\n            _this.updateChooser();\r\n        });\r\n        data.on(DataProvider.EVENT_CLEAR_DESC + \".panel\", function () {\r\n            _this.descs.splice(0, _this.descs.length);\r\n            _this.updateChooser();\r\n        });\r\n        data.on(suffix('.panel', DataProvider.EVENT_SELECTION_CHANGED, DataProvider.EVENT_ORDER_CHANGED), function () {\r\n            _this.updateStats();\r\n        });\r\n        data.on(suffix('.panel', DataProvider.EVENT_ADD_RANKING), function (ranking, index) {\r\n            _this.createEntry(ranking, index);\r\n            _this.makeActive(index);\r\n        });\r\n        data.on(suffix('.panel', DataProvider.EVENT_REMOVE_RANKING), function (_, index) {\r\n            if (index < 0) {\r\n                // remove all\r\n                _this.rankings.splice(0, _this.rankings.length).forEach(function (d) { return d.destroy(); });\r\n                _this.node.querySelector('header').dataset.count = '0';\r\n                _this.makeActive(-1);\r\n                return;\r\n            }\r\n            var r = _this.rankings.splice(index, 1)[0];\r\n            _this.node.querySelector('header').dataset.count = String(_this.rankings.length);\r\n            r.destroy();\r\n            if (r.active) {\r\n                _this.makeActive(_this.rankings.length === 0 ? -1 : Math.max(index - 1, 0));\r\n            }\r\n        });\r\n        this.rankings.splice(0, this.rankings.length).forEach(function (d) { return d.destroy(); });\r\n        data.getRankings().forEach(function (d, i) {\r\n            _this.createEntry(d, i);\r\n        });\r\n        if (this.rankings.length > 0) {\r\n            this.makeActive(0);\r\n        }\r\n        this.updateStats();\r\n    };\r\n    SidePanel.prototype.createEntry = function (ranking, index) {\r\n        var _this = this;\r\n        var entry = new SidePanelRanking(ranking, this.ctx, this.node.ownerDocument, this.options);\r\n        var header = this.node.querySelector('header');\r\n        var main = this.node.querySelector('main');\r\n        header.insertBefore(entry.header, header.children[index + 1]); // for the action\r\n        header.dataset.count = String(this.rankings.length + 1);\r\n        entry.header.onclick = function (evt) {\r\n            evt.preventDefault();\r\n            evt.stopPropagation();\r\n            _this.makeActive(_this.rankings.indexOf(entry));\r\n        };\r\n        entry.dropdown.onclick = entry.header.onclick = function (evt) {\r\n            evt.preventDefault();\r\n            evt.stopPropagation();\r\n            _this.ctx.dialogManager.removeAboveLevel(0);\r\n            _this.makeActive(_this.rankings.indexOf(entry));\r\n        };\r\n        main.insertBefore(entry.node, main.children[index]);\r\n        this.rankings.splice(index, 0, entry);\r\n    };\r\n    Object.defineProperty(SidePanel.prototype, \"collapsed\", {\r\n        get: function () {\r\n            return this.node.classList.contains(cssClass('collapsed'));\r\n        },\r\n        set: function (value) {\r\n            this.node.classList.toggle(cssClass('collapsed'), value);\r\n            if (value) {\r\n                return;\r\n            }\r\n            this.updateChooser();\r\n            this.updateStats();\r\n            this.updateRanking();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SidePanel.prototype.makeActive = function (index) {\r\n        this.rankings.forEach(function (d, i) { return d.active = index === i; });\r\n        var active = this.active;\r\n        if (active && this.chooser) {\r\n            active.node.insertAdjacentElement('afterbegin', this.chooser);\r\n            // scroll to body\r\n            var parent_1 = this.node.closest(\".\" + cssClass());\r\n            var body = parent_1 ? parent_1.querySelector(\"article[data-ranking=\\\"\" + active.ranking.id + \"\\\"]\") : null;\r\n            if (body) {\r\n                body.scrollIntoView();\r\n            }\r\n        }\r\n        this.updateRanking();\r\n    };\r\n    SidePanel.prototype.updateRanking = function () {\r\n        var active = this.active;\r\n        if (active && !this.collapsed) {\r\n            active.update(this.ctx);\r\n        }\r\n    };\r\n    SidePanel.prototype.update = function (ctx) {\r\n        var bak = this.data;\r\n        this.ctx = ctx;\r\n        if (ctx.provider !== bak) {\r\n            this.changeDataStorage(bak, ctx.provider);\r\n        }\r\n        this.updateChooser();\r\n        this.updateStats();\r\n        var active = this.active;\r\n        if (active) {\r\n            active.update(ctx);\r\n        }\r\n    };\r\n    SidePanel.prototype.updateStats = function () {\r\n        var _this = this;\r\n        if (this.collapsed) {\r\n            return;\r\n        }\r\n        var stats = this.node.querySelector(\".\" + cssClass('stats'));\r\n        var s = this.data.getSelection();\r\n        var r = this.data.getFirstRanking();\r\n        var f = format(',d');\r\n        var visible = r ? r.getGroups().reduce(function (a, b) { return a + b.order.length; }, 0) : 0;\r\n        var total = this.data.getTotalNumberOfRows();\r\n        stats.innerHTML = \"Showing <strong>\" + f(visible) + \"</strong> of \" + f(total) + \" items\" + (s.length > 0 ? \"; <span>\" + f(s.length) + \" selected</span>\" : '') + (visible < total ? \" <i class=\\\"\" + cssClass('action') + \" \" + cssClass('action-filter') + \" \" + cssClass('stats-reset') + \"\\\" title=\\\"Reset filters\\\"><span>Reset</span></i>\" : '');\r\n        var resetButton = stats.querySelector(\".\" + cssClass('stats-reset'));\r\n        if (!resetButton) {\r\n            return;\r\n        }\r\n        resetButton.onclick = function (evt) {\r\n            evt.preventDefault();\r\n            evt.stopPropagation();\r\n            _this.data.clearFilters();\r\n        };\r\n    };\r\n    SidePanel.prototype.destroy = function () {\r\n        this.node.remove();\r\n        if (!this.data) {\r\n            return;\r\n        }\r\n        this.rankings.forEach(function (d) { return d.destroy(); });\r\n        this.rankings.length = 0;\r\n        this.data.on(suffix('.panel', DataProvider.EVENT_ADD_RANKING, DataProvider.EVENT_REMOVE_RANKING, DataProvider.EVENT_ADD_DESC), null);\r\n    };\r\n    SidePanel.groupByType = function (entries) {\r\n        var map = new Map();\r\n        entries.forEach(function (entry) {\r\n            if (!map.has(entry.category)) {\r\n                map.set(entry.category, [entry]);\r\n            }\r\n            else {\r\n                map.get(entry.category).push(entry);\r\n            }\r\n        });\r\n        return Array.from(map).map(function (_a) {\r\n            var key = _a[0], value = _a[1];\r\n            return {\r\n                text: key.label,\r\n                order: key.order,\r\n                children: value.sort(function (a, b) { return a.text.localeCompare(b.text); })\r\n            };\r\n        }).sort(function (a, b) { return a.order - b.order; });\r\n    };\r\n    SidePanel.prototype.updateChooser = function () {\r\n        if (!this.search || this.collapsed) {\r\n            return;\r\n        }\r\n        this.search.data = SidePanel.groupByType(this.descs);\r\n    };\r\n    return SidePanel;\r\n}());\r\nexport default SidePanel;\r\n//# sourceMappingURL=SidePanel.js.map","import * as tslib_1 from \"tslib\";\r\nimport { defaultOptions } from '../config';\r\nimport { merge, suffix } from '../internal';\r\nimport { cssClass } from '../styles';\r\nimport { ALineUp } from './ALineUp';\r\nimport EngineRenderer from './EngineRenderer';\r\nimport SidePanel from './panel/SidePanel';\r\nvar LineUp = /** @class */ (function (_super) {\r\n    tslib_1.__extends(LineUp, _super);\r\n    function LineUp(node, data, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this, node, data, options && options.ignoreUnsupportedBrowser === true) || this;\r\n        _this.options = defaultOptions();\r\n        merge(_this.options, options);\r\n        if (!_this.isBrowserSupported) {\r\n            _this.renderer = null;\r\n            _this.panel = null;\r\n            return _this;\r\n        }\r\n        _this.node.classList.add(cssClass());\r\n        _this.renderer = new EngineRenderer(data, _this.node, _this.options);\r\n        if (_this.options.sidePanel) {\r\n            _this.panel = new SidePanel(_this.renderer.ctx, _this.node.ownerDocument, {\r\n                collapseable: _this.options.sidePanelCollapsed ? 'collapsed' : true,\r\n                hierarchy: _this.options.hierarchyIndicator && _this.options.flags.advancedRankingFeatures\r\n            });\r\n            _this.renderer.pushUpdateAble(function (ctx) { return _this.panel.update(ctx); });\r\n            _this.node.insertBefore(_this.panel.node, _this.node.firstChild);\r\n        }\r\n        else {\r\n            _this.panel = null;\r\n        }\r\n        _this.forward.apply(_this, [_this.renderer].concat(suffix('.main', EngineRenderer.EVENT_HIGHLIGHT_CHANGED, EngineRenderer.EVENT_DIALOG_OPENED, EngineRenderer.EVENT_DIALOG_CLOSED)));\r\n        return _this;\r\n    }\r\n    LineUp.prototype.destroy = function () {\r\n        this.node.classList.remove(cssClass());\r\n        if (this.renderer) {\r\n            this.renderer.destroy();\r\n        }\r\n        if (this.panel) {\r\n            this.panel.destroy();\r\n        }\r\n        _super.prototype.destroy.call(this);\r\n    };\r\n    LineUp.prototype.update = function () {\r\n        if (this.renderer) {\r\n            this.renderer.update();\r\n        }\r\n    };\r\n    LineUp.prototype.setDataProvider = function (data, dump) {\r\n        _super.prototype.setDataProvider.call(this, data, dump);\r\n        if (!this.renderer) {\r\n            return;\r\n        }\r\n        this.renderer.setDataProvider(data);\r\n        this.update();\r\n        if (this.panel) {\r\n            this.panel.update(this.renderer.ctx);\r\n        }\r\n    };\r\n    LineUp.prototype.setHighlight = function (dataIndex, scrollIntoView) {\r\n        if (scrollIntoView === void 0) { scrollIntoView = true; }\r\n        return this.renderer != null && this.renderer.setHighlight(dataIndex, scrollIntoView);\r\n    };\r\n    LineUp.prototype.getHighlight = function () {\r\n        return this.renderer ? this.renderer.getHighlight() : -1;\r\n    };\r\n    LineUp.prototype.enableHighlightListening = function (enable) {\r\n        if (this.renderer) {\r\n            this.renderer.enableHighlightListening(enable);\r\n        }\r\n    };\r\n    LineUp.EVENT_SELECTION_CHANGED = ALineUp.EVENT_SELECTION_CHANGED;\r\n    LineUp.EVENT_DIALOG_OPENED = ALineUp.EVENT_DIALOG_OPENED;\r\n    LineUp.EVENT_DIALOG_CLOSED = ALineUp.EVENT_DIALOG_CLOSED;\r\n    LineUp.EVENT_HIGHLIGHT_CHANGED = ALineUp.EVENT_HIGHLIGHT_CHANGED;\r\n    return LineUp;\r\n}(ALineUp));\r\nexport default LineUp;\r\n//# sourceMappingURL=LineUp.js.map","import { createAggregateDesc, createGroupDesc, createImpositionBoxPlotDesc, createImpositionDesc, createImpositionsDesc, createNestedDesc, createRankDesc, createReduceDesc, createScriptDesc, createSelectionDesc, createStackDesc } from '../model';\r\n/**\r\n * builder for a ranking\r\n */\r\nvar RankingBuilder = /** @class */ (function () {\r\n    function RankingBuilder() {\r\n        this.columns = [];\r\n        this.sort = [];\r\n        this.groupSort = [];\r\n        this.groups = [];\r\n    }\r\n    /**\r\n     * specify another sorting criteria\r\n     * @param {string} column the column name optionally with encoded sorting separated by colon, e.g. a:desc\r\n     * @param {boolean | \"asc\" | \"desc\"} asc ascending or descending order\r\n     */\r\n    RankingBuilder.prototype.sortBy = function (column, asc) {\r\n        if (asc === void 0) { asc = true; }\r\n        if (column.includes(':')) {\r\n            // encoded sorting order\r\n            var index = column.indexOf(':');\r\n            asc = column.slice(index + 1);\r\n            column = column.slice(0, index);\r\n        }\r\n        this.sort.push({ column: column, asc: asc === true || String(asc)[0] === 'a' });\r\n        return this;\r\n    };\r\n    /**\r\n     * specify grouping criteria\r\n     * @returns {this}\r\n     */\r\n    RankingBuilder.prototype.groupBy = function () {\r\n        var _a;\r\n        var columns = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            columns[_i] = arguments[_i];\r\n        }\r\n        for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {\r\n            var col = columns_1[_b];\r\n            if (Array.isArray(col)) {\r\n                (_a = this.groups).push.apply(_a, col);\r\n            }\r\n            else {\r\n                this.groups.push(col);\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n    /**\r\n     * specify another grouping sorting criteria\r\n     * @param {string} column the column name optionally with encoded sorting separated by colon, e.g. a:desc\r\n     * @param {boolean | \"asc\" | \"desc\"} asc ascending or descending order\r\n     */\r\n    RankingBuilder.prototype.groupSortBy = function (column, asc) {\r\n        if (asc === void 0) { asc = true; }\r\n        if (column.includes(':')) {\r\n            // encoded sorting order\r\n            var index = column.indexOf(':');\r\n            asc = column.slice(index + 1);\r\n            column = column.slice(0, index);\r\n        }\r\n        this.groupSort.push({ column: column, asc: asc === true || String(asc)[0] === 'a' });\r\n        return this;\r\n    };\r\n    /**\r\n     * add another column to this ranking, identified by column name or label. magic names are used for special columns:\r\n     * <ul>\r\n     *     <li>'*' = all columns</li>\r\n     *     <li>'_*' = all support columns</li>\r\n     *     <li>'_aggregate' = aggregate column</li>\r\n     *     <li>'_selection' = selection column</li>\r\n     *     <li>'_group' = group column</li>\r\n     *     <li>'_rank' = rank column</li>\r\n     * </ul>\r\n     * In addition build objects for combined columns are supported.\r\n     * @param {string | IImposeColumnBuilder | INestedBuilder | IWeightedSumBuilder | IReduceBuilder | IScriptedBuilder} column\r\n     */\r\n    RankingBuilder.prototype.column = function (column) {\r\n        if (typeof column === 'string') {\r\n            switch (column) {\r\n                case '_aggregate':\r\n                    return this.aggregate();\r\n                case '_selection':\r\n                    return this.selection();\r\n                case '_group':\r\n                    return this.group();\r\n                case '_rank':\r\n                    return this.rank();\r\n                case '_*':\r\n                    return this.supportTypes();\r\n                case '*':\r\n                    return this.allColumns();\r\n            }\r\n            this.columns.push(column);\r\n            return this;\r\n        }\r\n        var label = column.label || null;\r\n        // builder ish\r\n        switch (column.type) {\r\n            case 'impose':\r\n                return this.impose(label, column.column, column.colorColumn);\r\n            case 'min':\r\n            case 'max':\r\n            case 'median':\r\n            case 'mean':\r\n                console.assert(column.columns.length >= 2);\r\n                return this.reduce.apply(this, [label, column.type, column.columns[0], column.columns[1]].concat(column.columns.slice(2)));\r\n            case 'nested':\r\n                console.assert(column.columns.length >= 1);\r\n                return this.nested.apply(this, [label, column.columns[0]].concat(column.columns.slice(1)));\r\n            case 'script':\r\n                return this.scripted.apply(this, [label, column.code].concat(column.columns));\r\n            case 'weightedSum':\r\n                console.assert(column.columns.length >= 2);\r\n                console.assert(column.columns.length === column.weights.length);\r\n                var mixed_1 = [];\r\n                column.columns.slice(2).forEach(function (c, i) {\r\n                    mixed_1.push(c);\r\n                    mixed_1.push(column.weights[i + 2]);\r\n                });\r\n                return this.weightedSum.apply(this, [label, column.columns[0], column.weights[0], column.columns[1], column.weights[1]].concat(mixed_1));\r\n        }\r\n        console.error('invalid column type: ', column);\r\n        return this;\r\n    };\r\n    /**\r\n     * add an imposed column (numerical column colored by categorical column) to this ranking\r\n     * @param {string | null} label optional label\r\n     * @param {string} numberColumn numerical column reference\r\n     * @param {string} colorColumn categorical column reference\r\n     */\r\n    RankingBuilder.prototype.impose = function (label, numberColumn, colorColumn) {\r\n        this.columns.push({\r\n            desc: function (data) {\r\n                var base = data.getColumns().find(function (d) { return d.label === numberColumn || d.column === numberColumn; });\r\n                switch (base ? base.type : '') {\r\n                    case 'boxplot':\r\n                        return createImpositionBoxPlotDesc(label ? label : undefined);\r\n                    case 'numbers':\r\n                        return createImpositionsDesc(label ? label : undefined);\r\n                    default:\r\n                        return createImpositionDesc(label ? label : undefined);\r\n                }\r\n            },\r\n            columns: [numberColumn, colorColumn]\r\n        });\r\n        return this;\r\n    };\r\n    /**\r\n     * add a nested / group composite column\r\n     * @param {string | null} label optional label\r\n     * @param {string} column first element of the group enforcing not empty ones\r\n     * @param {string} columns additional columns\r\n     */\r\n    RankingBuilder.prototype.nested = function (label, column) {\r\n        var columns = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            columns[_i - 2] = arguments[_i];\r\n        }\r\n        this.columns.push({\r\n            desc: createNestedDesc(label ? label : undefined),\r\n            columns: [column].concat(columns)\r\n        });\r\n        return this;\r\n    };\r\n    /**\r\n     * @param {IColumnDesc} desc the composite column description\r\n     * @param {string} columns additional columns to add as children\r\n     */\r\n    RankingBuilder.prototype.composite = function (desc) {\r\n        var columns = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            columns[_i - 1] = arguments[_i];\r\n        }\r\n        this.columns.push({\r\n            desc: desc,\r\n            columns: columns\r\n        });\r\n        return this;\r\n    };\r\n    /**\r\n     * add a weighted sum / stack column\r\n     * @param {string | null} label optional label\r\n     * @param {string} numberColumn1 the first numerical column\r\n     * @param {number} weight1 its weight (0..1)\r\n     * @param {string} numberColumn2 the second numerical column\r\n     * @param {number} weight2 its weight (0..1)\r\n     * @param {string | number} numberColumnAndWeights alternating column weight references\r\n     */\r\n    RankingBuilder.prototype.weightedSum = function (label, numberColumn1, weight1, numberColumn2, weight2) {\r\n        var numberColumnAndWeights = [];\r\n        for (var _i = 5; _i < arguments.length; _i++) {\r\n            numberColumnAndWeights[_i - 5] = arguments[_i];\r\n        }\r\n        var weights = [weight1, weight2].concat(numberColumnAndWeights.filter(function (_, i) { return i % 2 === 1; }));\r\n        this.columns.push({\r\n            desc: createStackDesc(label ? label : undefined),\r\n            columns: [numberColumn1, numberColumn2].concat(numberColumnAndWeights.filter(function (_, i) { return i % 2 === 0; })),\r\n            post: function (col) {\r\n                col.setWeights(weights);\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    /**\r\n     * add reducing column (min, max, median, mean, ...)\r\n     * @param {string | null} label optional label\r\n     * @param {EAdvancedSortMethod} operation operation to apply (min, max, median, mean, ...)\r\n     * @param {string} numberColumn1 first numerical column\r\n     * @param {string} numberColumn2 second numerical column\r\n     * @param {string} numberColumns additional numerical columns\r\n     */\r\n    RankingBuilder.prototype.reduce = function (label, operation, numberColumn1, numberColumn2) {\r\n        var numberColumns = [];\r\n        for (var _i = 4; _i < arguments.length; _i++) {\r\n            numberColumns[_i - 4] = arguments[_i];\r\n        }\r\n        this.columns.push({\r\n            desc: createReduceDesc(label ? label : undefined),\r\n            columns: [numberColumn1, numberColumn2].concat(numberColumns),\r\n            post: function (col) {\r\n                col.setReduce(operation);\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    /**\r\n     * add a scripted / formula column\r\n     * @param {string | null} label optional label\r\n     * @param {string} code the JS code see ScriptColumn for details\r\n     * @param {string} numberColumns additional script columns\r\n     */\r\n    RankingBuilder.prototype.scripted = function (label, code) {\r\n        var numberColumns = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            numberColumns[_i - 2] = arguments[_i];\r\n        }\r\n        this.columns.push({\r\n            desc: Object.assign(createScriptDesc(label ? label : undefined), { script: code }),\r\n            columns: numberColumns\r\n        });\r\n        return this;\r\n    };\r\n    /**\r\n     * add a selection column for easier multi selections\r\n     */\r\n    RankingBuilder.prototype.selection = function () {\r\n        this.columns.push({\r\n            desc: createSelectionDesc(),\r\n            columns: []\r\n        });\r\n        return this;\r\n    };\r\n    /**\r\n     * add a group column to show the current group name\r\n     */\r\n    RankingBuilder.prototype.group = function () {\r\n        this.columns.push({\r\n            desc: createGroupDesc(),\r\n            columns: []\r\n        });\r\n        return this;\r\n    };\r\n    /**\r\n     * add an aggregate column to this ranking to collapse/expand groups\r\n     */\r\n    RankingBuilder.prototype.aggregate = function () {\r\n        this.columns.push({\r\n            desc: createAggregateDesc(),\r\n            columns: []\r\n        });\r\n        return this;\r\n    };\r\n    /**\r\n     * add a ranking column\r\n     */\r\n    RankingBuilder.prototype.rank = function () {\r\n        this.columns.push({\r\n            desc: createRankDesc(),\r\n            columns: []\r\n        });\r\n        return this;\r\n    };\r\n    /**\r\n     * add suporttypes (aggregate, rank, selection) to the ranking\r\n     */\r\n    RankingBuilder.prototype.supportTypes = function () {\r\n        return this.aggregate().rank().selection();\r\n    };\r\n    /**\r\n     * add all columns to this ranking\r\n     */\r\n    RankingBuilder.prototype.allColumns = function () {\r\n        this.columns.push(RankingBuilder.ALL_MAGIC_FLAG);\r\n        return this;\r\n    };\r\n    RankingBuilder.prototype.build = function (data) {\r\n        var r = data.pushRanking();\r\n        var cols = data.getColumns();\r\n        var findDesc = function (c) { return cols.find(function (d) { return d.label === c || d.column === c; }); };\r\n        var addColumn = function (c) {\r\n            var desc = findDesc(c);\r\n            if (desc) {\r\n                return data.push(r, desc) != null;\r\n            }\r\n            console.warn('invalid column: ', c);\r\n            return false;\r\n        };\r\n        this.columns.forEach(function (c) {\r\n            if (c === RankingBuilder.ALL_MAGIC_FLAG) {\r\n                cols.forEach(function (col) { return data.push(r, col); });\r\n                return;\r\n            }\r\n            if (typeof c === 'string') {\r\n                addColumn(c);\r\n                return;\r\n            }\r\n            var col = data.create(typeof c.desc === 'function' ? c.desc(data) : c.desc);\r\n            r.push(col);\r\n            c.columns.forEach(function (ci) {\r\n                var d = findDesc(ci);\r\n                var child = d ? data.create(d) : null;\r\n                if (!child) {\r\n                    console.warn('invalid column: ', ci);\r\n                    return;\r\n                }\r\n                col.push(child);\r\n            });\r\n            if (c.post) {\r\n                c.post(col);\r\n            }\r\n        });\r\n        var children = r.children;\r\n        {\r\n            var groups_1 = [];\r\n            this.groups.forEach(function (column) {\r\n                var col = children.find(function (d) { return d.desc.label === column || d.desc.column === column; });\r\n                if (col) {\r\n                    groups_1.push(col);\r\n                    return;\r\n                }\r\n                var desc = findDesc(column);\r\n                if (!desc) {\r\n                    console.warn('invalid group criteria column: ', column);\r\n                    return;\r\n                }\r\n                var col2 = data.push(r, desc);\r\n                if (col2) {\r\n                    groups_1.push(col2);\r\n                    return;\r\n                }\r\n                console.warn('invalid group criteria column: ', column);\r\n            });\r\n            if (groups_1.length > 0) {\r\n                r.setGroupCriteria(groups_1);\r\n            }\r\n        }\r\n        {\r\n            var sorts_1 = [];\r\n            this.sort.forEach(function (_a) {\r\n                var column = _a.column, asc = _a.asc;\r\n                var col = children.find(function (d) { return d.desc.label === column || d.desc.column === column; });\r\n                if (col) {\r\n                    sorts_1.push({ col: col, asc: asc });\r\n                    return;\r\n                }\r\n                var desc = findDesc(column);\r\n                if (!desc) {\r\n                    console.warn('invalid sort criteria column: ', column);\r\n                    return;\r\n                }\r\n                var col2 = data.push(r, desc);\r\n                if (col2) {\r\n                    sorts_1.push({ col: col2, asc: asc });\r\n                    return;\r\n                }\r\n                console.warn('invalid sort criteria column: ', column);\r\n            });\r\n            if (sorts_1.length > 0) {\r\n                r.setSortCriteria(sorts_1);\r\n            }\r\n        }\r\n        {\r\n            var sorts_2 = [];\r\n            this.groupSort.forEach(function (_a) {\r\n                var column = _a.column, asc = _a.asc;\r\n                var col = children.find(function (d) { return d.desc.label === column || d.desc.column === column; });\r\n                if (col) {\r\n                    sorts_2.push({ col: col, asc: asc });\r\n                    return;\r\n                }\r\n                var desc = findDesc(column);\r\n                if (!desc) {\r\n                    console.warn('invalid group sort criteria column: ', column);\r\n                    return;\r\n                }\r\n                var col2 = data.push(r, desc);\r\n                if (col2) {\r\n                    sorts_2.push({ col: col2, asc: asc });\r\n                    return;\r\n                }\r\n                console.warn('invalid group sort criteria column: ', column);\r\n            });\r\n            if (sorts_2.length > 0) {\r\n                r.setGroupSortCriteria(sorts_2);\r\n            }\r\n        }\r\n        return r;\r\n    };\r\n    RankingBuilder.ALL_MAGIC_FLAG = '*';\r\n    return RankingBuilder;\r\n}());\r\nexport { RankingBuilder };\r\n/**\r\n * creates a new instance of a ranking builder\r\n * @returns {RankingBuilder}\r\n */\r\nexport function buildRanking() {\r\n    return new RankingBuilder();\r\n}\r\n//# sourceMappingURL=RankingBuilder.js.map","import { buildRanking as buildRankingImpl } from '..';\r\n/*\r\n * build the column description\r\n */\r\nexport function buildRanking(props, data) {\r\n    var r = buildRankingImpl();\r\n    if (props.sortBy) {\r\n        var s = Array.isArray(props.sortBy) ? props.sortBy : [props.sortBy];\r\n        s.forEach(function (si) {\r\n            if (typeof si === 'string') {\r\n                r.sortBy(si);\r\n            }\r\n            else {\r\n                r.sortBy(si.column, si.asc);\r\n            }\r\n        });\r\n    }\r\n    if (props.groupBy) {\r\n        var s = Array.isArray(props.groupBy) ? props.groupBy : [props.groupBy];\r\n        r.groupBy.apply(r, s);\r\n    }\r\n    if (props.columns) {\r\n        props.columns.forEach(function (c) { return r.column(c); });\r\n    }\r\n    return r.build(data);\r\n}\r\nexport function buildGeneric(props) {\r\n    return props.column;\r\n}\r\nexport function buildImposeRanking(props) {\r\n    return Object.assign({\r\n        type: 'impose'\r\n    }, props);\r\n}\r\nexport function buildNestedRanking(props, children) {\r\n    var r = {\r\n        type: 'nested',\r\n        columns: children\r\n    };\r\n    if (props.label) {\r\n        r.label = props.label;\r\n    }\r\n    return r;\r\n}\r\nexport function buildWeightedSumRanking(props, children) {\r\n    var r = {\r\n        type: 'weightedSum',\r\n        columns: children.map(function (d) { return d.column; }),\r\n        weights: children.map(function (d) { return d.weight; })\r\n    };\r\n    if (props.label) {\r\n        r.label = props.label;\r\n    }\r\n    return r;\r\n}\r\nexport function buildReduceRanking(props, children) {\r\n    var r = {\r\n        type: props.type,\r\n        columns: children\r\n    };\r\n    if (props.label) {\r\n        r.label = props.label;\r\n    }\r\n    return r;\r\n}\r\nexport function buildScriptRanking(props, children) {\r\n    var r = {\r\n        type: 'script',\r\n        code: props.code,\r\n        columns: children\r\n    };\r\n    if (props.label) {\r\n        r.label = props.label;\r\n    }\r\n    return r;\r\n}\r\nexport function buildSupportRanking(props) {\r\n    return \"_\" + props.type;\r\n}\r\nexport function buildAllColumnsRanking() {\r\n    return '*';\r\n}\r\n//# sourceMappingURL=ranking.js.map","export { equal } from '../../internal';\r\nexport function isTypeInstance(clazz, superClass) {\r\n    var c = clazz;\r\n    while (c && c !== superClass) {\r\n        c = c.__proto__;\r\n    }\r\n    return c === superClass;\r\n}\r\nexport function pick(obj, keys) {\r\n    var r = {};\r\n    keys.forEach(function (k) {\r\n        if (obj.hasOwnProperty(k)) {\r\n            r[k] = obj[k];\r\n        }\r\n    });\r\n    return r;\r\n}\r\nexport function isSame(current, changed, props) {\r\n    if (props.every(function (p) { return !changed(p); })) {\r\n        return null;\r\n    }\r\n    return pick(current, props);\r\n}\r\n//# sourceMappingURL=utils.js.map","import { deriveColors, deriveColumnDescriptions, LocalDataProvider } from '../../provider';\r\nimport { LineUp } from '../../ui';\r\nimport { buildRanking } from './ranking';\r\nimport { equal, isSame, pick } from './utils';\r\nvar providerOptions = ['singleSelection', 'filterGlobally', 'columnTypes', 'taskExecutor', 'jumpToSearchResult'];\r\nvar lineupOptions = ['animated', 'sidePanel', 'sidePanelCollapsed', 'hierarchyIndicator', 'defaultSlopeGraphMode', 'summaryHeader', 'expandLineOnHover', 'overviewMode', 'renderers', 'canRender', 'toolbarActions', 'toolbarDialogAddons', 'rowHeight', 'rowPadding', 'groupHeight', 'groupPadding', 'dynamicHeight', 'labelRotation', 'ignoreUnsupportedBrowser', 'livePreviews'];\r\nvar Adapter = /** @class */ (function () {\r\n    function Adapter(adapter) {\r\n        var _this = this;\r\n        this.adapter = adapter;\r\n        this.data = null;\r\n        this.instance = null;\r\n        this.prevRankings = null;\r\n        this.prevColumns = null;\r\n        this.prevHighlight = null;\r\n        this.onSelectionChanged = function (indices) {\r\n            if (_this.props.onSelectionChanged && !equal(_this.props.selection, indices)) {\r\n                _this.props.onSelectionChanged(indices);\r\n            }\r\n        };\r\n        this.onHighlightChanged = function (highlight) {\r\n            var prev = _this.prevHighlight != null ? _this.prevHighlight : -1;\r\n            if (prev === highlight) {\r\n                return;\r\n            }\r\n            _this.prevHighlight = highlight;\r\n            if (_this.props.onHighlightChanged) {\r\n                _this.props.onHighlightChanged(highlight);\r\n            }\r\n        };\r\n    }\r\n    Object.defineProperty(Adapter.prototype, \"props\", {\r\n        get: function () {\r\n            return this.adapter.props();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Adapter.prototype.componentDidMount = function () {\r\n        this.data = this.buildProvider();\r\n        this.instance = this.adapter.createInstance(this.data, pick(this.props, lineupOptions));\r\n        this.instance.on(LineUp.EVENT_HIGHLIGHT_CHANGED, this.onHighlightChanged);\r\n    };\r\n    Adapter.prototype.resolveColumnDescs = function (data) {\r\n        var columns = this.adapter.columnDescs(data);\r\n        var deriveColumns = columns.length === 0 || Boolean(this.props.deriveColumns);\r\n        var deriveColumnNames = Array.isArray(this.props.deriveColumns) ? this.props.deriveColumns : [];\r\n        var deriveColors = Boolean(this.props.deriveColors);\r\n        return {\r\n            columns: columns,\r\n            deriveColors: deriveColors,\r\n            deriveColumns: deriveColumns,\r\n            deriveColumnNames: deriveColumnNames\r\n        };\r\n    };\r\n    Adapter.prototype.resolveRankings = function () {\r\n        var builders = this.adapter.rankingBuilders();\r\n        return {\r\n            builders: builders,\r\n            restore: this.props.restore,\r\n            derive: (builders.length === 0 && !this.props.restore) || Boolean(this.props.defaultRanking),\r\n            supportTypes: this.props.defaultRanking !== 'noSupportTypes'\r\n        };\r\n    };\r\n    Adapter.prototype.buildColumns = function (data, ctx) {\r\n        this.prevColumns = ctx;\r\n        var columns = ctx.columns.map(function (d) { return Object.assign({}, d); }); // work on copy\r\n        if (ctx.deriveColumns) {\r\n            var labels = new Set(columns.map(function (d) { return d.type + \"@\" + d.label; }));\r\n            var derived = deriveColumnDescriptions(data, { columns: ctx.deriveColumnNames });\r\n            for (var _i = 0, derived_1 = derived; _i < derived_1.length; _i++) {\r\n                var derive = derived_1[_i];\r\n                if (labels.has(derive.type + \"@\" + derive.label)) { // skip same name\r\n                    continue;\r\n                }\r\n                columns.push(derive);\r\n            }\r\n        }\r\n        if (ctx.deriveColors) {\r\n            deriveColors(columns);\r\n        }\r\n        return columns;\r\n    };\r\n    Adapter.prototype.buildRankings = function (data, rankings) {\r\n        data.clearRankings();\r\n        this.prevRankings = rankings;\r\n        if (rankings.derive) {\r\n            data.deriveDefault(rankings.supportTypes);\r\n        }\r\n        if (rankings.restore) {\r\n            data.restore(rankings.restore);\r\n        }\r\n        rankings.builders.forEach(function (b) { return buildRanking(b, data); });\r\n    };\r\n    Adapter.prototype.buildProvider = function () {\r\n        var columns = this.buildColumns(this.props.data, this.resolveColumnDescs(this.props.data));\r\n        var data = new LocalDataProvider(this.props.data, columns, pick(this.props, providerOptions));\r\n        this.buildRankings(data, this.resolveRankings());\r\n        data.setSelection(this.props.selection || []);\r\n        data.on(LocalDataProvider.EVENT_SELECTION_CHANGED, this.onSelectionChanged);\r\n        return data;\r\n    };\r\n    Adapter.prototype.updateLineUp = function (changeDetector, providerChanged) {\r\n        // check lineup instance properties\r\n        var changedLineUpOptions = isSame(this.props, changeDetector, lineupOptions);\r\n        if (!changedLineUpOptions) {\r\n            if (providerChanged) {\r\n                this.instance.setDataProvider(this.data);\r\n            }\r\n            if (providerChanged || (this.props.highlight != null && this.prevHighlight !== this.props.highlight)) {\r\n                this.prevHighlight = this.props.highlight == null ? -1 : this.props.highlight;\r\n                this.instance.on(LineUp.EVENT_HIGHLIGHT_CHANGED, null);\r\n                this.instance.setHighlight(this.prevHighlight);\r\n                this.instance.on(LineUp.EVENT_HIGHLIGHT_CHANGED, this.onHighlightChanged);\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        // recreate lineup\r\n        if (this.instance) {\r\n            this.instance.destroy();\r\n        }\r\n        this.instance = this.adapter.createInstance(this.data, changedLineUpOptions);\r\n        this.prevHighlight = this.props.highlight == null ? -1 : this.props.highlight;\r\n        this.instance.setHighlight(this.prevHighlight);\r\n        this.instance.on(LineUp.EVENT_HIGHLIGHT_CHANGED, this.onHighlightChanged);\r\n        return true;\r\n    };\r\n    Adapter.prototype.updateProvider = function (changeDetector) {\r\n        var _this = this;\r\n        var changedProviderOptions = isSame(this.props, changeDetector, providerOptions);\r\n        if (changedProviderOptions || !this.data || changeDetector('data')) {\r\n            // big change start from scratch\r\n            this.data = this.buildProvider();\r\n            return true;\r\n        }\r\n        var rankings = this.resolveRankings();\r\n        var columns = this.resolveColumnDescs(this.props.data);\r\n        var columnsChanged = !equal(this.prevColumns, columns);\r\n        if (columnsChanged) {\r\n            var descs = this.buildColumns(this.props.data, columns);\r\n            this.data.clearColumns();\r\n            descs.forEach(function (d) { return _this.data.pushDesc(d); });\r\n        }\r\n        if (columnsChanged || !equal(rankings, this.prevRankings)) {\r\n            this.buildRankings(this.data, rankings);\r\n        }\r\n        this.data.on(LocalDataProvider.EVENT_SELECTION_CHANGED, null);\r\n        this.data.setSelection(this.props.selection || []);\r\n        this.data.on(LocalDataProvider.EVENT_SELECTION_CHANGED, this.onSelectionChanged);\r\n        return false;\r\n    };\r\n    Adapter.prototype.componentDidUpdate = function (changeDetector) {\r\n        var providerChanged = this.updateProvider(changeDetector);\r\n        this.updateLineUp(changeDetector, providerChanged);\r\n        // this.instance!.update();\r\n    };\r\n    Adapter.prototype.componentWillUnmount = function () {\r\n        if (this.instance) {\r\n            this.instance.destroy();\r\n            this.instance = null;\r\n        }\r\n        this.data = null;\r\n    };\r\n    return Adapter;\r\n}());\r\nexport { Adapter };\r\n//# sourceMappingURL=lineup.js.map","import { build, buildCategorical, buildDate, buildHierarchy, buildNumber, buildString, buildActions } from './column';\r\nimport { Adapter } from './lineup';\r\nimport { buildAllColumnsRanking, buildGeneric, buildImposeRanking, buildNestedRanking, buildRanking, buildReduceRanking, buildScriptRanking, buildSupportRanking, buildWeightedSumRanking } from './ranking';\r\nimport { equal, isSame, isTypeInstance } from './utils';\r\nexport var builderAdapter = {\r\n    buildString: buildString,\r\n    buildNumber: buildNumber,\r\n    buildHierarchy: buildHierarchy,\r\n    buildDate: buildDate,\r\n    buildCategorical: buildCategorical,\r\n    buildActions: buildActions,\r\n    build: build,\r\n    buildGeneric: buildGeneric,\r\n    buildWeightedSumRanking: buildWeightedSumRanking,\r\n    buildSupportRanking: buildSupportRanking,\r\n    buildScriptRanking: buildScriptRanking,\r\n    buildReduceRanking: buildReduceRanking,\r\n    buildRanking: buildRanking,\r\n    buildNestedRanking: buildNestedRanking,\r\n    buildImposeRanking: buildImposeRanking,\r\n    buildAllColumnsRanking: buildAllColumnsRanking,\r\n    equal: equal,\r\n    isSame: isSame,\r\n    isTypeInstance: isTypeInstance,\r\n    Adapter: Adapter\r\n};\r\n//# sourceMappingURL=builderAdapter.js.map","import {\n  builderAdapter,\n  IBuilderAdapterCategoricalColumnDescProps,\n  IBuilderAdapterColumnDescProps,\n  IBuilderAdapterDateColumnDescProps,\n  IBuilderAdapterHierarchyColumnDescProps,\n  IBuilderAdapterNumberColumnDescProps,\n  IBuilderAdapterStringColumnDescProps,\n  IBuilderAdapterActionsColumnDescProps,\n  ICategoricalColumnDesc,\n  IColumnDesc,\n  IDateColumnDesc,\n  IHierarchyColumnDesc,\n  INumberColumnDesc,\n  IActionColumnDesc,\n  ILinkColumnDesc\n} from 'lineupjs';\nimport * as React from 'react';\n\nexport declare type ILineUpColumnDescProps = IBuilderAdapterColumnDescProps;\nexport declare type ILineUpCategoricalColumnDescProps = IBuilderAdapterCategoricalColumnDescProps;\nexport declare type ILineUpDateColumnDescProps = IBuilderAdapterDateColumnDescProps;\nexport declare type ILineUpNumberColumnDescProps = IBuilderAdapterNumberColumnDescProps;\nexport declare type ILineUpHierarchyColumnDescProps = IBuilderAdapterHierarchyColumnDescProps;\nexport declare type ILineUpStringColumnDescProps = IBuilderAdapterStringColumnDescProps;\nexport declare type ILineUpActionsColumnDescProps = IBuilderAdapterActionsColumnDescProps;\n\nexport class LineUpColumnDesc<P extends ILineUpColumnDescProps = ILineUpColumnDescProps> extends React.PureComponent<Readonly<P>, {}> {\n  static build<P extends ILineUpColumnDescProps>(props: P, _data: any[]): IColumnDesc {\n    return builderAdapter.build(props);\n  }\n}\n\nexport class LineUpCategoricalColumnDesc extends LineUpColumnDesc<ILineUpCategoricalColumnDescProps> {\n  static build(props: ILineUpCategoricalColumnDescProps, data: any[]): ICategoricalColumnDesc {\n    return builderAdapter.buildCategorical(props, data);\n  }\n}\n\nexport class LineUpDateColumnDesc extends LineUpColumnDesc<ILineUpDateColumnDescProps> {\n  static build(props: ILineUpDateColumnDescProps): IDateColumnDesc {\n    return builderAdapter.buildDate(props);\n  }\n}\n\nexport class LineUpHierarchyColumnDesc extends LineUpColumnDesc<ILineUpHierarchyColumnDescProps> {\n  static build(props: any): IHierarchyColumnDesc {\n    return builderAdapter.buildHierarchy(props);\n  }\n}\n\nexport class LineUpNumberColumnDesc extends LineUpColumnDesc<ILineUpNumberColumnDescProps> {\n  static build(props: ILineUpNumberColumnDescProps, data: any[]): INumberColumnDesc {\n    return builderAdapter.buildNumber(props, data);\n  }\n}\n\nexport class LineUpStringColumnDesc extends LineUpColumnDesc<ILineUpStringColumnDescProps> {\n  static build(props: ILineUpStringColumnDescProps): ILinkColumnDesc {\n    return builderAdapter.buildString(props);\n  }\n}\n\nexport class LineUpActionsColumnDesc extends LineUpColumnDesc<ILineUpActionsColumnDescProps> {\n  static build(props: ILineUpActionsColumnDescProps): IActionColumnDesc {\n    return builderAdapter.buildActions(props);\n  }\n}\n","import {builderAdapter} from 'lineupjs';\nimport * as React from 'react';\n\nexport class ChildWrapper<T, P> {\n  constructor(public readonly props: P, public readonly type: any) {\n\n  }\n\n  create() {\n    return <T>(new this.type(this.props, null));\n  }\n}\n\nexport function filterChildrenProps<T, P = any>(children: React.ReactNode, clazz: any): ChildWrapper<T, P>[] {\n  return React.Children.toArray(children).filter((d: any) => React.isValidElement(d) && builderAdapter.isTypeInstance(d.type, clazz)).map((d: any) => {\n    return new ChildWrapper<T, P>(d.props, d.type);\n  });\n}\n","import {\n  builderAdapter,\n  IBuilderAdapterImposeColumnProps,\n  IBuilderAdapterNestedColumnProps,\n  IBuilderAdapterRankingProps,\n  IBuilderAdapterReduceColumnProps,\n  IBuilderAdapterScriptColumnProps,\n  IBuilderAdapterSupportColumnProps,\n  IBuilderAdapterWeightedSumColumnProps,\n  IImposeColumnBuilder,\n  INestedBuilder,\n  IReduceBuilder,\n  IScriptedBuilder,\n  IWeightedSumBuilder,\n  LocalDataProvider,\n  Ranking\n} from 'lineupjs';\nimport * as React from 'react';\nimport {filterChildrenProps} from './utils';\n\nexport declare type ILineUpRankingProps = IBuilderAdapterRankingProps;\n\nexport abstract class ALineUpColumnBuilder<T> extends React.PureComponent<Readonly<T>, {}> {\n\n}\n\nexport interface IReactChildren {\n  children: React.ReactNode;\n}\n\nexport default class LineUpRanking extends React.PureComponent<Readonly<ILineUpRankingProps>, {}> {\n  static merge(props: ILineUpRankingProps & IReactChildren): ILineUpRankingProps {\n    const inline: (string | IImposeColumnBuilder | INestedBuilder | IWeightedSumBuilder | IReduceBuilder | IScriptedBuilder)[] = filterChildrenProps<ALineUpColumnBuilder<any>>(props.children, ALineUpColumnBuilder).map((c) => c.type.build(c.props));\n\n    const columns = (props.columns || []).concat(inline);\n\n    const r = {...props, columns};\n    delete r.children;\n    return r;\n  }\n\n  /*\n   * build the column description\n   */\n  static build(props: ILineUpRankingProps, data: LocalDataProvider): Ranking {\n    return builderAdapter.buildRanking(props, data);\n  }\n}\n\nexport class LineUpColumn extends ALineUpColumnBuilder<{ column: '*' | string }> {\n  static readonly build = builderAdapter.buildGeneric;\n}\n\nexport declare type ILineUpImposeColumnProps = IBuilderAdapterImposeColumnProps;\n\nexport class LineUpImposeColumn extends ALineUpColumnBuilder<ILineUpImposeColumnProps> {\n  static readonly build = builderAdapter.buildImposeRanking;\n}\n\nexport declare type ILineUpNestedColumnProps = IBuilderAdapterNestedColumnProps;\n\nexport class LineUpNestedColumn extends ALineUpColumnBuilder<ILineUpNestedColumnProps> {\n  static build(props: ILineUpNestedColumnProps & IReactChildren): INestedBuilder {\n    return builderAdapter.buildNestedRanking(props, filterChildrenProps<LineUpColumn>(props.children, LineUpColumn).map((d) => d.type.build(d.props)));\n  }\n}\n\nexport class LineUpWeightedColumn extends ALineUpColumnBuilder<{ column: string, weight: number }> {\n  static build(props: { column: string }) {\n    return props.column;\n  }\n\n  get weight() {\n    return this.props.weight;\n  }\n}\n\nexport declare type ILineUpWeightedSumColumnProps = IBuilderAdapterWeightedSumColumnProps & IReactChildren;\n\nexport class LineUpWeightedSumColumn extends ALineUpColumnBuilder<ILineUpWeightedSumColumnProps> {\n  static build(props: ILineUpWeightedSumColumnProps & IReactChildren): IWeightedSumBuilder {\n    const children = filterChildrenProps(props.children, LineUpWeightedColumn);\n    return builderAdapter.buildWeightedSumRanking(props, children.map((d) => ({\n      weight: d.props.weight,\n      column: d.type.build(d.props)\n    })));\n  }\n}\n\nexport declare type ILineUpReduceColumnProps = IBuilderAdapterReduceColumnProps & { children: React.ReactNode };\n\nexport class LineUpReduceColumn extends ALineUpColumnBuilder<ILineUpReduceColumnProps> {\n  static build(props: ILineUpReduceColumnProps & IReactChildren): IReduceBuilder {\n    return builderAdapter.buildReduceRanking(props, filterChildrenProps<LineUpColumn>(props.children, LineUpColumn).map((d) => d.type.build(d.props)));\n  }\n}\n\nexport declare type ILineUpScriptColumnProps = IBuilderAdapterScriptColumnProps & { children: React.ReactNode };\n\nexport class LineUpScriptedColumn extends ALineUpColumnBuilder<ILineUpScriptColumnProps> {\n  static build(props: ILineUpScriptColumnProps): IScriptedBuilder {\n    return builderAdapter.buildScriptRanking(props, filterChildrenProps<LineUpColumn>(props.children, LineUpColumn).map((d) => d.type.build(d.props)));\n  }\n}\n\nexport declare type ILineUpSupportColumnProps = IBuilderAdapterSupportColumnProps;\n\nexport class LineUpSupportColumn extends ALineUpColumnBuilder<ILineUpSupportColumnProps> {\n  static readonly build = builderAdapter.buildSupportRanking;\n}\n\nexport class LineUpAllColumns extends ALineUpColumnBuilder<{}> {\n  static readonly build = builderAdapter.buildAllColumnsRanking;\n}\n","import {\n  builderAdapter,\n  IBuilderAdapterProps, ILineUpOptions,\n  ITaggleOptions,\n  LineUp as LineUpImpl,\n  LocalDataProvider,\n  Taggle\n} from 'lineupjs';\nimport * as React from 'react';\nimport {LineUpColumnDesc} from './column';\nimport LineUpRanking from './LineUpRanking';\nimport {filterChildrenProps} from './utils';\n\nexport declare type ILineUpProps = IBuilderAdapterProps & { style?: React.CSSProperties, className?: string };\n\nexport default class LineUp extends React.PureComponent<Readonly<ILineUpProps>, {}> {\n  private node: HTMLElement | null = null;\n\n  private readonly adapter = new builderAdapter.Adapter({\n    props: () => this.props,\n    createInstance: (data: LocalDataProvider, options: Partial<ILineUpOptions>) => this.createInstance(this.node!, data, options),\n    columnDescs: (data: any[]) => filterChildrenProps<LineUpColumnDesc, any>(this.props.children, LineUpColumnDesc).map((d) => d.type.build(d.props, data)),\n    rankingBuilders: () => filterChildrenProps<LineUpRanking>(this.props.children, LineUpRanking).map((d) => LineUpRanking.merge(d.props))\n  });\n\n  protected createInstance(node: HTMLElement, data: LocalDataProvider, options: Partial<ITaggleOptions>): LineUpImpl | Taggle {\n    return new LineUpImpl(node, data, options);\n  }\n\n  componentDidMount() {\n    this.adapter.componentDidMount();\n  }\n\n  componentDidUpdate(prevProps: Readonly<ILineUpProps>) {\n    const props = this.props;\n    this.adapter.componentDidUpdate((key: keyof ILineUpProps) => !builderAdapter.equal(props[key], prevProps[key]));\n  }\n\n  componentWillUnmount() {\n    this.adapter.componentWillUnmount();\n  }\n\n  render() {\n    const className = this.props.className ? `lu-wrapper ${this.props.className}` : 'lu-wrapper';\n    return <div className={className} style={this.props.style || {}}>\n      <div ref={(d) => this.node = d as HTMLElement} />\n    </div>;\n  }\n}\n","import { isGroup } from '../../model';\r\nimport { groupEndLevel } from '../../provider/internal';\r\nexport function spaceFillingRule(config) {\r\n    function levelOfDetail(item, height) {\r\n        var group = isGroup(item);\r\n        var maxHeight = group ? config.groupHeight : config.rowHeight;\r\n        if (height >= maxHeight * 0.9) {\r\n            return 'high';\r\n        }\r\n        return 'low';\r\n    }\r\n    function itemHeight(data, availableHeight, selection, topNGetter) {\r\n        var visibleHeight = availableHeight - config.rowHeight - 5; // some padding for hover\r\n        var items = data.filter(function (d) { return !isGroup(d); });\r\n        var groups = data.length - items.length;\r\n        var selected = items.reduce(function (a, d) { return a + (selection.has(d.dataIndex) ? 1 : 0); }, 0);\r\n        var unselected = items.length - selected;\r\n        var groupSeparators = items.reduce(function (a, d) { return a + groupEndLevel(d, topNGetter); }, 0);\r\n        if (unselected <= 0) {\r\n            // doesn't matter since all are selected anyhow\r\n            return { height: config.rowHeight, violation: '' };\r\n        }\r\n        var available = visibleHeight - groups * config.groupHeight - groupSeparators * config.groupPadding - selected * config.rowHeight;\r\n        var height = Math.floor(available / unselected); // round to avoid sub pixel issues\r\n        if (height < 1) {\r\n            return {\r\n                height: 1,\r\n                violation: \"Not possible to fit all rows on the screen. Set filters or aggregate groups to make it fit again.\"\r\n            };\r\n        }\r\n        // clamp to max height\r\n        if (height > config.rowHeight) {\r\n            return {\r\n                height: config.rowHeight,\r\n                violation: \"\"\r\n            };\r\n        }\r\n        return { height: height, violation: '' };\r\n    }\r\n    return {\r\n        apply: function (data, availableHeight, selection, topNGetter) {\r\n            var _a = itemHeight(data, availableHeight, selection, topNGetter), violation = _a.violation, height = _a.height;\r\n            var item = function (item) {\r\n                if (selection.has(item.dataIndex)) {\r\n                    return config.rowHeight;\r\n                }\r\n                return height;\r\n            };\r\n            return { item: item, group: config.groupHeight, violation: violation };\r\n        },\r\n        levelOfDetail: levelOfDetail\r\n    };\r\n}\r\n//# sourceMappingURL=rules.js.map","import * as tslib_1 from \"tslib\";\r\nimport { debounce, AEventDispatcher, suffix } from '../../internal';\r\nimport { isGroup } from '../../model';\r\nimport { DataProvider } from '../../provider';\r\nimport EngineRenderer from '../EngineRenderer';\r\nvar TaggleRenderer = /** @class */ (function (_super) {\r\n    tslib_1.__extends(TaggleRenderer, _super);\r\n    function TaggleRenderer(data, parent, options) {\r\n        var _this = _super.call(this) || this;\r\n        _this.data = data;\r\n        _this.isDynamicLeafHeight = false;\r\n        _this.rule = null;\r\n        _this.levelOfDetail = null;\r\n        _this.resizeListener = function () { return debounce(function () { return _this.update(); }, 100); };\r\n        _this.options = {\r\n            violationChanged: function () { return undefined; },\r\n            rowPadding: 2\r\n        };\r\n        Object.assign(_this.options, options);\r\n        _this.renderer = new EngineRenderer(data, parent, Object.assign({}, options, {\r\n            dynamicHeight: function (data, ranking) {\r\n                var r = _this.dynamicHeight(data, ranking);\r\n                if (r) {\r\n                    return r;\r\n                }\r\n                return options.dynamicHeight ? options.dynamicHeight(data, ranking) : null;\r\n            },\r\n            levelOfDetail: function (rowIndex) { return _this.levelOfDetail ? _this.levelOfDetail(rowIndex) : 'high'; }\r\n        }));\r\n        _this.data.on(DataProvider.EVENT_SELECTION_CHANGED + \".rule\", function () {\r\n            if (_this.isDynamicLeafHeight) {\r\n                _this.update();\r\n            }\r\n        });\r\n        _this.forward.apply(_this, [_this.renderer].concat(suffix('.main', EngineRenderer.EVENT_HIGHLIGHT_CHANGED, EngineRenderer.EVENT_DIALOG_OPENED, EngineRenderer.EVENT_DIALOG_CLOSED)));\r\n        window.addEventListener('resize', _this.resizeListener, {\r\n            passive: true\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(TaggleRenderer.prototype, \"style\", {\r\n        get: function () {\r\n            return this.renderer.style;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TaggleRenderer.prototype, \"ctx\", {\r\n        get: function () {\r\n            return this.renderer.ctx;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    TaggleRenderer.prototype.pushUpdateAble = function (updateAble) {\r\n        this.renderer.pushUpdateAble(updateAble);\r\n    };\r\n    TaggleRenderer.prototype.dynamicHeight = function (data, ranking) {\r\n        var _this = this;\r\n        if (!this.rule) {\r\n            this.levelOfDetail = null;\r\n            return null;\r\n        }\r\n        var availableHeight = this.renderer ? this.renderer.node.querySelector('main').clientHeight : 100;\r\n        var topNGetter = function (group) { return _this.data.getTopNAggregated(ranking, group); };\r\n        var instance = this.rule.apply(data, availableHeight, new Set(this.data.getSelection()), topNGetter);\r\n        this.isDynamicLeafHeight = typeof instance.item === 'function';\r\n        this.options.violationChanged(this.rule, instance.violation || '');\r\n        var height = function (item) {\r\n            if (isGroup(item)) {\r\n                return typeof instance.group === 'number' ? instance.group : instance.group(item);\r\n            }\r\n            return typeof instance.item === 'number' ? instance.item : instance.item(item);\r\n        };\r\n        this.levelOfDetail = function (rowIndex) {\r\n            var item = data[rowIndex];\r\n            return _this.rule ? _this.rule.levelOfDetail(item, height(item)) : 'high';\r\n        };\r\n        // padding is always 0 since included in height\r\n        // const padding = (item: IGroupData | IGroupItem | null) => {\r\n        //   if (!item) {\r\n        //     item = data[0];\r\n        //   }\r\n        //   const lod = this.rule ? this.rule.levelOfDetail(item, height(item)) : 'high';\r\n        //   return lod === 'high' ? 0 : 0; // always 0 since\r\n        // };\r\n        return {\r\n            defaultHeight: typeof instance.item === 'number' ? instance.item : NaN,\r\n            height: height,\r\n            padding: 0\r\n        };\r\n    };\r\n    TaggleRenderer.prototype.createEventList = function () {\r\n        return _super.prototype.createEventList.call(this).concat([TaggleRenderer.EVENT_HIGHLIGHT_CHANGED, TaggleRenderer.EVENT_DIALOG_OPENED, TaggleRenderer.EVENT_DIALOG_CLOSED]);\r\n    };\r\n    TaggleRenderer.prototype.on = function (type, listener) {\r\n        return _super.prototype.on.call(this, type, listener);\r\n    };\r\n    TaggleRenderer.prototype.zoomOut = function () {\r\n        this.renderer.zoomOut();\r\n    };\r\n    TaggleRenderer.prototype.zoomIn = function () {\r\n        this.renderer.zoomIn();\r\n    };\r\n    TaggleRenderer.prototype.switchRule = function (rule) {\r\n        if (this.rule === rule) {\r\n            return;\r\n        }\r\n        this.rule = rule;\r\n        this.update();\r\n    };\r\n    TaggleRenderer.prototype.destroy = function () {\r\n        this.renderer.destroy();\r\n        window.removeEventListener('resize', this.resizeListener);\r\n    };\r\n    TaggleRenderer.prototype.update = function () {\r\n        this.renderer.update();\r\n    };\r\n    TaggleRenderer.prototype.setDataProvider = function (data) {\r\n        var _this = this;\r\n        if (this.data) {\r\n            this.data.on(DataProvider.EVENT_SELECTION_CHANGED + \".rule\", null);\r\n        }\r\n        this.data = data;\r\n        this.data.on(DataProvider.EVENT_SELECTION_CHANGED + \".rule\", function () {\r\n            if (_this.isDynamicLeafHeight) {\r\n                _this.update();\r\n            }\r\n        });\r\n        this.renderer.setDataProvider(data);\r\n        this.update();\r\n    };\r\n    TaggleRenderer.prototype.setHighlight = function (dataIndex, scrollIntoView) {\r\n        return this.renderer.setHighlight(dataIndex, scrollIntoView);\r\n    };\r\n    TaggleRenderer.prototype.getHighlight = function () {\r\n        return this.renderer.getHighlight();\r\n    };\r\n    TaggleRenderer.prototype.enableHighlightListening = function (enable) {\r\n        this.renderer.enableHighlightListening(enable);\r\n    };\r\n    TaggleRenderer.EVENT_HIGHLIGHT_CHANGED = EngineRenderer.EVENT_HIGHLIGHT_CHANGED;\r\n    TaggleRenderer.EVENT_DIALOG_OPENED = EngineRenderer.EVENT_DIALOG_OPENED;\r\n    TaggleRenderer.EVENT_DIALOG_CLOSED = EngineRenderer.EVENT_DIALOG_CLOSED;\r\n    return TaggleRenderer;\r\n}(AEventDispatcher));\r\nexport default TaggleRenderer;\r\n//# sourceMappingURL=TaggleRenderer.js.map","import * as tslib_1 from \"tslib\";\r\nimport { defaultOptions } from '../../config';\r\nimport { merge, suffix } from '../../internal';\r\nimport { cssClass, engineCssClass } from '../../styles';\r\nimport { ALineUp } from '../ALineUp';\r\nimport SidePanel from '../panel/SidePanel';\r\nimport { spaceFillingRule } from './rules';\r\nimport TaggleRenderer from './TaggleRenderer';\r\nvar Taggle = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Taggle, _super);\r\n    function Taggle(node, data, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this, node, data, options && options.ignoreUnsupportedBrowser === true) || this;\r\n        _this.options = defaultOptions();\r\n        merge(_this.options, options);\r\n        merge(_this.options, {\r\n            violationChanged: function (_rule, violation) { return _this.setViolation(violation); }\r\n        });\r\n        if (!_this.isBrowserSupported) {\r\n            _this.spaceFilling = null;\r\n            _this.renderer = null;\r\n            _this.panel = null;\r\n            return _this;\r\n        }\r\n        _this.node.classList.add(cssClass(), cssClass('taggle'));\r\n        _this.renderer = new TaggleRenderer(data, _this.node, _this.options);\r\n        _this.panel = new SidePanel(_this.renderer.ctx, _this.node.ownerDocument, {\r\n            collapseable: _this.options.sidePanelCollapsed ? 'collapsed' : true,\r\n            hierarchy: _this.options.hierarchyIndicator && _this.options.flags.advancedRankingFeatures\r\n        });\r\n        _this.renderer.pushUpdateAble(function (ctx) { return _this.panel.update(ctx); });\r\n        _this.node.insertBefore(_this.panel.node, _this.node.firstChild);\r\n        {\r\n            _this.panel.node.insertAdjacentHTML('afterbegin', \"<div class=\\\"\" + cssClass('rule-button-chooser') + \" \" + cssClass('feature-advanced') + \" \" + cssClass('feature-ui') + \"\\\"><label>\\n            <input type=\\\"checkbox\\\">\\n            <span>Overview</span>\\n            <div class=\\\"\" + cssClass('rule-violation') + \"\\\"></div>\\n          </label></div>\");\r\n            var spaceFilling_1 = spaceFillingRule(_this.options);\r\n            _this.spaceFilling = _this.panel.node.querySelector(\".\" + cssClass('rule-button-chooser'));\r\n            var input = _this.spaceFilling.querySelector('input');\r\n            input.onchange = function () {\r\n                var selected = _this.spaceFilling.classList.toggle(cssClass('chosen'));\r\n                self.setTimeout(function () {\r\n                    _this.updateLodRules(selected);\r\n                    _this.renderer.switchRule(selected ? spaceFilling_1 : null);\r\n                });\r\n            };\r\n            if (_this.options.overviewMode) {\r\n                input.checked = true;\r\n                _this.spaceFilling.classList.toggle(cssClass('chosen'));\r\n                _this.updateLodRules(true);\r\n                _this.renderer.switchRule(spaceFilling_1);\r\n            }\r\n        }\r\n        _this.forward.apply(_this, [_this.renderer].concat(suffix('.main', TaggleRenderer.EVENT_HIGHLIGHT_CHANGED, TaggleRenderer.EVENT_DIALOG_OPENED, TaggleRenderer.EVENT_DIALOG_CLOSED)));\r\n        return _this;\r\n    }\r\n    Taggle.prototype.updateLodRules = function (overviewMode) {\r\n        if (!this.renderer) {\r\n            return;\r\n        }\r\n        updateLodRules(this.renderer.style, overviewMode, this.options);\r\n    };\r\n    Taggle.prototype.setViolation = function (violation) {\r\n        violation = violation || '';\r\n        if (this.spaceFilling) {\r\n            this.spaceFilling.classList.toggle(cssClass('violated'), Boolean(violation));\r\n            this.spaceFilling.querySelector(\".\" + cssClass('rule-violation')).innerHTML = violation.replace(/\\n/g, '<br>');\r\n        }\r\n    };\r\n    Taggle.prototype.destroy = function () {\r\n        this.node.classList.remove(cssClass(), cssClass('taggle'));\r\n        if (this.renderer) {\r\n            this.renderer.destroy();\r\n        }\r\n        if (this.panel) {\r\n            this.panel.destroy();\r\n        }\r\n        _super.prototype.destroy.call(this);\r\n    };\r\n    Taggle.prototype.update = function () {\r\n        if (this.renderer) {\r\n            this.renderer.update();\r\n        }\r\n    };\r\n    Taggle.prototype.setHighlight = function (dataIndex, scrollIntoView) {\r\n        if (scrollIntoView === void 0) { scrollIntoView = true; }\r\n        return this.renderer != null && this.renderer.setHighlight(dataIndex, scrollIntoView);\r\n    };\r\n    Taggle.prototype.getHighlight = function () {\r\n        return this.renderer ? this.renderer.getHighlight() : -1;\r\n    };\r\n    Taggle.prototype.enableHighlightListening = function (enable) {\r\n        if (this.renderer) {\r\n            this.renderer.enableHighlightListening(enable);\r\n        }\r\n    };\r\n    Taggle.prototype.setDataProvider = function (data, dump) {\r\n        _super.prototype.setDataProvider.call(this, data, dump);\r\n        if (!this.renderer) {\r\n            return;\r\n        }\r\n        this.renderer.setDataProvider(data);\r\n        this.update();\r\n        this.panel.update(this.renderer.ctx);\r\n    };\r\n    Taggle.EVENT_SELECTION_CHANGED = ALineUp.EVENT_SELECTION_CHANGED;\r\n    Taggle.EVENT_DIALOG_OPENED = ALineUp.EVENT_DIALOG_OPENED;\r\n    Taggle.EVENT_DIALOG_CLOSED = ALineUp.EVENT_DIALOG_CLOSED;\r\n    Taggle.EVENT_HIGHLIGHT_CHANGED = ALineUp.EVENT_HIGHLIGHT_CHANGED;\r\n    return Taggle;\r\n}(ALineUp));\r\nexport default Taggle;\r\nexport function updateLodRules(style, overviewMode, options) {\r\n    if (!overviewMode) {\r\n        style.deleteRule('taggle_lod_rule');\r\n        style.deleteRule('lineup_rowPadding1');\r\n        style.deleteRule('lineup_rowPadding2');\r\n        return;\r\n    }\r\n    style.updateRule('taggle_lod_rule', \"\\n  .\" + engineCssClass('tr') + \".\" + cssClass('low') + \"[data-agg=detail]:hover\", {\r\n        /* show regular height for hovered rows in low + medium LOD */\r\n        height: options.rowHeight + \"px !important\"\r\n    });\r\n    style.updateRule('lineup_rowPadding1', \"\\n  .\" + engineCssClass('tr') + \".\" + cssClass('low'), {\r\n        marginTop: '0'\r\n    });\r\n    // no margin for hovered low level row otherwise everything will be shifted down and the hover is gone again\r\n    // .${engineCssClass('tr')}.${cssClass('low')}:hover,\r\n    // padding in general and for hovered low detail rows + their afterwards\r\n    style.updateRule('lineup_rowPadding2', \"\\n  .\" + engineCssClass('tr') + \".\" + cssClass('low') + \".\" + engineCssClass('highlighted') + \",\\n  .\" + engineCssClass('tr') + \".\" + cssClass('selected') + \",\\n  .\" + engineCssClass('tr') + \".\" + cssClass('low') + \":hover + .\" + engineCssClass('tr') + \".\" + cssClass('low') + \",\\n  .\" + engineCssClass('tr') + \".\" + cssClass('low') + \".\" + engineCssClass('highlighted') + \" + .\" + engineCssClass('tr') + \".\" + cssClass('low') + \",\\n  .\" + engineCssClass('tr') + \".\" + cssClass('selected') + \" + .\" + engineCssClass('tr') + \".\" + cssClass('low'), {\r\n        marginTop: options.rowPadding + \"px !important\"\r\n    });\r\n}\r\n//# sourceMappingURL=Taggle.js.map","import LineUp from './LineUp';\nimport {LocalDataProvider, ITaggleOptions, Taggle as TaggleImpl} from 'lineupjs';\n\n\nexport default class Taggle extends LineUp {\n  protected createInstance(node: HTMLElement, data: LocalDataProvider, options: Partial<ITaggleOptions>) {\n    return new TaggleImpl(node, data, options);\n  }\n}\n","import 'lineupjs/build/LineUpJS.css';\nimport './style.scss';\n\nexport * from './';\nexport {default} from './';\n\ndeclare const __VERSION__: string;\ndeclare const __BUILD_ID__: string;\ndeclare const __LICENSE__: string;\n/**\n * LineUp version\n * @type {string}\n */\nexport const version = __VERSION__;\n/**\n * LineUp unique build id\n * @type {string}\n */\nexport const buildId = __BUILD_ID__;\n/**\n * LineUp license type\n * @type {string}\n */\nexport const license = __LICENSE__;\n"],"sourceRoot":""}